{"files":[{"patch":"@@ -87,1 +87,0 @@\n-\n@@ -89,0 +88,3 @@\n+        out.append(\"\\t\\t\\t\\t<td>\");\n+        out.append(arrayNode.getClassName());\n+        out.append(\"<\/td>\\n\");\n","filename":"jol-core\/src\/main\/java\/org\/openjdk\/jol\/ljv\/GraphvizVisualization.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -62,1 +62,3 @@\n-            ArrayNode arrayNode = new ArrayNode(obj, name, canTreatObjAsArrayOfPrimitives(obj), getArrayContent(obj));\n+            ArrayNode arrayNode = new ArrayNode(obj, name,\n+                    getObjClassName(obj, false),\n+                    canTreatObjAsArrayOfPrimitives(obj), getArrayContent(obj));\n@@ -123,2 +125,0 @@\n-\n-        Class<?> c = obj.getClass();\n@@ -127,0 +127,8 @@\n+        else {\n+            return getClassName(obj.getClass());\n+        }\n+    }\n+\n+    private String getClassName(Class<?> c) {\n+        if (c.isArray())\n+            return getClassName(c.getComponentType()) + \"[]\";\n","filename":"jol-core\/src\/main\/java\/org\/openjdk\/jol\/ljv\/IntrospectionWithReflectionAPI.java","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -37,1 +37,3 @@\n-    public ArrayNode(Object obj, String name, boolean valuesArePrimitive, List<Node> content) {\n+    private final String className;\n+\n+    public ArrayNode(Object obj, String name, String className, boolean valuesArePrimitive, List<Node> content) {\n@@ -39,0 +41,1 @@\n+        this.className = className;\n@@ -69,0 +72,4 @@\n+\n+    public String getClassName() {\n+        return className;\n+    }\n","filename":"jol-core\/src\/main\/java\/org\/openjdk\/jol\/ljv\/nodes\/ArrayNode.java","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -43,1 +43,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -50,1 +50,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -62,1 +62,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -71,1 +71,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -80,1 +80,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -89,1 +89,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -96,1 +96,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -103,1 +103,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -128,1 +128,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -146,1 +146,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -156,1 +156,0 @@\n-        assumeTrue(is11());\n@@ -161,0 +160,6 @@\n+    @Test\n+    public void testEmptyArray() {\n+        String dot = new LJV().drawGraph(new int[0][0]);\n+        Approvals.verify(dot);\n+    }\n+\n@@ -163,1 +168,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -170,1 +175,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -178,1 +183,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -227,1 +232,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -245,1 +250,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -262,1 +267,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -281,1 +286,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -288,1 +293,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -306,1 +311,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -322,1 +327,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -341,1 +346,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -350,1 +355,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n@@ -364,1 +369,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/LJVTest.java","additions":29,"deletions":24,"binary":false,"changes":53,"status":"modified"},{"patch":"@@ -30,2 +30,2 @@\n-    public boolean is11() {\n-        return VERSION == 11;\n+    public boolean is8() {\n+        return VERSION == 8;\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/VersionGuardedTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7,0 +7,1 @@\n+\t\t\t\t<td>ArrayItem[]<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.arrayItemLinksToArray.approved.txt","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n-\t\t\t\t<td rowspan='3'>String<\/td>\n+\t\t\t\t<td rowspan='2'>String<\/td>\n@@ -12,3 +12,0 @@\n-\t\t\t<tr>\n-\t\t\t\t<td>coder: 0<\/td>\n-\t\t\t<\/tr>\n@@ -20,5 +17,6 @@\n-\t\t\t\t<td>72<\/td>\n-\t\t\t\t<td>101<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>111<\/td>\n+\t\t\t\t<td>char[]<\/td>\n+\t\t\t\t<td>H<\/td>\n+\t\t\t\t<td>e<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>o<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.arrayWithFieldAttribute.approved.txt","additions":7,"deletions":9,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -7,0 +7,1 @@\n+\t\t\t\t<td>Object[]<\/td>\n@@ -15,1 +16,1 @@\n-\t\t\t\t<td rowspan='3'>String<\/td>\n+\t\t\t\t<td rowspan='2'>String<\/td>\n@@ -20,3 +21,0 @@\n-\t\t\t<tr>\n-\t\t\t\t<td>coder: 0<\/td>\n-\t\t\t<\/tr>\n@@ -28,5 +26,6 @@\n-\t\t\t\t<td>72<\/td>\n-\t\t\t\t<td>101<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>111<\/td>\n+\t\t\t\t<td>char[]<\/td>\n+\t\t\t\t<td>H<\/td>\n+\t\t\t\t<td>e<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>o<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.assignmentDoesNotCreateANewObject.approved.txt","additions":8,"deletions":9,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -7,0 +7,1 @@\n+\t\t\t\t<td>Object[]<\/td>\n@@ -15,1 +16,1 @@\n-\t\t\t\t<td rowspan='3'>String<\/td>\n+\t\t\t\t<td rowspan='2'>String<\/td>\n@@ -20,3 +21,0 @@\n-\t\t\t<tr>\n-\t\t\t\t<td>coder: 0<\/td>\n-\t\t\t<\/tr>\n@@ -28,5 +26,6 @@\n-\t\t\t\t<td>72<\/td>\n-\t\t\t\t<td>101<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>111<\/td>\n+\t\t\t\t<td>char[]<\/td>\n+\t\t\t\t<td>H<\/td>\n+\t\t\t\t<td>e<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>o<\/td>\n@@ -41,1 +40,1 @@\n-\t\t\t\t<td rowspan='3'>String<\/td>\n+\t\t\t\t<td rowspan='2'>String<\/td>\n@@ -46,3 +45,0 @@\n-\t\t\t<tr>\n-\t\t\t\t<td>coder: 0<\/td>\n-\t\t\t<\/tr>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.assignmentWithNewCreateANewObject.approved.txt","additions":9,"deletions":13,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+\t\t\t\t<td>Node[]<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.hashMap.approved.txt","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -35,0 +35,1 @@\n+\t\t\t\t<td>Node[]<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.hashMapCollision2.approved.txt","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+\t\t\t\t<td>Node[]<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.linkedHashMap.approved.txt","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -7,0 +7,1 @@\n+\t\t\t\t<td>int[][]<\/td>\n@@ -17,0 +18,1 @@\n+\t\t\t\t<td>int[]<\/td>\n@@ -29,0 +31,1 @@\n+\t\t\t\t<td>int[]<\/td>\n@@ -41,0 +44,1 @@\n+\t\t\t\t<td>int[]<\/td>\n@@ -53,0 +57,1 @@\n+\t\t\t\t<td>int[]<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.multiDimensionalArrays.approved.txt","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -17,1 +17,1 @@\n-\t\t\t\t<td rowspan='3'>String<\/td>\n+\t\t\t\t<td rowspan='2'>String<\/td>\n@@ -22,3 +22,0 @@\n-\t\t\t<tr>\n-\t\t\t\t<td>coder: 0<\/td>\n-\t\t\t<\/tr>\n@@ -30,6 +27,7 @@\n-\t\t\t\t<td>65<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>98<\/td>\n-\t\t\t\t<td>101<\/td>\n-\t\t\t\t<td>114<\/td>\n-\t\t\t\t<td>116<\/td>\n+\t\t\t\t<td>char[]<\/td>\n+\t\t\t\t<td>A<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>b<\/td>\n+\t\t\t\t<td>e<\/td>\n+\t\t\t\t<td>r<\/td>\n+\t\t\t\t<td>t<\/td>\n@@ -54,1 +52,1 @@\n-\t\t\t\t<td rowspan='3'>String<\/td>\n+\t\t\t\t<td rowspan='2'>String<\/td>\n@@ -59,3 +57,0 @@\n-\t\t\t<tr>\n-\t\t\t\t<td>coder: 0<\/td>\n-\t\t\t<\/tr>\n@@ -67,4 +62,5 @@\n-\t\t\t\t<td>77<\/td>\n-\t\t\t\t<td>65<\/td>\n-\t\t\t\t<td>76<\/td>\n-\t\t\t\t<td>69<\/td>\n+\t\t\t\t<td>char[]<\/td>\n+\t\t\t\t<td>M<\/td>\n+\t\t\t\t<td>A<\/td>\n+\t\t\t\t<td>L<\/td>\n+\t\t\t\t<td>E<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.multipleRoots.approved.txt","additions":14,"deletions":18,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -7,0 +7,1 @@\n+\t\t\t\t<td>Object[]<\/td>\n@@ -15,0 +16,1 @@\n+\t\t\t\t<td>String[]<\/td>\n@@ -25,0 +27,1 @@\n+\t\t\t\t<td>int[]<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.objectArraysHoldReferencesPrimitiveArraysHoldValues.approved.txt","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -20,0 +20,1 @@\n+\t\t\t\t<td>Object[]<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.paulsExample.approved.txt","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -7,0 +7,1 @@\n+\t\t\t\t<td>int[][]<\/td>\n@@ -17,0 +18,1 @@\n+\t\t\t\t<td>int[]<\/td>\n@@ -29,0 +31,1 @@\n+\t\t\t\t<td>int[]<\/td>\n@@ -41,0 +44,1 @@\n+\t\t\t\t<td>int[]<\/td>\n@@ -53,0 +57,1 @@\n+\t\t\t\t<td>int[]<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.reversedMultiDimensionalArrays.approved.txt","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -7,0 +7,1 @@\n+\t\t\t\t<td>Object[]<\/td>\n@@ -15,1 +16,1 @@\n-\t\t\t\t<td rowspan='3'>String<\/td>\n+\t\t\t\t<td rowspan='2'>String<\/td>\n@@ -20,3 +21,0 @@\n-\t\t\t<tr>\n-\t\t\t\t<td>coder: 0<\/td>\n-\t\t\t<\/tr>\n@@ -28,5 +26,6 @@\n-\t\t\t\t<td>72<\/td>\n-\t\t\t\t<td>101<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>111<\/td>\n+\t\t\t\t<td>char[]<\/td>\n+\t\t\t\t<td>H<\/td>\n+\t\t\t\t<td>e<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>o<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.stringIntern.approved.txt","additions":8,"deletions":9,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n-\t\t\t\t<td rowspan='3'>String<\/td>\n+\t\t\t\t<td rowspan='2'>String<\/td>\n@@ -12,3 +12,0 @@\n-\t\t\t<tr>\n-\t\t\t\t<td>coder: 0<\/td>\n-\t\t\t<\/tr>\n@@ -20,5 +17,6 @@\n-\t\t\t\t<td>72<\/td>\n-\t\t\t\t<td>101<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>111<\/td>\n+\t\t\t\t<td>char[]<\/td>\n+\t\t\t\t<td>H<\/td>\n+\t\t\t\t<td>e<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>o<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.stringIsNotAPrimitiveType.approved.txt","additions":7,"deletions":9,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -20,0 +20,1 @@\n+\t\t\t\t<td>Object[]<\/td>\n@@ -25,0 +26,3 @@\n+\t\t\t\t<td>null<\/td>\n+\t\t\t\t<td>null<\/td>\n+\t\t\t\t<td>null<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.testArrayWithHighlighting.approved.txt","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,11 @@\n+digraph Java {\r\n+\trankdir=\"TB\";\r\n+\tnode[shape=plaintext]\r\n+\tn1[label=<\r\n+\t\t<table border='0' cellborder='1' cellspacing='0'>\r\n+\t\t\t<tr>\r\n+\t\t\t\t<td>int[][]<\/td>\r\n+\t\t\t<\/tr>\r\n+\t\t<\/table>\r\n+\t>];\r\n+}\r\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.testEmptyArray.approved.txt","additions":11,"deletions":0,"binary":false,"changes":11,"status":"added"},{"patch":"@@ -14,0 +14,1 @@\n+\t\t\t\t<td>int[]<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.twoObjectsLinksToOneArray.approved.txt","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -48,1 +48,1 @@\n-\t\t\t\t<td rowspan='3'>String<\/td>\n+\t\t\t\t<td rowspan='2'>String<\/td>\n@@ -53,3 +53,0 @@\n-\t\t\t<tr>\n-\t\t\t\t<td>coder: 0<\/td>\n-\t\t\t<\/tr>\n@@ -61,10 +58,11 @@\n-\t\t\t\t<td>72<\/td>\n-\t\t\t\t<td>101<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>111<\/td>\n-\t\t\t\t<td>87<\/td>\n-\t\t\t\t<td>111<\/td>\n-\t\t\t\t<td>114<\/td>\n-\t\t\t\t<td>108<\/td>\n-\t\t\t\t<td>100<\/td>\n+\t\t\t\t<td>char[]<\/td>\n+\t\t\t\t<td>H<\/td>\n+\t\t\t\t<td>e<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>o<\/td>\n+\t\t\t\t<td>W<\/td>\n+\t\t\t\t<td>o<\/td>\n+\t\t\t\t<td>r<\/td>\n+\t\t\t\t<td>l<\/td>\n+\t\t\t\t<td>d<\/td>\n@@ -79,1 +77,1 @@\n-\t\t\t\t<td rowspan='3'>String<\/td>\n+\t\t\t\t<td rowspan='2'>String<\/td>\n@@ -84,3 +82,0 @@\n-\t\t\t<tr>\n-\t\t\t\t<td>coder: 0<\/td>\n-\t\t\t<\/tr>\n@@ -92,6 +87,7 @@\n-\t\t\t\t<td>72<\/td>\n-\t\t\t\t<td>69<\/td>\n-\t\t\t\t<td>76<\/td>\n-\t\t\t\t<td>76<\/td>\n-\t\t\t\t<td>32<\/td>\n-\t\t\t\t<td>79<\/td>\n+\t\t\t\t<td>char[]<\/td>\n+\t\t\t\t<td>H<\/td>\n+\t\t\t\t<td>E<\/td>\n+\t\t\t\t<td>L<\/td>\n+\t\t\t\t<td>L<\/td>\n+\t\t\t\t<td> <\/td>\n+\t\t\t\t<td>O<\/td>\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/approvals\/LJVTest.wrappedObjects.approved.txt","additions":20,"deletions":24,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -40,1 +40,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/provider\/impl\/ChangingArrayElementHighlighterTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n-        assumeTrue(is11());\n+        assumeTrue(is8());\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/ljv\/provider\/impl\/NewObjectHighlighterTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}