{"files":[{"patch":"@@ -319,0 +319,83 @@\n+    <profiles>\n+        <profile>\n+            <id>zgc-tests<\/id>\n+            <activation>\n+                <jdk>[17,)<\/jdk>\n+            <\/activation>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins<\/groupId>\n+                        <artifactId>maven-surefire-plugin<\/artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>test-zgc<\/id>\n+                                <phase>test<\/phase>\n+                                <goals>\n+                                    <goal>test<\/goal>\n+                                <\/goals>\n+                                <configuration>\n+                                    <argLine>-XX:+UseZGC<\/argLine>\n+                                    <forkCount>4<\/forkCount>\n+                                    <reuseForks>true<\/reuseForks>\n+                                <\/configuration>\n+                            <\/execution>\n+                            <execution>\n+                                <id>test-zgc-align16<\/id>\n+                                <phase>test<\/phase>\n+                                <goals>\n+                                    <goal>test<\/goal>\n+                                <\/goals>\n+                                <configuration>\n+                                    <argLine>-XX:+UseZGC -XX:ObjectAlignmentInBytes=16<\/argLine>\n+                                    <forkCount>4<\/forkCount>\n+                                    <reuseForks>true<\/reuseForks>\n+                                <\/configuration>\n+                            <\/execution>\n+                        <\/executions>\n+                    <\/plugin>\n+                <\/plugins>\n+            <\/build>\n+        <\/profile>\n+        <profile>\n+            <id>generational-zgc-tests<\/id>\n+            <activation>\n+                <jdk>21<\/jdk>\n+            <\/activation>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins<\/groupId>\n+                        <artifactId>maven-surefire-plugin<\/artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>test-generational-zgc<\/id>\n+                                <phase>test<\/phase>\n+                                <goals>\n+                                    <goal>test<\/goal>\n+                                <\/goals>\n+                                <configuration>\n+                                    <argLine>-XX:+UseZGC -XX:+ZGenerational<\/argLine>\n+                                    <forkCount>4<\/forkCount>\n+                                    <reuseForks>true<\/reuseForks>\n+                                <\/configuration>\n+                            <\/execution>\n+                            <execution>\n+                                <id>test-generational-zgc-align16<\/id>\n+                                <phase>test<\/phase>\n+                                <goals>\n+                                    <goal>test<\/goal>\n+                                <\/goals>\n+                                <configuration>\n+                                    <argLine>-XX:+UseZGC -XX:+ZGenerational -XX:ObjectAlignmentInBytes=16<\/argLine>\n+                                    <forkCount>4<\/forkCount>\n+                                    <reuseForks>true<\/reuseForks>\n+                                <\/configuration>\n+                            <\/execution>\n+                        <\/executions>\n+                    <\/plugin>\n+                <\/plugins>\n+            <\/build>\n+        <\/profile>\n+    <\/profiles>\n+\n","filename":"jol-core\/pom.xml","additions":83,"deletions":0,"binary":false,"changes":83,"status":"modified"},{"patch":"@@ -0,0 +1,25 @@\n+package org.openjdk.jol.vm;\n+\n+import org.junit.Test;\n+\n+import java.lang.management.ManagementFactory;\n+import java.util.Optional;\n+\n+import static org.apache.commons.lang3.StringUtils.substringAfter;\n+import static org.junit.Assert.assertEquals;\n+\n+public class HotspotUnsafeTest {\n+    @Test\n+    public void testAlignment(){\n+        assertEquals(expectedAlignment(), VM.current().objectAlignment());\n+    }\n+\n+    private int expectedAlignment() {\n+        Optional<String> alignmentProperty = ManagementFactory.getRuntimeMXBean().getInputArguments().stream()\n+                .filter(arg -> arg.contains(\"-XX:ObjectAlignmentInBytes\"))\n+                .findAny();\n+        return alignmentProperty\n+                .map(alignment -> Integer.parseInt(substringAfter(alignment, \"=\")))\n+                .orElseGet(() -> Integer.parseInt(System.getProperty(\"sun.arch.data.model\")) \/ Byte.SIZE);\n+    }\n+}\n\\ No newline at end of file\n","filename":"jol-core\/src\/test\/java\/org\/openjdk\/jol\/vm\/HotspotUnsafeTest.java","additions":25,"deletions":0,"binary":false,"changes":25,"status":"added"}]}