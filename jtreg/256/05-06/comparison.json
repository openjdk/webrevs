{"files":[{"patch":"@@ -72,1 +72,1 @@\n-        TestSuite ts = createTests(base, \"p.*\");\n+        TestSuite ts = createTests(base, \"p.*\", false);\n@@ -84,0 +84,21 @@\n+    \/**\n+     * Verifies the set of expected classes when the tests use\n+     * explicit build tags for library classes.\n+     * The property shareLibraries is set to true.\n+     *\n+     * @param base a directory for the test suite and results\n+     * @throws Exception if an error occurs\n+     *\/\n+    @Test\n+    void testNoImplicitCompilationLegacy(Path base) throws Exception {\n+        TestSuite ts = createTests(base, \"p.*\", true);\n+        ts.run(base.resolve(\"work\"), base.resolve(\"report\"), ts.dir.resolve(\"std\"));\n+        checkClassFiles(base.resolve(\"work\/classes\"),\n+            \"lib\/p\/Lib1.class\",\n+            \"lib\/p\/Lib2.class\",\n+            \"std\/Test1.d\/Test1.class\",\n+            \"std\/Test2.d\/Test2.class\"\n+        );\n+    }\n+\n+\n@@ -94,1 +115,1 @@\n-        TestSuite ts = createTests(base, \"p.Lib2\");\n+        TestSuite ts = createTests(base, \"p.Lib2\", false);\n@@ -116,1 +137,1 @@\n-        TestSuite ts = createTests(base, null);\n+        TestSuite ts = createTests(base, null, false);\n@@ -137,1 +158,1 @@\n-        TestSuite ts = createTests(base, null);\n+        TestSuite ts = createTests(base, null, false);\n@@ -157,1 +178,1 @@\n-        TestSuite ts = createTests(base, null);\n+        TestSuite ts = createTests(base, null, false);\n@@ -184,1 +205,1 @@\n-        TestSuite ts = createTests(base, null);\n+        TestSuite ts = createTests(base, null, false);\n@@ -209,2 +230,3 @@\n-    private TestSuite createTests(Path base, String build) throws Exception {\n-        TestSuite ts = new TestSuite(base.resolve(\"tests\"), \"requiredVersion = 4.2 b08\")\n+    private TestSuite createTests(Path base, String build, boolean shareLibraries) throws Exception {\n+        String shareLibrariesLine = shareLibraries ? \"shareLibraries = true\" : \"\";\n+        TestSuite ts = new TestSuite(base.resolve(\"tests\"), \"requiredVersion = 4.2 b08\\n\" + shareLibrariesLine)\n","filename":"test\/classDirs\/ClassDirsTest.java","additions":30,"deletions":8,"binary":false,"changes":38,"status":"modified"}]}