{"files":[{"patch":"@@ -70,2 +70,0 @@\n-    \/\/ this is a temporary flag while transitioning from JUnit 4 to 5\n-    private static final boolean JUNIT_RUN_WITH_JUNIT_4 = Flags.get(\"runWithJUnit4\");\n@@ -107,28 +105,1 @@\n-        if (JUNIT_RUN_WITH_JUNIT_4) {\n-            runWithJUnit4(mainClass);\n-        } else {\n-            runWithJUnitPlatform(mainClass);\n-        }\n-    }\n-\n-    private static void runWithJUnit4(Class<?> mainClass) throws Exception {\n-        org.junit.runner.Result result;\n-        try {\n-            result = org.junit.runner.JUnitCore.runClasses(mainClass);\n-        } catch (NoClassDefFoundError ex) {\n-            throw new Exception(JUNIT_NO_DRIVER, ex);\n-        }\n-        if (!result.wasSuccessful()) {\n-            for (org.junit.runner.notification.Failure failure : result.getFailures()) {\n-                StringWriter sw = new StringWriter();\n-                PrintWriter pw = new PrintWriter(sw);\n-                try {\n-                    pw.println(\"JavaTest Message: JUnit Failure: \" + failure);\n-                    failure.getException().printStackTrace(pw);\n-                } finally {\n-                    pw.close();\n-                }\n-                System.err.println(sw.toString());\n-            }\n-            throw new Exception(\"JUnit test failure\");\n-        }\n+        runWithJUnitPlatform(mainClass);\n","filename":"src\/share\/classes\/com\/sun\/javatest\/regtest\/agent\/JUnitRunner.java","additions":1,"deletions":30,"binary":false,"changes":31,"status":"modified"}]}