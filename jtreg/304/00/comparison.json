{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import org.junit.platform.engine.DiscoveryIssue;\n@@ -40,0 +41,1 @@\n+import org.junit.platform.launcher.LauncherConstants;\n@@ -134,0 +136,2 @@\n+                    \/\/ force a failure if there are any test discovery issues\n+                    .configurationParameter(LauncherConstants.CRITICAL_DISCOVERY_ISSUE_SEVERITY_PROPERTY_NAME, DiscoveryIssue.Severity.INFO.name())\n","filename":"src\/share\/classes\/com\/sun\/javatest\/regtest\/agent\/JUnitRunner.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -0,0 +1,39 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import org.junit.jupiter.api.Test;\n+\n+\/*\n+ * @test\n+ * @run junit InvalidJUnitTest\n+ *\/\n+class InvalidJUnitTest {\n+\n+    @Test\n+    public static void testFooBar() {\n+        \/\/ we intentionally don't \"fail()\" here to allow for the self-test\n+        \/\/ to easily distinguish a test discovery failure vs an explicit\n+        \/\/ failure raised from within the test method\n+        System.out.println(\"static method testFooBar unexpectedly executed\");\n+    }\n+}\n","filename":"test\/junitDiscoveryFailure\/InvalidJUnitTest.java","additions":39,"deletions":0,"binary":false,"changes":39,"status":"added"},{"patch":"","filename":"test\/junitDiscoveryFailure\/TEST.ROOT","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"test\/4499340\/test\/TEST.ROOT","status":"copied"},{"patch":"@@ -0,0 +1,61 @@\n+#\n+# Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+# verify that when a jasm file is compiled as a jtreg action, then\n+# the jtr report of the test contains the \"jasm-stdout\", \"jasm-stderr\"\n+# and \"jasm\" sections for that test action\n+$(BUILDTESTDIR)\/junitDiscoveryFailure.ok: \\\n+                $(JTREG_IMAGEDIR)\/lib\/javatest.jar \\\n+\t\t$(JTREG_IMAGEDIR)\/lib\/jtreg.jar \\\n+\t\t$(JTREG_IMAGEDIR)\/bin\/jtreg\n+\n+\t$(RM) $(@:%.ok=%)\n+\t$(MKDIR) $(@:%.ok=%)\n+\n+\t$(JTREG_IMAGEDIR)\/bin\/jtreg $(JTREG_OPTS) \\\n+\t\t-jdk:$(JDKHOME) \\\n+\t\t-w $(@:%.ok=%)\/work\/ \\\n+\t\t-r $(@:%.ok=%)\/report\/ \\\n+\t\t$(TESTDIR)\/junitDiscoveryFailure\/ > $(@:%.ok=%\/jt.log) ; jtreg_exit_code=$$?; \\\n+\t    echo \"jtreg exited with exit code $$jtreg_exit_code\"; \\\n+        if [ \"$$jtreg_exit_code\" -eq 0 ]; then \\\n+            echo \"jtreg process was expected to fail, but didn't - exit code=$$jtreg_exit_code\" ; \\\n+            exit 1 ; \\\n+        fi\n+\n+    # verify that the discovery failure was noticed\n+\t$(GREP) 'encountered a critical issue during test discovery' \\\n+            $(@:%.ok=%)\/work\/InvalidJUnitTest.jtr > \/dev\/null\n+\n+\t# verify that the test method wasn't executed\n+\t$(GREP) 'static method testFooBar unexpectedly executed' \\\n+\t    $(@:%.ok=%)\/work\/InvalidJUnitTest.jtr > \/dev\/null ; rc=$$?; \\\n+\t    if [ \"$$rc\" -ne 1 ]; then \\\n+\t        echo \"JUnit test method was unexpectedly executed\" ; \\\n+\t        exit 1 ; \\\n+\t    fi\n+\n+\techo \"$@ test passed at `date`\" > $@\n+\n+\n+TESTS.jtreg += $(BUILDTESTDIR)\/junitDiscoveryFailure.ok\n","filename":"test\/junitDiscoveryFailure\/junit-discovery-failure.gmk","additions":61,"deletions":0,"binary":false,"changes":61,"status":"added"}]}