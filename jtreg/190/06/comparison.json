{"files":[{"patch":"@@ -24,1 +24,1 @@\n-        release: 17\n+        release: 21\n","filename":".github\/workflows\/test.yml","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -4,1 +4,1 @@\n-# Copyright (c) 2020, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -398,0 +398,1 @@\n+    JAVA_SPECIFICATION_VERSION=${vnum}\n@@ -781,0 +782,1 @@\n+     JAVA_SPECIFICATION_VERSION=\"${JAVA_SPECIFICATION_VERSION}\" \\\\\n","filename":"make\/build.sh","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,2 @@\n+# only run the test on Java version lesser than 18\n+INCLUDE_SEC_MGR_TEST := $(shell if [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then echo 1; else echo 0; fi)\n@@ -38,0 +40,1 @@\n+ifeq ($(INCLUDE_SEC_MGR_TEST),1)\n@@ -40,0 +43,1 @@\n+endif\n@@ -56,0 +60,1 @@\n+ifeq ($(INCLUDE_SEC_MGR_TEST),1)\n@@ -58,0 +63,1 @@\n+endif\n@@ -75,0 +81,1 @@\n+ifeq ($(INCLUDE_SEC_MGR_TEST),1)\n@@ -77,0 +84,1 @@\n+endif\n@@ -90,0 +98,1 @@\n+ifeq ($(INCLUDE_SEC_MGR_TEST),1)\n@@ -92,0 +101,1 @@\n+endif\n","filename":"test\/SecurityManager\/SecurityManagerTests.gmk","additions":11,"deletions":1,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,0 +26,1 @@\n+ * @requires jdk.version.major < 18\n","filename":"test\/SecurityManager\/pass\/SimpleSecurityManagerTest.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 1997, 2017, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1997, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,1 +44,5 @@\n-\t$(GREP) -s 'Test results: passed: 18; failed: 2' $(@:%.ok=%\/jt.log)  > \/dev\/null\n+\tif [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then \\\n+\t\t$(GREP) -s 'Test results: passed: 18; failed: 2' $(@:%.ok=%\/jt.log)  > \/dev\/null ; \\\n+\telse \\\n+\t\t$(GREP) -s 'Test results: passed: 15; failed: 2' $(@:%.ok=%\/jt.log)  > \/dev\/null ; \\\n+\tfi\n@@ -70,1 +74,0 @@\n-\t$(GREP) -s 'Test results: passed: 17; failed: 1; error: 2' $(@:%.ok=%\/jt.log)  > \/dev\/null\n@@ -72,1 +75,11 @@\n-\tif [ $${agents} -ne 4 ]; then echo \"Unexpected number of agents used: $${agents}\" ; exit 1 ; fi\n+\tif [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then \\\n+\t\t$(GREP) -s 'Test results: passed: 17; failed: 1; error: 2' $(@:%.ok=%\/jt.log)  > \/dev\/null ; \\\n+\t\tif [ $${agents} -ne 4 ]; then \\\n+\t\t\techo \"Unexpected number of agents used: $${agents}\" ; exit 1 ; \\\n+\t\tfi \\\n+\telse \\\n+\t\t$(GREP) -s 'Test results: passed: 15; failed: 2' $(@:%.ok=%\/jt.log)  > \/dev\/null ; \\\n+\t\tif [ $${agents} -ne 2 ]; then \\\n+\t\t\techo \"Unexpected number of agents used: $${agents}\" ; exit 1 ; \\\n+\t\tfi \\\n+\tfi\n","filename":"test\/badtests\/BadTests.gmk","additions":17,"deletions":4,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,0 +26,1 @@\n+ * @requires jdk.version.major < 18\n@@ -31,0 +32,1 @@\n+ * @requires jdk.version.major < 18\n@@ -36,0 +38,1 @@\n+ * @requires jdk.version.major < 18\n","filename":"test\/badtests\/ExitTest.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -50,1 +50,5 @@\n-\t$(GREP) -s 'Test results: passed: 157; error: 84' $(@:%.ok=%\/log)  > \/dev\/null\n+\tif [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then \\\n+\t\t$(GREP) -s 'Test results: passed: 157; error: 84' $(@:%.ok=%\/log)  > \/dev\/null ; \\\n+\telse \\\n+\t\t$(GREP) -s 'Test results: passed: 142; error: 84' $(@:%.ok=%\/log)  > \/dev\/null ; \\\n+\tfi\n","filename":"test\/basic\/Basic.gmk","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -48,0 +48,8 @@\n+    private static final boolean IS_JAVA18_PLUS;\n+\n+    static {\n+        String javaSpecVersion = System.getProperty(\"java.specification.version\");\n+        \/\/ use of Double.valueOf() allows for JDK 8, whose value is 1.8\n+        IS_JAVA18_PLUS = Double.valueOf(javaSpecVersion).intValue() >= 18;\n+    }\n+\n@@ -230,0 +238,10 @@\n+        if (IS_JAVA18_PLUS) {\n+            \/\/ on Java versions 18 and higher we don't run some SecurityManager related tests.\n+            \/\/ we adjust the counts for those here.\n+\n+            \/\/ 2 less \"Passed\" expected in main\/Exit.java and 1 less expected in driver\/Exit.java\n+            numPassed -= 3;\n+            \/\/ 10 less \"Failed\" expected in main\/Exit.java and 2 less expected in driver\/Exit.java\n+            numFailed -= 12;\n+            numError += 0; \/\/ no change in error count\n+        }\n","filename":"test\/basic\/Basic.java","additions":18,"deletions":0,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -53,2 +53,7 @@\n-\t    EXPECT_PASS=92 ; \\\n-\t    EXPECT_FAIL=40 ; \\\n+\t\tif [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then \\\n+\t\t\tEXPECT_PASS=92 ; \\\n+\t\t\tEXPECT_FAIL=40 ; \\\n+\t\telse \\\n+\t\t\tEXPECT_PASS=89 ; \\\n+\t\t\tEXPECT_FAIL=28 ; \\\n+\t\tfi ; \\\n@@ -56,2 +61,7 @@\n-\t    EXPECT_PASS=94 ; \\\n-\t    EXPECT_FAIL=44 ; \\\n+\t\tif [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then \\\n+\t\t\tEXPECT_PASS=94 ; \\\n+\t\t\tEXPECT_FAIL=44 ; \\\n+\t\telse \\\n+\t\t\tEXPECT_PASS=91 ; \\\n+\t\t\tEXPECT_FAIL=32 ; \\\n+\t\tfi ; \\\n","filename":"test\/basic\/ReportOnlyTest.gmk","additions":14,"deletions":4,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,1 @@\n+ * @requires jdk.version.major < 18\n@@ -33,0 +34,1 @@\n+ * @requires jdk.version.major < 18\n@@ -39,0 +41,1 @@\n+ * @requires jdk.version.major < 18\n","filename":"test\/share\/basic\/driver\/Exit.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,1 @@\n+ * @requires jdk.version.major < 18\n@@ -33,0 +34,1 @@\n+ * @requires jdk.version.major < 18\n@@ -39,0 +41,1 @@\n+ * @requires jdk.version.major < 18\n@@ -45,0 +48,1 @@\n+ * @requires jdk.version.major < 18\n@@ -51,0 +55,1 @@\n+ * @requires jdk.version.major < 18\n@@ -57,0 +62,1 @@\n+ * @requires jdk.version.major < 18\n@@ -63,0 +69,1 @@\n+ * @requires jdk.version.major < 18\n@@ -69,0 +76,1 @@\n+ * @requires jdk.version.major < 18\n@@ -75,0 +83,1 @@\n+ * @requires jdk.version.major < 18\n@@ -81,0 +90,1 @@\n+ * @requires jdk.version.major < 18\n@@ -87,0 +97,1 @@\n+ * @requires jdk.version.major < 18\n@@ -93,0 +104,1 @@\n+ * @requires jdk.version.major < 18\n","filename":"test\/share\/basic\/main\/Exit.java","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -46,0 +46,2 @@\n+STATS1_EXPECT_RUN := $(shell if [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then echo 45; else echo 33; fi)\n+STATS1_EXPECT_FAIL := $(shell if [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then echo 32; else echo 22; fi)\n@@ -61,1 +63,1 @@\n-\t$(GREP) -E -s '^TEST-STATS: StatsTxt run=45 failed=32 excluded=0\\s?$$' \\\n+\t$(GREP) -E -s '^TEST-STATS: StatsTxt run=$(STATS1_EXPECT_RUN) failed=$(STATS1_EXPECT_FAIL) excluded=0\\s?$$' \\\n@@ -63,1 +65,1 @@\n-\t$(GREP) -E -s '^TEST-STATS: StatsTxt run=45 failed=32 excluded=0\\s?$$' \\\n+\t$(GREP) -E -s '^TEST-STATS: StatsTxt run=$(STATS1_EXPECT_RUN) failed=$(STATS1_EXPECT_FAIL) excluded=0\\s?$$' \\\n@@ -69,0 +71,2 @@\n+STATS2_EXPECT_PASS := $(shell if [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then echo 13; else echo 11; fi)\n+STATS2_EXPECT_FAIL := $(shell if [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then echo 32; else echo 22; fi)\n@@ -86,1 +90,1 @@\n-\t$(GREP) -E -s '^TEST-STATS: StatsTxt passed=13 failed=32 ignored=2\\s?$$' \\\n+\t$(GREP) -E -s '^TEST-STATS: StatsTxt passed=$(STATS2_EXPECT_PASS) failed=$(STATS2_EXPECT_FAIL) ignored=2\\s?$$' \\\n@@ -88,1 +92,1 @@\n-\t$(GREP) -E -s '^TEST-STATS: StatsTxt passed=13 failed=32 ignored=2\\s?$$' \\\n+\t$(GREP) -E -s '^TEST-STATS: StatsTxt passed=$(STATS2_EXPECT_PASS) failed=$(STATS2_EXPECT_FAIL) ignored=2\\s?$$' \\\n@@ -94,0 +98,2 @@\n+STATS3_EXPECT_PASS := $(shell if [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then echo 12; else echo 10; fi)\n+STATS3_EXPECT_FAIL := $(shell if [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then echo 32; else echo 22; fi)\n@@ -112,1 +118,1 @@\n-\t$(GREP) -E -s '^TEST-STATS: StatsTxt passed=12 failed=32 ignored=2 skipped=1\\s?$$' \\\n+\t$(GREP) -E -s '^TEST-STATS: StatsTxt passed=$(STATS3_EXPECT_PASS) failed=$(STATS3_EXPECT_FAIL) ignored=2 skipped=1\\s?$$' \\\n@@ -114,1 +120,1 @@\n-\t$(GREP) -E -s '^TEST-STATS: StatsTxt passed=12 failed=32 ignored=2 skipped=1\\s?$$' \\\n+\t$(GREP) -E -s '^TEST-STATS: StatsTxt passed=$(STATS3_EXPECT_PASS) failed=$(STATS3_EXPECT_FAIL) ignored=2 skipped=1\\s?$$' \\\n@@ -120,0 +126,3 @@\n+STATS4_EXPECT_PASS := $(shell if [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then echo 13; else echo 11; fi)\n+STATS4_EXPECT_FAIL := $(shell if [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then echo 19; else echo 9; fi)\n+STATS4_EXPECT_ERROR := $(shell if [ ${JAVA_SPECIFICATION_VERSION} -lt 18 ]; then echo 13; else echo 13; fi)\n@@ -137,1 +146,1 @@\n-\t$(GREP) -E -s '^Test results: passed: 13; failed: 19; error: 13; skipped: 1; did not match keywords: 2\\s?$$' \\\n+\t$(GREP) -E -s '^Test results: passed: $(STATS4_EXPECT_PASS); failed: $(STATS4_EXPECT_FAIL); error: $(STATS4_EXPECT_ERROR); skipped: 1; did not match keywords: 2.*?$$' \\\n@@ -139,1 +148,1 @@\n-\t$(GREP) -E -s '^Test results: passed: 13; failed: 19; error: 13; skipped: 1; did not match keywords: 2\\s?$$' \\\n+\t$(GREP) -E -s '^Test results: passed: $(STATS4_EXPECT_PASS); failed: $(STATS4_EXPECT_FAIL); error: $(STATS4_EXPECT_ERROR); skipped: 1; did not match keywords: 2.*?$$' \\\n","filename":"test\/statsTests\/StatsTests.gmk","additions":17,"deletions":8,"binary":false,"changes":25,"status":"modified"}]}