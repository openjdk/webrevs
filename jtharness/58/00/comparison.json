{"files":[{"patch":"@@ -36,0 +36,5 @@\n+    \/**\n+     * New threads used for reading use this {@link ThreadGroup}.\n+     *\/\n+    private ThreadGroup ioThreadGroup;\n+\n@@ -37,1 +42,1 @@\n-        super(socket);\n+        this(null, socket);\n@@ -41,0 +46,9 @@\n+        this(null, host, port);\n+    }\n+\n+    public InterruptableSocketConnection(ThreadGroup ioThreadGroup, Socket socket) throws IOException {\n+        super(socket);\n+        this.ioThreadGroup = ioThreadGroup;\n+    }\n+\n+    public InterruptableSocketConnection(ThreadGroup ioThreadGroup, String host, int port) throws IOException {\n@@ -42,0 +56,1 @@\n+        this.ioThreadGroup = ioThreadGroup;\n@@ -120,1 +135,1 @@\n-                Thread reader = new Thread() {\n+                Thread reader = new Thread(ioThreadGroup, new Runnable() {\n@@ -134,1 +149,1 @@\n-                };\n+                });\n","filename":"src\/com\/sun\/javatest\/agent\/InterruptableSocketConnection.java","additions":18,"deletions":3,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -38,0 +38,15 @@\n+    private static ThreadGroup getRootThreadGroup()\n+    {\n+        ThreadGroup root = Thread.currentThread().getThreadGroup();\n+        while (root.getParent() != null) {\n+            root = root.getParent();\n+        }\n+        return root;\n+    }\n+\n+\n+    \/**\n+     * The {@link ThreadGroup} used for reading during class loading.\n+     *\/\n+    private ThreadGroup ioThreadGroup = new ThreadGroup(getRootThreadGroup(), \"Passive Class Loading IO\");\n+\n@@ -82,1 +97,1 @@\n-            return new InterruptableSocketConnection(serverSocket.accept());\n+            return new InterruptableSocketConnection(ioThreadGroup, serverSocket.accept());\n","filename":"src\/com\/sun\/javatest\/agent\/PassiveConnectionFactory.java","additions":16,"deletions":1,"binary":false,"changes":17,"status":"modified"}]}