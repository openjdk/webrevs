{"files":[{"patch":"@@ -203,1 +203,1 @@\n-    public static ModuleOp createBuilderFunction(SequencedMap<String, Op> ops, Function<Block.Builder, Value> dialectFactoryF) {\n+    public static ModuleOp createBuilderFunctions(SequencedMap<String, ? extends Op> ops, Function<Block.Builder, Value> dialectFactoryF) {\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/internal\/OpBuilder.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -371,1 +371,1 @@\n-        return OpBuilder.createBuilderFunction(\n+        return OpBuilder.createBuilderFunctions(\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/internal\/ReflectMethods.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,1 +30,0 @@\n-import jdk.incubator.code.dialect.java.JavaType;\n@@ -39,0 +38,2 @@\n+import java.util.LinkedHashMap;\n+import java.util.Map;\n@@ -41,0 +42,1 @@\n+import jdk.incubator.code.dialect.java.FieldRef;\n@@ -47,1 +49,0 @@\n- * @ignore\n@@ -127,2 +128,3 @@\n-        CoreOp.FuncOp fb = OpBuilder.createBuilderFunction(fExpected,\n-                b -> b.parameter(JavaType.type(DialectFactory.class)));\n+        CoreOp.ModuleOp module = OpBuilder.createBuilderFunctions(new LinkedHashMap<>(Map.of(fExpected.funcName(), fExpected)),\n+                b -> b.op(JavaOp.fieldLoad(\n+                        FieldRef.field(JavaOp.class, \"JAVA_DIALECT_FACTORY\", DialectFactory.class))));\n@@ -130,1 +132,1 @@\n-                fb, JavaOp.JAVA_DIALECT_FACTORY);\n+                module.functionTable().get(fExpected.funcName()));\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/writer\/TestCodeBuilder.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"}]}