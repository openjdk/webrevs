{"files":[{"patch":"@@ -5,0 +5,18 @@\n+message(WARNING \"HAT builds with maven now !!\")\n+message(\"You should be able to build using\")\n+message(\"->8-    \")\n+message(\"    . .\/env.bash\")\n+message(\"    mvn clean compile jar:jar install\")\n+message(\"-8<-    \")\n+message(\"All jars, libs and executables should end up in the maven-build dir\")\n+message(\"    \")\n+message(\"If the build fails check the pom.xml properties are correct using \")\n+message(\"->8-    \")\n+message(\"    grep \\\"<properties>\\\" -A 10 pom.xml\")\n+message(\"-8<-    \")\n+message(\"    \")\n+message(\"See https:\/\/github.com\/openjdk\/babylon\/tree\/code-reflection\/hat#readme  \")\n+message(\"    \")\n+message(FATAL_ERROR \" Crashing out for your own safety ;)\")\n+\n+\n","filename":"hat\/CMakeLists.txt","additions":18,"deletions":0,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -52,2 +52,2 @@\n-        COMMAND cp ${CMAKE_BINARY_DIR}\/cuda\/libcuda_backend.* ${CMAKE_SOURCE_DIR}\/..\/maven-build\n-        COMMAND cp ${CMAKE_BINARY_DIR}\/cuda\/cuda_info ${CMAKE_SOURCE_DIR}\/..\/maven-build\n+        COMMAND cp ${CMAKE_BINARY_DIR}\/cuda\/libcuda_backend.* ${HAT_TARGET}\n+        COMMAND cp ${CMAKE_BINARY_DIR}\/cuda\/cuda_info ${HAT_TARGET}\n@@ -55,2 +55,1 @@\n-add_dependencies(copy_libs copy_cuda_libs)\n-\n+   add_dependencies(copy_libs copy_cuda_libs)\n","filename":"hat\/backends\/cuda\/CMakeLists.txt","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -34,0 +34,6 @@\n+    <!-- this required to inherit parent properties -->\n+    <parent>\n+        <groupId>oracle.code<\/groupId>\n+        <version>1.0<\/version>\n+        <artifactId>hat.backends<\/artifactId>\n+    <\/parent>\n@@ -43,6 +49,0 @@\n-    <properties>\n-        <project.build.sourceEncoding>UTF-8<\/project.build.sourceEncoding>\n-        <maven.compiler.source>23<\/maven.compiler.source>\n-        <maven.compiler.target>23<\/maven.compiler.target>\n-    <\/properties>\n-\n@@ -51,0 +51,11 @@\n+             <plugin>\n+               <groupId>org.codehaus.mojo<\/groupId>\n+               <artifactId>exec-maven-plugin<\/artifactId>\n+               <configuration>\n+                  <skip>true<\/skip>\n+                  <!-- we want to inherit properties from parent but not the\n+                       plugin that calls cmake -->\n+               <\/configuration>\n+            <\/plugin>\n+\n+\n@@ -60,1 +71,1 @@\n-                                <copy file=\"target\/hat-backend-cuda-1.0.jar\" todir=\"..\/..\/maven-build\"\/>\n+                                <copy file=\"target\/hat-backend-cuda-1.0.jar\" todir=\"${hat.target}\"\/>\n","filename":"hat\/backends\/cuda\/pom.xml","additions":18,"deletions":7,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -43,2 +43,2 @@\n-    COMMAND cp ${CMAKE_BINARY_DIR}\/mock\/libmock_backend.* ${CMAKE_SOURCE_DIR}\/..\/maven-build\n-    COMMAND cp ${CMAKE_BINARY_DIR}\/mock\/mock_info ${CMAKE_SOURCE_DIR}\/..\/maven-build\n+    COMMAND cp ${CMAKE_BINARY_DIR}\/mock\/libmock_backend.* ${HAT_TARGET}\n+    COMMAND cp ${CMAKE_BINARY_DIR}\/mock\/mock_info ${HAT_TARGET}\n","filename":"hat\/backends\/mock\/CMakeLists.txt","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -34,6 +34,6 @@\n-\n-    <properties>\n-        <project.build.sourceEncoding>UTF-8<\/project.build.sourceEncoding>\n-        <maven.compiler.source>23<\/maven.compiler.source>\n-        <maven.compiler.target>23<\/maven.compiler.target>\n-    <\/properties>\n+    <!-- this required to inherit parent properties -->\n+    <parent>\n+        <groupId>oracle.code<\/groupId>\n+        <version>1.0<\/version>\n+        <artifactId>hat.backends<\/artifactId>\n+    <\/parent>\n@@ -51,0 +51,10 @@\n+            <plugin>\n+               <groupId>org.codehaus.mojo<\/groupId>\n+               <artifactId>exec-maven-plugin<\/artifactId>\n+               <configuration>\n+                  <skip>true<\/skip>\n+                  <!-- we want to inherit properties from parent but not the\n+                       plugin that calls cmake -->\n+               <\/configuration>\n+            <\/plugin>\n+\n@@ -60,1 +70,1 @@\n-                                <copy file=\"target\/hat-backend-mock-1.0.jar\" todir=\"..\/..\/maven-build\"\/>\n+                                <copy file=\"target\/hat-backend-mock-1.0.jar\" todir=\"${hat.target}\"\/>\n","filename":"hat\/backends\/mock\/pom.xml","additions":17,"deletions":7,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -53,2 +53,2 @@\n-       COMMAND cp ${CMAKE_BINARY_DIR}\/opencl\/libopencl_backend.* ${CMAKE_SOURCE_DIR}\/..\/maven-build\n-       COMMAND cp ${CMAKE_BINARY_DIR}\/opencl\/opencl_info ${CMAKE_SOURCE_DIR}\/..\/maven-build\n+       COMMAND cp ${CMAKE_BINARY_DIR}\/opencl\/libopencl_backend.*  ${HAT_TARGET}\n+       COMMAND cp ${CMAKE_BINARY_DIR}\/opencl\/opencl_info ${HAT_TARGET}\n@@ -57,0 +57,1 @@\n+\n","filename":"hat\/backends\/opencl\/CMakeLists.txt","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -35,5 +35,6 @@\n-    <properties>\n-        <project.build.sourceEncoding>UTF-8<\/project.build.sourceEncoding>\n-        <maven.compiler.source>23<\/maven.compiler.source>\n-        <maven.compiler.target>23<\/maven.compiler.target>\n-    <\/properties>\n+    <!-- this required to inherit parent properties -->\n+    <parent>\n+        <groupId>oracle.code<\/groupId>\n+        <version>1.0<\/version>\n+        <artifactId>hat.backends<\/artifactId>\n+    <\/parent>\n@@ -51,1 +52,9 @@\n-\n+            <plugin>\n+               <groupId>org.codehaus.mojo<\/groupId>\n+               <artifactId>exec-maven-plugin<\/artifactId>\n+               <configuration>\n+                  <skip>true<\/skip>\n+                  <!-- we want to inherit properties from parent but not the\n+                       plugin that calls cmake -->\n+               <\/configuration>\n+            <\/plugin>\n@@ -62,2 +71,1 @@\n-                                <copy file=\"target\/hat-backend-opencl-1.0.jar\" todir=\"..\/..\/maven-build\"\/>\n-\n+                                <copy file=\"target\/hat-backend-opencl-1.0.jar\" todir=\"${hat.target}\"\/>\n","filename":"hat\/backends\/opencl\/pom.xml","additions":16,"deletions":8,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-   <artifactId>backends<\/artifactId>\n+   <artifactId>hat.backends<\/artifactId>\n@@ -35,0 +35,7 @@\n+    <!-- this required to inherit parent properties -->\n+    <parent>\n+        <groupId>oracle.code<\/groupId>\n+        <version>1.0<\/version>\n+        <artifactId>hat.root<\/artifactId>\n+    <\/parent>\n+\n@@ -40,1 +47,1 @@\n-     <!--<module>spirv<\/module>-->\n+     <module>spirv<\/module>\n@@ -58,0 +65,1 @@\n+                      <argument>-DHAT_TARGET=${hat.target}<\/argument>\n","filename":"hat\/backends\/pom.xml","additions":10,"deletions":2,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -52,2 +52,2 @@\n-        COMMAND cp ${CMAKE_BINARY_DIR}\/ptx\/libptx_backend.* ${CMAKE_SOURCE_DIR}\/..\/maven-build\n-        COMMAND cp ${CMAKE_BINARY_DIR}\/ptx\/ptx_info ${CMAKE_SOURCE_DIR}\/..\/maven-build\n+        COMMAND cp ${CMAKE_BINARY_DIR}\/ptx\/libptx_backend.* ${HAT_TARGET}\n+        COMMAND cp ${CMAKE_BINARY_DIR}\/ptx\/ptx_info ${HAT_TARGET}\n","filename":"hat\/backends\/ptx\/CMakeLists.txt","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -35,5 +35,6 @@\n-    <properties>\n-        <project.build.sourceEncoding>UTF-8<\/project.build.sourceEncoding>\n-        <maven.compiler.source>23<\/maven.compiler.source>\n-        <maven.compiler.target>23<\/maven.compiler.target>\n-    <\/properties>\n+    <!-- this required to inherit parent properties -->\n+    <parent>\n+        <groupId>oracle.code<\/groupId>\n+        <version>1.0<\/version>\n+        <artifactId>hat.backends<\/artifactId>\n+    <\/parent>\n@@ -50,0 +51,10 @@\n+            <plugin>\n+               <groupId>org.codehaus.mojo<\/groupId>\n+               <artifactId>exec-maven-plugin<\/artifactId>\n+               <configuration>\n+                  <skip>true<\/skip>\n+                  <!-- we want to inherit properties from parent but not the\n+                       plugin that calls cmake -->\n+               <\/configuration>\n+            <\/plugin>\n+\n@@ -59,1 +70,1 @@\n-                                <copy file=\"target\/hat-backend-ptx-1.0.jar\" todir=\"..\/..\/maven-build\"\/>\n+                                <copy file=\"target\/hat-backend-ptx-1.0.jar\" todir=\"${hat.target}\"\/>\n","filename":"hat\/backends\/ptx\/pom.xml","additions":17,"deletions":6,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -44,2 +44,2 @@\n-   COMMAND cp ${CMAKE_BINARY_DIR}\/spirv\/libspirv_backend.* ${CMAKE_SOURCE_DIR}\/..\/maven-build\n-   COMMAND cp ${CMAKE_BINARY_DIR}\/spirv\/spirv_info ${CMAKE_SOURCE_DIR}\/..\/maven-build\n+   COMMAND cp ${CMAKE_BINARY_DIR}\/spirv\/libspirv_backend.* ${HAT_TARGET}\n+   COMMAND cp ${CMAKE_BINARY_DIR}\/spirv\/spirv_info ${HAT_TARGET}\n","filename":"hat\/backends\/spirv\/CMakeLists.txt","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -34,0 +34,6 @@\n+    <!-- this required to inherit parent properties -->\n+    <parent>\n+        <groupId>oracle.code<\/groupId>\n+        <version>1.0<\/version>\n+        <artifactId>hat.backends<\/artifactId>\n+    <\/parent>\n@@ -35,5 +41,0 @@\n-    <properties>\n-        <project.build.sourceEncoding>UTF-8<\/project.build.sourceEncoding>\n-        <maven.compiler.source>23<\/maven.compiler.source>\n-        <maven.compiler.target>23<\/maven.compiler.target>\n-    <\/properties>\n@@ -50,0 +51,10 @@\n+            <plugin>\n+               <groupId>org.codehaus.mojo<\/groupId>\n+               <artifactId>exec-maven-plugin<\/artifactId>\n+               <configuration>\n+                  <skip>true<\/skip>\n+                  <!-- we want to inherit properties from parent but not the\n+                       plugin that calls cmake -->\n+               <\/configuration>\n+            <\/plugin>\n+\n@@ -59,1 +70,1 @@\n-                                <copy file=\"target\/hat-backend-spirv-1.0.jar\" todir=\"..\/..\/maven-build\"\/>\n+                                <copy file=\"target\/hat-backend-spirv-1.0.jar\" todir=\"${hat.target}\"\/>\n@@ -82,2 +93,2 @@\n-                                <source> ..\/..\/..\/cr-examples\/spirv\/src\/main\/java <\/source>\n-                                <source>..\/..\/..\/..\/beehive-spirv-toolkit\/lib\/src\/main\/java<\/source>\n+                                <source>${babylon.dir}\/cr-examples\/spirv\/src\/main\/java <\/source>\n+                                <source>${beehive.spirv.toolkit.dir}\/lib\/src\/main\/java<\/source>\n","filename":"hat\/backends\/spirv\/pom.xml","additions":19,"deletions":8,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -1,10 +1,1 @@\n-cmake -B build\n-for backend in \\\n-   opencl\\\n-   mock\\\n-   ptx\\\n-;do\n-    cmake --build build --target ${backend}_backend\n-done\n-\n-mvn clean compile jar:jar\n+mvn clean compile jar:jar install\n","filename":"hat\/build.bash","additions":1,"deletions":10,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -34,6 +34,6 @@\n-\n-    <properties>\n-        <project.build.sourceEncoding>UTF-8<\/project.build.sourceEncoding>\n-        <maven.compiler.source>23<\/maven.compiler.source>\n-        <maven.compiler.target>23<\/maven.compiler.target>\n-    <\/properties>\n+    <!-- this required to inherit parent properties -->\n+    <parent>\n+        <groupId>oracle.code<\/groupId>\n+        <version>1.0<\/version>\n+        <artifactId>hat.examples<\/artifactId>\n+    <\/parent>\n@@ -60,1 +60,1 @@\n-                                <copy file=\"target\/hat-example-experiments-1.0.jar\" todir=\"..\/..\/maven-build\"\/>\n+                                <copy file=\"target\/hat-example-experiments-1.0.jar\" todir=\"${hat.target}\"\/>\n","filename":"hat\/examples\/experiments\/pom.xml","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -34,6 +34,6 @@\n-\n-    <properties>\n-        <project.build.sourceEncoding>UTF-8<\/project.build.sourceEncoding>\n-        <maven.compiler.source>23<\/maven.compiler.source>\n-        <maven.compiler.target>23<\/maven.compiler.target>\n-    <\/properties>\n+    <!-- this required to inherit parent properties -->\n+    <parent>\n+        <groupId>oracle.code<\/groupId>\n+        <version>1.0<\/version>\n+        <artifactId>hat.examples<\/artifactId>\n+    <\/parent>\n@@ -59,1 +59,1 @@\n-                                <copy file=\"target\/hat-example-mandel-1.0.jar\" todir=\"..\/..\/maven-build\"\/>\n+                                <copy file=\"target\/hat-example-mandel-1.0.jar\" todir=\"${hat.target}\"\/>\n","filename":"hat\/examples\/mandel\/pom.xml","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-   <artifactId>examples<\/artifactId>\n+   <artifactId>hat.examples<\/artifactId>\n@@ -35,0 +35,8 @@\n+\n+   <!-- this required to inherit parent properties -->\n+   <parent>\n+     <groupId>oracle.code<\/groupId>\n+     <version>1.0<\/version>\n+     <artifactId>hat.root<\/artifactId>\n+   <\/parent>\n+\n","filename":"hat\/examples\/pom.xml","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -34,6 +34,6 @@\n-\n-    <properties>\n-        <project.build.sourceEncoding>UTF-8<\/project.build.sourceEncoding>\n-        <maven.compiler.source>23<\/maven.compiler.source>\n-        <maven.compiler.target>23<\/maven.compiler.target>\n-    <\/properties>\n+    <!-- this required to inherit parent properties -->\n+    <parent>\n+        <groupId>oracle.code<\/groupId>\n+        <version>1.0<\/version>\n+        <artifactId>hat.examples<\/artifactId>\n+    <\/parent>\n@@ -59,1 +59,1 @@\n-                                <copy file=\"target\/hat-example-squares-1.0.jar\" todir=\"..\/..\/maven-build\"\/>\n+                                <copy file=\"target\/hat-example-squares-1.0.jar\" todir=\"${hat.target}\"\/>\n","filename":"hat\/examples\/squares\/pom.xml","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -34,0 +34,6 @@\n+    <!-- this required to inherit parent properties -->\n+    <parent>\n+        <groupId>oracle.code<\/groupId>\n+        <version>1.0<\/version>\n+        <artifactId>hat.examples<\/artifactId>\n+    <\/parent>\n@@ -35,5 +41,0 @@\n-    <properties>\n-        <project.build.sourceEncoding>UTF-8<\/project.build.sourceEncoding>\n-        <maven.compiler.source>23<\/maven.compiler.source>\n-        <maven.compiler.target>23<\/maven.compiler.target>\n-    <\/properties>\n@@ -59,1 +60,1 @@\n-                                <copy file=\"target\/hat-example-violajones-1.0.jar\" todir=\"..\/..\/maven-build\"\/>\n+                                <copy file=\"target\/hat-example-violajones-1.0.jar\" todir=\"${hat.target}\"\/>\n","filename":"hat\/examples\/violajones\/pom.xml","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -34,5 +34,8 @@\n-    <properties>\n-        <project.build.sourceEncoding>UTF-8<\/project.build.sourceEncoding>\n-        <maven.compiler.source>23<\/maven.compiler.source>\n-        <maven.compiler.target>23<\/maven.compiler.target>\n-    <\/properties>\n+    <!-- this required to inherit parent properties -->\n+    <parent>\n+        <groupId>oracle.code<\/groupId>\n+        <version>1.0<\/version>\n+        <artifactId>hat.root<\/artifactId>\n+    <\/parent>\n+\n+\n@@ -62,18 +65,0 @@\n-            <plugin>\n-                <groupId>org.apache.maven.plugins<\/groupId>\n-                <artifactId>maven-compiler-plugin<\/artifactId>\n-                <version>3.11.0<\/version>\n-                <configuration>\n-                    <compilerArgs>\n-                        <arg>--enable-preview<\/arg>\n-                        <arg>--add-exports=java.base\/jdk.internal=ALL-UNNAMED<\/arg>\n-                        <arg>--add-exports=java.base\/jdk.internal.vm.annotation=ALL-UNNAMED<\/arg>\n-                    <\/compilerArgs>\n-                    <source>${maven.compiler.source}<\/source>\n-                    <target>${maven.compiler.target}<\/target>\n-                    <showDeprecation>true<\/showDeprecation>\n-                    <failOnError>true<\/failOnError>\n-                    <showWarnings>true<\/showWarnings>\n-                    <showDeprecation>true<\/showDeprecation>\n-                <\/configuration>\n-            <\/plugin>\n@@ -89,1 +74,1 @@\n-                                <copy file=\"target\/${project.artifactId}-1.0.jar\" todir=\"..\/maven-build\"\/>\n+                                <copy file=\"target\/${project.artifactId}-1.0.jar\" todir=\"${hat.target}\"\/>\n","filename":"hat\/hat\/pom.xml","additions":9,"deletions":24,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -6,1 +6,1 @@\n-   <artifactId>parent<\/artifactId>\n+   <artifactId>hat.root<\/artifactId>\n@@ -8,8 +8,11 @@\n-   <dependencies>\n-        <dependency>\n-            <groupId>org.junit.jupiter<\/groupId>\n-            <artifactId>junit-jupiter-engine<\/artifactId>\n-            <version>5.10.0<\/version>\n-            <scope>test<\/scope>\n-        <\/dependency>\n-   <\/dependencies>\n+   <properties>\n+        <project.build.sourceEncoding>UTF-8<\/project.build.sourceEncoding>\n+        <maven.compiler.source>23<\/maven.compiler.source>\n+        <maven.compiler.target>23<\/maven.compiler.target>\n+        <github.dir>${env.HOME}\/github<\/github.dir>\n+        <beehive.spirv.toolkit.dir>${github.dir}\/beehive-spirv-toolkit<\/beehive.spirv.toolkit.dir>\n+        <babylon.repo.name>babylon-grfrost-fork<\/babylon.repo.name>\n+        <babylon.dir>${github.dir}\/${babylon.repo.name}<\/babylon.dir>\n+        <hat.dir>${babylon.dir}\/hat<\/hat.dir>\n+        <hat.target>${hat.dir}\/maven-build<\/hat.target>\n+   <\/properties>\n@@ -18,0 +21,1 @@\n+\n@@ -19,1 +23,1 @@\n-          <id>default<\/id>                \n+          <id>default<\/id>\n@@ -29,0 +33,1 @@\n+\n@@ -31,0 +36,5 @@\n+          <activation>\n+             <file>\n+                <exists>hattricks<\/exists>\n+             <\/file>\n+          <\/activation>\n@@ -39,0 +49,22 @@\n+   <build>\n+      <plugins>\n+          <plugin>\n+             <groupId>org.apache.maven.plugins<\/groupId>\n+             <artifactId>maven-compiler-plugin<\/artifactId>\n+             <version>3.11.0<\/version>\n+             <configuration>\n+                <compilerArgs>\n+                    <arg>--enable-preview<\/arg>\n+                    <arg>--add-exports=java.base\/jdk.internal=ALL-UNNAMED<\/arg>\n+                    <arg>--add-exports=java.base\/jdk.internal.vm.annotation=ALL-UNNAMED<\/arg>\n+                <\/compilerArgs>\n+                <source>${maven.compiler.source}<\/source>\n+                <target>${maven.compiler.target}<\/target>\n+                <showDeprecation>true<\/showDeprecation>\n+                <failOnError>true<\/failOnError>\n+                <showWarnings>true<\/showWarnings>\n+                <showDeprecation>true<\/showDeprecation>\n+            <\/configuration>\n+         <\/plugin>\n+     <\/plugins>\n+   <\/build>\n","filename":"hat\/pom.xml","additions":42,"deletions":10,"binary":false,"changes":52,"status":"modified"}]}