{"files":[{"patch":"@@ -24,5 +24,1 @@\n-import org.testng.Assert;\n-import org.testng.annotations.Test;\n-import org.testng.annotations.DataProvider;\n-\n-import java.io.IOException;\n+import java.lang.invoke.MethodHandles;\n@@ -32,1 +28,4 @@\n-import java.util.List;\n+\n+import org.testng.Assert;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Test;\n@@ -42,1 +41,1 @@\n-    public void testThrowsCorrectException(String methodName, Class<?> expectedExceptionType) throws NoSuchMethodException {\n+    public void testThrowsCorrectException(String methodName, Class<? extends Throwable> expectedExceptionType) throws NoSuchMethodException {\n@@ -44,6 +43,1 @@\n-        try {\n-            Interpreter.invoke(method.getCodeModel().orElseThrow(), List.of());\n-            Assert.fail(\"invoke should throw\");\n-        } catch (Throwable throwable) {\n-            Assert.assertEquals(throwable.getClass(), expectedExceptionType);\n-        }\n+        Assert.assertThrows(expectedExceptionType, () -> Interpreter.invoke(MethodHandles.lookup(), method.getCodeModel().orElseThrow()));\n@@ -55,3 +49,3 @@\n-                {\"throwsError\", Error.class},\n-                {\"throwsRuntimeException\", RuntimeException.class},\n-                {\"throwsCheckedException\", IOException.class},\n+                {\"throwsError\", TestError.class},\n+                {\"throwsRuntimeException\", TestRuntimeException.class},\n+                {\"throwsCheckedException\", TestCheckedException.class},\n@@ -61,0 +55,12 @@\n+    public static class TestError extends Error {\n+\n+    }\n+\n+    public static class TestRuntimeException extends RuntimeException {\n+\n+    }\n+\n+    public static class TestCheckedException extends Exception {\n+\n+    }\n+\n@@ -63,1 +69,1 @@\n-        throw new Error();\n+        throw new TestError();\n@@ -68,1 +74,1 @@\n-        throw new RuntimeException();\n+        throw new TestRuntimeException();\n@@ -72,2 +78,2 @@\n-    static void throwsCheckedException() throws IOException {\n-        throw new IOException();\n+    static void throwsCheckedException() throws TestCheckedException {\n+        throw new TestCheckedException();\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/interpreter\/TestThrowing.java","additions":26,"deletions":20,"binary":false,"changes":46,"status":"modified"}]}