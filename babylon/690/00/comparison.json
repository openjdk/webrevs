{"files":[{"patch":"@@ -440,1 +440,1 @@\n-        w.write(s.name() + \"(\" + s.name() + \" that, CopyContext cc) {\\n\");\n+        w.write(s.name() + \"(\" + s.name() + \" that, CodeContext cc) {\\n\");\n@@ -446,1 +446,1 @@\n-        w.write(\"public \" + s.name() + \" transform(CopyContext cc, OpTransformer ot) {\\n\");\n+        w.write(\"public \" + s.name() + \" transform(CodeContext cc, CodeTransformer ot) {\\n\");\n","filename":"cr-examples\/onnx\/opgen\/src\/main\/java\/oracle\/code\/onnx\/opgen\/OpGen.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -87,1 +87,1 @@\n-            b.body(lambda.body(), List.of(), OpTransformer.COPYING_TRANSFORMER);\n+            b.body(lambda.body(), List.of(), CodeTransformer.COPYING_TRANSFORMER);\n@@ -215,1 +215,1 @@\n-            f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+            f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -317,1 +317,1 @@\n-            b.body(func.body(), b.parameters(), toOnnxOpTransformer(tc, pe));\n+            b.body(func.body(), b.parameters(), toOnnxCodeTransformer(tc, pe));\n@@ -320,1 +320,1 @@\n-        return CoreOp.func(func2.funcName(), tc.convertType(func2)).body(b -> b.body(func2.body(), b.parameters(), OpTransformer.COPYING_TRANSFORMER));\n+        return CoreOp.func(func2.funcName(), tc.convertType(func2)).body(b -> b.body(func2.body(), b.parameters(), CodeTransformer.COPYING_TRANSFORMER));\n@@ -327,1 +327,1 @@\n-                CopyContext cc = bb.context();\n+                CodeContext cc = bb.context();\n@@ -368,1 +368,1 @@\n-    static OpTransformer toOnnxOpTransformer(TypeConvertor tc, OnnxPartialEvaluator pe) {\n+    static CodeTransformer toOnnxCodeTransformer(TypeConvertor tc, OnnxPartialEvaluator pe) {\n@@ -446,1 +446,1 @@\n-                            opArgs.add(transformBodyTranslateTypes(tc, lambda, bb, toOnnxOpTransformer(tc, pe)));\n+                            opArgs.add(transformBodyTranslateTypes(tc, lambda, bb, toOnnxCodeTransformer(tc, pe)));\n@@ -451,1 +451,1 @@\n-                        opArgs.add(transformBodyTranslateTypes(tc, lambda, bb, toOnnxOpTransformer(tc, pe)));\n+                        opArgs.add(transformBodyTranslateTypes(tc, lambda, bb, toOnnxCodeTransformer(tc, pe)));\n@@ -534,1 +534,1 @@\n-                                                    Block.Builder ancestor, OpTransformer ot) {\n+                                                    Block.Builder ancestor, CodeTransformer ot) {\n","filename":"cr-examples\/onnx\/src\/main\/java\/oracle\/code\/onnx\/compiler\/OnnxTransformer.java","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -110,1 +110,1 @@\n-        CopyContext cc = outEntryBlock.context();\n+        CodeContext cc = outEntryBlock.context();\n","filename":"cr-examples\/onnx\/src\/main\/java\/oracle\/code\/onnx\/compiler\/PartialEvaluator.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -160,1 +160,1 @@\n-        GroupQueryAttention(GroupQueryAttention that, CopyContext cc) {\n+        GroupQueryAttention(GroupQueryAttention that, CodeContext cc) {\n@@ -165,1 +165,1 @@\n-        public GroupQueryAttention transform(CopyContext cc, OpTransformer ot) {\n+        public GroupQueryAttention transform(CodeContext cc, CodeTransformer ot) {\n@@ -358,1 +358,1 @@\n-        MatMulNBits(MatMulNBits that, CopyContext cc) {\n+        MatMulNBits(MatMulNBits that, CodeContext cc) {\n@@ -363,1 +363,1 @@\n-        public MatMulNBits transform(CopyContext cc, OpTransformer ot) {\n+        public MatMulNBits transform(CodeContext cc, CodeTransformer ot) {\n@@ -527,1 +527,1 @@\n-        SkipSimplifiedLayerNormalization(SkipSimplifiedLayerNormalization that, CopyContext cc) {\n+        SkipSimplifiedLayerNormalization(SkipSimplifiedLayerNormalization that, CodeContext cc) {\n@@ -532,1 +532,1 @@\n-        public SkipSimplifiedLayerNormalization transform(CopyContext cc, OpTransformer ot) {\n+        public SkipSimplifiedLayerNormalization transform(CodeContext cc, CodeTransformer ot) {\n@@ -663,1 +663,1 @@\n-        If(If that, CopyContext cc, OpTransformer ot) {\n+        If(If that, CodeContext cc, CodeTransformer ot) {\n@@ -671,1 +671,1 @@\n-        public If transform(CopyContext cc, OpTransformer ot) {\n+        public If transform(CodeContext cc, CodeTransformer ot) {\n@@ -805,1 +805,1 @@\n-        Loop(ExplicitOnnxOps.Loop that, CopyContext cc, OpTransformer ot) {\n+        Loop(ExplicitOnnxOps.Loop that, CodeContext cc, CodeTransformer ot) {\n@@ -812,1 +812,1 @@\n-        public ExplicitOnnxOps.Loop transform(CopyContext cc, OpTransformer ot) {\n+        public ExplicitOnnxOps.Loop transform(CodeContext cc, CodeTransformer ot) {\n","filename":"cr-examples\/onnx\/src\/main\/java\/oracle\/code\/onnx\/ir\/ExplicitOnnxOps.java","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -259,1 +259,1 @@\n-    OnnxOp(OnnxOp that, CopyContext cc) {\n+    OnnxOp(OnnxOp that, CodeContext cc) {\n","filename":"cr-examples\/onnx\/src\/main\/java\/oracle\/code\/onnx\/ir\/OnnxOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -121,1 +121,1 @@\n-        Abs(Abs that, CopyContext cc) {\n+        Abs(Abs that, CodeContext cc) {\n@@ -126,1 +126,1 @@\n-        public Abs transform(CopyContext cc, OpTransformer ot) {\n+        public Abs transform(CodeContext cc, CodeTransformer ot) {\n@@ -235,1 +235,1 @@\n-        Acos(Acos that, CopyContext cc) {\n+        Acos(Acos that, CodeContext cc) {\n@@ -240,1 +240,1 @@\n-        public Acos transform(CopyContext cc, OpTransformer ot) {\n+        public Acos transform(CodeContext cc, CodeTransformer ot) {\n@@ -349,1 +349,1 @@\n-        Acosh(Acosh that, CopyContext cc) {\n+        Acosh(Acosh that, CodeContext cc) {\n@@ -354,1 +354,1 @@\n-        public Acosh transform(CopyContext cc, OpTransformer ot) {\n+        public Acosh transform(CodeContext cc, CodeTransformer ot) {\n@@ -495,1 +495,1 @@\n-        Adagrad(Adagrad that, CopyContext cc) {\n+        Adagrad(Adagrad that, CodeContext cc) {\n@@ -500,1 +500,1 @@\n-        public Adagrad transform(CopyContext cc, OpTransformer ot) {\n+        public Adagrad transform(CodeContext cc, CodeTransformer ot) {\n@@ -666,1 +666,1 @@\n-        Adam(Adam that, CopyContext cc) {\n+        Adam(Adam that, CodeContext cc) {\n@@ -671,1 +671,1 @@\n-        public Adam transform(CopyContext cc, OpTransformer ot) {\n+        public Adam transform(CodeContext cc, CodeTransformer ot) {\n@@ -814,1 +814,1 @@\n-        Add(Add that, CopyContext cc) {\n+        Add(Add that, CodeContext cc) {\n@@ -819,1 +819,1 @@\n-        public Add transform(CopyContext cc, OpTransformer ot) {\n+        public Add transform(CodeContext cc, CodeTransformer ot) {\n@@ -960,1 +960,1 @@\n-        AffineGrid(AffineGrid that, CopyContext cc) {\n+        AffineGrid(AffineGrid that, CodeContext cc) {\n@@ -965,1 +965,1 @@\n-        public AffineGrid transform(CopyContext cc, OpTransformer ot) {\n+        public AffineGrid transform(CodeContext cc, CodeTransformer ot) {\n@@ -1085,1 +1085,1 @@\n-        And(And that, CopyContext cc) {\n+        And(And that, CodeContext cc) {\n@@ -1090,1 +1090,1 @@\n-        public And transform(CopyContext cc, OpTransformer ot) {\n+        public And transform(CodeContext cc, CodeTransformer ot) {\n@@ -1231,1 +1231,1 @@\n-        ArgMax(ArgMax that, CopyContext cc) {\n+        ArgMax(ArgMax that, CodeContext cc) {\n@@ -1236,1 +1236,1 @@\n-        public ArgMax transform(CopyContext cc, OpTransformer ot) {\n+        public ArgMax transform(CodeContext cc, CodeTransformer ot) {\n@@ -1388,1 +1388,1 @@\n-        ArgMin(ArgMin that, CopyContext cc) {\n+        ArgMin(ArgMin that, CodeContext cc) {\n@@ -1393,1 +1393,1 @@\n-        public ArgMin transform(CopyContext cc, OpTransformer ot) {\n+        public ArgMin transform(CodeContext cc, CodeTransformer ot) {\n@@ -1518,1 +1518,1 @@\n-        ArrayFeatureExtractor(ArrayFeatureExtractor that, CopyContext cc) {\n+        ArrayFeatureExtractor(ArrayFeatureExtractor that, CodeContext cc) {\n@@ -1523,1 +1523,1 @@\n-        public ArrayFeatureExtractor transform(CopyContext cc, OpTransformer ot) {\n+        public ArrayFeatureExtractor transform(CodeContext cc, CodeTransformer ot) {\n@@ -1636,1 +1636,1 @@\n-        Asin(Asin that, CopyContext cc) {\n+        Asin(Asin that, CodeContext cc) {\n@@ -1641,1 +1641,1 @@\n-        public Asin transform(CopyContext cc, OpTransformer ot) {\n+        public Asin transform(CodeContext cc, CodeTransformer ot) {\n@@ -1750,1 +1750,1 @@\n-        Asinh(Asinh that, CopyContext cc) {\n+        Asinh(Asinh that, CodeContext cc) {\n@@ -1755,1 +1755,1 @@\n-        public Asinh transform(CopyContext cc, OpTransformer ot) {\n+        public Asinh transform(CodeContext cc, CodeTransformer ot) {\n@@ -1864,1 +1864,1 @@\n-        Atan(Atan that, CopyContext cc) {\n+        Atan(Atan that, CodeContext cc) {\n@@ -1869,1 +1869,1 @@\n-        public Atan transform(CopyContext cc, OpTransformer ot) {\n+        public Atan transform(CodeContext cc, CodeTransformer ot) {\n@@ -1978,1 +1978,1 @@\n-        Atanh(Atanh that, CopyContext cc) {\n+        Atanh(Atanh that, CodeContext cc) {\n@@ -1983,1 +1983,1 @@\n-        public Atanh transform(CopyContext cc, OpTransformer ot) {\n+        public Atanh transform(CodeContext cc, CodeTransformer ot) {\n@@ -2135,1 +2135,1 @@\n-        Attention(Attention that, CopyContext cc) {\n+        Attention(Attention that, CodeContext cc) {\n@@ -2140,1 +2140,1 @@\n-        public Attention transform(CopyContext cc, OpTransformer ot) {\n+        public Attention transform(CodeContext cc, CodeTransformer ot) {\n@@ -2344,1 +2344,1 @@\n-        AveragePool(AveragePool that, CopyContext cc) {\n+        AveragePool(AveragePool that, CodeContext cc) {\n@@ -2349,1 +2349,1 @@\n-        public AveragePool transform(CopyContext cc, OpTransformer ot) {\n+        public AveragePool transform(CodeContext cc, CodeTransformer ot) {\n@@ -2529,1 +2529,1 @@\n-        BatchNormalization(BatchNormalization that, CopyContext cc) {\n+        BatchNormalization(BatchNormalization that, CodeContext cc) {\n@@ -2534,1 +2534,1 @@\n-        public BatchNormalization transform(CopyContext cc, OpTransformer ot) {\n+        public BatchNormalization transform(CodeContext cc, CodeTransformer ot) {\n@@ -2702,1 +2702,1 @@\n-        Bernoulli(Bernoulli that, CopyContext cc) {\n+        Bernoulli(Bernoulli that, CodeContext cc) {\n@@ -2707,1 +2707,1 @@\n-        public Bernoulli transform(CopyContext cc, OpTransformer ot) {\n+        public Bernoulli transform(CodeContext cc, CodeTransformer ot) {\n@@ -2852,1 +2852,1 @@\n-        Binarizer(Binarizer that, CopyContext cc) {\n+        Binarizer(Binarizer that, CodeContext cc) {\n@@ -2857,1 +2857,1 @@\n-        public Binarizer transform(CopyContext cc, OpTransformer ot) {\n+        public Binarizer transform(CodeContext cc, CodeTransformer ot) {\n@@ -2998,1 +2998,1 @@\n-        BitShift(BitShift that, CopyContext cc) {\n+        BitShift(BitShift that, CodeContext cc) {\n@@ -3003,1 +3003,1 @@\n-        public BitShift transform(CopyContext cc, OpTransformer ot) {\n+        public BitShift transform(CodeContext cc, CodeTransformer ot) {\n@@ -3122,1 +3122,1 @@\n-        BitwiseAnd(BitwiseAnd that, CopyContext cc) {\n+        BitwiseAnd(BitwiseAnd that, CodeContext cc) {\n@@ -3127,1 +3127,1 @@\n-        public BitwiseAnd transform(CopyContext cc, OpTransformer ot) {\n+        public BitwiseAnd transform(CodeContext cc, CodeTransformer ot) {\n@@ -3240,1 +3240,1 @@\n-        BitwiseNot(BitwiseNot that, CopyContext cc) {\n+        BitwiseNot(BitwiseNot that, CodeContext cc) {\n@@ -3245,1 +3245,1 @@\n-        public BitwiseNot transform(CopyContext cc, OpTransformer ot) {\n+        public BitwiseNot transform(CodeContext cc, CodeTransformer ot) {\n@@ -3355,1 +3355,1 @@\n-        BitwiseOr(BitwiseOr that, CopyContext cc) {\n+        BitwiseOr(BitwiseOr that, CodeContext cc) {\n@@ -3360,1 +3360,1 @@\n-        public BitwiseOr transform(CopyContext cc, OpTransformer ot) {\n+        public BitwiseOr transform(CodeContext cc, CodeTransformer ot) {\n@@ -3474,1 +3474,1 @@\n-        BitwiseXor(BitwiseXor that, CopyContext cc) {\n+        BitwiseXor(BitwiseXor that, CodeContext cc) {\n@@ -3479,1 +3479,1 @@\n-        public BitwiseXor transform(CopyContext cc, OpTransformer ot) {\n+        public BitwiseXor transform(CodeContext cc, CodeTransformer ot) {\n@@ -3620,1 +3620,1 @@\n-        BlackmanWindow(BlackmanWindow that, CopyContext cc) {\n+        BlackmanWindow(BlackmanWindow that, CodeContext cc) {\n@@ -3625,1 +3625,1 @@\n-        public BlackmanWindow transform(CopyContext cc, OpTransformer ot) {\n+        public BlackmanWindow transform(CodeContext cc, CodeTransformer ot) {\n@@ -3773,1 +3773,1 @@\n-        Cast(Cast that, CopyContext cc) {\n+        Cast(Cast that, CodeContext cc) {\n@@ -3778,1 +3778,1 @@\n-        public Cast transform(CopyContext cc, OpTransformer ot) {\n+        public Cast transform(CodeContext cc, CodeTransformer ot) {\n@@ -3931,1 +3931,1 @@\n-        CastLike(CastLike that, CopyContext cc) {\n+        CastLike(CastLike that, CodeContext cc) {\n@@ -3936,1 +3936,1 @@\n-        public CastLike transform(CopyContext cc, OpTransformer ot) {\n+        public CastLike transform(CodeContext cc, CodeTransformer ot) {\n@@ -4088,1 +4088,1 @@\n-        CastMap(CastMap that, CopyContext cc) {\n+        CastMap(CastMap that, CodeContext cc) {\n@@ -4093,1 +4093,1 @@\n-        public CastMap transform(CopyContext cc, OpTransformer ot) {\n+        public CastMap transform(CodeContext cc, CodeTransformer ot) {\n@@ -4247,1 +4247,1 @@\n-        CategoryMapper(CategoryMapper that, CopyContext cc) {\n+        CategoryMapper(CategoryMapper that, CodeContext cc) {\n@@ -4252,1 +4252,1 @@\n-        public CategoryMapper transform(CopyContext cc, OpTransformer ot) {\n+        public CategoryMapper transform(CodeContext cc, CodeTransformer ot) {\n@@ -4381,1 +4381,1 @@\n-        Ceil(Ceil that, CopyContext cc) {\n+        Ceil(Ceil that, CodeContext cc) {\n@@ -4386,1 +4386,1 @@\n-        public Ceil transform(CopyContext cc, OpTransformer ot) {\n+        public Ceil transform(CodeContext cc, CodeTransformer ot) {\n@@ -4521,1 +4521,1 @@\n-        Celu(Celu that, CopyContext cc) {\n+        Celu(Celu that, CodeContext cc) {\n@@ -4526,1 +4526,1 @@\n-        public Celu transform(CopyContext cc, OpTransformer ot) {\n+        public Celu transform(CodeContext cc, CodeTransformer ot) {\n@@ -4668,1 +4668,1 @@\n-        CenterCropPad(CenterCropPad that, CopyContext cc) {\n+        CenterCropPad(CenterCropPad that, CodeContext cc) {\n@@ -4673,1 +4673,1 @@\n-        public CenterCropPad transform(CopyContext cc, OpTransformer ot) {\n+        public CenterCropPad transform(CodeContext cc, CodeTransformer ot) {\n@@ -4793,1 +4793,1 @@\n-        Clip(Clip that, CopyContext cc) {\n+        Clip(Clip that, CodeContext cc) {\n@@ -4798,1 +4798,1 @@\n-        public Clip transform(CopyContext cc, OpTransformer ot) {\n+        public Clip transform(CodeContext cc, CodeTransformer ot) {\n@@ -4947,1 +4947,1 @@\n-        Col2Im(Col2Im that, CopyContext cc) {\n+        Col2Im(Col2Im that, CodeContext cc) {\n@@ -4952,1 +4952,1 @@\n-        public Col2Im transform(CopyContext cc, OpTransformer ot) {\n+        public Col2Im transform(CodeContext cc, CodeTransformer ot) {\n@@ -5112,1 +5112,1 @@\n-        Compress(Compress that, CopyContext cc) {\n+        Compress(Compress that, CodeContext cc) {\n@@ -5117,1 +5117,1 @@\n-        public Compress transform(CopyContext cc, OpTransformer ot) {\n+        public Compress transform(CodeContext cc, CodeTransformer ot) {\n@@ -5261,1 +5261,1 @@\n-        Concat(Concat that, CopyContext cc) {\n+        Concat(Concat that, CodeContext cc) {\n@@ -5266,1 +5266,1 @@\n-        public Concat transform(CopyContext cc, OpTransformer ot) {\n+        public Concat transform(CodeContext cc, CodeTransformer ot) {\n@@ -5408,1 +5408,1 @@\n-        ConcatFromSequence(ConcatFromSequence that, CopyContext cc) {\n+        ConcatFromSequence(ConcatFromSequence that, CodeContext cc) {\n@@ -5413,1 +5413,1 @@\n-        public ConcatFromSequence transform(CopyContext cc, OpTransformer ot) {\n+        public ConcatFromSequence transform(CodeContext cc, CodeTransformer ot) {\n@@ -5544,1 +5544,1 @@\n-        Constant(Constant that, CopyContext cc) {\n+        Constant(Constant that, CodeContext cc) {\n@@ -5549,1 +5549,1 @@\n-        public Constant transform(CopyContext cc, OpTransformer ot) {\n+        public Constant transform(CodeContext cc, CodeTransformer ot) {\n@@ -5721,1 +5721,1 @@\n-        ConstantOfShape(ConstantOfShape that, CopyContext cc) {\n+        ConstantOfShape(ConstantOfShape that, CodeContext cc) {\n@@ -5726,1 +5726,1 @@\n-        public ConstantOfShape transform(CopyContext cc, OpTransformer ot) {\n+        public ConstantOfShape transform(CodeContext cc, CodeTransformer ot) {\n@@ -5873,1 +5873,1 @@\n-        Conv(Conv that, CopyContext cc) {\n+        Conv(Conv that, CodeContext cc) {\n@@ -5878,1 +5878,1 @@\n-        public Conv transform(CopyContext cc, OpTransformer ot) {\n+        public Conv transform(CodeContext cc, CodeTransformer ot) {\n@@ -6062,1 +6062,1 @@\n-        ConvInteger(ConvInteger that, CopyContext cc) {\n+        ConvInteger(ConvInteger that, CodeContext cc) {\n@@ -6067,1 +6067,1 @@\n-        public ConvInteger transform(CopyContext cc, OpTransformer ot) {\n+        public ConvInteger transform(CodeContext cc, CodeTransformer ot) {\n@@ -6255,1 +6255,1 @@\n-        ConvTranspose(ConvTranspose that, CopyContext cc) {\n+        ConvTranspose(ConvTranspose that, CodeContext cc) {\n@@ -6260,1 +6260,1 @@\n-        public ConvTranspose transform(CopyContext cc, OpTransformer ot) {\n+        public ConvTranspose transform(CodeContext cc, CodeTransformer ot) {\n@@ -6418,1 +6418,1 @@\n-        Cos(Cos that, CopyContext cc) {\n+        Cos(Cos that, CodeContext cc) {\n@@ -6423,1 +6423,1 @@\n-        public Cos transform(CopyContext cc, OpTransformer ot) {\n+        public Cos transform(CodeContext cc, CodeTransformer ot) {\n@@ -6532,1 +6532,1 @@\n-        Cosh(Cosh that, CopyContext cc) {\n+        Cosh(Cosh that, CodeContext cc) {\n@@ -6537,1 +6537,1 @@\n-        public Cosh transform(CopyContext cc, OpTransformer ot) {\n+        public Cosh transform(CodeContext cc, CodeTransformer ot) {\n@@ -6675,1 +6675,1 @@\n-        CumSum(CumSum that, CopyContext cc) {\n+        CumSum(CumSum that, CodeContext cc) {\n@@ -6680,1 +6680,1 @@\n-        public CumSum transform(CopyContext cc, OpTransformer ot) {\n+        public CumSum transform(CodeContext cc, CodeTransformer ot) {\n@@ -6833,1 +6833,1 @@\n-        DFT(DFT that, CopyContext cc) {\n+        DFT(DFT that, CodeContext cc) {\n@@ -6838,1 +6838,1 @@\n-        public DFT transform(CopyContext cc, OpTransformer ot) {\n+        public DFT transform(CodeContext cc, CodeTransformer ot) {\n@@ -7002,1 +7002,1 @@\n-        DeformConv(DeformConv that, CopyContext cc) {\n+        DeformConv(DeformConv that, CodeContext cc) {\n@@ -7007,1 +7007,1 @@\n-        public DeformConv transform(CopyContext cc, OpTransformer ot) {\n+        public DeformConv transform(CodeContext cc, CodeTransformer ot) {\n@@ -7191,1 +7191,1 @@\n-        DepthToSpace(DepthToSpace that, CopyContext cc) {\n+        DepthToSpace(DepthToSpace that, CodeContext cc) {\n@@ -7196,1 +7196,1 @@\n-        public DepthToSpace transform(CopyContext cc, OpTransformer ot) {\n+        public DepthToSpace transform(CodeContext cc, CodeTransformer ot) {\n@@ -7347,1 +7347,1 @@\n-        DequantizeLinear(DequantizeLinear that, CopyContext cc) {\n+        DequantizeLinear(DequantizeLinear that, CodeContext cc) {\n@@ -7352,1 +7352,1 @@\n-        public DequantizeLinear transform(CopyContext cc, OpTransformer ot) {\n+        public DequantizeLinear transform(CodeContext cc, CodeTransformer ot) {\n@@ -7485,1 +7485,1 @@\n-        Det(Det that, CopyContext cc) {\n+        Det(Det that, CodeContext cc) {\n@@ -7490,1 +7490,1 @@\n-        public Det transform(CopyContext cc, OpTransformer ot) {\n+        public Det transform(CodeContext cc, CodeTransformer ot) {\n@@ -7627,1 +7627,1 @@\n-        DictVectorizer(DictVectorizer that, CopyContext cc) {\n+        DictVectorizer(DictVectorizer that, CodeContext cc) {\n@@ -7632,1 +7632,1 @@\n-        public DictVectorizer transform(CopyContext cc, OpTransformer ot) {\n+        public DictVectorizer transform(CodeContext cc, CodeTransformer ot) {\n@@ -7752,1 +7752,1 @@\n-        Div(Div that, CopyContext cc) {\n+        Div(Div that, CodeContext cc) {\n@@ -7757,1 +7757,1 @@\n-        public Div transform(CopyContext cc, OpTransformer ot) {\n+        public Div transform(CodeContext cc, CodeTransformer ot) {\n@@ -7901,1 +7901,1 @@\n-        Dropout(Dropout that, CopyContext cc) {\n+        Dropout(Dropout that, CodeContext cc) {\n@@ -7906,1 +7906,1 @@\n-        public Dropout transform(CopyContext cc, OpTransformer ot) {\n+        public Dropout transform(CodeContext cc, CodeTransformer ot) {\n@@ -8033,1 +8033,1 @@\n-        DynamicQuantizeLinear(DynamicQuantizeLinear that, CopyContext cc) {\n+        DynamicQuantizeLinear(DynamicQuantizeLinear that, CodeContext cc) {\n@@ -8038,1 +8038,1 @@\n-        public DynamicQuantizeLinear transform(CopyContext cc, OpTransformer ot) {\n+        public DynamicQuantizeLinear transform(CodeContext cc, CodeTransformer ot) {\n@@ -8173,1 +8173,1 @@\n-        Einsum(Einsum that, CopyContext cc) {\n+        Einsum(Einsum that, CodeContext cc) {\n@@ -8178,1 +8178,1 @@\n-        public Einsum transform(CopyContext cc, OpTransformer ot) {\n+        public Einsum transform(CodeContext cc, CodeTransformer ot) {\n@@ -8318,1 +8318,1 @@\n-        Elu(Elu that, CopyContext cc) {\n+        Elu(Elu that, CodeContext cc) {\n@@ -8323,1 +8323,1 @@\n-        public Elu transform(CopyContext cc, OpTransformer ot) {\n+        public Elu transform(CodeContext cc, CodeTransformer ot) {\n@@ -8439,1 +8439,1 @@\n-        Equal(Equal that, CopyContext cc) {\n+        Equal(Equal that, CodeContext cc) {\n@@ -8444,1 +8444,1 @@\n-        public Equal transform(CopyContext cc, OpTransformer ot) {\n+        public Equal transform(CodeContext cc, CodeTransformer ot) {\n@@ -8557,1 +8557,1 @@\n-        Erf(Erf that, CopyContext cc) {\n+        Erf(Erf that, CodeContext cc) {\n@@ -8562,1 +8562,1 @@\n-        public Erf transform(CopyContext cc, OpTransformer ot) {\n+        public Erf transform(CodeContext cc, CodeTransformer ot) {\n@@ -8671,1 +8671,1 @@\n-        Exp(Exp that, CopyContext cc) {\n+        Exp(Exp that, CodeContext cc) {\n@@ -8676,1 +8676,1 @@\n-        public Exp transform(CopyContext cc, OpTransformer ot) {\n+        public Exp transform(CodeContext cc, CodeTransformer ot) {\n@@ -8786,1 +8786,1 @@\n-        Expand(Expand that, CopyContext cc) {\n+        Expand(Expand that, CodeContext cc) {\n@@ -8791,1 +8791,1 @@\n-        public Expand transform(CopyContext cc, OpTransformer ot) {\n+        public Expand transform(CodeContext cc, CodeTransformer ot) {\n@@ -8932,1 +8932,1 @@\n-        EyeLike(EyeLike that, CopyContext cc) {\n+        EyeLike(EyeLike that, CodeContext cc) {\n@@ -8937,1 +8937,1 @@\n-        public EyeLike transform(CopyContext cc, OpTransformer ot) {\n+        public EyeLike transform(CodeContext cc, CodeTransformer ot) {\n@@ -9082,1 +9082,1 @@\n-        FeatureVectorizer(FeatureVectorizer that, CopyContext cc) {\n+        FeatureVectorizer(FeatureVectorizer that, CodeContext cc) {\n@@ -9087,1 +9087,1 @@\n-        public FeatureVectorizer transform(CopyContext cc, OpTransformer ot) {\n+        public FeatureVectorizer transform(CodeContext cc, CodeTransformer ot) {\n@@ -9227,1 +9227,1 @@\n-        Flatten(Flatten that, CopyContext cc) {\n+        Flatten(Flatten that, CodeContext cc) {\n@@ -9232,1 +9232,1 @@\n-        public Flatten transform(CopyContext cc, OpTransformer ot) {\n+        public Flatten transform(CodeContext cc, CodeTransformer ot) {\n@@ -9346,1 +9346,1 @@\n-        Floor(Floor that, CopyContext cc) {\n+        Floor(Floor that, CodeContext cc) {\n@@ -9351,1 +9351,1 @@\n-        public Floor transform(CopyContext cc, OpTransformer ot) {\n+        public Floor transform(CodeContext cc, CodeTransformer ot) {\n@@ -9500,1 +9500,1 @@\n-        GRU(GRU that, CopyContext cc) {\n+        GRU(GRU that, CodeContext cc) {\n@@ -9505,1 +9505,1 @@\n-        public GRU transform(CopyContext cc, OpTransformer ot) {\n+        public GRU transform(CodeContext cc, CodeTransformer ot) {\n@@ -9705,1 +9705,1 @@\n-        Gather(Gather that, CopyContext cc) {\n+        Gather(Gather that, CodeContext cc) {\n@@ -9710,1 +9710,1 @@\n-        public Gather transform(CopyContext cc, OpTransformer ot) {\n+        public Gather transform(CodeContext cc, CodeTransformer ot) {\n@@ -9856,1 +9856,1 @@\n-        GatherElements(GatherElements that, CopyContext cc) {\n+        GatherElements(GatherElements that, CodeContext cc) {\n@@ -9861,1 +9861,1 @@\n-        public GatherElements transform(CopyContext cc, OpTransformer ot) {\n+        public GatherElements transform(CodeContext cc, CodeTransformer ot) {\n@@ -10006,1 +10006,1 @@\n-        GatherND(GatherND that, CopyContext cc) {\n+        GatherND(GatherND that, CodeContext cc) {\n@@ -10011,1 +10011,1 @@\n-        public GatherND transform(CopyContext cc, OpTransformer ot) {\n+        public GatherND transform(CodeContext cc, CodeTransformer ot) {\n@@ -10155,1 +10155,1 @@\n-        Gelu(Gelu that, CopyContext cc) {\n+        Gelu(Gelu that, CodeContext cc) {\n@@ -10160,1 +10160,1 @@\n-        public Gelu transform(CopyContext cc, OpTransformer ot) {\n+        public Gelu transform(CodeContext cc, CodeTransformer ot) {\n@@ -10305,1 +10305,1 @@\n-        Gemm(Gemm that, CopyContext cc) {\n+        Gemm(Gemm that, CodeContext cc) {\n@@ -10310,1 +10310,1 @@\n-        public Gemm transform(CopyContext cc, OpTransformer ot) {\n+        public Gemm transform(CodeContext cc, CodeTransformer ot) {\n@@ -10448,1 +10448,1 @@\n-        GlobalAveragePool(GlobalAveragePool that, CopyContext cc) {\n+        GlobalAveragePool(GlobalAveragePool that, CodeContext cc) {\n@@ -10453,1 +10453,1 @@\n-        public GlobalAveragePool transform(CopyContext cc, OpTransformer ot) {\n+        public GlobalAveragePool transform(CodeContext cc, CodeTransformer ot) {\n@@ -10588,1 +10588,1 @@\n-        GlobalLpPool(GlobalLpPool that, CopyContext cc) {\n+        GlobalLpPool(GlobalLpPool that, CodeContext cc) {\n@@ -10593,1 +10593,1 @@\n-        public GlobalLpPool transform(CopyContext cc, OpTransformer ot) {\n+        public GlobalLpPool transform(CodeContext cc, CodeTransformer ot) {\n@@ -10707,1 +10707,1 @@\n-        GlobalMaxPool(GlobalMaxPool that, CopyContext cc) {\n+        GlobalMaxPool(GlobalMaxPool that, CodeContext cc) {\n@@ -10712,1 +10712,1 @@\n-        public GlobalMaxPool transform(CopyContext cc, OpTransformer ot) {\n+        public GlobalMaxPool transform(CodeContext cc, CodeTransformer ot) {\n@@ -10850,1 +10850,1 @@\n-        Gradient(Gradient that, CopyContext cc) {\n+        Gradient(Gradient that, CodeContext cc) {\n@@ -10855,1 +10855,1 @@\n-        public Gradient transform(CopyContext cc, OpTransformer ot) {\n+        public Gradient transform(CodeContext cc, CodeTransformer ot) {\n@@ -10981,1 +10981,1 @@\n-        Greater(Greater that, CopyContext cc) {\n+        Greater(Greater that, CodeContext cc) {\n@@ -10986,1 +10986,1 @@\n-        public Greater transform(CopyContext cc, OpTransformer ot) {\n+        public Greater transform(CodeContext cc, CodeTransformer ot) {\n@@ -11101,1 +11101,1 @@\n-        GreaterOrEqual(GreaterOrEqual that, CopyContext cc) {\n+        GreaterOrEqual(GreaterOrEqual that, CodeContext cc) {\n@@ -11106,1 +11106,1 @@\n-        public GreaterOrEqual transform(CopyContext cc, OpTransformer ot) {\n+        public GreaterOrEqual transform(CodeContext cc, CodeTransformer ot) {\n@@ -11249,1 +11249,1 @@\n-        GridSample(GridSample that, CopyContext cc) {\n+        GridSample(GridSample that, CodeContext cc) {\n@@ -11254,1 +11254,1 @@\n-        public GridSample transform(CopyContext cc, OpTransformer ot) {\n+        public GridSample transform(CodeContext cc, CodeTransformer ot) {\n@@ -11412,1 +11412,1 @@\n-        GroupNormalization(GroupNormalization that, CopyContext cc) {\n+        GroupNormalization(GroupNormalization that, CodeContext cc) {\n@@ -11417,1 +11417,1 @@\n-        public GroupNormalization transform(CopyContext cc, OpTransformer ot) {\n+        public GroupNormalization transform(CodeContext cc, CodeTransformer ot) {\n@@ -11577,1 +11577,1 @@\n-        HammingWindow(HammingWindow that, CopyContext cc) {\n+        HammingWindow(HammingWindow that, CodeContext cc) {\n@@ -11582,1 +11582,1 @@\n-        public HammingWindow transform(CopyContext cc, OpTransformer ot) {\n+        public HammingWindow transform(CodeContext cc, CodeTransformer ot) {\n@@ -11729,1 +11729,1 @@\n-        HannWindow(HannWindow that, CopyContext cc) {\n+        HannWindow(HannWindow that, CodeContext cc) {\n@@ -11734,1 +11734,1 @@\n-        public HannWindow transform(CopyContext cc, OpTransformer ot) {\n+        public HannWindow transform(CodeContext cc, CodeTransformer ot) {\n@@ -11880,1 +11880,1 @@\n-        HardSigmoid(HardSigmoid that, CopyContext cc) {\n+        HardSigmoid(HardSigmoid that, CodeContext cc) {\n@@ -11885,1 +11885,1 @@\n-        public HardSigmoid transform(CopyContext cc, OpTransformer ot) {\n+        public HardSigmoid transform(CodeContext cc, CodeTransformer ot) {\n@@ -12004,1 +12004,1 @@\n-        HardSwish(HardSwish that, CopyContext cc) {\n+        HardSwish(HardSwish that, CodeContext cc) {\n@@ -12009,1 +12009,1 @@\n-        public HardSwish transform(CopyContext cc, OpTransformer ot) {\n+        public HardSwish transform(CodeContext cc, CodeTransformer ot) {\n@@ -12144,1 +12144,1 @@\n-        Hardmax(Hardmax that, CopyContext cc) {\n+        Hardmax(Hardmax that, CodeContext cc) {\n@@ -12149,1 +12149,1 @@\n-        public Hardmax transform(CopyContext cc, OpTransformer ot) {\n+        public Hardmax transform(CodeContext cc, CodeTransformer ot) {\n@@ -12263,1 +12263,1 @@\n-        Identity(Identity that, CopyContext cc) {\n+        Identity(Identity that, CodeContext cc) {\n@@ -12268,1 +12268,1 @@\n-        public Identity transform(CopyContext cc, OpTransformer ot) {\n+        public Identity transform(CodeContext cc, CodeTransformer ot) {\n@@ -12404,1 +12404,1 @@\n-        ImageDecoder(ImageDecoder that, CopyContext cc) {\n+        ImageDecoder(ImageDecoder that, CodeContext cc) {\n@@ -12409,1 +12409,1 @@\n-        public ImageDecoder transform(CopyContext cc, OpTransformer ot) {\n+        public ImageDecoder transform(CodeContext cc, CodeTransformer ot) {\n@@ -12552,1 +12552,1 @@\n-        Imputer(Imputer that, CopyContext cc) {\n+        Imputer(Imputer that, CodeContext cc) {\n@@ -12557,1 +12557,1 @@\n-        public Imputer transform(CopyContext cc, OpTransformer ot) {\n+        public Imputer transform(CodeContext cc, CodeTransformer ot) {\n@@ -12714,1 +12714,1 @@\n-        InstanceNormalization(InstanceNormalization that, CopyContext cc) {\n+        InstanceNormalization(InstanceNormalization that, CodeContext cc) {\n@@ -12719,1 +12719,1 @@\n-        public InstanceNormalization transform(CopyContext cc, OpTransformer ot) {\n+        public InstanceNormalization transform(CodeContext cc, CodeTransformer ot) {\n@@ -12869,1 +12869,1 @@\n-        IsInf(IsInf that, CopyContext cc) {\n+        IsInf(IsInf that, CodeContext cc) {\n@@ -12874,1 +12874,1 @@\n-        public IsInf transform(CopyContext cc, OpTransformer ot) {\n+        public IsInf transform(CodeContext cc, CodeTransformer ot) {\n@@ -12994,1 +12994,1 @@\n-        IsNaN(IsNaN that, CopyContext cc) {\n+        IsNaN(IsNaN that, CodeContext cc) {\n@@ -12999,1 +12999,1 @@\n-        public IsNaN transform(CopyContext cc, OpTransformer ot) {\n+        public IsNaN transform(CodeContext cc, CodeTransformer ot) {\n@@ -13137,1 +13137,1 @@\n-        LRN(LRN that, CopyContext cc) {\n+        LRN(LRN that, CodeContext cc) {\n@@ -13142,1 +13142,1 @@\n-        public LRN transform(CopyContext cc, OpTransformer ot) {\n+        public LRN transform(CodeContext cc, CodeTransformer ot) {\n@@ -13314,1 +13314,1 @@\n-        LSTM(LSTM that, CopyContext cc) {\n+        LSTM(LSTM that, CodeContext cc) {\n@@ -13319,1 +13319,1 @@\n-        public LSTM transform(CopyContext cc, OpTransformer ot) {\n+        public LSTM transform(CodeContext cc, CodeTransformer ot) {\n@@ -13539,1 +13539,1 @@\n-        LabelEncoder(LabelEncoder that, CopyContext cc) {\n+        LabelEncoder(LabelEncoder that, CodeContext cc) {\n@@ -13544,1 +13544,1 @@\n-        public LabelEncoder transform(CopyContext cc, OpTransformer ot) {\n+        public LabelEncoder transform(CodeContext cc, CodeTransformer ot) {\n@@ -13746,1 +13746,1 @@\n-        LayerNormalization(LayerNormalization that, CopyContext cc) {\n+        LayerNormalization(LayerNormalization that, CodeContext cc) {\n@@ -13751,1 +13751,1 @@\n-        public LayerNormalization transform(CopyContext cc, OpTransformer ot) {\n+        public LayerNormalization transform(CodeContext cc, CodeTransformer ot) {\n@@ -13910,1 +13910,1 @@\n-        LeakyRelu(LeakyRelu that, CopyContext cc) {\n+        LeakyRelu(LeakyRelu that, CodeContext cc) {\n@@ -13915,1 +13915,1 @@\n-        public LeakyRelu transform(CopyContext cc, OpTransformer ot) {\n+        public LeakyRelu transform(CodeContext cc, CodeTransformer ot) {\n@@ -14031,1 +14031,1 @@\n-        Less(Less that, CopyContext cc) {\n+        Less(Less that, CodeContext cc) {\n@@ -14036,1 +14036,1 @@\n-        public Less transform(CopyContext cc, OpTransformer ot) {\n+        public Less transform(CodeContext cc, CodeTransformer ot) {\n@@ -14151,1 +14151,1 @@\n-        LessOrEqual(LessOrEqual that, CopyContext cc) {\n+        LessOrEqual(LessOrEqual that, CodeContext cc) {\n@@ -14156,1 +14156,1 @@\n-        public LessOrEqual transform(CopyContext cc, OpTransformer ot) {\n+        public LessOrEqual transform(CodeContext cc, CodeTransformer ot) {\n@@ -14302,1 +14302,1 @@\n-        LinearClassifier(LinearClassifier that, CopyContext cc) {\n+        LinearClassifier(LinearClassifier that, CodeContext cc) {\n@@ -14307,1 +14307,1 @@\n-        public LinearClassifier transform(CopyContext cc, OpTransformer ot) {\n+        public LinearClassifier transform(CodeContext cc, CodeTransformer ot) {\n@@ -14475,1 +14475,1 @@\n-        LinearRegressor(LinearRegressor that, CopyContext cc) {\n+        LinearRegressor(LinearRegressor that, CodeContext cc) {\n@@ -14480,1 +14480,1 @@\n-        public LinearRegressor transform(CopyContext cc, OpTransformer ot) {\n+        public LinearRegressor transform(CodeContext cc, CodeTransformer ot) {\n@@ -14609,1 +14609,1 @@\n-        Log(Log that, CopyContext cc) {\n+        Log(Log that, CodeContext cc) {\n@@ -14614,1 +14614,1 @@\n-        public Log transform(CopyContext cc, OpTransformer ot) {\n+        public Log transform(CodeContext cc, CodeTransformer ot) {\n@@ -14749,1 +14749,1 @@\n-        LogSoftmax(LogSoftmax that, CopyContext cc) {\n+        LogSoftmax(LogSoftmax that, CodeContext cc) {\n@@ -14754,1 +14754,1 @@\n-        public LogSoftmax transform(CopyContext cc, OpTransformer ot) {\n+        public LogSoftmax transform(CodeContext cc, CodeTransformer ot) {\n@@ -14895,1 +14895,1 @@\n-        LpNormalization(LpNormalization that, CopyContext cc) {\n+        LpNormalization(LpNormalization that, CodeContext cc) {\n@@ -14900,1 +14900,1 @@\n-        public LpNormalization transform(CopyContext cc, OpTransformer ot) {\n+        public LpNormalization transform(CodeContext cc, CodeTransformer ot) {\n@@ -15051,1 +15051,1 @@\n-        LpPool(LpPool that, CopyContext cc) {\n+        LpPool(LpPool that, CodeContext cc) {\n@@ -15056,1 +15056,1 @@\n-        public LpPool transform(CopyContext cc, OpTransformer ot) {\n+        public LpPool transform(CodeContext cc, CodeTransformer ot) {\n@@ -15201,1 +15201,1 @@\n-        MatMul(MatMul that, CopyContext cc) {\n+        MatMul(MatMul that, CodeContext cc) {\n@@ -15206,1 +15206,1 @@\n-        public MatMul transform(CopyContext cc, OpTransformer ot) {\n+        public MatMul transform(CodeContext cc, CodeTransformer ot) {\n@@ -15324,1 +15324,1 @@\n-        MatMulInteger(MatMulInteger that, CopyContext cc) {\n+        MatMulInteger(MatMulInteger that, CodeContext cc) {\n@@ -15329,1 +15329,1 @@\n-        public MatMulInteger transform(CopyContext cc, OpTransformer ot) {\n+        public MatMulInteger transform(CodeContext cc, CodeTransformer ot) {\n@@ -15452,1 +15452,1 @@\n-        Max(Max that, CopyContext cc) {\n+        Max(Max that, CodeContext cc) {\n@@ -15457,1 +15457,1 @@\n-        public Max transform(CopyContext cc, OpTransformer ot) {\n+        public Max transform(CodeContext cc, CodeTransformer ot) {\n@@ -15600,1 +15600,1 @@\n-        MaxPool(MaxPool that, CopyContext cc) {\n+        MaxPool(MaxPool that, CodeContext cc) {\n@@ -15605,1 +15605,1 @@\n-        public MaxPool transform(CopyContext cc, OpTransformer ot) {\n+        public MaxPool transform(CodeContext cc, CodeTransformer ot) {\n@@ -15777,1 +15777,1 @@\n-        MaxRoiPool(MaxRoiPool that, CopyContext cc) {\n+        MaxRoiPool(MaxRoiPool that, CodeContext cc) {\n@@ -15782,1 +15782,1 @@\n-        public MaxRoiPool transform(CopyContext cc, OpTransformer ot) {\n+        public MaxRoiPool transform(CodeContext cc, CodeTransformer ot) {\n@@ -15936,1 +15936,1 @@\n-        MaxUnpool(MaxUnpool that, CopyContext cc) {\n+        MaxUnpool(MaxUnpool that, CodeContext cc) {\n@@ -15941,1 +15941,1 @@\n-        public MaxUnpool transform(CopyContext cc, OpTransformer ot) {\n+        public MaxUnpool transform(CodeContext cc, CodeTransformer ot) {\n@@ -16074,1 +16074,1 @@\n-        Mean(Mean that, CopyContext cc) {\n+        Mean(Mean that, CodeContext cc) {\n@@ -16079,1 +16079,1 @@\n-        public Mean transform(CopyContext cc, OpTransformer ot) {\n+        public Mean transform(CodeContext cc, CodeTransformer ot) {\n@@ -16214,1 +16214,1 @@\n-        MeanVarianceNormalization(MeanVarianceNormalization that, CopyContext cc) {\n+        MeanVarianceNormalization(MeanVarianceNormalization that, CodeContext cc) {\n@@ -16219,1 +16219,1 @@\n-        public MeanVarianceNormalization transform(CopyContext cc, OpTransformer ot) {\n+        public MeanVarianceNormalization transform(CodeContext cc, CodeTransformer ot) {\n@@ -16365,1 +16365,1 @@\n-        MelWeightMatrix(MelWeightMatrix that, CopyContext cc) {\n+        MelWeightMatrix(MelWeightMatrix that, CodeContext cc) {\n@@ -16370,1 +16370,1 @@\n-        public MelWeightMatrix transform(CopyContext cc, OpTransformer ot) {\n+        public MelWeightMatrix transform(CodeContext cc, CodeTransformer ot) {\n@@ -16500,1 +16500,1 @@\n-        Min(Min that, CopyContext cc) {\n+        Min(Min that, CodeContext cc) {\n@@ -16505,1 +16505,1 @@\n-        public Min transform(CopyContext cc, OpTransformer ot) {\n+        public Min transform(CodeContext cc, CodeTransformer ot) {\n@@ -16614,1 +16614,1 @@\n-        Mish(Mish that, CopyContext cc) {\n+        Mish(Mish that, CodeContext cc) {\n@@ -16619,1 +16619,1 @@\n-        public Mish transform(CopyContext cc, OpTransformer ot) {\n+        public Mish transform(CodeContext cc, CodeTransformer ot) {\n@@ -16755,1 +16755,1 @@\n-        Mod(Mod that, CopyContext cc) {\n+        Mod(Mod that, CodeContext cc) {\n@@ -16760,1 +16760,1 @@\n-        public Mod transform(CopyContext cc, OpTransformer ot) {\n+        public Mod transform(CodeContext cc, CodeTransformer ot) {\n@@ -16911,1 +16911,1 @@\n-        Momentum(Momentum that, CopyContext cc) {\n+        Momentum(Momentum that, CodeContext cc) {\n@@ -16916,1 +16916,1 @@\n-        public Momentum transform(CopyContext cc, OpTransformer ot) {\n+        public Momentum transform(CodeContext cc, CodeTransformer ot) {\n@@ -17054,1 +17054,1 @@\n-        Mul(Mul that, CopyContext cc) {\n+        Mul(Mul that, CodeContext cc) {\n@@ -17059,1 +17059,1 @@\n-        public Mul transform(CopyContext cc, OpTransformer ot) {\n+        public Mul transform(CodeContext cc, CodeTransformer ot) {\n@@ -17201,1 +17201,1 @@\n-        Multinomial(Multinomial that, CopyContext cc) {\n+        Multinomial(Multinomial that, CodeContext cc) {\n@@ -17206,1 +17206,1 @@\n-        public Multinomial transform(CopyContext cc, OpTransformer ot) {\n+        public Multinomial transform(CodeContext cc, CodeTransformer ot) {\n@@ -17330,1 +17330,1 @@\n-        Neg(Neg that, CopyContext cc) {\n+        Neg(Neg that, CodeContext cc) {\n@@ -17335,1 +17335,1 @@\n-        public Neg transform(CopyContext cc, OpTransformer ot) {\n+        public Neg transform(CodeContext cc, CodeTransformer ot) {\n@@ -17474,1 +17474,1 @@\n-        NegativeLogLikelihoodLoss(NegativeLogLikelihoodLoss that, CopyContext cc) {\n+        NegativeLogLikelihoodLoss(NegativeLogLikelihoodLoss that, CodeContext cc) {\n@@ -17479,1 +17479,1 @@\n-        public NegativeLogLikelihoodLoss transform(CopyContext cc, OpTransformer ot) {\n+        public NegativeLogLikelihoodLoss transform(CodeContext cc, CodeTransformer ot) {\n@@ -17622,1 +17622,1 @@\n-        NonMaxSuppression(NonMaxSuppression that, CopyContext cc) {\n+        NonMaxSuppression(NonMaxSuppression that, CodeContext cc) {\n@@ -17627,1 +17627,1 @@\n-        public NonMaxSuppression transform(CopyContext cc, OpTransformer ot) {\n+        public NonMaxSuppression transform(CodeContext cc, CodeTransformer ot) {\n@@ -17760,1 +17760,1 @@\n-        NonZero(NonZero that, CopyContext cc) {\n+        NonZero(NonZero that, CodeContext cc) {\n@@ -17765,1 +17765,1 @@\n-        public NonZero transform(CopyContext cc, OpTransformer ot) {\n+        public NonZero transform(CodeContext cc, CodeTransformer ot) {\n@@ -17900,1 +17900,1 @@\n-        Normalizer(Normalizer that, CopyContext cc) {\n+        Normalizer(Normalizer that, CodeContext cc) {\n@@ -17905,1 +17905,1 @@\n-        public Normalizer transform(CopyContext cc, OpTransformer ot) {\n+        public Normalizer transform(CodeContext cc, CodeTransformer ot) {\n@@ -18019,1 +18019,1 @@\n-        Not(Not that, CopyContext cc) {\n+        Not(Not that, CodeContext cc) {\n@@ -18024,1 +18024,1 @@\n-        public Not transform(CopyContext cc, OpTransformer ot) {\n+        public Not transform(CodeContext cc, CodeTransformer ot) {\n@@ -18163,1 +18163,1 @@\n-        OneHot(OneHot that, CopyContext cc) {\n+        OneHot(OneHot that, CodeContext cc) {\n@@ -18168,1 +18168,1 @@\n-        public OneHot transform(CopyContext cc, OpTransformer ot) {\n+        public OneHot transform(CodeContext cc, CodeTransformer ot) {\n@@ -18318,1 +18318,1 @@\n-        OneHotEncoder(OneHotEncoder that, CopyContext cc) {\n+        OneHotEncoder(OneHotEncoder that, CodeContext cc) {\n@@ -18323,1 +18323,1 @@\n-        public OneHotEncoder transform(CopyContext cc, OpTransformer ot) {\n+        public OneHotEncoder transform(CodeContext cc, CodeTransformer ot) {\n@@ -18474,1 +18474,1 @@\n-        Optional(Optional that, CopyContext cc) {\n+        Optional(Optional that, CodeContext cc) {\n@@ -18479,1 +18479,1 @@\n-        public Optional transform(CopyContext cc, OpTransformer ot) {\n+        public Optional transform(CodeContext cc, CodeTransformer ot) {\n@@ -18595,1 +18595,1 @@\n-        OptionalGetElement(OptionalGetElement that, CopyContext cc) {\n+        OptionalGetElement(OptionalGetElement that, CodeContext cc) {\n@@ -18600,1 +18600,1 @@\n-        public OptionalGetElement transform(CopyContext cc, OpTransformer ot) {\n+        public OptionalGetElement transform(CodeContext cc, CodeTransformer ot) {\n@@ -18710,1 +18710,1 @@\n-        OptionalHasElement(OptionalHasElement that, CopyContext cc) {\n+        OptionalHasElement(OptionalHasElement that, CodeContext cc) {\n@@ -18715,1 +18715,1 @@\n-        public OptionalHasElement transform(CopyContext cc, OpTransformer ot) {\n+        public OptionalHasElement transform(CodeContext cc, CodeTransformer ot) {\n@@ -18827,1 +18827,1 @@\n-        Or(Or that, CopyContext cc) {\n+        Or(Or that, CodeContext cc) {\n@@ -18832,1 +18832,1 @@\n-        public Or transform(CopyContext cc, OpTransformer ot) {\n+        public Or transform(CodeContext cc, CodeTransformer ot) {\n@@ -18946,1 +18946,1 @@\n-        PRelu(PRelu that, CopyContext cc) {\n+        PRelu(PRelu that, CodeContext cc) {\n@@ -18951,1 +18951,1 @@\n-        public PRelu transform(CopyContext cc, OpTransformer ot) {\n+        public PRelu transform(CodeContext cc, CodeTransformer ot) {\n@@ -19094,1 +19094,1 @@\n-        Pad(Pad that, CopyContext cc) {\n+        Pad(Pad that, CodeContext cc) {\n@@ -19099,1 +19099,1 @@\n-        public Pad transform(CopyContext cc, OpTransformer ot) {\n+        public Pad transform(CodeContext cc, CodeTransformer ot) {\n@@ -19229,1 +19229,1 @@\n-        Pow(Pow that, CopyContext cc) {\n+        Pow(Pow that, CodeContext cc) {\n@@ -19234,1 +19234,1 @@\n-        public Pow transform(CopyContext cc, OpTransformer ot) {\n+        public Pow transform(CodeContext cc, CodeTransformer ot) {\n@@ -19389,1 +19389,1 @@\n-        QLinearConv(QLinearConv that, CopyContext cc) {\n+        QLinearConv(QLinearConv that, CodeContext cc) {\n@@ -19394,1 +19394,1 @@\n-        public QLinearConv transform(CopyContext cc, OpTransformer ot) {\n+        public QLinearConv transform(CodeContext cc, CodeTransformer ot) {\n@@ -19576,1 +19576,1 @@\n-        QLinearMatMul(QLinearMatMul that, CopyContext cc) {\n+        QLinearMatMul(QLinearMatMul that, CodeContext cc) {\n@@ -19581,1 +19581,1 @@\n-        public QLinearMatMul transform(CopyContext cc, OpTransformer ot) {\n+        public QLinearMatMul transform(CodeContext cc, CodeTransformer ot) {\n@@ -19752,1 +19752,1 @@\n-        QuantizeLinear(QuantizeLinear that, CopyContext cc) {\n+        QuantizeLinear(QuantizeLinear that, CodeContext cc) {\n@@ -19757,1 +19757,1 @@\n-        public QuantizeLinear transform(CopyContext cc, OpTransformer ot) {\n+        public QuantizeLinear transform(CodeContext cc, CodeTransformer ot) {\n@@ -19930,1 +19930,1 @@\n-        RMSNormalization(RMSNormalization that, CopyContext cc) {\n+        RMSNormalization(RMSNormalization that, CodeContext cc) {\n@@ -19935,1 +19935,1 @@\n-        public RMSNormalization transform(CopyContext cc, OpTransformer ot) {\n+        public RMSNormalization transform(CodeContext cc, CodeTransformer ot) {\n@@ -20102,1 +20102,1 @@\n-        RNN(RNN that, CopyContext cc) {\n+        RNN(RNN that, CodeContext cc) {\n@@ -20107,1 +20107,1 @@\n-        public RNN transform(CopyContext cc, OpTransformer ot) {\n+        public RNN transform(CodeContext cc, CodeTransformer ot) {\n@@ -20283,1 +20283,1 @@\n-        RandomNormal(RandomNormal that, CopyContext cc) {\n+        RandomNormal(RandomNormal that, CodeContext cc) {\n@@ -20288,1 +20288,1 @@\n-        public RandomNormal transform(CopyContext cc, OpTransformer ot) {\n+        public RandomNormal transform(CodeContext cc, CodeTransformer ot) {\n@@ -20448,1 +20448,1 @@\n-        RandomNormalLike(RandomNormalLike that, CopyContext cc) {\n+        RandomNormalLike(RandomNormalLike that, CodeContext cc) {\n@@ -20453,1 +20453,1 @@\n-        public RandomNormalLike transform(CopyContext cc, OpTransformer ot) {\n+        public RandomNormalLike transform(CodeContext cc, CodeTransformer ot) {\n@@ -20591,1 +20591,1 @@\n-        RandomUniform(RandomUniform that, CopyContext cc) {\n+        RandomUniform(RandomUniform that, CodeContext cc) {\n@@ -20596,1 +20596,1 @@\n-        public RandomUniform transform(CopyContext cc, OpTransformer ot) {\n+        public RandomUniform transform(CodeContext cc, CodeTransformer ot) {\n@@ -20756,1 +20756,1 @@\n-        RandomUniformLike(RandomUniformLike that, CopyContext cc) {\n+        RandomUniformLike(RandomUniformLike that, CodeContext cc) {\n@@ -20761,1 +20761,1 @@\n-        public RandomUniformLike transform(CopyContext cc, OpTransformer ot) {\n+        public RandomUniformLike transform(CodeContext cc, CodeTransformer ot) {\n@@ -20892,1 +20892,1 @@\n-        Range(Range that, CopyContext cc) {\n+        Range(Range that, CodeContext cc) {\n@@ -20897,1 +20897,1 @@\n-        public Range transform(CopyContext cc, OpTransformer ot) {\n+        public Range transform(CodeContext cc, CodeTransformer ot) {\n@@ -21014,1 +21014,1 @@\n-        Reciprocal(Reciprocal that, CopyContext cc) {\n+        Reciprocal(Reciprocal that, CodeContext cc) {\n@@ -21019,1 +21019,1 @@\n-        public Reciprocal transform(CopyContext cc, OpTransformer ot) {\n+        public Reciprocal transform(CodeContext cc, CodeTransformer ot) {\n@@ -21156,1 +21156,1 @@\n-        ReduceL1(ReduceL1 that, CopyContext cc) {\n+        ReduceL1(ReduceL1 that, CodeContext cc) {\n@@ -21161,1 +21161,1 @@\n-        public ReduceL1 transform(CopyContext cc, OpTransformer ot) {\n+        public ReduceL1 transform(CodeContext cc, CodeTransformer ot) {\n@@ -21313,1 +21313,1 @@\n-        ReduceL2(ReduceL2 that, CopyContext cc) {\n+        ReduceL2(ReduceL2 that, CodeContext cc) {\n@@ -21318,1 +21318,1 @@\n-        public ReduceL2 transform(CopyContext cc, OpTransformer ot) {\n+        public ReduceL2 transform(CodeContext cc, CodeTransformer ot) {\n@@ -21470,1 +21470,1 @@\n-        ReduceLogSum(ReduceLogSum that, CopyContext cc) {\n+        ReduceLogSum(ReduceLogSum that, CodeContext cc) {\n@@ -21475,1 +21475,1 @@\n-        public ReduceLogSum transform(CopyContext cc, OpTransformer ot) {\n+        public ReduceLogSum transform(CodeContext cc, CodeTransformer ot) {\n@@ -21627,1 +21627,1 @@\n-        ReduceLogSumExp(ReduceLogSumExp that, CopyContext cc) {\n+        ReduceLogSumExp(ReduceLogSumExp that, CodeContext cc) {\n@@ -21632,1 +21632,1 @@\n-        public ReduceLogSumExp transform(CopyContext cc, OpTransformer ot) {\n+        public ReduceLogSumExp transform(CodeContext cc, CodeTransformer ot) {\n@@ -21784,1 +21784,1 @@\n-        ReduceMax(ReduceMax that, CopyContext cc) {\n+        ReduceMax(ReduceMax that, CodeContext cc) {\n@@ -21789,1 +21789,1 @@\n-        public ReduceMax transform(CopyContext cc, OpTransformer ot) {\n+        public ReduceMax transform(CodeContext cc, CodeTransformer ot) {\n@@ -21941,1 +21941,1 @@\n-        ReduceMean(ReduceMean that, CopyContext cc) {\n+        ReduceMean(ReduceMean that, CodeContext cc) {\n@@ -21946,1 +21946,1 @@\n-        public ReduceMean transform(CopyContext cc, OpTransformer ot) {\n+        public ReduceMean transform(CodeContext cc, CodeTransformer ot) {\n@@ -22098,1 +22098,1 @@\n-        ReduceMin(ReduceMin that, CopyContext cc) {\n+        ReduceMin(ReduceMin that, CodeContext cc) {\n@@ -22103,1 +22103,1 @@\n-        public ReduceMin transform(CopyContext cc, OpTransformer ot) {\n+        public ReduceMin transform(CodeContext cc, CodeTransformer ot) {\n@@ -22255,1 +22255,1 @@\n-        ReduceProd(ReduceProd that, CopyContext cc) {\n+        ReduceProd(ReduceProd that, CodeContext cc) {\n@@ -22260,1 +22260,1 @@\n-        public ReduceProd transform(CopyContext cc, OpTransformer ot) {\n+        public ReduceProd transform(CodeContext cc, CodeTransformer ot) {\n@@ -22412,1 +22412,1 @@\n-        ReduceSum(ReduceSum that, CopyContext cc) {\n+        ReduceSum(ReduceSum that, CodeContext cc) {\n@@ -22417,1 +22417,1 @@\n-        public ReduceSum transform(CopyContext cc, OpTransformer ot) {\n+        public ReduceSum transform(CodeContext cc, CodeTransformer ot) {\n@@ -22569,1 +22569,1 @@\n-        ReduceSumSquare(ReduceSumSquare that, CopyContext cc) {\n+        ReduceSumSquare(ReduceSumSquare that, CodeContext cc) {\n@@ -22574,1 +22574,1 @@\n-        public ReduceSumSquare transform(CopyContext cc, OpTransformer ot) {\n+        public ReduceSumSquare transform(CodeContext cc, CodeTransformer ot) {\n@@ -22725,1 +22725,1 @@\n-        RegexFullMatch(RegexFullMatch that, CopyContext cc) {\n+        RegexFullMatch(RegexFullMatch that, CodeContext cc) {\n@@ -22730,1 +22730,1 @@\n-        public RegexFullMatch transform(CopyContext cc, OpTransformer ot) {\n+        public RegexFullMatch transform(CodeContext cc, CodeTransformer ot) {\n@@ -22844,1 +22844,1 @@\n-        Relu(Relu that, CopyContext cc) {\n+        Relu(Relu that, CodeContext cc) {\n@@ -22849,1 +22849,1 @@\n-        public Relu transform(CopyContext cc, OpTransformer ot) {\n+        public Relu transform(CodeContext cc, CodeTransformer ot) {\n@@ -22985,1 +22985,1 @@\n-        Reshape(Reshape that, CopyContext cc) {\n+        Reshape(Reshape that, CodeContext cc) {\n@@ -22990,1 +22990,1 @@\n-        public Reshape transform(CopyContext cc, OpTransformer ot) {\n+        public Reshape transform(CodeContext cc, CodeTransformer ot) {\n@@ -23146,1 +23146,1 @@\n-        Resize(Resize that, CopyContext cc) {\n+        Resize(Resize that, CodeContext cc) {\n@@ -23151,1 +23151,1 @@\n-        public Resize transform(CopyContext cc, OpTransformer ot) {\n+        public Resize transform(CodeContext cc, CodeTransformer ot) {\n@@ -23348,1 +23348,1 @@\n-        ReverseSequence(ReverseSequence that, CopyContext cc) {\n+        ReverseSequence(ReverseSequence that, CodeContext cc) {\n@@ -23353,1 +23353,1 @@\n-        public ReverseSequence transform(CopyContext cc, OpTransformer ot) {\n+        public ReverseSequence transform(CodeContext cc, CodeTransformer ot) {\n@@ -23510,1 +23510,1 @@\n-        RoiAlign(RoiAlign that, CopyContext cc) {\n+        RoiAlign(RoiAlign that, CodeContext cc) {\n@@ -23515,1 +23515,1 @@\n-        public RoiAlign transform(CopyContext cc, OpTransformer ot) {\n+        public RoiAlign transform(CodeContext cc, CodeTransformer ot) {\n@@ -23694,1 +23694,1 @@\n-        RotaryEmbedding(RotaryEmbedding that, CopyContext cc) {\n+        RotaryEmbedding(RotaryEmbedding that, CodeContext cc) {\n@@ -23699,1 +23699,1 @@\n-        public RotaryEmbedding transform(CopyContext cc, OpTransformer ot) {\n+        public RotaryEmbedding transform(CodeContext cc, CodeTransformer ot) {\n@@ -23836,1 +23836,1 @@\n-        Round(Round that, CopyContext cc) {\n+        Round(Round that, CodeContext cc) {\n@@ -23841,1 +23841,1 @@\n-        public Round transform(CopyContext cc, OpTransformer ot) {\n+        public Round transform(CodeContext cc, CodeTransformer ot) {\n@@ -23980,1 +23980,1 @@\n-        STFT(STFT that, CopyContext cc) {\n+        STFT(STFT that, CodeContext cc) {\n@@ -23985,1 +23985,1 @@\n-        public STFT transform(CopyContext cc, OpTransformer ot) {\n+        public STFT transform(CodeContext cc, CodeTransformer ot) {\n@@ -24151,1 +24151,1 @@\n-        SVMClassifier(SVMClassifier that, CopyContext cc) {\n+        SVMClassifier(SVMClassifier that, CodeContext cc) {\n@@ -24156,1 +24156,1 @@\n-        public SVMClassifier transform(CopyContext cc, OpTransformer ot) {\n+        public SVMClassifier transform(CodeContext cc, CodeTransformer ot) {\n@@ -24353,1 +24353,1 @@\n-        SVMRegressor(SVMRegressor that, CopyContext cc) {\n+        SVMRegressor(SVMRegressor that, CodeContext cc) {\n@@ -24358,1 +24358,1 @@\n-        public SVMRegressor transform(CopyContext cc, OpTransformer ot) {\n+        public SVMRegressor transform(CodeContext cc, CodeTransformer ot) {\n@@ -24534,1 +24534,1 @@\n-        Scaler(Scaler that, CopyContext cc) {\n+        Scaler(Scaler that, CodeContext cc) {\n@@ -24539,1 +24539,1 @@\n-        public Scaler transform(CopyContext cc, OpTransformer ot) {\n+        public Scaler transform(CodeContext cc, CodeTransformer ot) {\n@@ -24687,1 +24687,1 @@\n-        Scatter(Scatter that, CopyContext cc) {\n+        Scatter(Scatter that, CodeContext cc) {\n@@ -24692,1 +24692,1 @@\n-        public Scatter transform(CopyContext cc, OpTransformer ot) {\n+        public Scatter transform(CodeContext cc, CodeTransformer ot) {\n@@ -24844,1 +24844,1 @@\n-        ScatterElements(ScatterElements that, CopyContext cc) {\n+        ScatterElements(ScatterElements that, CodeContext cc) {\n@@ -24849,1 +24849,1 @@\n-        public ScatterElements transform(CopyContext cc, OpTransformer ot) {\n+        public ScatterElements transform(CodeContext cc, CodeTransformer ot) {\n@@ -25004,1 +25004,1 @@\n-        ScatterND(ScatterND that, CopyContext cc) {\n+        ScatterND(ScatterND that, CodeContext cc) {\n@@ -25009,1 +25009,1 @@\n-        public ScatterND transform(CopyContext cc, OpTransformer ot) {\n+        public ScatterND transform(CodeContext cc, CodeTransformer ot) {\n@@ -25158,1 +25158,1 @@\n-        Selu(Selu that, CopyContext cc) {\n+        Selu(Selu that, CodeContext cc) {\n@@ -25163,1 +25163,1 @@\n-        public Selu transform(CopyContext cc, OpTransformer ot) {\n+        public Selu transform(CodeContext cc, CodeTransformer ot) {\n@@ -25285,1 +25285,1 @@\n-        SequenceAt(SequenceAt that, CopyContext cc) {\n+        SequenceAt(SequenceAt that, CodeContext cc) {\n@@ -25290,1 +25290,1 @@\n-        public SequenceAt transform(CopyContext cc, OpTransformer ot) {\n+        public SequenceAt transform(CodeContext cc, CodeTransformer ot) {\n@@ -25404,1 +25404,1 @@\n-        SequenceConstruct(SequenceConstruct that, CopyContext cc) {\n+        SequenceConstruct(SequenceConstruct that, CodeContext cc) {\n@@ -25409,1 +25409,1 @@\n-        public SequenceConstruct transform(CopyContext cc, OpTransformer ot) {\n+        public SequenceConstruct transform(CodeContext cc, CodeTransformer ot) {\n@@ -25523,1 +25523,1 @@\n-        SequenceEmpty(SequenceEmpty that, CopyContext cc) {\n+        SequenceEmpty(SequenceEmpty that, CodeContext cc) {\n@@ -25528,1 +25528,1 @@\n-        public SequenceEmpty transform(CopyContext cc, OpTransformer ot) {\n+        public SequenceEmpty transform(CodeContext cc, CodeTransformer ot) {\n@@ -25640,1 +25640,1 @@\n-        SequenceErase(SequenceErase that, CopyContext cc) {\n+        SequenceErase(SequenceErase that, CodeContext cc) {\n@@ -25645,1 +25645,1 @@\n-        public SequenceErase transform(CopyContext cc, OpTransformer ot) {\n+        public SequenceErase transform(CodeContext cc, CodeTransformer ot) {\n@@ -25763,1 +25763,1 @@\n-        SequenceInsert(SequenceInsert that, CopyContext cc) {\n+        SequenceInsert(SequenceInsert that, CodeContext cc) {\n@@ -25768,1 +25768,1 @@\n-        public SequenceInsert transform(CopyContext cc, OpTransformer ot) {\n+        public SequenceInsert transform(CodeContext cc, CodeTransformer ot) {\n@@ -25887,1 +25887,1 @@\n-        SequenceLength(SequenceLength that, CopyContext cc) {\n+        SequenceLength(SequenceLength that, CodeContext cc) {\n@@ -25892,1 +25892,1 @@\n-        public SequenceLength transform(CopyContext cc, OpTransformer ot) {\n+        public SequenceLength transform(CodeContext cc, CodeTransformer ot) {\n@@ -26029,1 +26029,1 @@\n-        Shape(Shape that, CopyContext cc) {\n+        Shape(Shape that, CodeContext cc) {\n@@ -26034,1 +26034,1 @@\n-        public Shape transform(CopyContext cc, OpTransformer ot) {\n+        public Shape transform(CodeContext cc, CodeTransformer ot) {\n@@ -26180,1 +26180,1 @@\n-        Shrink(Shrink that, CopyContext cc) {\n+        Shrink(Shrink that, CodeContext cc) {\n@@ -26185,1 +26185,1 @@\n-        public Shrink transform(CopyContext cc, OpTransformer ot) {\n+        public Shrink transform(CodeContext cc, CodeTransformer ot) {\n@@ -26304,1 +26304,1 @@\n-        Sigmoid(Sigmoid that, CopyContext cc) {\n+        Sigmoid(Sigmoid that, CodeContext cc) {\n@@ -26309,1 +26309,1 @@\n-        public Sigmoid transform(CopyContext cc, OpTransformer ot) {\n+        public Sigmoid transform(CodeContext cc, CodeTransformer ot) {\n@@ -26418,1 +26418,1 @@\n-        Sign(Sign that, CopyContext cc) {\n+        Sign(Sign that, CodeContext cc) {\n@@ -26423,1 +26423,1 @@\n-        public Sign transform(CopyContext cc, OpTransformer ot) {\n+        public Sign transform(CodeContext cc, CodeTransformer ot) {\n@@ -26532,1 +26532,1 @@\n-        Sin(Sin that, CopyContext cc) {\n+        Sin(Sin that, CodeContext cc) {\n@@ -26537,1 +26537,1 @@\n-        public Sin transform(CopyContext cc, OpTransformer ot) {\n+        public Sin transform(CodeContext cc, CodeTransformer ot) {\n@@ -26646,1 +26646,1 @@\n-        Sinh(Sinh that, CopyContext cc) {\n+        Sinh(Sinh that, CodeContext cc) {\n@@ -26651,1 +26651,1 @@\n-        public Sinh transform(CopyContext cc, OpTransformer ot) {\n+        public Sinh transform(CodeContext cc, CodeTransformer ot) {\n@@ -26761,1 +26761,1 @@\n-        Size(Size that, CopyContext cc) {\n+        Size(Size that, CodeContext cc) {\n@@ -26766,1 +26766,1 @@\n-        public Size transform(CopyContext cc, OpTransformer ot) {\n+        public Size transform(CodeContext cc, CodeTransformer ot) {\n@@ -26880,1 +26880,1 @@\n-        Slice(Slice that, CopyContext cc) {\n+        Slice(Slice that, CodeContext cc) {\n@@ -26885,1 +26885,1 @@\n-        public Slice transform(CopyContext cc, OpTransformer ot) {\n+        public Slice transform(CodeContext cc, CodeTransformer ot) {\n@@ -27038,1 +27038,1 @@\n-        Softmax(Softmax that, CopyContext cc) {\n+        Softmax(Softmax that, CodeContext cc) {\n@@ -27043,1 +27043,1 @@\n-        public Softmax transform(CopyContext cc, OpTransformer ot) {\n+        public Softmax transform(CodeContext cc, CodeTransformer ot) {\n@@ -27188,1 +27188,1 @@\n-        SoftmaxCrossEntropyLoss(SoftmaxCrossEntropyLoss that, CopyContext cc) {\n+        SoftmaxCrossEntropyLoss(SoftmaxCrossEntropyLoss that, CodeContext cc) {\n@@ -27193,1 +27193,1 @@\n-        public SoftmaxCrossEntropyLoss transform(CopyContext cc, OpTransformer ot) {\n+        public SoftmaxCrossEntropyLoss transform(CodeContext cc, CodeTransformer ot) {\n@@ -27321,1 +27321,1 @@\n-        Softplus(Softplus that, CopyContext cc) {\n+        Softplus(Softplus that, CodeContext cc) {\n@@ -27326,1 +27326,1 @@\n-        public Softplus transform(CopyContext cc, OpTransformer ot) {\n+        public Softplus transform(CodeContext cc, CodeTransformer ot) {\n@@ -27435,1 +27435,1 @@\n-        Softsign(Softsign that, CopyContext cc) {\n+        Softsign(Softsign that, CodeContext cc) {\n@@ -27440,1 +27440,1 @@\n-        public Softsign transform(CopyContext cc, OpTransformer ot) {\n+        public Softsign transform(CodeContext cc, CodeTransformer ot) {\n@@ -27575,1 +27575,1 @@\n-        SpaceToDepth(SpaceToDepth that, CopyContext cc) {\n+        SpaceToDepth(SpaceToDepth that, CodeContext cc) {\n@@ -27580,1 +27580,1 @@\n-        public SpaceToDepth transform(CopyContext cc, OpTransformer ot) {\n+        public SpaceToDepth transform(CodeContext cc, CodeTransformer ot) {\n@@ -27722,1 +27722,1 @@\n-        Split(Split that, CopyContext cc) {\n+        Split(Split that, CodeContext cc) {\n@@ -27727,1 +27727,1 @@\n-        public Split transform(CopyContext cc, OpTransformer ot) {\n+        public Split transform(CodeContext cc, CodeTransformer ot) {\n@@ -27881,1 +27881,1 @@\n-        SplitToSequence(SplitToSequence that, CopyContext cc) {\n+        SplitToSequence(SplitToSequence that, CodeContext cc) {\n@@ -27886,1 +27886,1 @@\n-        public SplitToSequence transform(CopyContext cc, OpTransformer ot) {\n+        public SplitToSequence transform(CodeContext cc, CodeTransformer ot) {\n@@ -28010,1 +28010,1 @@\n-        Sqrt(Sqrt that, CopyContext cc) {\n+        Sqrt(Sqrt that, CodeContext cc) {\n@@ -28015,1 +28015,1 @@\n-        public Sqrt transform(CopyContext cc, OpTransformer ot) {\n+        public Sqrt transform(CodeContext cc, CodeTransformer ot) {\n@@ -28125,1 +28125,1 @@\n-        Squeeze(Squeeze that, CopyContext cc) {\n+        Squeeze(Squeeze that, CodeContext cc) {\n@@ -28130,1 +28130,1 @@\n-        public Squeeze transform(CopyContext cc, OpTransformer ot) {\n+        public Squeeze transform(CodeContext cc, CodeTransformer ot) {\n@@ -28245,1 +28245,1 @@\n-        StringConcat(StringConcat that, CopyContext cc) {\n+        StringConcat(StringConcat that, CodeContext cc) {\n@@ -28250,1 +28250,1 @@\n-        public StringConcat transform(CopyContext cc, OpTransformer ot) {\n+        public StringConcat transform(CodeContext cc, CodeTransformer ot) {\n@@ -28377,1 +28377,1 @@\n-        StringNormalizer(StringNormalizer that, CopyContext cc) {\n+        StringNormalizer(StringNormalizer that, CodeContext cc) {\n@@ -28382,1 +28382,1 @@\n-        public StringNormalizer transform(CopyContext cc, OpTransformer ot) {\n+        public StringNormalizer transform(CodeContext cc, CodeTransformer ot) {\n@@ -28541,1 +28541,1 @@\n-        StringSplit(StringSplit that, CopyContext cc) {\n+        StringSplit(StringSplit that, CodeContext cc) {\n@@ -28546,1 +28546,1 @@\n-        public StringSplit transform(CopyContext cc, OpTransformer ot) {\n+        public StringSplit transform(CodeContext cc, CodeTransformer ot) {\n@@ -28666,1 +28666,1 @@\n-        Sub(Sub that, CopyContext cc) {\n+        Sub(Sub that, CodeContext cc) {\n@@ -28671,1 +28671,1 @@\n-        public Sub transform(CopyContext cc, OpTransformer ot) {\n+        public Sub transform(CodeContext cc, CodeTransformer ot) {\n@@ -28784,1 +28784,1 @@\n-        Sum(Sum that, CopyContext cc) {\n+        Sum(Sum that, CodeContext cc) {\n@@ -28789,1 +28789,1 @@\n-        public Sum transform(CopyContext cc, OpTransformer ot) {\n+        public Sum transform(CodeContext cc, CodeTransformer ot) {\n@@ -28924,1 +28924,1 @@\n-        Swish(Swish that, CopyContext cc) {\n+        Swish(Swish that, CodeContext cc) {\n@@ -28929,1 +28929,1 @@\n-        public Swish transform(CopyContext cc, OpTransformer ot) {\n+        public Swish transform(CodeContext cc, CodeTransformer ot) {\n@@ -29043,1 +29043,1 @@\n-        Tan(Tan that, CopyContext cc) {\n+        Tan(Tan that, CodeContext cc) {\n@@ -29048,1 +29048,1 @@\n-        public Tan transform(CopyContext cc, OpTransformer ot) {\n+        public Tan transform(CodeContext cc, CodeTransformer ot) {\n@@ -29157,1 +29157,1 @@\n-        Tanh(Tanh that, CopyContext cc) {\n+        Tanh(Tanh that, CodeContext cc) {\n@@ -29162,1 +29162,1 @@\n-        public Tanh transform(CopyContext cc, OpTransformer ot) {\n+        public Tanh transform(CodeContext cc, CodeTransformer ot) {\n@@ -29300,1 +29300,1 @@\n-        TensorScatter(TensorScatter that, CopyContext cc) {\n+        TensorScatter(TensorScatter that, CodeContext cc) {\n@@ -29305,1 +29305,1 @@\n-        public TensorScatter transform(CopyContext cc, OpTransformer ot) {\n+        public TensorScatter transform(CodeContext cc, CodeTransformer ot) {\n@@ -29468,1 +29468,1 @@\n-        TfIdfVectorizer(TfIdfVectorizer that, CopyContext cc) {\n+        TfIdfVectorizer(TfIdfVectorizer that, CodeContext cc) {\n@@ -29473,1 +29473,1 @@\n-        public TfIdfVectorizer transform(CopyContext cc, OpTransformer ot) {\n+        public TfIdfVectorizer transform(CodeContext cc, CodeTransformer ot) {\n@@ -29653,1 +29653,1 @@\n-        ThresholdedRelu(ThresholdedRelu that, CopyContext cc) {\n+        ThresholdedRelu(ThresholdedRelu that, CodeContext cc) {\n@@ -29658,1 +29658,1 @@\n-        public ThresholdedRelu transform(CopyContext cc, OpTransformer ot) {\n+        public ThresholdedRelu transform(CodeContext cc, CodeTransformer ot) {\n@@ -29774,1 +29774,1 @@\n-        Tile(Tile that, CopyContext cc) {\n+        Tile(Tile that, CodeContext cc) {\n@@ -29779,1 +29779,1 @@\n-        public Tile transform(CopyContext cc, OpTransformer ot) {\n+        public Tile transform(CodeContext cc, CodeTransformer ot) {\n@@ -29923,1 +29923,1 @@\n-        TopK(TopK that, CopyContext cc) {\n+        TopK(TopK that, CodeContext cc) {\n@@ -29928,1 +29928,1 @@\n-        public TopK transform(CopyContext cc, OpTransformer ot) {\n+        public TopK transform(CodeContext cc, CodeTransformer ot) {\n@@ -30082,1 +30082,1 @@\n-        Transpose(Transpose that, CopyContext cc) {\n+        Transpose(Transpose that, CodeContext cc) {\n@@ -30087,1 +30087,1 @@\n-        public Transpose transform(CopyContext cc, OpTransformer ot) {\n+        public Transpose transform(CodeContext cc, CodeTransformer ot) {\n@@ -30242,1 +30242,1 @@\n-        TreeEnsemble(TreeEnsemble that, CopyContext cc) {\n+        TreeEnsemble(TreeEnsemble that, CodeContext cc) {\n@@ -30247,1 +30247,1 @@\n-        public TreeEnsemble transform(CopyContext cc, OpTransformer ot) {\n+        public TreeEnsemble transform(CodeContext cc, CodeTransformer ot) {\n@@ -30484,1 +30484,1 @@\n-        TreeEnsembleClassifier(TreeEnsembleClassifier that, CopyContext cc) {\n+        TreeEnsembleClassifier(TreeEnsembleClassifier that, CodeContext cc) {\n@@ -30489,1 +30489,1 @@\n-        public TreeEnsembleClassifier transform(CopyContext cc, OpTransformer ot) {\n+        public TreeEnsembleClassifier transform(CodeContext cc, CodeTransformer ot) {\n@@ -30749,1 +30749,1 @@\n-        TreeEnsembleRegressor(TreeEnsembleRegressor that, CopyContext cc) {\n+        TreeEnsembleRegressor(TreeEnsembleRegressor that, CodeContext cc) {\n@@ -30754,1 +30754,1 @@\n-        public TreeEnsembleRegressor transform(CopyContext cc, OpTransformer ot) {\n+        public TreeEnsembleRegressor transform(CodeContext cc, CodeTransformer ot) {\n@@ -30995,1 +30995,1 @@\n-        Trilu(Trilu that, CopyContext cc) {\n+        Trilu(Trilu that, CodeContext cc) {\n@@ -31000,1 +31000,1 @@\n-        public Trilu transform(CopyContext cc, OpTransformer ot) {\n+        public Trilu transform(CodeContext cc, CodeTransformer ot) {\n@@ -31149,1 +31149,1 @@\n-        Unique(Unique that, CopyContext cc) {\n+        Unique(Unique that, CodeContext cc) {\n@@ -31154,1 +31154,1 @@\n-        public Unique transform(CopyContext cc, OpTransformer ot) {\n+        public Unique transform(CodeContext cc, CodeTransformer ot) {\n@@ -31274,1 +31274,1 @@\n-        Unsqueeze(Unsqueeze that, CopyContext cc) {\n+        Unsqueeze(Unsqueeze that, CodeContext cc) {\n@@ -31279,1 +31279,1 @@\n-        public Unsqueeze transform(CopyContext cc, OpTransformer ot) {\n+        public Unsqueeze transform(CodeContext cc, CodeTransformer ot) {\n@@ -31419,1 +31419,1 @@\n-        Upsample(Upsample that, CopyContext cc) {\n+        Upsample(Upsample that, CodeContext cc) {\n@@ -31424,1 +31424,1 @@\n-        public Upsample transform(CopyContext cc, OpTransformer ot) {\n+        public Upsample transform(CodeContext cc, CodeTransformer ot) {\n@@ -31545,1 +31545,1 @@\n-        Where(Where that, CopyContext cc) {\n+        Where(Where that, CodeContext cc) {\n@@ -31550,1 +31550,1 @@\n-        public Where transform(CopyContext cc, OpTransformer ot) {\n+        public Where transform(CodeContext cc, CodeTransformer ot) {\n@@ -31669,1 +31669,1 @@\n-        Xor(Xor that, CopyContext cc) {\n+        Xor(Xor that, CodeContext cc) {\n@@ -31674,1 +31674,1 @@\n-        public Xor transform(CopyContext cc, OpTransformer ot) {\n+        public Xor transform(CodeContext cc, CodeTransformer ot) {\n@@ -31814,1 +31814,1 @@\n-        ZipMap(ZipMap that, CopyContext cc) {\n+        ZipMap(ZipMap that, CodeContext cc) {\n@@ -31819,1 +31819,1 @@\n-        public ZipMap transform(CopyContext cc, OpTransformer ot) {\n+        public ZipMap transform(CodeContext cc, CodeTransformer ot) {\n","filename":"cr-examples\/onnx\/src\/main\/java\/oracle\/code\/onnx\/ir\/OnnxOps.java","additions":434,"deletions":434,"binary":false,"changes":868,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -58,1 +58,1 @@\n-    SpirvOp(SpirvOp that, CopyContext cc) {\n+    SpirvOp(SpirvOp that, CodeContext cc) {\n","filename":"cr-examples\/spirv\/src\/main\/java\/intel\/code\/spirv\/SpirvOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -33,2 +33,2 @@\n-import jdk.incubator.code.CopyContext;\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeContext;\n+import jdk.incubator.code.CodeTransformer;\n@@ -54,1 +54,1 @@\n-        public ModuleOp(ModuleOp that, CopyContext cc) {\n+        public ModuleOp(ModuleOp that, CodeContext cc) {\n@@ -60,1 +60,1 @@\n-        public ModuleOp transform(CopyContext cc, OpTransformer ot) {\n+        public ModuleOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -72,1 +72,1 @@\n-        public LoadOp(LoadOp that, CopyContext cc) {\n+        public LoadOp(LoadOp that, CodeContext cc) {\n@@ -77,1 +77,1 @@\n-        public LoadOp transform(CopyContext cc, OpTransformer ot) {\n+        public LoadOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -91,1 +91,1 @@\n-        public FieldLoadOp(FieldLoadOp that, CopyContext cc) {\n+        public FieldLoadOp(FieldLoadOp that, CodeContext cc) {\n@@ -97,1 +97,1 @@\n-        public FieldLoadOp transform(CopyContext cc, OpTransformer ot) {\n+        public FieldLoadOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -113,1 +113,1 @@\n-        public StoreOp(StoreOp that, CopyContext cc) {\n+        public StoreOp(StoreOp that, CodeContext cc) {\n@@ -118,1 +118,1 @@\n-        public StoreOp transform(CopyContext cc, OpTransformer ot) {\n+        public StoreOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -132,1 +132,1 @@\n-        public CallOp(CallOp that, CopyContext cc) {\n+        public CallOp(CallOp that, CodeContext cc) {\n@@ -137,1 +137,1 @@\n-        public CallOp transform(CopyContext cc, OpTransformer ot) {\n+        public CallOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -157,1 +157,1 @@\n-        public ArrayLengthOp(ArrayLengthOp that, CopyContext cc) {\n+        public ArrayLengthOp(ArrayLengthOp that, CodeContext cc) {\n@@ -162,1 +162,1 @@\n-        public ArrayLengthOp transform(CopyContext cc, OpTransformer ot) {\n+        public ArrayLengthOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -176,1 +176,1 @@\n-        public ConstantOp(ConstantOp that, CopyContext cc) {\n+        public ConstantOp(ConstantOp that, CodeContext cc) {\n@@ -182,1 +182,1 @@\n-        public ConstantOp transform(CopyContext cc, OpTransformer ot) {\n+        public ConstantOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -198,1 +198,1 @@\n-        public ConvertOp(ConvertOp that, CopyContext cc) {\n+        public ConvertOp(ConvertOp that, CodeContext cc) {\n@@ -203,1 +203,1 @@\n-        public ConvertOp transform(CopyContext cc, OpTransformer ot) {\n+        public ConvertOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -215,1 +215,1 @@\n-        public IAddOp(IAddOp that, CopyContext cc) {\n+        public IAddOp(IAddOp that, CodeContext cc) {\n@@ -220,1 +220,1 @@\n-        public IAddOp transform(CopyContext cc, OpTransformer ot) {\n+        public IAddOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -232,1 +232,1 @@\n-        public FAddOp(FAddOp that, CopyContext cc) {\n+        public FAddOp(FAddOp that, CodeContext cc) {\n@@ -237,1 +237,1 @@\n-        public FAddOp transform(CopyContext cc, OpTransformer ot) {\n+        public FAddOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -249,1 +249,1 @@\n-        public ISubOp(ISubOp that, CopyContext cc) {\n+        public ISubOp(ISubOp that, CodeContext cc) {\n@@ -254,1 +254,1 @@\n-        public ISubOp transform(CopyContext cc, OpTransformer ot) {\n+        public ISubOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -266,1 +266,1 @@\n-        public FSubOp(FSubOp that, CopyContext cc) {\n+        public FSubOp(FSubOp that, CodeContext cc) {\n@@ -271,1 +271,1 @@\n-        public FSubOp transform(CopyContext cc, OpTransformer ot) {\n+        public FSubOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -283,1 +283,1 @@\n-        public IMulOp(IMulOp that, CopyContext cc) {\n+        public IMulOp(IMulOp that, CodeContext cc) {\n@@ -288,1 +288,1 @@\n-        public IMulOp transform(CopyContext cc, OpTransformer ot) {\n+        public IMulOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -300,1 +300,1 @@\n-        public FMulOp(FMulOp that, CopyContext cc) {\n+        public FMulOp(FMulOp that, CodeContext cc) {\n@@ -305,1 +305,1 @@\n-        public FMulOp transform(CopyContext cc, OpTransformer ot) {\n+        public FMulOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -317,1 +317,1 @@\n-        public IDivOp(IDivOp that, CopyContext cc) {\n+        public IDivOp(IDivOp that, CodeContext cc) {\n@@ -322,1 +322,1 @@\n-        public IDivOp transform(CopyContext cc, OpTransformer ot) {\n+        public IDivOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -334,1 +334,1 @@\n-        public FDivOp(FDivOp that, CopyContext cc) {\n+        public FDivOp(FDivOp that, CodeContext cc) {\n@@ -339,1 +339,1 @@\n-        public FDivOp transform(CopyContext cc, OpTransformer ot) {\n+        public FDivOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -351,1 +351,1 @@\n-        public ModOp(ModOp that, CopyContext cc) {\n+        public ModOp(ModOp that, CodeContext cc) {\n@@ -356,1 +356,1 @@\n-        public ModOp transform(CopyContext cc, OpTransformer ot) {\n+        public ModOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -368,1 +368,1 @@\n-        public IEqualOp(IEqualOp that, CopyContext cc) {\n+        public IEqualOp(IEqualOp that, CodeContext cc) {\n@@ -373,1 +373,1 @@\n-        public IEqualOp transform(CopyContext cc, OpTransformer ot) {\n+        public IEqualOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -385,1 +385,1 @@\n-        public FEqualOp(FEqualOp that, CopyContext cc) {\n+        public FEqualOp(FEqualOp that, CodeContext cc) {\n@@ -390,1 +390,1 @@\n-        public FEqualOp transform(CopyContext cc, OpTransformer ot) {\n+        public FEqualOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -402,1 +402,1 @@\n-        public INotEqualOp(INotEqualOp that, CopyContext cc) {\n+        public INotEqualOp(INotEqualOp that, CodeContext cc) {\n@@ -407,1 +407,1 @@\n-        public INotEqualOp transform(CopyContext cc, OpTransformer ot) {\n+        public INotEqualOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -420,1 +420,1 @@\n-        public FNotEqualOp(FNotEqualOp that, CopyContext cc) {\n+        public FNotEqualOp(FNotEqualOp that, CodeContext cc) {\n@@ -425,1 +425,1 @@\n-        public FNotEqualOp transform(CopyContext cc, OpTransformer ot) {\n+        public FNotEqualOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -437,1 +437,1 @@\n-        public LtOp(LtOp that, CopyContext cc) {\n+        public LtOp(LtOp that, CodeContext cc) {\n@@ -442,1 +442,1 @@\n-        public LtOp transform(CopyContext cc, OpTransformer ot) {\n+        public LtOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -456,1 +456,1 @@\n-        public BranchOp(BranchOp that, CopyContext cc) {\n+        public BranchOp(BranchOp that, CodeContext cc) {\n@@ -462,1 +462,1 @@\n-        public BranchOp transform(CopyContext cc, OpTransformer ot) {\n+        public BranchOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -487,1 +487,1 @@\n-        public ConditionalBranchOp(ConditionalBranchOp that, CopyContext cc) {\n+        public ConditionalBranchOp(ConditionalBranchOp that, CodeContext cc) {\n@@ -494,1 +494,1 @@\n-        public ConditionalBranchOp transform(CopyContext cc, OpTransformer ot) {\n+        public ConditionalBranchOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -523,1 +523,1 @@\n-        public VariableOp(VariableOp that, CopyContext cc) {\n+        public VariableOp(VariableOp that, CodeContext cc) {\n@@ -530,1 +530,1 @@\n-        public VariableOp transform(CopyContext cc, OpTransformer ot) {\n+        public VariableOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -550,1 +550,1 @@\n-        public CompositeExtractOp(CompositeExtractOp that, CopyContext cc) {\n+        public CompositeExtractOp(CompositeExtractOp that, CodeContext cc) {\n@@ -555,1 +555,1 @@\n-        public CompositeExtractOp transform(CopyContext cc, OpTransformer ot) {\n+        public CompositeExtractOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -567,1 +567,1 @@\n-        public InBoundAccessChainOp(InBoundAccessChainOp that, CopyContext cc) {\n+        public InBoundAccessChainOp(InBoundAccessChainOp that, CodeContext cc) {\n@@ -572,1 +572,1 @@\n-        public InBoundAccessChainOp transform(CopyContext cc, OpTransformer ot) {\n+        public InBoundAccessChainOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -584,1 +584,1 @@\n-        public ReturnOp(ReturnOp that, CopyContext cc) {\n+        public ReturnOp(ReturnOp that, CodeContext cc) {\n@@ -589,1 +589,1 @@\n-        public ReturnOp transform(CopyContext cc, OpTransformer ot) {\n+        public ReturnOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -601,1 +601,1 @@\n-        public FunctionParameterOp(FunctionParameterOp that, CopyContext cc) {\n+        public FunctionParameterOp(FunctionParameterOp that, CodeContext cc) {\n@@ -606,1 +606,1 @@\n-        public FunctionParameterOp transform(CopyContext cc, OpTransformer ot) {\n+        public FunctionParameterOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -633,1 +633,1 @@\n-        public FuncOp(FuncOp that, CopyContext cc) {\n+        public FuncOp(FuncOp that, CodeContext cc) {\n@@ -641,1 +641,1 @@\n-        public FuncOp transform(CopyContext cc, OpTransformer ot) {\n+        public FuncOp transform(CodeContext cc, CodeTransformer ot) {\n","filename":"cr-examples\/spirv\/src\/main\/java\/intel\/code\/spirv\/SpirvOps.java","additions":62,"deletions":62,"binary":false,"changes":124,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -35,1 +36,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -280,1 +280,1 @@\n-        CoreOp.FuncOp lfop = fop.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lfop = fop.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"cr-examples\/spirv\/src\/main\/java\/intel\/code\/spirv\/TranslateToSpirvModel.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -50,1 +50,1 @@\n-        ArithMathOp(ArithMathOp that, CopyContext cc) {\n+        ArithMathOp(ArithMathOp that, CodeContext cc) {\n@@ -125,1 +125,1 @@\n-        ConstantOp(ConstantOp that, CopyContext cc) {\n+        ConstantOp(ConstantOp that, CodeContext cc) {\n@@ -132,1 +132,1 @@\n-        public ConstantOp transform(CopyContext cc, OpTransformer ot) {\n+        public ConstantOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -160,1 +160,1 @@\n-        AddOp(AddOp that, CopyContext cc) {\n+        AddOp(AddOp that, CodeContext cc) {\n@@ -165,1 +165,1 @@\n-        public AddOp transform(CopyContext cc, OpTransformer ot) {\n+        public AddOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -182,1 +182,1 @@\n-        SubOp(SubOp that, CopyContext cc) {\n+        SubOp(SubOp that, CodeContext cc) {\n@@ -187,1 +187,1 @@\n-        public SubOp transform(CopyContext cc, OpTransformer ot) {\n+        public SubOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -204,1 +204,1 @@\n-        MulOp(MulOp that, CopyContext cc) {\n+        MulOp(MulOp that, CodeContext cc) {\n@@ -209,1 +209,1 @@\n-        public MulOp transform(CopyContext cc, OpTransformer ot) {\n+        public MulOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -226,1 +226,1 @@\n-        DivOp(DivOp that, CopyContext cc) {\n+        DivOp(DivOp that, CodeContext cc) {\n@@ -231,1 +231,1 @@\n-        public DivOp transform(CopyContext cc, OpTransformer ot) {\n+        public DivOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -248,1 +248,1 @@\n-        RemOp(RemOp that, CopyContext cc) {\n+        RemOp(RemOp that, CodeContext cc) {\n@@ -253,1 +253,1 @@\n-        public RemOp transform(CopyContext cc, OpTransformer ot) {\n+        public RemOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -270,1 +270,1 @@\n-        AndOp(AndOp that, CopyContext cc) {\n+        AndOp(AndOp that, CodeContext cc) {\n@@ -275,1 +275,1 @@\n-        public AndOp transform(CopyContext cc, OpTransformer ot) {\n+        public AndOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -292,1 +292,1 @@\n-        MaxOp(MaxOp that, CopyContext cc) {\n+        MaxOp(MaxOp that, CodeContext cc) {\n@@ -297,1 +297,1 @@\n-        public MaxOp transform(CopyContext cc, OpTransformer ot) {\n+        public MaxOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -315,1 +315,1 @@\n-        MinOp(MinOp that, CopyContext cc) {\n+        MinOp(MinOp that, CodeContext cc) {\n@@ -320,1 +320,1 @@\n-        public MinOp transform(CopyContext cc, OpTransformer ot) {\n+        public MinOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -338,1 +338,1 @@\n-        TruncOp(TruncOp that, CopyContext cc) {\n+        TruncOp(TruncOp that, CodeContext cc) {\n@@ -343,1 +343,1 @@\n-        public TruncOp transform(CopyContext cc, OpTransformer ot) {\n+        public TruncOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -361,1 +361,1 @@\n-        ExpOp(ExpOp that, CopyContext cc) {\n+        ExpOp(ExpOp that, CodeContext cc) {\n@@ -366,1 +366,1 @@\n-        public ExpOp transform(CopyContext cc, OpTransformer ot) {\n+        public ExpOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -414,1 +414,1 @@\n-        CompareOp(CompareOp that, CopyContext cc) {\n+        CompareOp(CompareOp that, CodeContext cc) {\n@@ -421,1 +421,1 @@\n-        public CompareOp transform(CopyContext cc, OpTransformer ot) {\n+        public CompareOp transform(CodeContext cc, CodeTransformer ot) {\n","filename":"cr-examples\/triton\/src\/main\/java\/oracle\/code\/triton\/ArithMathOps.java","additions":25,"deletions":25,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -61,1 +61,1 @@\n-            public ForOp body(CopyContext cc, Consumer<Block.Builder> c) {\n+            public ForOp body(CodeContext cc, Consumer<Block.Builder> c) {\n@@ -78,1 +78,1 @@\n-        ForOp(ForOp that, CopyContext cc, OpTransformer ot) {\n+        ForOp(ForOp that, CodeContext cc, CodeTransformer ot) {\n@@ -85,1 +85,1 @@\n-        public ForOp transform(CopyContext cc, OpTransformer ot) {\n+        public ForOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -124,1 +124,1 @@\n-        YieldOp(YieldOp that, CopyContext cc) {\n+        YieldOp(YieldOp that, CodeContext cc) {\n@@ -129,1 +129,1 @@\n-        public YieldOp transform(CopyContext cc, OpTransformer ot) {\n+        public YieldOp transform(CodeContext cc, CodeTransformer ot) {\n","filename":"cr-examples\/triton\/src\/main\/java\/oracle\/code\/triton\/SCFOps.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -50,1 +50,1 @@\n-        TritonOp(TritonOp that, CopyContext cc) {\n+        TritonOp(TritonOp that, CodeContext cc) {\n@@ -89,1 +89,1 @@\n-        ModuleOp(ModuleOp that, CopyContext cc, OpTransformer ot) {\n+        ModuleOp(ModuleOp that, CodeContext cc, CodeTransformer ot) {\n@@ -111,1 +111,1 @@\n-        public ModuleOp transform(CopyContext cc, OpTransformer ot) {\n+        public ModuleOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -115,2 +115,2 @@\n-        public ModuleOp transform(OpTransformer ot) {\n-            return new ModuleOp(this, CopyContext.create(), ot);\n+        public ModuleOp transform(CodeTransformer ot) {\n+            return new ModuleOp(this, CodeContext.create(), ot);\n@@ -192,1 +192,1 @@\n-        FuncOp(FuncOp that, CopyContext cc, OpTransformer oa) {\n+        FuncOp(FuncOp that, CodeContext cc, CodeTransformer oa) {\n@@ -196,1 +196,1 @@\n-        FuncOp(FuncOp that, String funcName, CopyContext cc, OpTransformer ot) {\n+        FuncOp(FuncOp that, String funcName, CodeContext cc, CodeTransformer ot) {\n@@ -204,1 +204,1 @@\n-        public FuncOp transform(CopyContext cc, OpTransformer ot) {\n+        public FuncOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -208,2 +208,2 @@\n-        public FuncOp transform(OpTransformer ot) {\n-            return new FuncOp(this, CopyContext.create(), ot);\n+        public FuncOp transform(CodeTransformer ot) {\n+            return new FuncOp(this, CodeContext.create(), ot);\n@@ -212,2 +212,2 @@\n-        public FuncOp transform(String funcName, OpTransformer ot) {\n-            return new FuncOp(this, funcName, CopyContext.create(), ot);\n+        public FuncOp transform(String funcName, CodeTransformer ot) {\n+            return new FuncOp(this, funcName, CodeContext.create(), ot);\n@@ -249,1 +249,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer _ignore) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer _ignore) {\n@@ -252,1 +252,1 @@\n-            b.rebind(b.context(), OpTransformer.COPYING_TRANSFORMER).op(this);\n+            b.rebind(b.context(), CodeTransformer.COPYING_TRANSFORMER).op(this);\n@@ -280,1 +280,1 @@\n-        CallOp(CallOp that, CopyContext cc) {\n+        CallOp(CallOp that, CodeContext cc) {\n@@ -287,1 +287,1 @@\n-        public CallOp transform(CopyContext cc, OpTransformer ot) {\n+        public CallOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -354,1 +354,1 @@\n-        ReduceOp(ReduceOp that, CopyContext cc, OpTransformer ot) {\n+        ReduceOp(ReduceOp that, CodeContext cc, CodeTransformer ot) {\n@@ -362,1 +362,1 @@\n-        public ReduceOp transform(CopyContext cc, OpTransformer ot) {\n+        public ReduceOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -400,1 +400,1 @@\n-        ReduceReturnOp(ReduceReturnOp that, CopyContext cc) {\n+        ReduceReturnOp(ReduceReturnOp that, CodeContext cc) {\n@@ -405,1 +405,1 @@\n-        public ReduceReturnOp transform(CopyContext cc, OpTransformer ot) {\n+        public ReduceReturnOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -436,1 +436,1 @@\n-        GetProgramIdOp(GetProgramIdOp that, CopyContext cc) {\n+        GetProgramIdOp(GetProgramIdOp that, CodeContext cc) {\n@@ -443,1 +443,1 @@\n-        public GetProgramIdOp transform(CopyContext cc, OpTransformer ot) {\n+        public GetProgramIdOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -493,1 +493,1 @@\n-        MakeRangeOp(MakeRangeOp that, CopyContext cc) {\n+        MakeRangeOp(MakeRangeOp that, CodeContext cc) {\n@@ -501,1 +501,1 @@\n-        public MakeRangeOp transform(CopyContext cc, OpTransformer ot) {\n+        public MakeRangeOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -546,1 +546,1 @@\n-        ExpandOp(ExpandOp that, CopyContext cc) {\n+        ExpandOp(ExpandOp that, CodeContext cc) {\n@@ -553,1 +553,1 @@\n-        public ExpandOp transform(CopyContext cc, OpTransformer ot) {\n+        public ExpandOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -581,1 +581,1 @@\n-        SplatOp(SplatOp that, CopyContext cc) {\n+        SplatOp(SplatOp that, CodeContext cc) {\n@@ -586,1 +586,1 @@\n-        public SplatOp transform(CopyContext cc, OpTransformer ot) {\n+        public SplatOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -603,1 +603,1 @@\n-        BroadcastOp(BroadcastOp that, CopyContext cc) {\n+        BroadcastOp(BroadcastOp that, CodeContext cc) {\n@@ -608,1 +608,1 @@\n-        public BroadcastOp transform(CopyContext cc, OpTransformer ot) {\n+        public BroadcastOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -625,1 +625,1 @@\n-        AddPtrOp(AddPtrOp that, CopyContext cc) {\n+        AddPtrOp(AddPtrOp that, CodeContext cc) {\n@@ -630,1 +630,1 @@\n-        public AddPtrOp transform(CopyContext cc, OpTransformer ot) {\n+        public AddPtrOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -647,1 +647,1 @@\n-        LoadOp(LoadOp that, CopyContext cc) {\n+        LoadOp(LoadOp that, CodeContext cc) {\n@@ -652,1 +652,1 @@\n-        public LoadOp transform(CopyContext cc, OpTransformer ot) {\n+        public LoadOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -673,1 +673,1 @@\n-        StoreOp(StoreOp that, CopyContext cc) {\n+        StoreOp(StoreOp that, CodeContext cc) {\n@@ -678,1 +678,1 @@\n-        public StoreOp transform(CopyContext cc, OpTransformer ot) {\n+        public StoreOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -695,1 +695,1 @@\n-        ReturnOp(ReturnOp that, CopyContext cc) {\n+        ReturnOp(ReturnOp that, CodeContext cc) {\n@@ -700,1 +700,1 @@\n-        public ReturnOp transform(CopyContext cc, OpTransformer ot) {\n+        public ReturnOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -721,1 +721,1 @@\n-        DotOp(DotOp that, CopyContext cc) {\n+        DotOp(DotOp that, CodeContext cc) {\n@@ -726,1 +726,1 @@\n-        public DotOp transform(CopyContext cc, OpTransformer ot) {\n+        public DotOp transform(CodeContext cc, CodeTransformer ot) {\n","filename":"cr-examples\/triton\/src\/main\/java\/oracle\/code\/triton\/TritonOps.java","additions":40,"deletions":40,"binary":false,"changes":80,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n-        ConsumeOp(ConsumeOp that, CopyContext cc) {\n+        ConsumeOp(ConsumeOp that, CodeContext cc) {\n@@ -50,1 +50,1 @@\n-        public ConsumeOp transform(CopyContext cc, OpTransformer ot) {\n+        public ConsumeOp transform(CodeContext cc, CodeTransformer ot) {\n","filename":"cr-examples\/triton\/src\/main\/java\/oracle\/code\/triton\/TritonTestOps.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -590,1 +590,1 @@\n-        CopyContext cc = kblock.context();\n+        CodeContext cc = kblock.context();\n@@ -677,1 +677,1 @@\n-    static void transformToSCFFor(CopyContext cc, Block.Builder kblock, JavaOp.ForOp fop,\n+    static void transformToSCFFor(CodeContext cc, Block.Builder kblock, JavaOp.ForOp fop,\n@@ -726,1 +726,1 @@\n-                .body(CopyContext.create(cc), builder -> {\n+                .body(CodeContext.create(cc), builder -> {\n","filename":"cr-examples\/triton\/src\/main\/java\/oracle\/code\/triton\/TritonTransformer.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -436,1 +436,1 @@\n-            CopyContext cc = block.context();\n+            CodeContext cc = block.context();\n","filename":"hat\/backends\/ffi\/cuda\/src\/main\/java\/hat\/backend\/ffi\/CudaBackend.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -180,1 +180,1 @@\n-        PTXPtrOp(PTXPtrOp that, CopyContext cc) {\n+        PTXPtrOp(PTXPtrOp that, CodeContext cc) {\n@@ -188,1 +188,1 @@\n-        public PTXPtrOp transform(CopyContext cc, OpTransformer ot) {\n+        public PTXPtrOp transform(CodeContext cc, CodeTransformer ot) {\n","filename":"hat\/backends\/ffi\/cuda\/src\/main\/java\/hat\/backend\/ffi\/PTXHATKernelBuilder.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -37,1 +37,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -66,1 +66,1 @@\n-    SpirvOp(SpirvOp that, CopyContext cc) {\n+    SpirvOp(SpirvOp that, CodeContext cc) {\n@@ -92,1 +92,1 @@\n-        public ModuleOp(ModuleOp that, CopyContext cc) {\n+        public ModuleOp(ModuleOp that, CodeContext cc) {\n@@ -98,1 +98,1 @@\n-        public ModuleOp transform(CopyContext cc, OpTransformer ot) {\n+        public ModuleOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -116,1 +116,1 @@\n-        public PhiOp(PhiOp that, CopyContext cc) {\n+        public PhiOp(PhiOp that, CodeContext cc) {\n@@ -127,1 +127,1 @@\n-        public PhiOp transform(CopyContext cc, OpTransformer ot) {\n+        public PhiOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -143,1 +143,1 @@\n-        public LoadOp(LoadOp that, CopyContext cc) {\n+        public LoadOp(LoadOp that, CodeContext cc) {\n@@ -148,1 +148,1 @@\n-        public LoadOp transform(CopyContext cc, OpTransformer ot) {\n+        public LoadOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -162,1 +162,1 @@\n-        public FieldLoadOp(FieldLoadOp that, CopyContext cc) {\n+        public FieldLoadOp(FieldLoadOp that, CodeContext cc) {\n@@ -168,1 +168,1 @@\n-        public FieldLoadOp transform(CopyContext cc, OpTransformer ot) {\n+        public FieldLoadOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -188,1 +188,1 @@\n-        public StoreOp(StoreOp that, CopyContext cc) {\n+        public StoreOp(StoreOp that, CodeContext cc) {\n@@ -193,1 +193,1 @@\n-        public StoreOp transform(CopyContext cc, OpTransformer ot) {\n+        public StoreOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -207,1 +207,1 @@\n-        public CallOp(CallOp that, CopyContext cc) {\n+        public CallOp(CallOp that, CodeContext cc) {\n@@ -213,1 +213,1 @@\n-        public CallOp transform(CopyContext cc, OpTransformer ot) {\n+        public CallOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -233,1 +233,1 @@\n-        public ArrayLengthOp(ArrayLengthOp that, CopyContext cc) {\n+        public ArrayLengthOp(ArrayLengthOp that, CodeContext cc) {\n@@ -238,1 +238,1 @@\n-        public ArrayLengthOp transform(CopyContext cc, OpTransformer ot) {\n+        public ArrayLengthOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -252,1 +252,1 @@\n-        public ConstantOp(ConstantOp that, CopyContext cc) {\n+        public ConstantOp(ConstantOp that, CodeContext cc) {\n@@ -258,1 +258,1 @@\n-        public ConstantOp transform(CopyContext cc, OpTransformer ot) {\n+        public ConstantOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -274,1 +274,1 @@\n-        public ConvertOp(ConvertOp that, CopyContext cc) {\n+        public ConvertOp(ConvertOp that, CodeContext cc) {\n@@ -279,1 +279,1 @@\n-        public ConvertOp transform(CopyContext cc, OpTransformer ot) {\n+        public ConvertOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -291,1 +291,1 @@\n-        public BitwiseAndOp(BitwiseAndOp that, CopyContext cc) {\n+        public BitwiseAndOp(BitwiseAndOp that, CodeContext cc) {\n@@ -296,1 +296,1 @@\n-        public BitwiseAndOp transform(CopyContext cc, OpTransformer ot) {\n+        public BitwiseAndOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -309,1 +309,1 @@\n-        public IAddOp(IAddOp that, CopyContext cc) {\n+        public IAddOp(IAddOp that, CodeContext cc) {\n@@ -314,1 +314,1 @@\n-        public IAddOp transform(CopyContext cc, OpTransformer ot) {\n+        public IAddOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -326,1 +326,1 @@\n-        public FAddOp(FAddOp that, CopyContext cc) {\n+        public FAddOp(FAddOp that, CodeContext cc) {\n@@ -331,1 +331,1 @@\n-        public FAddOp transform(CopyContext cc, OpTransformer ot) {\n+        public FAddOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -343,1 +343,1 @@\n-        public ISubOp(ISubOp that, CopyContext cc) {\n+        public ISubOp(ISubOp that, CodeContext cc) {\n@@ -348,1 +348,1 @@\n-        public ISubOp transform(CopyContext cc, OpTransformer ot) {\n+        public ISubOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -360,1 +360,1 @@\n-        public FSubOp(FSubOp that, CopyContext cc) {\n+        public FSubOp(FSubOp that, CodeContext cc) {\n@@ -365,1 +365,1 @@\n-        public FSubOp transform(CopyContext cc, OpTransformer ot) {\n+        public FSubOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -377,1 +377,1 @@\n-        public IMulOp(IMulOp that, CopyContext cc) {\n+        public IMulOp(IMulOp that, CodeContext cc) {\n@@ -382,1 +382,1 @@\n-        public IMulOp transform(CopyContext cc, OpTransformer ot) {\n+        public IMulOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -394,1 +394,1 @@\n-        public FMulOp(FMulOp that, CopyContext cc) {\n+        public FMulOp(FMulOp that, CodeContext cc) {\n@@ -399,1 +399,1 @@\n-        public FMulOp transform(CopyContext cc, OpTransformer ot) {\n+        public FMulOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -411,1 +411,1 @@\n-        public IDivOp(IDivOp that, CopyContext cc) {\n+        public IDivOp(IDivOp that, CodeContext cc) {\n@@ -416,1 +416,1 @@\n-        public IDivOp transform(CopyContext cc, OpTransformer ot) {\n+        public IDivOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -428,1 +428,1 @@\n-        public FDivOp(FDivOp that, CopyContext cc) {\n+        public FDivOp(FDivOp that, CodeContext cc) {\n@@ -433,1 +433,1 @@\n-        public FDivOp transform(CopyContext cc, OpTransformer ot) {\n+        public FDivOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -445,1 +445,1 @@\n-        public ModOp(ModOp that, CopyContext cc) {\n+        public ModOp(ModOp that, CodeContext cc) {\n@@ -450,1 +450,1 @@\n-        public ModOp transform(CopyContext cc, OpTransformer ot) {\n+        public ModOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -462,1 +462,1 @@\n-        public SNegateOp(SNegateOp that, CopyContext cc) {\n+        public SNegateOp(SNegateOp that, CodeContext cc) {\n@@ -467,1 +467,1 @@\n-        public SNegateOp transform(CopyContext cc, OpTransformer ot) {\n+        public SNegateOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -479,1 +479,1 @@\n-        public FNegateOp(FNegateOp that, CopyContext cc) {\n+        public FNegateOp(FNegateOp that, CodeContext cc) {\n@@ -484,1 +484,1 @@\n-        public FNegateOp transform(CopyContext cc, OpTransformer ot) {\n+        public FNegateOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -496,1 +496,1 @@\n-        public IEqualOp(IEqualOp that, CopyContext cc) {\n+        public IEqualOp(IEqualOp that, CodeContext cc) {\n@@ -501,1 +501,1 @@\n-        public IEqualOp transform(CopyContext cc, OpTransformer ot) {\n+        public IEqualOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -513,1 +513,1 @@\n-        public FEqualOp(FEqualOp that, CopyContext cc) {\n+        public FEqualOp(FEqualOp that, CodeContext cc) {\n@@ -518,1 +518,1 @@\n-        public FEqualOp transform(CopyContext cc, OpTransformer ot) {\n+        public FEqualOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -530,1 +530,1 @@\n-        public INotEqualOp(INotEqualOp that, CopyContext cc) {\n+        public INotEqualOp(INotEqualOp that, CodeContext cc) {\n@@ -535,1 +535,1 @@\n-        public INotEqualOp transform(CopyContext cc, OpTransformer ot) {\n+        public INotEqualOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -548,1 +548,1 @@\n-        public FNotEqualOp(FNotEqualOp that, CopyContext cc) {\n+        public FNotEqualOp(FNotEqualOp that, CodeContext cc) {\n@@ -553,1 +553,1 @@\n-        public FNotEqualOp transform(CopyContext cc, OpTransformer ot) {\n+        public FNotEqualOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -565,1 +565,1 @@\n-        public PtrNotEqualOp(PtrNotEqualOp that, CopyContext cc) {\n+        public PtrNotEqualOp(PtrNotEqualOp that, CodeContext cc) {\n@@ -570,1 +570,1 @@\n-        public PtrNotEqualOp transform(CopyContext cc, OpTransformer ot) {\n+        public PtrNotEqualOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -582,1 +582,1 @@\n-        public LtOp(LtOp that, CopyContext cc) {\n+        public LtOp(LtOp that, CodeContext cc) {\n@@ -587,1 +587,1 @@\n-        public LtOp transform(CopyContext cc, OpTransformer ot) {\n+        public LtOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -599,1 +599,1 @@\n-        public GtOp(GtOp that, CopyContext cc) {\n+        public GtOp(GtOp that, CodeContext cc) {\n@@ -604,1 +604,1 @@\n-        public GtOp transform(CopyContext cc, OpTransformer ot) {\n+        public GtOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -616,1 +616,1 @@\n-        public GeOp(GeOp that, CopyContext cc) {\n+        public GeOp(GeOp that, CodeContext cc) {\n@@ -621,1 +621,1 @@\n-        public GeOp transform(CopyContext cc, OpTransformer ot) {\n+        public GeOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -635,1 +635,1 @@\n-        public BranchOp(BranchOp that, CopyContext cc) {\n+        public BranchOp(BranchOp that, CodeContext cc) {\n@@ -641,1 +641,1 @@\n-        public BranchOp transform(CopyContext cc, OpTransformer ot) {\n+        public BranchOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -666,1 +666,1 @@\n-        public ConditionalBranchOp(ConditionalBranchOp that, CopyContext cc) {\n+        public ConditionalBranchOp(ConditionalBranchOp that, CodeContext cc) {\n@@ -673,1 +673,1 @@\n-        public ConditionalBranchOp transform(CopyContext cc, OpTransformer ot) {\n+        public ConditionalBranchOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -702,1 +702,1 @@\n-        public VariableOp(VariableOp that, CopyContext cc) {\n+        public VariableOp(VariableOp that, CodeContext cc) {\n@@ -709,1 +709,1 @@\n-        public VariableOp transform(CopyContext cc, OpTransformer ot) {\n+        public VariableOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -729,1 +729,1 @@\n-        public CompositeExtractOp(CompositeExtractOp that, CopyContext cc) {\n+        public CompositeExtractOp(CompositeExtractOp that, CodeContext cc) {\n@@ -734,1 +734,1 @@\n-        public CompositeExtractOp transform(CopyContext cc, OpTransformer ot) {\n+        public CompositeExtractOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -746,1 +746,1 @@\n-        public InBoundsAccessChainOp(InBoundsAccessChainOp that, CopyContext cc) {\n+        public InBoundsAccessChainOp(InBoundsAccessChainOp that, CodeContext cc) {\n@@ -751,1 +751,1 @@\n-        public InBoundsAccessChainOp transform(CopyContext cc, OpTransformer ot) {\n+        public InBoundsAccessChainOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -763,1 +763,1 @@\n-        public ReturnOp(ReturnOp that, CopyContext cc) {\n+        public ReturnOp(ReturnOp that, CodeContext cc) {\n@@ -768,1 +768,1 @@\n-        public ReturnOp transform(CopyContext cc, OpTransformer ot) {\n+        public ReturnOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -780,1 +780,1 @@\n-        public ReturnValueOp(ReturnValueOp that, CopyContext cc) {\n+        public ReturnValueOp(ReturnValueOp that, CodeContext cc) {\n@@ -785,1 +785,1 @@\n-        public ReturnValueOp transform(CopyContext cc, OpTransformer ot) {\n+        public ReturnValueOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -797,1 +797,1 @@\n-        public FunctionParameterOp(FunctionParameterOp that, CopyContext cc) {\n+        public FunctionParameterOp(FunctionParameterOp that, CodeContext cc) {\n@@ -802,1 +802,1 @@\n-        public FunctionParameterOp transform(CopyContext cc, OpTransformer ot) {\n+        public FunctionParameterOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -829,1 +829,1 @@\n-        public FuncOp(FuncOp that, CopyContext cc) {\n+        public FuncOp(FuncOp that, CodeContext cc) {\n@@ -836,2 +836,2 @@\n-        public FuncOp transform(OpTransformer ot) {\n-            return transform(CopyContext.create(), ot);\n+        public FuncOp transform(CodeTransformer ot) {\n+            return transform(CodeContext.create(), ot);\n@@ -841,1 +841,1 @@\n-        public FuncOp transform(CopyContext cc, OpTransformer ot) {\n+        public FuncOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -845,1 +845,1 @@\n-        FuncOp(FuncOp that, String functionName, CopyContext cc, OpTransformer ot) {\n+        FuncOp(FuncOp that, String functionName, CodeContext cc, CodeTransformer ot) {\n","filename":"hat\/backends\/ffi\/spirv\/src\/main\/java\/intel\/code\/spirv\/SpirvOp.java","additions":82,"deletions":82,"binary":false,"changes":164,"status":"modified"},{"patch":"@@ -37,2 +37,2 @@\n-import jdk.incubator.code.CopyContext;\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeContext;\n+import jdk.incubator.code.CodeTransformer;\n","filename":"hat\/backends\/ffi\/spirv\/src\/main\/java\/intel\/code\/spirv\/TranslateToSpirvModel.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -46,1 +46,1 @@\n-    public HATBarrierOp(HATBarrierOp hatBarrierOp, CopyContext copyContext) {\n+    public HATBarrierOp(HATBarrierOp hatBarrierOp, CodeContext copyContext) {\n@@ -51,1 +51,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATBarrierOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -45,1 +45,1 @@\n-    public HATBlockThreadIdOp(HATBlockThreadIdOp op, CopyContext copyContext) {\n+    public HATBlockThreadIdOp(HATBlockThreadIdOp op, CodeContext copyContext) {\n@@ -51,1 +51,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATBlockThreadIdOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -41,1 +41,1 @@\n-    public HATF16AddOp(HATF16AddOp op, CopyContext copyContext) {\n+    public HATF16AddOp(HATF16AddOp op, CodeContext copyContext) {\n@@ -46,1 +46,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATF16AddOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -69,1 +69,1 @@\n-    public HATF16BinaryOp(HATF16BinaryOp op, CopyContext copyContext) {\n+    public HATF16BinaryOp(HATF16BinaryOp op, CodeContext copyContext) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATF16BinaryOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -46,1 +46,1 @@\n-    public HATF16ConvOp(HATF16ConvOp op, CopyContext copyContext) {\n+    public HATF16ConvOp(HATF16ConvOp op, CodeContext copyContext) {\n@@ -52,1 +52,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATF16ConvOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -41,1 +41,1 @@\n-    public HATF16DivOp(HATF16DivOp op, CopyContext copyContext) {\n+    public HATF16DivOp(HATF16DivOp op, CodeContext copyContext) {\n@@ -46,1 +46,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATF16DivOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -41,1 +41,1 @@\n-    public HATF16MulOp(HATF16MulOp op, CopyContext copyContext) {\n+    public HATF16MulOp(HATF16MulOp op, CodeContext copyContext) {\n@@ -46,1 +46,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATF16MulOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -41,1 +41,1 @@\n-    protected HATF16Op(HATF16Op that, CopyContext cc) {\n+    protected HATF16Op(HATF16Op that, CodeContext cc) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATF16Op.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -41,1 +41,1 @@\n-    public HATF16SubOp(HATF16SubOp op, CopyContext copyContext) {\n+    public HATF16SubOp(HATF16SubOp op, CodeContext copyContext) {\n@@ -46,1 +46,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATF16SubOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -49,1 +49,1 @@\n-    public HATF16ToFloatConvOp(HATF16ToFloatConvOp op, CopyContext copyContext) {\n+    public HATF16ToFloatConvOp(HATF16ToFloatConvOp op, CodeContext copyContext) {\n@@ -57,1 +57,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATF16ToFloatConvOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -46,1 +46,1 @@\n-    public HATF16VarLoadOp(HATF16VarLoadOp op, CopyContext copyContext) {\n+    public HATF16VarLoadOp(HATF16VarLoadOp op, CodeContext copyContext) {\n@@ -52,1 +52,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATF16VarLoadOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -46,1 +46,1 @@\n-    public HATF16VarOp(HATF16VarOp op, CopyContext copyContext) {\n+    public HATF16VarOp(HATF16VarOp op, CodeContext copyContext) {\n@@ -52,1 +52,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATF16VarOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -45,1 +45,1 @@\n-    public HATGlobalSizeOp(HATGlobalSizeOp op, CopyContext copyContext) {\n+    public HATGlobalSizeOp(HATGlobalSizeOp op, CodeContext copyContext) {\n@@ -51,1 +51,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATGlobalSizeOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -45,1 +45,1 @@\n-    public HATGlobalThreadIdOp(HATGlobalThreadIdOp op, CopyContext copyContext) {\n+    public HATGlobalThreadIdOp(HATGlobalThreadIdOp op, CodeContext copyContext) {\n@@ -51,1 +51,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATGlobalThreadIdOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -45,1 +45,1 @@\n-    public HATLocalSizeOp(HATLocalSizeOp op, CopyContext copyContext) {\n+    public HATLocalSizeOp(HATLocalSizeOp op, CodeContext copyContext) {\n@@ -51,1 +51,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATLocalSizeOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -45,1 +45,1 @@\n-    public HATLocalThreadIdOp(HATLocalThreadIdOp op, CopyContext copyContext) {\n+    public HATLocalThreadIdOp(HATLocalThreadIdOp op, CodeContext copyContext) {\n@@ -51,1 +51,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATLocalThreadIdOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -52,1 +52,1 @@\n-    public HATLocalVarOp(HATLocalVarOp op, CopyContext copyContext) {\n+    public HATLocalVarOp(HATLocalVarOp op, CodeContext copyContext) {\n@@ -60,1 +60,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATLocalVarOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -42,1 +42,1 @@\n-    protected HATMemoryDefOp(HATMemoryDefOp that, CopyContext cc) {\n+    protected HATMemoryDefOp(HATMemoryDefOp that, CodeContext cc) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATMemoryDefOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -51,1 +51,1 @@\n-    public HATMemoryLoadOp(HATMemoryLoadOp op, CopyContext copyContext) {\n+    public HATMemoryLoadOp(HATMemoryLoadOp op, CodeContext copyContext) {\n@@ -59,1 +59,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATMemoryLoadOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -42,1 +42,1 @@\n-    protected HATMemoryOp(HATMemoryOp that, CopyContext cc) {\n+    protected HATMemoryOp(HATMemoryOp that, CodeContext cc) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATMemoryOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -37,1 +37,1 @@\n-    protected HATOp(Op that, CopyContext cc) {\n+    protected HATOp(Op that, CodeContext cc) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -52,1 +52,1 @@\n-    public HATPrivateVarInitOp(HATPrivateVarInitOp op, CopyContext copyContext) {\n+    public HATPrivateVarInitOp(HATPrivateVarInitOp op, CodeContext copyContext) {\n@@ -61,1 +61,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATPrivateVarInitOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -54,1 +54,1 @@\n-    public HATPrivateVarOp(HATPrivateVarOp op, CopyContext copyContext) {\n+    public HATPrivateVarOp(HATPrivateVarOp op, CodeContext copyContext) {\n@@ -63,1 +63,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATPrivateVarOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -41,1 +41,1 @@\n-    protected HATThreadOp(HATThreadOp that, CopyContext cc) {\n+    protected HATThreadOp(HATThreadOp that, CodeContext cc) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATThreadOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -41,1 +41,1 @@\n-    public HATVectorAddOp(HATVectorAddOp op, CopyContext copyContext) {\n+    public HATVectorAddOp(HATVectorAddOp op, CodeContext copyContext) {\n@@ -46,1 +46,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorAddOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -61,1 +61,1 @@\n-    public HATVectorBinaryOp(HATVectorBinaryOp op, CopyContext copyContext) {\n+    public HATVectorBinaryOp(HATVectorBinaryOp op, CodeContext copyContext) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorBinaryOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -41,1 +41,1 @@\n-    public HATVectorDivOp(HATVectorDivOp op, CopyContext copyContext) {\n+    public HATVectorDivOp(HATVectorDivOp op, CodeContext copyContext) {\n@@ -46,1 +46,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorDivOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -51,1 +51,1 @@\n-    public HATVectorLoadOp(HATVectorLoadOp op, CopyContext copyContext) {\n+    public HATVectorLoadOp(HATVectorLoadOp op, CodeContext copyContext) {\n@@ -60,1 +60,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorLoadOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -47,1 +47,1 @@\n-    public HATVectorMakeOfOp(HATVectorMakeOfOp op, CopyContext copyContext) {\n+    public HATVectorMakeOfOp(HATVectorMakeOfOp op, CodeContext copyContext) {\n@@ -54,1 +54,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorMakeOfOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -41,1 +41,1 @@\n-    public HATVectorMulOp(HATVectorMulOp op, CopyContext copyContext) {\n+    public HATVectorMulOp(HATVectorMulOp op, CodeContext copyContext) {\n@@ -46,1 +46,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorMulOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -47,1 +47,1 @@\n-    public HATVectorOfOp(HATVectorOfOp op, CopyContext copyContext) {\n+    public HATVectorOfOp(HATVectorOfOp op, CodeContext copyContext) {\n@@ -54,1 +54,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorOfOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -48,1 +48,1 @@\n-    protected HATVectorOp(HATVectorOp that, CopyContext cc) {\n+    protected HATVectorOp(HATVectorOp that, CodeContext cc) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -47,1 +47,1 @@\n-    public HATVectorSelectLoadOp(HATVectorSelectLoadOp that, CopyContext cc) {\n+    public HATVectorSelectLoadOp(HATVectorSelectLoadOp that, CodeContext cc) {\n@@ -54,1 +54,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorSelectLoadOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -50,1 +50,1 @@\n-    public HATVectorSelectStoreOp(HATVectorSelectStoreOp that, CopyContext cc) {\n+    public HATVectorSelectStoreOp(HATVectorSelectStoreOp that, CodeContext cc) {\n@@ -58,1 +58,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorSelectStoreOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -45,1 +45,1 @@\n-    public HATVectorStoreView(HATVectorStoreView op, CopyContext copyContext) {\n+    public HATVectorStoreView(HATVectorStoreView op, CodeContext copyContext) {\n@@ -51,1 +51,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorStoreView.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -41,1 +41,1 @@\n-    public HATVectorSubOp(HATVectorSubOp op, CopyContext copyContext) {\n+    public HATVectorSubOp(HATVectorSubOp op, CodeContext copyContext) {\n@@ -46,1 +46,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorSubOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -42,1 +42,1 @@\n-    public HATVectorVarLoadOp(HATVectorVarLoadOp op, CopyContext copyContext) {\n+    public HATVectorVarLoadOp(HATVectorVarLoadOp op, CodeContext copyContext) {\n@@ -47,1 +47,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorVarLoadOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -29,1 +29,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -46,1 +46,1 @@\n-    public HATVectorVarOp(HATVectorVarOp op, CopyContext copyContext) {\n+    public HATVectorVarOp(HATVectorVarOp op, CodeContext copyContext) {\n@@ -52,1 +52,1 @@\n-    public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+    public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATVectorVarOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -35,0 +35,2 @@\n+import jdk.incubator.code.CodeContext;\n+import jdk.incubator.code.CodeTransformer;\n@@ -36,1 +38,0 @@\n-import jdk.incubator.code.CopyContext;\n@@ -38,1 +39,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -507,1 +507,1 @@\n-        return funcOp.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        return funcOp.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -529,1 +529,1 @@\n-    public static CoreOp.FuncOp transform(CallSite callSite, CoreOp.FuncOp funcOp, Predicate<Op> predicate, OpTransformer opTransformer) {\n+    public static CoreOp.FuncOp transform(CallSite callSite, CoreOp.FuncOp funcOp, Predicate<Op> predicate, CodeTransformer CodeTransformer) {\n@@ -535,1 +535,1 @@\n-                var builder = opTransformer.acceptOp(blockBuilder,op);\n+                var builder = CodeTransformer.acceptOp(blockBuilder,op);\n@@ -546,1 +546,1 @@\n-    public static CoreOp.FuncOp transform(CallSite callSite, CoreOp.FuncOp funcOp, OpTransformer opTransformer) {\n+    public static CoreOp.FuncOp transform(CallSite callSite, CoreOp.FuncOp funcOp, CodeTransformer CodeTransformer) {\n@@ -550,1 +550,1 @@\n-        return funcOp.transform(opTransformer);\n+        return funcOp.transform(CodeTransformer);\n@@ -557,1 +557,1 @@\n-        CopyContext context = blockBuilder.context();\n+        CodeContext context = blockBuilder.context();\n","filename":"hat\/core\/src\/main\/java\/hat\/optools\/OpTk.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+import jdk.incubator.code.CodeContext;\n@@ -33,1 +34,0 @@\n-import jdk.incubator.code.CopyContext;\n","filename":"hat\/core\/src\/main\/java\/hat\/phases\/HATDialectifyBarrierPhase.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -35,0 +35,1 @@\n+import jdk.incubator.code.CodeContext;\n@@ -36,1 +37,0 @@\n-import jdk.incubator.code.CopyContext;\n@@ -85,1 +85,1 @@\n-            CopyContext context = blockBuilder.context();\n+            CodeContext context = blockBuilder.context();\n","filename":"hat\/core\/src\/main\/java\/hat\/phases\/HATDialectifyThreadsPhase.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -45,0 +45,1 @@\n+import jdk.incubator.code.CodeContext;\n@@ -46,1 +47,0 @@\n-import jdk.incubator.code.CopyContext;\n@@ -247,1 +247,1 @@\n-            CopyContext context = blockBuilder.context();\n+            CodeContext context = blockBuilder.context();\n","filename":"hat\/core\/src\/main\/java\/hat\/phases\/HATDialectifyVectorOpPhase.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -138,1 +138,1 @@\n-            CopyContext context = blockBuilder.context();\n+            CodeContext context = blockBuilder.context();\n@@ -194,1 +194,1 @@\n-            CopyContext context = blockBuilder.context();\n+            CodeContext context = blockBuilder.context();\n","filename":"hat\/core\/src\/main\/java\/hat\/phases\/HATDialectifyVectorSelectPhase.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -35,0 +35,1 @@\n+import jdk.incubator.code.CodeContext;\n@@ -36,1 +37,0 @@\n-import jdk.incubator.code.CopyContext;\n@@ -127,1 +127,1 @@\n-            CopyContext context = blockBuilder.context();\n+            CodeContext context = blockBuilder.context();\n","filename":"hat\/core\/src\/main\/java\/hat\/phases\/HATDialectifyVectorStorePhase.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -33,1 +33,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -63,1 +63,1 @@\n-        public Op transform(CopyContext copyContext, OpTransformer opTransformer) {\n+        public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n@@ -82,1 +82,1 @@\n-            CopyContext cc = builder.context();\n+            CodeContext cc = builder.context();\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/DNA.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -282,1 +282,1 @@\n-        PtrToMember(PtrToMember that, CopyContext cc) {\n+        PtrToMember(PtrToMember that, CodeContext cc) {\n@@ -290,1 +290,1 @@\n-        public PtrToMember transform(CopyContext cc, OpTransformer ot) {\n+        public PtrToMember transform(CodeContext cc, CodeTransformer ot) {\n@@ -377,1 +377,1 @@\n-        PtrAddOffset(PtrAddOffset that, CopyContext cc) {\n+        PtrAddOffset(PtrAddOffset that, CodeContext cc) {\n@@ -382,1 +382,1 @@\n-        public PtrAddOffset transform(CopyContext cc, OpTransformer ot) {\n+        public PtrAddOffset transform(CodeContext cc, CodeTransformer ot) {\n@@ -421,1 +421,1 @@\n-        PtrLoadValue(PtrLoadValue that, CopyContext cc) {\n+        PtrLoadValue(PtrLoadValue that, CodeContext cc) {\n@@ -427,1 +427,1 @@\n-        public PtrLoadValue transform(CopyContext cc, OpTransformer ot) {\n+        public PtrLoadValue transform(CodeContext cc, CodeTransformer ot) {\n@@ -461,1 +461,1 @@\n-        PtrStoreValue(PtrStoreValue that, CopyContext cc) {\n+        PtrStoreValue(PtrStoreValue that, CodeContext cc) {\n@@ -466,1 +466,1 @@\n-        public PtrStoreValue transform(CopyContext cc, OpTransformer ot) {\n+        public PtrStoreValue transform(CodeContext cc, CodeTransformer ot) {\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/LayoutExample.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -300,1 +300,1 @@\n-        PtrToMember(PtrToMember that, CopyContext cc) {\n+        PtrToMember(PtrToMember that, CodeContext cc) {\n@@ -308,1 +308,1 @@\n-        public PtrToMember transform(CopyContext cc, OpTransformer ot) {\n+        public PtrToMember transform(CodeContext cc, CodeTransformer ot) {\n@@ -396,1 +396,1 @@\n-        PtrAddOffset(PtrAddOffset that, CopyContext cc) {\n+        PtrAddOffset(PtrAddOffset that, CodeContext cc) {\n@@ -401,1 +401,1 @@\n-        public PtrAddOffset transform(CopyContext cc, OpTransformer ot) {\n+        public PtrAddOffset transform(CodeContext cc, CodeTransformer ot) {\n@@ -441,1 +441,1 @@\n-        PtrLoadValue(PtrLoadValue that, CopyContext cc) {\n+        PtrLoadValue(PtrLoadValue that, CodeContext cc) {\n@@ -447,1 +447,1 @@\n-        public PtrLoadValue transform(CopyContext cc, OpTransformer ot) {\n+        public PtrLoadValue transform(CodeContext cc, CodeTransformer ot) {\n@@ -482,1 +482,1 @@\n-        PtrStoreValue(PtrStoreValue that, CopyContext cc) {\n+        PtrStoreValue(PtrStoreValue that, CodeContext cc) {\n@@ -487,1 +487,1 @@\n-        public PtrStoreValue transform(CopyContext cc, OpTransformer ot) {\n+        public PtrStoreValue transform(CodeContext cc, CodeTransformer ot) {\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/RawLayout.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -34,1 +34,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -91,1 +91,1 @@\n-            MyOp(MyOp that, CopyContext cc) {\n+            MyOp(MyOp that, CodeContext cc) {\n@@ -109,1 +109,1 @@\n-            public RootOp(MyOp that, CopyContext cc) {\n+            public RootOp(MyOp that, CodeContext cc) {\n@@ -114,1 +114,1 @@\n-            public Op transform(CopyContext cc, OpTransformer ot) {\n+            public Op transform(CodeContext cc, CodeTransformer ot) {\n@@ -141,1 +141,1 @@\n-                    \/\/  CopyContext cc = builder.context();\n+                    \/\/  CodeContext cc = builder.context();\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/Transform.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -50,1 +50,1 @@\n-        OpTransformer opTracker = (block, op) -> {\n+        CodeTransformer opTracker = (block, op) -> {\n@@ -52,1 +52,1 @@\n-                CopyContext cc = block.context();\n+                CodeContext cc = block.context();\n@@ -81,1 +81,1 @@\n-        OpTransformer opTracker = (block, op) -> {\n+        CodeTransformer opTracker = (block, op) -> {\n@@ -83,1 +83,1 @@\n-                CopyContext cc = block.context();\n+                CodeContext cc = block.context();\n@@ -94,1 +94,1 @@\n-        OpTransformer t = trackingValueDelegatingTransformer(\n+        CodeTransformer t = trackingValueDelegatingTransformer(\n@@ -97,1 +97,1 @@\n-                        CopyContext cc = block.context();\n+                        CodeContext cc = block.context();\n@@ -127,1 +127,1 @@\n-    static OpTransformer trackingValueDelegatingTransformer(\n+    static CodeTransformer trackingValueDelegatingTransformer(\n@@ -153,1 +153,1 @@\n-        OpTransformer t = trackingValueAndThenTransformer(\n+        CodeTransformer t = trackingValueAndThenTransformer(\n@@ -156,1 +156,1 @@\n-                        CopyContext cc = block.context();\n+                        CodeContext cc = block.context();\n@@ -179,2 +179,2 @@\n-    static OpTransformer trackingValueAndThenTransformer(\n-            OpTransformer t,\n+    static CodeTransformer trackingValueAndThenTransformer(\n+            CodeTransformer t,\n@@ -182,1 +182,1 @@\n-        return OpTransformer.andThen(t, (block, op) -> {\n+        return CodeTransformer.andThen(t, (block, op) -> {\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/TransformState.java","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -468,2 +468,2 @@\n-        final CopyContext cc;\n-        final OpTransformer ot;\n+        final CodeContext cc;\n+        final CodeTransformer ot;\n@@ -471,1 +471,1 @@\n-        Builder(Body.Builder parentBody, CopyContext cc, OpTransformer ot) {\n+        Builder(Body.Builder parentBody, CodeContext cc, CodeTransformer ot) {\n@@ -488,1 +488,1 @@\n-        public OpTransformer transformer() {\n+        public CodeTransformer transformer() {\n@@ -495,1 +495,1 @@\n-        public CopyContext context() {\n+        public CodeContext context() {\n@@ -536,1 +536,1 @@\n-        public Block.Builder rebind(CopyContext cc, OpTransformer ot) {\n+        public Block.Builder rebind(CodeContext cc, CodeTransformer ot) {\n@@ -614,1 +614,1 @@\n-         * {@link OpTransformer#acceptBody(Builder, Body, List) accepting}\n+         * {@link CodeTransformer#acceptBody(Builder, Body, List) accepting}\n@@ -624,1 +624,1 @@\n-         * @see OpTransformer#acceptBody(Builder, Body, List)\n+         * @see CodeTransformer#acceptBody(Builder, Body, List)\n@@ -627,1 +627,1 @@\n-                         OpTransformer ot) {\n+                         CodeTransformer ot) {\n@@ -630,1 +630,1 @@\n-            ot.acceptBody(rebind(CopyContext.create(cc), ot), body, values);\n+            ot.acceptBody(rebind(CodeContext.create(cc), ot), body, values);\n@@ -639,1 +639,1 @@\n-         * {@link OpTransformer#acceptBody(Builder, Body, List) accepting}\n+         * {@link CodeTransformer#acceptBody(Builder, Body, List) accepting}\n@@ -648,1 +648,1 @@\n-         * @param cc the copy context\n+         * @param cc the code context\n@@ -650,1 +650,1 @@\n-         * @see OpTransformer#acceptBody(Builder, Body, List)\n+         * @see CodeTransformer#acceptBody(Builder, Body, List)\n@@ -653,1 +653,1 @@\n-                         CopyContext cc, OpTransformer ot) {\n+                         CodeContext cc, CodeTransformer ot) {\n@@ -664,1 +664,1 @@\n-         * {@link Op#transform(CopyContext, OpTransformer) transformed} with this builder's context and\n+         * {@link Op#transform(CodeContext, CodeTransformer) transformed} with this builder's context and\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/Block.java","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -460,1 +460,1 @@\n-         * @see #of(Builder, FunctionType, CopyContext, OpTransformer)\n+         * @see #of(Builder, FunctionType, CodeContext, CodeTransformer)\n@@ -463,2 +463,2 @@\n-            \/\/ @@@ Creation of CopyContext\n-            return of(ancestorBody, bodyType, CopyContext.create(), OpTransformer.COPYING_TRANSFORMER);\n+            \/\/ @@@ Creation of CodeContext\n+            return of(ancestorBody, bodyType, CodeContext.create(), CodeTransformer.COPYING_TRANSFORMER);\n@@ -475,1 +475,1 @@\n-         * @see #of(Builder, FunctionType, CopyContext, OpTransformer)\n+         * @see #of(Builder, FunctionType, CodeContext, CodeTransformer)\n@@ -477,2 +477,2 @@\n-        public static Builder of(Builder ancestorBody, FunctionType bodyType, CopyContext cc) {\n-            return of(ancestorBody, bodyType, cc, OpTransformer.COPYING_TRANSFORMER);\n+        public static Builder of(Builder ancestorBody, FunctionType bodyType, CodeContext cc) {\n+            return of(ancestorBody, bodyType, cc, CodeTransformer.COPYING_TRANSFORMER);\n@@ -503,1 +503,1 @@\n-         * @see #of(Builder, FunctionType, CopyContext, OpTransformer)\n+         * @see #of(Builder, FunctionType, CodeContext, CodeTransformer)\n@@ -506,1 +506,1 @@\n-                                 CopyContext cc, OpTransformer ot) {\n+                                 CodeContext cc, CodeTransformer ot) {\n@@ -524,1 +524,1 @@\n-                CopyContext cc, OpTransformer ot) {\n+                CodeContext cc, CodeTransformer ot) {\n@@ -657,1 +657,1 @@\n-        Block.Builder block(List<TypeElement> params, CopyContext cc, OpTransformer ot) {\n+        Block.Builder block(List<TypeElement> params, CodeContext cc, CodeTransformer ot) {\n@@ -668,1 +668,1 @@\n-     * @param cc the copy context\n+     * @param cc the code context\n@@ -670,1 +670,1 @@\n-     * @see #transform(CopyContext, OpTransformer)\n+     * @see #transform(CodeContext, CodeTransformer)\n@@ -672,2 +672,2 @@\n-    public Builder copy(CopyContext cc) {\n-        return transform(cc, OpTransformer.COPYING_TRANSFORMER);\n+    public Builder copy(CodeContext cc) {\n+        return transform(cc, CodeTransformer.COPYING_TRANSFORMER);\n@@ -680,2 +680,2 @@\n-     * Then, this body is {@link Block.Builder#body(Body, java.util.List, CopyContext, OpTransformer) transformed}\n-     * into the body builder's entry block builder with the given copy context, operation transformer, and arguments\n+     * Then, this body is {@link Block.Builder#body(Body, java.util.List, CodeContext, CodeTransformer) transformed}\n+     * into the body builder's entry block builder with the given code context, operation transformer, and arguments\n@@ -684,1 +684,1 @@\n-     * @param cc the copy context\n+     * @param cc the code context\n@@ -688,1 +688,1 @@\n-    public Builder transform(CopyContext cc, OpTransformer ot) {\n+    public Builder transform(CodeContext cc, CodeTransformer ot) {\n@@ -697,1 +697,1 @@\n-                CopyContext.create(cc), ot);\n+                CodeContext.create(cc), ot);\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/Body.java","additions":19,"deletions":19,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n- * A context utilized when transforming code models.\n+ * A context utilized when building and transforming code models.\n@@ -45,1 +45,1 @@\n-public sealed interface CopyContext permits CopyContextImpl {\n+public sealed interface CodeContext permits CodeContextImpl {\n@@ -48,1 +48,1 @@\n-    \/\/ CopyContext parent();\n+    \/\/ CodeContext parent();\n@@ -233,2 +233,2 @@\n-    static CopyContext create() {\n-        return new CopyContextImpl(null);\n+    static CodeContext create() {\n+        return new CodeContextImpl(null);\n@@ -242,2 +242,2 @@\n-    static CopyContext create(CopyContext parent) {\n-        return new CopyContextImpl((CopyContextImpl) parent);\n+    static CodeContext create(CodeContext parent) {\n+        return new CodeContextImpl((CodeContextImpl) parent);\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/CodeContext.java","additions":7,"deletions":7,"binary":false,"changes":14,"previous_filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/CopyContext.java","status":"renamed"},{"patch":"@@ -33,1 +33,1 @@\n-final class CopyContextImpl implements CopyContext {\n+final class CodeContextImpl implements CodeContext {\n@@ -37,1 +37,1 @@\n-    final CopyContextImpl parent;\n+    final CodeContextImpl parent;\n@@ -44,1 +44,1 @@\n-    CopyContextImpl(CopyContextImpl that) {\n+    CodeContextImpl(CodeContextImpl that) {\n@@ -81,1 +81,1 @@\n-        CopyContextImpl p = this;\n+        CodeContextImpl p = this;\n@@ -184,1 +184,1 @@\n-        CopyContextImpl p = this;\n+        CodeContextImpl p = this;\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/CodeContextImpl.java","additions":5,"deletions":5,"binary":false,"changes":10,"previous_filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/CopyContextImpl.java","status":"renamed"},{"patch":"@@ -0,0 +1,233 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package jdk.incubator.code;\n+\n+import java.util.List;\n+import java.util.function.BiFunction;\n+import java.util.function.Function;\n+\n+import static java.util.stream.Collectors.toList;\n+\n+\/**\n+ * A code transformer.\n+ *\/\n+@FunctionalInterface\n+public interface CodeTransformer {\n+\n+    \/**\n+     * A simplified transformer for only transforming operations.\n+     *\/\n+    @FunctionalInterface\n+    interface OpTransformerRename {\n+        \/**\n+         * Transforms an input operation to zero or more output operations.\n+         *\n+         * @param in          the input operation to transform\n+         * @param outOperands the operands of the input operation mapped to output operands\n+         *                    to be used by one or more output operations\n+         * @param builder     The function to apply zero or more output operations\n+         *                    that map to the input operation\n+         *\/\n+        void acceptOp(Function<Op, Op.Result> builder, Op in, List<Value> outOperands);\n+    }\n+\n+    \/**\n+     * Creates a code transformer that transforms operations using the\n+     * given operation transformer.\n+     *\n+     * @param opTransformer the operation transformer.\n+     * @return the code transformer that transforms operations.\n+     *\/\n+    static CodeTransformer opTransformer(OpTransformerRename opTransformer) {\n+        final class CodeTransformerOfOps implements CodeTransformer, Function<Op, Op.Result> {\n+            Block.Builder builder;\n+            Op op;\n+\n+            @Override\n+            public Block.Builder acceptOp(Block.Builder builder, Op op) {\n+                this.builder = builder;\n+                this.op = op;\n+                \/\/ Reuse the input operand if there is no mapping in the output\n+                List<Value> operands = op.operands().stream()\n+                        .map(v -> builder.context().getValueOrDefault(v, null)).toList();\n+                opTransformer.acceptOp(this, op, operands);\n+                return builder;\n+            }\n+\n+            @Override\n+            public Op.Result apply(Op outOp) {\n+                Op.Result outResult = builder.op(outOp);\n+                builder.context().mapValue(op.result(), outResult);\n+                return outResult;\n+            }\n+        }\n+        return new CodeTransformerOfOps();\n+    }\n+\n+    \/**\n+     * A copying transformer that applies the operation to the block builder, and returning the block builder.\n+     *\/\n+    CodeTransformer COPYING_TRANSFORMER = (block, op) -> {\n+        block.op(op);\n+        return block;\n+    };\n+\n+    \/**\n+     * A transformer that drops location information from operations.\n+     *\/\n+    CodeTransformer DROP_LOCATION_TRANSFORMER = (block, op) -> {\n+        Op.Result r = block.op(op);\n+        r.op().setLocation(Location.NO_LOCATION);\n+        return block;\n+    };\n+\n+    \/**\n+     * A transformer that lowers operations that are {@link Op.Lowerable lowerable},\n+     * and copies other operations.\n+     *\/\n+    CodeTransformer LOWERING_TRANSFORMER = (block, op) -> {\n+        if (op instanceof Op.Lowerable lop) {\n+            return lop.lower(block, null);\n+        } else {\n+            block.op(op);\n+            return block;\n+        }\n+    };\n+\n+    \/**\n+     * Transforms a body starting from a block builder.\n+     *\n+     * @implSpec\n+     * The default implementation {@link #acceptBlock(Block.Builder, Block) accepts} a block builder\n+     * and a block for each block of the body, in order, using this operation transformer.\n+     * The following sequence of actions is performed:\n+     * <ol>\n+     * <li>\n+     * the body's entry block is mapped to the block builder, and the (input) block parameters of the\n+     * body's entry block are mapped to the (output) values, using the builder's context.\n+     * <li>for each (input) block in the body (except the entry block) an (output) block builder is created\n+     * from the builder with the same parameter types as the (input) block, in order.\n+     * The (input) block is mapped to the (output) builder, and the (input) block parameters are mapped to the\n+     * (output) block parameters, using the builder's context.\n+     * <li>\n+     * for each (input) block in the body (in order) the (input) block is transformed\n+     * by {@link #acceptBlock(Block.Builder, Block) accepting} the mapped (output) builder and\n+     * (input) block, using this operation transformer.\n+     * <\/ol>\n+     *\n+     * @param builder the block builder\n+     * @param body the body to transform\n+     * @param values the values to map to the body's entry block parameters\n+     *\/\n+    default void acceptBody(Block.Builder builder, Body body, List<? extends Value> values) {\n+        CodeContext cc = builder.context();\n+\n+        \/\/ Map blocks up front, for forward referencing successors\n+        for (Block block : body.blocks()) {\n+            if (block.isEntryBlock()) {\n+                cc.mapBlock(block, builder);\n+                cc.mapValues(block.parameters(), values);\n+            } else {\n+                Block.Builder blockBuilder = builder.block(block.parameterTypes());\n+                cc.mapBlock(block, blockBuilder);\n+                cc.mapValues(block.parameters(), blockBuilder.parameters());\n+            }\n+        }\n+\n+        \/\/ Transform blocks\n+        for (Block b : body.blocks()) {\n+            acceptBlock(cc.getBlock(b), b);\n+        }\n+    }\n+\n+    \/**\n+     * Transforms a block starting from a block builder.\n+     *\n+     * @implSpec\n+     * The default implementation {@link #acceptOp(Block.Builder, Op) accepts} a block builder\n+     * and an operation for each operation of the block, in order, using this operation transformer.\n+     * On first iteration the block builder that is applied is block builder passed as an argument\n+     * to this method.\n+     * On second and subsequent iterations the block builder that is applied is the resulting\n+     * block builder of the prior iteration.\n+     *\n+     * @param builder the block builder\n+     * @param block   the block to transform\n+     *\/\n+    default void acceptBlock(Block.Builder builder, Block block) {\n+        for (Op op : block.ops()) {\n+            builder = acceptOp(builder, op);\n+        }\n+    }\n+\n+    \/**\n+     * Transforms an operation to zero or more operations, appending those operations to a\n+     * block builder. Returns a block builder to be used for transforming further operations, such\n+     * as subsequent operations from the same block as the given operation.\n+     *\n+     * @param block the block builder.\n+     * @param op    the operation to transform.\n+     * @return      the block builder to append to for subsequent operations.\n+     *\/\n+    Block.Builder acceptOp(Block.Builder block, Op op);\n+\n+    \/**\n+     * Returns a composed code transform that transforms an operation that first applies\n+     * a block builder and operation to the function {@code f}, and then applies\n+     * the resulting block builder and the same operation to {@link CodeTransformer#acceptOp acceptOp}\n+     * of the code transformer {@code after}.\n+     * <p>\n+     * If the code transformer {@code after} is {@code null} then it is as if a code transformer\n+     * is applied that does nothing except return the block builder it was given.\n+     *\n+     * @param after the code transformer to apply after\n+     * @param f the operation transformer function to apply before\n+     * @return the composed code transformer\n+     *\/\n+    static CodeTransformer compose(CodeTransformer after, BiFunction<Block.Builder, Op, Block.Builder> f) {\n+        return after == null\n+                ? f::apply\n+                : (block, op) -> after.acceptOp(f.apply(block, op), op);\n+    }\n+\n+    \/**\n+     * Returns a composed code transformer that first applies a block builder and operation to\n+     * {@link CodeTransformer#acceptOp acceptOp} of the code transformer {@code before},\n+     * and then applies resulting block builder and the same operation to the function {@code f}.\n+     * <p>\n+     * If the code transformer {@code before} is {@code null} then it is as if a code transformer\n+     * is applied that does nothing except return the block builder it was given.\n+     *\n+     * @param before the code transformer to apply before\n+     * @param f the operation transformer function to apply after\n+     * @return the composed code transformer\n+     *\/\n+    static CodeTransformer andThen(CodeTransformer before, BiFunction<Block.Builder, Op, Block.Builder> f) {\n+        return before == null\n+                ? f::apply\n+                : (block, op) -> f.apply(before.acceptOp(block, op), op);\n+    }\n+}\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/CodeTransformer.java","additions":233,"deletions":0,"binary":false,"changes":233,"status":"added"},{"patch":"@@ -140,1 +140,1 @@\n-        Block.Builder lower(Block.Builder b, OpTransformer opT);\n+        Block.Builder lower(Block.Builder b, CodeTransformer opT);\n@@ -148,1 +148,1 @@\n-         * OpTransformer.andThen(before, lowering(before, f));\n+         * CodeTransformer.andThen(before, lowering(before, f));\n@@ -155,2 +155,2 @@\n-        static OpTransformer andThenLowering(OpTransformer before, BiFunction<Block.Builder, Op, Block.Builder> f) {\n-            return OpTransformer.andThen(before, lowering(before, f));\n+        static CodeTransformer andThenLowering(CodeTransformer before, BiFunction<Block.Builder, Op, Block.Builder> f) {\n+            return CodeTransformer.andThen(before, lowering(before, f));\n@@ -176,1 +176,1 @@\n-        static BiFunction<Block.Builder, Op, Block.Builder> lowering(OpTransformer before, BiFunction<Block.Builder, Op, Block.Builder> f) {\n+        static BiFunction<Block.Builder, Op, Block.Builder> lowering(CodeTransformer before, BiFunction<Block.Builder, Op, Block.Builder> f) {\n@@ -285,1 +285,1 @@\n-     * order, by mapping the given operation's operands using the copy context. The constructor also assigns the new\n+     * order, by mapping the given operation's operands using the code context. The constructor also assigns the new\n@@ -289,1 +289,1 @@\n-     * @param cc   the copy context.\n+     * @param cc   the code context.\n@@ -291,1 +291,1 @@\n-    protected Op(Op that, CopyContext cc) {\n+    protected Op(Op that, CodeContext cc) {\n@@ -299,1 +299,1 @@\n-     * Bodies are {@link Body#transform(CopyContext, OpTransformer) transformed} with the given copy context and\n+     * Bodies are {@link Body#transform(CodeContext, CodeTransformer) transformed} with the given code context and\n@@ -302,1 +302,1 @@\n-     * To copy an operation use the {@link OpTransformer#COPYING_TRANSFORMER copying transformer}.\n+     * To copy an operation use the {@link CodeTransformer#COPYING_TRANSFORMER copying transformer}.\n@@ -304,1 +304,1 @@\n-     * @param cc the copy context.\n+     * @param cc the code context.\n@@ -308,1 +308,1 @@\n-    public abstract Op transform(CopyContext cc, OpTransformer ot);\n+    public abstract Op transform(CodeContext cc, CodeTransformer ot);\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/Op.java","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -1,181 +0,0 @@\n-\/*\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-package jdk.incubator.code;\n-\n-import java.util.List;\n-import java.util.function.BiFunction;\n-\n-\/**\n- * An operation transformer.\n- *\/\n-@FunctionalInterface\n-\/\/ @@@ Change to OpTransform or CodeTransform\n-public interface OpTransformer {\n-\n-    \/**\n-     * A copying transformer that applies the operation to the block builder, and returning the block builder.\n-     *\/\n-    OpTransformer COPYING_TRANSFORMER = (block, op) -> {\n-        block.op(op);\n-        return block;\n-    };\n-\n-    \/**\n-     * A transformer that drops location information from operations.\n-     *\/\n-    OpTransformer DROP_LOCATION_TRANSFORMER = (block, op) -> {\n-        Op.Result r = block.op(op);\n-        r.op().setLocation(Location.NO_LOCATION);\n-        return block;\n-    };\n-\n-    \/**\n-     * A transformer that lowers operations that are {@link Op.Lowerable lowerable},\n-     * and copies other operations.\n-     *\/\n-    OpTransformer LOWERING_TRANSFORMER = (block, op) -> {\n-        if (op instanceof Op.Lowerable lop) {\n-            return lop.lower(block, null);\n-        } else {\n-            block.op(op);\n-            return block;\n-        }\n-    };\n-\n-    \/**\n-     * Transforms a body starting from a block builder.\n-     *\n-     * @implSpec\n-     * The default implementation {@link #acceptBlock(Block.Builder, Block) accepts} a block builder\n-     * and a block for each block of the body, in order, using this operation transformer.\n-     * The following sequence of actions is performed:\n-     * <ol>\n-     * <li>\n-     * the body's entry block is mapped to the block builder, and the (input) block parameters of the\n-     * body's entry block are mapped to the (output) values, using the builder's context.\n-     * <li>for each (input) block in the body (except the entry block) an (output) block builder is created\n-     * from the builder with the same parameter types as the (input) block, in order.\n-     * The (input) block is mapped to the (output) builder, and the (input) block parameters are mapped to the\n-     * (output) block parameters, using the builder's context.\n-     * <li>\n-     * for each (input) block in the body (in order) the (input) block is transformed\n-     * by {@link #acceptBlock(Block.Builder, Block) accepting} the mapped (output) builder and\n-     * (input) block, using this operation transformer.\n-     * <\/ol>\n-     *\n-     * @param builder the block builder\n-     * @param body the body to transform\n-     * @param values the values to map to the body's entry block parameters\n-     *\/\n-    default void acceptBody(Block.Builder builder, Body body, List<? extends Value> values) {\n-        CopyContext cc = builder.context();\n-\n-        \/\/ Map blocks up front, for forward referencing successors\n-        for (Block block : body.blocks()) {\n-            if (block.isEntryBlock()) {\n-                cc.mapBlock(block, builder);\n-                cc.mapValues(block.parameters(), values);\n-            } else {\n-                Block.Builder blockBuilder = builder.block(block.parameterTypes());\n-                cc.mapBlock(block, blockBuilder);\n-                cc.mapValues(block.parameters(), blockBuilder.parameters());\n-            }\n-        }\n-\n-        \/\/ Transform blocks\n-        for (Block b : body.blocks()) {\n-            acceptBlock(cc.getBlock(b), b);\n-        }\n-    }\n-\n-    \/**\n-     * Transforms a block starting from a block builder.\n-     *\n-     * @implSpec\n-     * The default implementation {@link #acceptOp(Block.Builder, Op) accepts} a block builder\n-     * and an operation for each operation of the block, in order, using this operation transformer.\n-     * On first iteration the block builder that is applied is block builder passed as an argument\n-     * to this method.\n-     * On second and subsequent iterations the block builder that is applied is the resulting\n-     * block builder of the prior iteration.\n-     *\n-     * @param builder the block builder\n-     * @param block   the block to transform\n-     *\/\n-    default void acceptBlock(Block.Builder builder, Block block) {\n-        for (Op op : block.ops()) {\n-            builder = acceptOp(builder, op);\n-        }\n-    }\n-\n-    \/**\n-     * Transforms an operation to zero or more operations, appending those operations to a\n-     * block builder. Returns a block builder to be used for transforming further operations, such\n-     * as subsequent operations from the same block as the given operation.\n-     *\n-     * @param block the block builder.\n-     * @param op    the operation to transform.\n-     * @return      the block builder to append to for subsequent operations.\n-     *\/\n-    Block.Builder acceptOp(Block.Builder block, Op op);\n-\n-    \/**\n-     * Returns a composed code transform that transforms an operation that first applies\n-     * a block builder and operation to the function {@code f}, and then applies\n-     * the resulting block builder and the same operation to {@link OpTransformer#acceptOp acceptOp}\n-     * of the code transformer {@code after}.\n-     * <p>\n-     * If the code transformer {@code after} is {@code null} then it is as if a code transformer\n-     * is applied that does nothing except return the block builder it was given.\n-     *\n-     * @param after the code transformer to apply after\n-     * @param f the operation transformer function to apply before\n-     * @return the composed code transformer\n-     *\/\n-    static OpTransformer compose(OpTransformer after, BiFunction<Block.Builder, Op, Block.Builder> f) {\n-        return after == null\n-                ? f::apply\n-                : (block, op) -> after.acceptOp(f.apply(block, op), op);\n-    }\n-\n-    \/**\n-     * Returns a composed code transformer that first applies a block builder and operation to\n-     * {@link OpTransformer#acceptOp acceptOp} of the code transformer {@code before},\n-     * and then applies resulting block builder and the same operation to the function {@code f}.\n-     * <p>\n-     * If the code transformer {@code before} is {@code null} then it is as if a code transformer\n-     * is applied that does nothing except return the block builder it was given.\n-     *\n-     * @param before the code transformer to apply before\n-     * @param f the operation transformer function to apply after\n-     * @return the composed code transformer\n-     *\/\n-    static OpTransformer andThen(OpTransformer before, BiFunction<Block.Builder, Op, Block.Builder> f) {\n-        return before == null\n-                ? f::apply\n-                : (block, op) -> f.apply(before.acceptOp(block, op), op);\n-    }\n-}\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/OpTransformer.java","additions":0,"deletions":181,"binary":false,"changes":181,"status":"deleted"},{"patch":"@@ -32,1 +32,1 @@\n-     * This method {@link Block.Builder#body(Body, List, CopyContext, OpTransformer) transforms} the\n+     * This method {@link Block.Builder#body(Body, List, CodeContext, CodeTransformer) transforms} the\n@@ -76,1 +76,1 @@\n-        _this.body(invokableOp.body(), args, CopyContext.create(), (block, op) -> {\n+        _this.body(invokableOp.body(), args, CodeContext.create(), (block, op) -> {\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/analysis\/Inliner.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n-public final class NormalizeBlocksTransformer implements OpTransformer {\n+public final class NormalizeBlocksTransformer implements CodeTransformer {\n@@ -58,1 +58,1 @@\n-        return (O) op.transform(CopyContext.create(), new NormalizeBlocksTransformer());\n+        return (O) op.transform(CodeContext.create(), new NormalizeBlocksTransformer());\n@@ -67,1 +67,1 @@\n-            OpTransformer.super.acceptBlock(block, b);\n+            CodeTransformer.super.acceptBlock(block, b);\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/analysis\/NormalizeBlocksTransformer.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -27,6 +27,2 @@\n-import jdk.incubator.code.Block;\n-import jdk.incubator.code.CodeElement;\n-import jdk.incubator.code.CopyContext;\n-import jdk.incubator.code.Op;\n-import jdk.incubator.code.OpTransformer;\n-import jdk.incubator.code.Value;\n+import jdk.incubator.code.*;\n+import jdk.incubator.code.CodeTransformer;\n@@ -57,1 +53,1 @@\n-final class SSABraun implements OpTransformer {\n+final class SSABraun implements CodeTransformer {\n@@ -80,1 +76,1 @@\n-        O ssaOp = (O) nestedOp.transform(CopyContext.create(), construction);\n+        O ssaOp = (O) nestedOp.transform(CodeContext.create(), construction);\n@@ -214,1 +210,1 @@\n-    private Value resolveValue(CopyContext context, Val val) {\n+    private Value resolveValue(CodeContext context, Val val) {\n@@ -232,1 +228,1 @@\n-        CopyContext context = block.context();\n+        CodeContext context = block.context();\n@@ -270,1 +266,1 @@\n-                CopyContext context = block.context();\n+                CodeContext context = block.context();\n@@ -278,1 +274,1 @@\n-        OpTransformer.super.acceptBlock(block, b);\n+        CodeTransformer.super.acceptBlock(block, b);\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/analysis\/SSABraun.java","additions":8,"deletions":12,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -70,1 +70,1 @@\n-        T ssaOp = (T) nestedOp.transform(CopyContext.create(), (block, op) -> {\n+        T ssaOp = (T) nestedOp.transform(CodeContext.create(), (block, op) -> {\n@@ -83,1 +83,1 @@\n-                    CopyContext cc = block.context();\n+                    CodeContext cc = block.context();\n@@ -94,1 +94,1 @@\n-                        CopyContext cc = block.context();\n+                        CodeContext cc = block.context();\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/analysis\/SSACytron.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n- * StringConcatTransformer is an {@link jdk.incubator.code.OpTransformer} that removes concatenation operations\n+ * StringConcatTransformer is an {@link CodeTransformer} that removes concatenation operations\n@@ -38,1 +38,1 @@\n-public final class StringConcatTransformer implements OpTransformer {\n+public final class StringConcatTransformer implements CodeTransformer {\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/analysis\/StringConcatTransformer.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -47,1 +47,1 @@\n-    protected CoreOp(Op that, CopyContext cc) {\n+    protected CoreOp(Op that, CodeContext cc) {\n@@ -107,1 +107,1 @@\n-        FuncOp(FuncOp that, CopyContext cc, OpTransformer ot) {\n+        FuncOp(FuncOp that, CodeContext cc, CodeTransformer ot) {\n@@ -114,1 +114,1 @@\n-        FuncOp(FuncOp that, String funcName, CopyContext cc, OpTransformer ot) {\n+        FuncOp(FuncOp that, String funcName, CodeContext cc, CodeTransformer ot) {\n@@ -122,1 +122,1 @@\n-        public FuncOp transform(CopyContext cc, OpTransformer ot) {\n+        public FuncOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -126,2 +126,2 @@\n-        public FuncOp transform(OpTransformer ot) {\n-            return new FuncOp(this, CopyContext.create(), ot);\n+        public FuncOp transform(CodeTransformer ot) {\n+            return new FuncOp(this, CodeContext.create(), ot);\n@@ -130,2 +130,2 @@\n-        public FuncOp transform(String funcName, OpTransformer ot) {\n-            return new FuncOp(this, funcName, CopyContext.create(), ot);\n+        public FuncOp transform(String funcName, CodeTransformer ot) {\n+            return new FuncOp(this, funcName, CodeContext.create(), ot);\n@@ -166,1 +166,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer _ignore) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer _ignore) {\n@@ -168,1 +168,1 @@\n-            b.rebind(b.context(), OpTransformer.LOWERING_TRANSFORMER).op(this);\n+            b.rebind(b.context(), CodeTransformer.LOWERING_TRANSFORMER).op(this);\n@@ -201,1 +201,1 @@\n-        FuncCallOp(FuncCallOp that, CopyContext cc) {\n+        FuncCallOp(FuncCallOp that, CodeContext cc) {\n@@ -209,1 +209,1 @@\n-        public FuncCallOp transform(CopyContext cc, OpTransformer ot) {\n+        public FuncCallOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -256,1 +256,1 @@\n-        ModuleOp(ModuleOp that, CopyContext cc, OpTransformer ot) {\n+        ModuleOp(ModuleOp that, CodeContext cc, CodeTransformer ot) {\n@@ -276,1 +276,1 @@\n-        public ModuleOp transform(CopyContext cc, OpTransformer ot) {\n+        public ModuleOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -280,2 +280,2 @@\n-        public ModuleOp transform(OpTransformer ot) {\n-            return new ModuleOp(this, CopyContext.create(), ot);\n+        public ModuleOp transform(CodeTransformer ot) {\n+            return new ModuleOp(this, CodeContext.create(), ot);\n@@ -317,2 +317,2 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer _ignore) {\n-            b.rebind(b.context(), OpTransformer.LOWERING_TRANSFORMER).op(this);\n+        public Block.Builder lower(Block.Builder b, CodeTransformer _ignore) {\n+            b.rebind(b.context(), CodeTransformer.LOWERING_TRANSFORMER).op(this);\n@@ -341,1 +341,1 @@\n-        QuotedOp(QuotedOp that, CopyContext cc, OpTransformer ot) {\n+        QuotedOp(QuotedOp that, CodeContext cc, CodeTransformer ot) {\n@@ -349,1 +349,1 @@\n-        public QuotedOp transform(CopyContext cc, OpTransformer ot) {\n+        public QuotedOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -379,1 +379,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer _ignore) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer _ignore) {\n@@ -382,1 +382,1 @@\n-            b.rebind(b.context(), OpTransformer.COPYING_TRANSFORMER).op(this);\n+            b.rebind(b.context(), CodeTransformer.COPYING_TRANSFORMER).op(this);\n@@ -410,1 +410,1 @@\n-        ReturnOp(ReturnOp that, CopyContext cc) {\n+        ReturnOp(ReturnOp that, CodeContext cc) {\n@@ -415,1 +415,1 @@\n-        public ReturnOp transform(CopyContext cc, OpTransformer ot) {\n+        public ReturnOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -456,1 +456,1 @@\n-        UnreachableOp(UnreachableOp that, CopyContext cc) {\n+        UnreachableOp(UnreachableOp that, CodeContext cc) {\n@@ -461,1 +461,1 @@\n-        public UnreachableOp transform(CopyContext cc, OpTransformer ot) {\n+        public UnreachableOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -494,1 +494,1 @@\n-        YieldOp(YieldOp that, CopyContext cc) {\n+        YieldOp(YieldOp that, CodeContext cc) {\n@@ -499,1 +499,1 @@\n-        public YieldOp transform(CopyContext cc, OpTransformer ot) {\n+        public YieldOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -546,1 +546,1 @@\n-        BranchOp(BranchOp that, CopyContext cc) {\n+        BranchOp(BranchOp that, CodeContext cc) {\n@@ -553,1 +553,1 @@\n-        public BranchOp transform(CopyContext cc, OpTransformer ot) {\n+        public BranchOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -601,1 +601,1 @@\n-        ConditionalBranchOp(ConditionalBranchOp that, CopyContext cc) {\n+        ConditionalBranchOp(ConditionalBranchOp that, CodeContext cc) {\n@@ -609,1 +609,1 @@\n-        public ConditionalBranchOp transform(CopyContext cc, OpTransformer ot) {\n+        public ConditionalBranchOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -697,1 +697,1 @@\n-        ConstantOp(ConstantOp that, CopyContext cc) {\n+        ConstantOp(ConstantOp that, CodeContext cc) {\n@@ -705,1 +705,1 @@\n-        public ConstantOp transform(CopyContext cc, OpTransformer ot) {\n+        public ConstantOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -788,1 +788,1 @@\n-        VarOp(VarOp that, CopyContext cc) {\n+        VarOp(VarOp that, CodeContext cc) {\n@@ -801,1 +801,1 @@\n-        public VarOp transform(CopyContext cc, OpTransformer ot) {\n+        public VarOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -852,1 +852,1 @@\n-        VarAccessOp(VarAccessOp that, CopyContext cc) {\n+        VarAccessOp(VarAccessOp that, CodeContext cc) {\n@@ -902,1 +902,1 @@\n-            VarLoadOp(VarLoadOp that, CopyContext cc) {\n+            VarLoadOp(VarLoadOp that, CodeContext cc) {\n@@ -907,1 +907,1 @@\n-            public VarLoadOp transform(CopyContext cc, OpTransformer ot) {\n+            public VarLoadOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -939,1 +939,1 @@\n-            VarStoreOp(VarStoreOp that, CopyContext cc) {\n+            VarStoreOp(VarStoreOp that, CodeContext cc) {\n@@ -948,1 +948,1 @@\n-            public VarStoreOp transform(CopyContext cc, OpTransformer ot) {\n+            public VarStoreOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -981,1 +981,1 @@\n-        TupleOp(TupleOp that, CopyContext cc) {\n+        TupleOp(TupleOp that, CodeContext cc) {\n@@ -986,1 +986,1 @@\n-        public TupleOp transform(CopyContext cc, OpTransformer ot) {\n+        public TupleOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1024,1 +1024,1 @@\n-        TupleLoadOp(TupleLoadOp that, CopyContext cc) {\n+        TupleLoadOp(TupleLoadOp that, CodeContext cc) {\n@@ -1031,1 +1031,1 @@\n-        public TupleLoadOp transform(CopyContext cc, OpTransformer ot) {\n+        public TupleLoadOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1082,1 +1082,1 @@\n-        TupleWithOp(TupleWithOp that, CopyContext cc) {\n+        TupleWithOp(TupleWithOp that, CodeContext cc) {\n@@ -1089,1 +1089,1 @@\n-        public TupleWithOp transform(CopyContext cc, OpTransformer ot) {\n+        public TupleWithOp transform(CodeContext cc, CodeTransformer ot) {\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/dialect\/core\/CoreOp.java","additions":47,"deletions":47,"binary":false,"changes":94,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n-import static jdk.incubator.code.OpTransformer.*;\n+import static jdk.incubator.code.CodeTransformer.*;\n@@ -68,1 +68,1 @@\n-    protected JavaOp(Op that, CopyContext cc) {\n+    protected JavaOp(Op that, CodeContext cc) {\n@@ -212,1 +212,1 @@\n-        LambdaOp(LambdaOp that, CopyContext cc, OpTransformer ot) {\n+        LambdaOp(LambdaOp that, CodeContext cc, CodeTransformer ot) {\n@@ -221,1 +221,1 @@\n-        public LambdaOp transform(CopyContext cc, OpTransformer ot) {\n+        public LambdaOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -253,1 +253,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer _ignore) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer _ignore) {\n@@ -255,1 +255,1 @@\n-            b.rebind(b.context(), OpTransformer.LOWERING_TRANSFORMER).op(this);\n+            b.rebind(b.context(), CodeTransformer.LOWERING_TRANSFORMER).op(this);\n@@ -423,1 +423,1 @@\n-        ThrowOp(ThrowOp that, CopyContext cc) {\n+        ThrowOp(ThrowOp that, CodeContext cc) {\n@@ -428,1 +428,1 @@\n-        public ThrowOp transform(CopyContext cc, OpTransformer ot) {\n+        public ThrowOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -468,1 +468,1 @@\n-        AssertOp(AssertOp that, CopyContext cc, OpTransformer ot) {\n+        AssertOp(AssertOp that, CodeContext cc, CodeTransformer ot) {\n@@ -474,1 +474,1 @@\n-        public Op transform(CopyContext cc, OpTransformer ot) {\n+        public Op transform(CodeContext cc, CodeTransformer ot) {\n@@ -493,1 +493,1 @@\n-        MonitorOp(MonitorOp that, CopyContext cc) {\n+        MonitorOp(MonitorOp that, CodeContext cc) {\n@@ -525,1 +525,1 @@\n-            MonitorEnterOp(MonitorEnterOp that, CopyContext cc) {\n+            MonitorEnterOp(MonitorEnterOp that, CodeContext cc) {\n@@ -530,1 +530,1 @@\n-            public MonitorEnterOp transform(CopyContext cc, OpTransformer ot) {\n+            public MonitorEnterOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -554,1 +554,1 @@\n-            MonitorExitOp(MonitorExitOp that, CopyContext cc) {\n+            MonitorExitOp(MonitorExitOp that, CodeContext cc) {\n@@ -559,1 +559,1 @@\n-            public MonitorExitOp transform(CopyContext cc, OpTransformer ot) {\n+            public MonitorExitOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -643,1 +643,1 @@\n-        InvokeOp(InvokeOp that, CopyContext cc) {\n+        InvokeOp(InvokeOp that, CodeContext cc) {\n@@ -653,1 +653,1 @@\n-        public InvokeOp transform(CopyContext cc, OpTransformer ot) {\n+        public InvokeOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -753,1 +753,1 @@\n-        ConvOp(ConvOp that, CopyContext cc) {\n+        ConvOp(ConvOp that, CodeContext cc) {\n@@ -760,1 +760,1 @@\n-        public Op transform(CopyContext cc, OpTransformer ot) {\n+        public Op transform(CodeContext cc, CodeTransformer ot) {\n@@ -810,1 +810,1 @@\n-        NewOp(NewOp that, CopyContext cc) {\n+        NewOp(NewOp that, CodeContext cc) {\n@@ -819,1 +819,1 @@\n-        public NewOp transform(CopyContext cc, OpTransformer ot) {\n+        public NewOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -882,1 +882,1 @@\n-        FieldAccessOp(FieldAccessOp that, CopyContext cc) {\n+        FieldAccessOp(FieldAccessOp that, CodeContext cc) {\n@@ -932,1 +932,1 @@\n-            FieldLoadOp(FieldLoadOp that, CopyContext cc) {\n+            FieldLoadOp(FieldLoadOp that, CodeContext cc) {\n@@ -939,1 +939,1 @@\n-            public FieldLoadOp transform(CopyContext cc, OpTransformer ot) {\n+            public FieldLoadOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -987,1 +987,1 @@\n-            FieldStoreOp(FieldStoreOp that, CopyContext cc) {\n+            FieldStoreOp(FieldStoreOp that, CodeContext cc) {\n@@ -992,1 +992,1 @@\n-            public FieldStoreOp transform(CopyContext cc, OpTransformer ot) {\n+            public FieldStoreOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1026,1 +1026,1 @@\n-        ArrayLengthOp(ArrayLengthOp that, CopyContext cc) {\n+        ArrayLengthOp(ArrayLengthOp that, CodeContext cc) {\n@@ -1031,1 +1031,1 @@\n-        public ArrayLengthOp transform(CopyContext cc, OpTransformer ot) {\n+        public ArrayLengthOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1051,1 +1051,1 @@\n-        ArrayAccessOp(ArrayAccessOp that, CopyContext cc) {\n+        ArrayAccessOp(ArrayAccessOp that, CodeContext cc) {\n@@ -1083,1 +1083,1 @@\n-            ArrayLoadOp(ArrayLoadOp that, CopyContext cc) {\n+            ArrayLoadOp(ArrayLoadOp that, CodeContext cc) {\n@@ -1089,1 +1089,1 @@\n-            public ArrayLoadOp transform(CopyContext cc, OpTransformer ot) {\n+            public ArrayLoadOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1126,1 +1126,1 @@\n-            ArrayStoreOp(ArrayStoreOp that, CopyContext cc) {\n+            ArrayStoreOp(ArrayStoreOp that, CodeContext cc) {\n@@ -1131,1 +1131,1 @@\n-            public ArrayStoreOp transform(CopyContext cc, OpTransformer ot) {\n+            public ArrayStoreOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1172,1 +1172,1 @@\n-        InstanceOfOp(InstanceOfOp that, CopyContext cc) {\n+        InstanceOfOp(InstanceOfOp that, CodeContext cc) {\n@@ -1179,1 +1179,1 @@\n-        public InstanceOfOp transform(CopyContext cc, OpTransformer ot) {\n+        public InstanceOfOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1230,1 +1230,1 @@\n-        CastOp(CastOp that, CopyContext cc) {\n+        CastOp(CastOp that, CodeContext cc) {\n@@ -1238,1 +1238,1 @@\n-        public CastOp transform(CopyContext cc, OpTransformer ot) {\n+        public CastOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1282,1 +1282,1 @@\n-        ExceptionRegionEnter(ExceptionRegionEnter that, CopyContext cc) {\n+        ExceptionRegionEnter(ExceptionRegionEnter that, CodeContext cc) {\n@@ -1289,1 +1289,1 @@\n-        public ExceptionRegionEnter transform(CopyContext cc, OpTransformer ot) {\n+        public ExceptionRegionEnter transform(CodeContext cc, CodeTransformer ot) {\n@@ -1338,1 +1338,1 @@\n-        ExceptionRegionExit(ExceptionRegionExit that, CopyContext cc) {\n+        ExceptionRegionExit(ExceptionRegionExit that, CodeContext cc) {\n@@ -1345,1 +1345,1 @@\n-        public ExceptionRegionExit transform(CopyContext cc, OpTransformer ot) {\n+        public ExceptionRegionExit transform(CodeContext cc, CodeTransformer ot) {\n@@ -1387,1 +1387,1 @@\n-        public ConcatOp(ConcatOp that, CopyContext cc) {\n+        public ConcatOp(ConcatOp that, CodeContext cc) {\n@@ -1404,1 +1404,1 @@\n-        public Op transform(CopyContext cc, OpTransformer ot) {\n+        public Op transform(CodeContext cc, CodeTransformer ot) {\n@@ -1419,1 +1419,1 @@\n-        protected ArithmeticOperation(ArithmeticOperation that, CopyContext cc) {\n+        protected ArithmeticOperation(ArithmeticOperation that, CodeContext cc) {\n@@ -1433,1 +1433,1 @@\n-        protected TestOperation(TestOperation that, CopyContext cc) {\n+        protected TestOperation(TestOperation that, CodeContext cc) {\n@@ -1446,1 +1446,1 @@\n-        protected BinaryOp(BinaryOp that, CopyContext cc) {\n+        protected BinaryOp(BinaryOp that, CodeContext cc) {\n@@ -1464,1 +1464,1 @@\n-        protected UnaryOp(UnaryOp that, CopyContext cc) {\n+        protected UnaryOp(UnaryOp that, CodeContext cc) {\n@@ -1482,1 +1482,1 @@\n-        protected BinaryTestOp(BinaryTestOp that, CopyContext cc) {\n+        protected BinaryTestOp(BinaryTestOp that, CodeContext cc) {\n@@ -1507,1 +1507,1 @@\n-        AddOp(AddOp that, CopyContext cc) {\n+        AddOp(AddOp that, CodeContext cc) {\n@@ -1512,1 +1512,1 @@\n-        public AddOp transform(CopyContext cc, OpTransformer ot) {\n+        public AddOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1532,1 +1532,1 @@\n-        SubOp(SubOp that, CopyContext cc) {\n+        SubOp(SubOp that, CodeContext cc) {\n@@ -1537,1 +1537,1 @@\n-        public SubOp transform(CopyContext cc, OpTransformer ot) {\n+        public SubOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1557,1 +1557,1 @@\n-        MulOp(MulOp that, CopyContext cc) {\n+        MulOp(MulOp that, CodeContext cc) {\n@@ -1562,1 +1562,1 @@\n-        public MulOp transform(CopyContext cc, OpTransformer ot) {\n+        public MulOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1582,1 +1582,1 @@\n-        DivOp(DivOp that, CopyContext cc) {\n+        DivOp(DivOp that, CodeContext cc) {\n@@ -1587,1 +1587,1 @@\n-        public DivOp transform(CopyContext cc, OpTransformer ot) {\n+        public DivOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1607,1 +1607,1 @@\n-        ModOp(ModOp that, CopyContext cc) {\n+        ModOp(ModOp that, CodeContext cc) {\n@@ -1612,1 +1612,1 @@\n-        public ModOp transform(CopyContext cc, OpTransformer ot) {\n+        public ModOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1633,1 +1633,1 @@\n-        OrOp(OrOp that, CopyContext cc) {\n+        OrOp(OrOp that, CodeContext cc) {\n@@ -1638,1 +1638,1 @@\n-        public OrOp transform(CopyContext cc, OpTransformer ot) {\n+        public OrOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1659,1 +1659,1 @@\n-        AndOp(AndOp that, CopyContext cc) {\n+        AndOp(AndOp that, CodeContext cc) {\n@@ -1664,1 +1664,1 @@\n-        public AndOp transform(CopyContext cc, OpTransformer ot) {\n+        public AndOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1685,1 +1685,1 @@\n-        XorOp(XorOp that, CopyContext cc) {\n+        XorOp(XorOp that, CodeContext cc) {\n@@ -1690,1 +1690,1 @@\n-        public XorOp transform(CopyContext cc, OpTransformer ot) {\n+        public XorOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1710,1 +1710,1 @@\n-        LshlOp(LshlOp that, CopyContext cc) {\n+        LshlOp(LshlOp that, CodeContext cc) {\n@@ -1715,1 +1715,1 @@\n-        public LshlOp transform(CopyContext cc, OpTransformer ot) {\n+        public LshlOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1735,1 +1735,1 @@\n-        AshrOp(AshrOp that, CopyContext cc) {\n+        AshrOp(AshrOp that, CodeContext cc) {\n@@ -1740,1 +1740,1 @@\n-        public AshrOp transform(CopyContext cc, OpTransformer ot) {\n+        public AshrOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1760,1 +1760,1 @@\n-        LshrOp(LshrOp that, CopyContext cc) {\n+        LshrOp(LshrOp that, CodeContext cc) {\n@@ -1765,1 +1765,1 @@\n-        public LshrOp transform(CopyContext cc, OpTransformer ot) {\n+        public LshrOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1785,1 +1785,1 @@\n-        NegOp(NegOp that, CopyContext cc) {\n+        NegOp(NegOp that, CodeContext cc) {\n@@ -1790,1 +1790,1 @@\n-        public NegOp transform(CopyContext cc, OpTransformer ot) {\n+        public NegOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1810,1 +1810,1 @@\n-        ComplOp(ComplOp that, CopyContext cc) {\n+        ComplOp(ComplOp that, CodeContext cc) {\n@@ -1815,1 +1815,1 @@\n-        public ComplOp transform(CopyContext cc, OpTransformer ot) {\n+        public ComplOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1835,1 +1835,1 @@\n-        NotOp(NotOp that, CopyContext cc) {\n+        NotOp(NotOp that, CodeContext cc) {\n@@ -1840,1 +1840,1 @@\n-        public NotOp transform(CopyContext cc, OpTransformer ot) {\n+        public NotOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1861,1 +1861,1 @@\n-        EqOp(EqOp that, CopyContext cc) {\n+        EqOp(EqOp that, CodeContext cc) {\n@@ -1866,1 +1866,1 @@\n-        public EqOp transform(CopyContext cc, OpTransformer ot) {\n+        public EqOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1887,1 +1887,1 @@\n-        NeqOp(NeqOp that, CopyContext cc) {\n+        NeqOp(NeqOp that, CodeContext cc) {\n@@ -1892,1 +1892,1 @@\n-        public NeqOp transform(CopyContext cc, OpTransformer ot) {\n+        public NeqOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1912,1 +1912,1 @@\n-        GtOp(GtOp that, CopyContext cc) {\n+        GtOp(GtOp that, CodeContext cc) {\n@@ -1917,1 +1917,1 @@\n-        public GtOp transform(CopyContext cc, OpTransformer ot) {\n+        public GtOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1938,1 +1938,1 @@\n-        GeOp(GeOp that, CopyContext cc) {\n+        GeOp(GeOp that, CodeContext cc) {\n@@ -1943,1 +1943,1 @@\n-        public GeOp transform(CopyContext cc, OpTransformer ot) {\n+        public GeOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1964,1 +1964,1 @@\n-        LtOp(LtOp that, CopyContext cc) {\n+        LtOp(LtOp that, CodeContext cc) {\n@@ -1969,1 +1969,1 @@\n-        public LtOp transform(CopyContext cc, OpTransformer ot) {\n+        public LtOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -1990,1 +1990,1 @@\n-        LeOp(LeOp that, CopyContext cc) {\n+        LeOp(LeOp that, CodeContext cc) {\n@@ -1995,1 +1995,1 @@\n-        public LeOp transform(CopyContext cc, OpTransformer ot) {\n+        public LeOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -2009,1 +2009,1 @@\n-        JavaLabelOp(JavaLabelOp that, CopyContext cc) {\n+        JavaLabelOp(JavaLabelOp that, CodeContext cc) {\n@@ -2099,1 +2099,1 @@\n-        BreakOp(BreakOp that, CopyContext cc) {\n+        BreakOp(BreakOp that, CodeContext cc) {\n@@ -2104,1 +2104,1 @@\n-        public BreakOp transform(CopyContext cc, OpTransformer ot) {\n+        public BreakOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -2113,1 +2113,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -2129,1 +2129,1 @@\n-        ContinueOp(ContinueOp that, CopyContext cc) {\n+        ContinueOp(ContinueOp that, CodeContext cc) {\n@@ -2134,1 +2134,1 @@\n-        public ContinueOp transform(CopyContext cc, OpTransformer ot) {\n+        public ContinueOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -2143,1 +2143,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -2153,1 +2153,1 @@\n-    static BranchTarget getBranchTarget(CopyContext cc, CodeElement<?, ?> codeElement) {\n+    static BranchTarget getBranchTarget(CodeContext cc, CodeElement<?, ?> codeElement) {\n@@ -2162,1 +2162,1 @@\n-    static void setBranchTarget(CopyContext cc, CodeElement<?, ?> codeElement, BranchTarget t) {\n+    static void setBranchTarget(CodeContext cc, CodeElement<?, ?> codeElement, BranchTarget t) {\n@@ -2185,1 +2185,1 @@\n-        YieldOp(YieldOp that, CopyContext cc) {\n+        YieldOp(YieldOp that, CodeContext cc) {\n@@ -2190,1 +2190,1 @@\n-        public YieldOp transform(CopyContext cc, OpTransformer ot) {\n+        public YieldOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -2213,1 +2213,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -2265,1 +2265,1 @@\n-        BlockOp(BlockOp that, CopyContext cc, OpTransformer ot) {\n+        BlockOp(BlockOp that, CodeContext cc, CodeTransformer ot) {\n@@ -2273,1 +2273,1 @@\n-        public BlockOp transform(CopyContext cc, OpTransformer ot) {\n+        public BlockOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -2299,1 +2299,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -2336,1 +2336,1 @@\n-        SynchronizedOp(SynchronizedOp that, CopyContext cc, OpTransformer ot) {\n+        SynchronizedOp(SynchronizedOp that, CodeContext cc, CodeTransformer ot) {\n@@ -2345,1 +2345,1 @@\n-        public SynchronizedOp transform(CopyContext cc, OpTransformer ot) {\n+        public SynchronizedOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -2383,1 +2383,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -2400,1 +2400,1 @@\n-            OpTransformer syncExitTransformer = compose(opT, (block, op) -> {\n+            CodeTransformer syncExitTransformer = compose(opT, (block, op) -> {\n@@ -2444,1 +2444,1 @@\n-        Block.Builder lowerExpr(Block.Builder b, OpTransformer opT) {\n+        Block.Builder lowerExpr(Block.Builder b, CodeTransformer opT) {\n@@ -2487,1 +2487,1 @@\n-        LabeledOp(LabeledOp that, CopyContext cc, OpTransformer ot) {\n+        LabeledOp(LabeledOp that, CodeContext cc, CodeTransformer ot) {\n@@ -2495,1 +2495,1 @@\n-        public LabeledOp transform(CopyContext cc, OpTransformer ot) {\n+        public LabeledOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -2525,1 +2525,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -2655,1 +2655,1 @@\n-        IfOp(IfOp that, CopyContext cc, OpTransformer ot) {\n+        IfOp(IfOp that, CodeContext cc, CodeTransformer ot) {\n@@ -2664,1 +2664,1 @@\n-        public IfOp transform(CopyContext cc, OpTransformer ot) {\n+        public IfOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -2709,1 +2709,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -2773,1 +2773,1 @@\n-        JavaSwitchOp(JavaSwitchOp that, CopyContext cc, OpTransformer ot) {\n+        JavaSwitchOp(JavaSwitchOp that, CodeContext cc, CodeTransformer ot) {\n@@ -2797,1 +2797,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -2926,1 +2926,1 @@\n-        SwitchExpressionOp(SwitchExpressionOp that, CopyContext cc, OpTransformer ot) {\n+        SwitchExpressionOp(SwitchExpressionOp that, CodeContext cc, CodeTransformer ot) {\n@@ -2933,1 +2933,1 @@\n-        public SwitchExpressionOp transform(CopyContext cc, OpTransformer ot) {\n+        public SwitchExpressionOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -2961,1 +2961,1 @@\n-        SwitchStatementOp(SwitchStatementOp that, CopyContext cc, OpTransformer ot) {\n+        SwitchStatementOp(SwitchStatementOp that, CodeContext cc, CodeTransformer ot) {\n@@ -2966,1 +2966,1 @@\n-        public SwitchStatementOp transform(CopyContext cc, OpTransformer ot) {\n+        public SwitchStatementOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -2993,1 +2993,1 @@\n-        SwitchFallthroughOp(SwitchFallthroughOp that, CopyContext cc) {\n+        SwitchFallthroughOp(SwitchFallthroughOp that, CodeContext cc) {\n@@ -2998,1 +2998,1 @@\n-        public SwitchFallthroughOp transform(CopyContext cc, OpTransformer ot) {\n+        public SwitchFallthroughOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -3012,1 +3012,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -3140,1 +3140,1 @@\n-        ForOp(ForOp that, CopyContext cc, OpTransformer ot) {\n+        ForOp(ForOp that, CodeContext cc, CodeTransformer ot) {\n@@ -3150,1 +3150,1 @@\n-        public ForOp transform(CopyContext cc, OpTransformer ot) {\n+        public ForOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -3198,1 +3198,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -3356,1 +3356,1 @@\n-        EnhancedForOp(EnhancedForOp that, CopyContext cc, OpTransformer ot) {\n+        EnhancedForOp(EnhancedForOp that, CodeContext cc, CodeTransformer ot) {\n@@ -3365,1 +3365,1 @@\n-        public EnhancedForOp transform(CopyContext cc, OpTransformer ot) {\n+        public EnhancedForOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -3420,1 +3420,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -3577,1 +3577,1 @@\n-        WhileOp(WhileOp that, CopyContext cc, OpTransformer ot) {\n+        WhileOp(WhileOp that, CodeContext cc, CodeTransformer ot) {\n@@ -3585,1 +3585,1 @@\n-        public WhileOp transform(CopyContext cc, OpTransformer ot) {\n+        public WhileOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -3604,1 +3604,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -3708,1 +3708,1 @@\n-        DoWhileOp(DoWhileOp that, CopyContext cc, OpTransformer ot) {\n+        DoWhileOp(DoWhileOp that, CodeContext cc, CodeTransformer ot) {\n@@ -3716,1 +3716,1 @@\n-        public DoWhileOp transform(CopyContext cc, OpTransformer ot) {\n+        public DoWhileOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -3735,1 +3735,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -3772,1 +3772,1 @@\n-        JavaConditionalOp(JavaConditionalOp that, CopyContext cc, OpTransformer ot) {\n+        JavaConditionalOp(JavaConditionalOp that, CodeContext cc, CodeTransformer ot) {\n@@ -3799,1 +3799,1 @@\n-        static Block.Builder lower(Block.Builder startBlock, OpTransformer opT, JavaConditionalOp cop) {\n+        static Block.Builder lower(Block.Builder startBlock, CodeTransformer opT, JavaConditionalOp cop) {\n@@ -3894,1 +3894,1 @@\n-        ConditionalAndOp(ConditionalAndOp that, CopyContext cc, OpTransformer ot) {\n+        ConditionalAndOp(ConditionalAndOp that, CodeContext cc, CodeTransformer ot) {\n@@ -3899,1 +3899,1 @@\n-        public ConditionalAndOp transform(CopyContext cc, OpTransformer ot) {\n+        public ConditionalAndOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -3908,1 +3908,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -3949,1 +3949,1 @@\n-        ConditionalOrOp(ConditionalOrOp that, CopyContext cc, OpTransformer ot) {\n+        ConditionalOrOp(ConditionalOrOp that, CodeContext cc, CodeTransformer ot) {\n@@ -3954,1 +3954,1 @@\n-        public ConditionalOrOp transform(CopyContext cc, OpTransformer ot) {\n+        public ConditionalOrOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -3963,1 +3963,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -3989,1 +3989,1 @@\n-        ConditionalExpressionOp(ConditionalExpressionOp that, CopyContext cc, OpTransformer ot) {\n+        ConditionalExpressionOp(ConditionalExpressionOp that, CodeContext cc, CodeTransformer ot) {\n@@ -3999,1 +3999,1 @@\n-        public ConditionalExpressionOp transform(CopyContext cc, OpTransformer ot) {\n+        public ConditionalExpressionOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -4026,1 +4026,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -4159,1 +4159,1 @@\n-        TryOp(TryOp that, CopyContext cc, OpTransformer ot) {\n+        TryOp(TryOp that, CodeContext cc, CodeTransformer ot) {\n@@ -4179,1 +4179,1 @@\n-        public TryOp transform(CopyContext cc, OpTransformer ot) {\n+        public TryOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -4260,1 +4260,1 @@\n-        public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+        public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n@@ -4303,1 +4303,1 @@\n-            OpTransformer tryExitTransformer;\n+            CodeTransformer tryExitTransformer;\n@@ -4364,1 +4364,1 @@\n-                    OpTransformer catchExitTransformer = compose(opT, (block, op) -> {\n+                    CodeTransformer catchExitTransformer = compose(opT, (block, op) -> {\n@@ -4437,1 +4437,1 @@\n-        Block.Builder inlineFinalizer(Block.Builder block1, List<Block.Reference> tryHandlers, OpTransformer opT) {\n+        Block.Builder inlineFinalizer(Block.Builder block1, List<Block.Reference> tryHandlers, CodeTransformer opT) {\n@@ -4534,1 +4534,1 @@\n-            PatternOp(PatternOp that, CopyContext cc) {\n+            PatternOp(PatternOp that, CodeContext cc) {\n@@ -4568,1 +4568,1 @@\n-            TypePatternOp(TypePatternOp that, CopyContext cc) {\n+            TypePatternOp(TypePatternOp that, CodeContext cc) {\n@@ -4576,1 +4576,1 @@\n-            public TypePatternOp transform(CopyContext cc, OpTransformer ot) {\n+            public TypePatternOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -4628,1 +4628,1 @@\n-            RecordPatternOp(RecordPatternOp that, CopyContext cc) {\n+            RecordPatternOp(RecordPatternOp that, CodeContext cc) {\n@@ -4635,1 +4635,1 @@\n-            public RecordPatternOp transform(CopyContext cc, OpTransformer ot) {\n+            public RecordPatternOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -4678,1 +4678,1 @@\n-            MatchAllPatternOp(MatchAllPatternOp that, CopyContext cc) {\n+            MatchAllPatternOp(MatchAllPatternOp that, CodeContext cc) {\n@@ -4687,1 +4687,1 @@\n-            public Op transform(CopyContext cc, OpTransformer ot) {\n+            public Op transform(CodeContext cc, CodeTransformer ot) {\n@@ -4712,1 +4712,1 @@\n-            MatchOp(MatchOp that, CopyContext cc, OpTransformer ot) {\n+            MatchOp(MatchOp that, CodeContext cc, CodeTransformer ot) {\n@@ -4720,1 +4720,1 @@\n-            public MatchOp transform(CopyContext cc, OpTransformer ot) {\n+            public MatchOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -4749,1 +4749,1 @@\n-            public Block.Builder lower(Block.Builder b, OpTransformer opT) {\n+            public Block.Builder lower(Block.Builder b, CodeTransformer opT) {\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/dialect\/java\/JavaOp.java","additions":162,"deletions":162,"binary":false,"changes":324,"status":"modified"},{"patch":"@@ -82,1 +82,1 @@\n-     * @param cc the copy context\n+     * @param cc the code context\n@@ -86,1 +86,1 @@\n-    public static ExternalizedOp externalizeOp(CopyContext cc, Op op) {\n+    public static ExternalizedOp externalizeOp(CodeContext cc, Op op) {\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/extern\/ExternalizedOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -402,1 +402,1 @@\n-        return funcOp.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        return funcOp.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/internal\/OpBuilder.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -33,1 +34,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -278,1 +278,1 @@\n-                    .body(builder -> builder.body(original.body(), builder.parameters(), OpTransformer.COPYING_TRANSFORMER)\n+                    .body(builder -> builder.body(original.body(), builder.parameters(), CodeTransformer.COPYING_TRANSFORMER)\n@@ -342,1 +342,1 @@\n-        CoreOp.FuncOp func = SSA.transform(op.transform(OpTransformer.LOWERING_TRANSFORMER));\n+        CoreOp.FuncOp func = SSA.transform(op.transform(CodeTransformer.LOWERING_TRANSFORMER));\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/CoreBinaryOpsTest.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -27,1 +28,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -57,1 +57,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestBlockIndexes.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -26,1 +27,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -75,1 +75,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestBlockOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -32,1 +33,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -69,1 +69,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -113,1 +113,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -161,1 +161,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -211,1 +211,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestBreakContinue.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -32,1 +33,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -55,1 +55,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestConditionalExpression.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -84,1 +84,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestConditionalOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -187,1 +187,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestConstants.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+import jdk.incubator.code.CodeContext;\n@@ -31,1 +32,0 @@\n-import jdk.incubator.code.CopyContext;\n@@ -33,1 +33,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -56,1 +56,1 @@\n-        Op copy = f.transform(CopyContext.create(), OpTransformer.COPYING_TRANSFORMER);\n+        Op copy = f.transform(CodeContext.create(), CodeTransformer.COPYING_TRANSFORMER);\n@@ -65,1 +65,1 @@\n-        ExternalizedOp odef = ExternalizedOp.externalizeOp(CopyContext.create(), f);\n+        ExternalizedOp odef = ExternalizedOp.externalizeOp(CodeContext.create(), f);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestCopy.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -26,1 +27,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -70,1 +70,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -93,1 +93,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestEnhancedForOp.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -185,1 +185,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestExpressionGraphs.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -26,1 +27,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -60,1 +60,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -83,1 +83,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -108,1 +108,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestForOp.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -77,1 +77,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestIfOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -111,1 +111,1 @@\n-        JavaOp.LambdaOp lcop = cop.transform(CopyContext.create(), OpTransformer.LOWERING_TRANSFORMER);\n+        JavaOp.LambdaOp lcop = cop.transform(CodeContext.create(), CodeTransformer.LOWERING_TRANSFORMER);\n@@ -140,1 +140,1 @@\n-        JavaOp.LambdaOp lcop = cop.transform(CopyContext.create(), OpTransformer.LOWERING_TRANSFORMER);\n+        JavaOp.LambdaOp lcop = cop.transform(CodeContext.create(), CodeTransformer.LOWERING_TRANSFORMER);\n@@ -187,1 +187,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestInline.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -68,1 +68,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestInvokeSuper.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -94,1 +94,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -138,1 +138,1 @@\n-        fc = fc.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        fc = fc.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -190,1 +190,1 @@\n-        fc = fc.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        fc = fc.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -217,1 +217,1 @@\n-        fc = fc.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        fc = fc.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -224,1 +224,1 @@\n-    static void printCall(CopyContext cc, JavaOp.InvokeOp invokeOp, Block.Builder opBuilder) {\n+    static void printCall(CodeContext cc, JavaOp.InvokeOp invokeOp, Block.Builder opBuilder) {\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestLocalTransformationsAdaption.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -77,1 +77,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -121,1 +121,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestPatterns.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,0 +2,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -3,1 +4,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -34,1 +34,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestPatterns2.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -3,0 +3,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -4,1 +5,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -150,1 +150,1 @@\n-        var lmodel = model.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        var lmodel = model.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -181,1 +181,1 @@\n-        FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -197,1 +197,1 @@\n-        FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -214,1 +214,1 @@\n-        FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -231,1 +231,1 @@\n-        FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -248,1 +248,1 @@\n-        FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -265,1 +265,1 @@\n-        FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -282,1 +282,1 @@\n-        FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -299,1 +299,1 @@\n-        FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -316,1 +316,1 @@\n-        FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -335,1 +335,1 @@\n-        FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -354,1 +354,1 @@\n-        FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestPrimitiveTypePatterns.java","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -54,1 +54,1 @@\n-        return funcOp.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        return funcOp.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -70,1 +70,1 @@\n-                CopyContext cc = block.context();\n+                CodeContext cc = block.context();\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestRemoveFinalVars.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -26,1 +27,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -331,1 +331,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestSSA.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -182,1 +182,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestStringConcatTransform.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -467,1 +467,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestSwitchExpressionOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -543,1 +543,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestSwitchStatementOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -33,1 +34,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -72,1 +72,1 @@\n-        module = module.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        module = module.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestTransitiveInvokeModule.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -33,1 +34,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -69,1 +69,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestTraverse.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -32,1 +33,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -73,1 +73,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -130,1 +130,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -190,1 +190,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestTry.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -32,1 +33,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -71,1 +71,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -107,1 +107,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -143,1 +143,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -177,1 +177,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestTryFinally.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -32,1 +33,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -91,1 +91,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -150,1 +150,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -218,1 +218,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -269,1 +269,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -315,1 +315,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -367,1 +367,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -406,1 +406,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestTryNested.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -73,1 +73,1 @@\n-        CoreOp.FuncOp f = removeFirstStore(getFuncOp(method).transform(OpTransformer.LOWERING_TRANSFORMER));\n+        CoreOp.FuncOp f = removeFirstStore(getFuncOp(method).transform(CodeTransformer.LOWERING_TRANSFORMER));\n@@ -82,1 +82,1 @@\n-        CoreOp.FuncOp f = removeFirstStore(getFuncOp(method).transform(OpTransformer.LOWERING_TRANSFORMER));\n+        CoreOp.FuncOp f = removeFirstStore(getFuncOp(method).transform(CodeTransformer.LOWERING_TRANSFORMER));\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestUninitializedVariable.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -32,1 +33,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -98,1 +98,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -126,1 +126,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -154,1 +154,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -181,1 +181,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestVarArgsInvoke.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -60,1 +60,1 @@\n-                    fb.body(f.body(), fb.parameters(), OpTransformer.COPYING_TRANSFORMER);\n+                    fb.body(f.body(), fb.parameters(), CodeTransformer.COPYING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestVarOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -60,1 +60,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -82,1 +82,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestWhileOp.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -68,1 +68,1 @@\n-                        CopyContext cc = block.context();\n+                        CodeContext cc = block.context();\n@@ -80,1 +80,1 @@\n-                        CopyContext cc = block.context();\n+                        CodeContext cc = block.context();\n@@ -89,1 +89,1 @@\n-        Op ef = f.transform(CopyContext.create(), (block, op) -> {\n+        Op ef = f.transform(CodeContext.create(), (block, op) -> {\n@@ -113,1 +113,1 @@\n-            ef = ef.transform(CopyContext.create(), (block, op) -> {\n+            ef = ef.transform(CodeContext.create(), (block, op) -> {\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/ad\/ExpressionElimination.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -212,1 +212,1 @@\n-    void adaptSuccessor(CopyContext cc, Block.Reference from) {\n+    void adaptSuccessor(CodeContext cc, Block.Reference from) {\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/ad\/ForwardDifferentiation.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -97,1 +97,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/ad\/TestForwardAutoDiff.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -67,1 +67,1 @@\n-        public AnfLetOp(AnfLetOp that, CopyContext cc, OpTransformer ot) {\n+        public AnfLetOp(AnfLetOp that, CodeContext cc, CodeTransformer ot) {\n@@ -74,1 +74,1 @@\n-        public Op transform(CopyContext cc, OpTransformer ot) {\n+        public Op transform(CodeContext cc, CodeTransformer ot) {\n@@ -124,1 +124,1 @@\n-        public AnfLetRecOp(AnfLetRecOp that, CopyContext cc, OpTransformer ot) {\n+        public AnfLetRecOp(AnfLetRecOp that, CodeContext cc, CodeTransformer ot) {\n@@ -131,1 +131,1 @@\n-        public Op transform(CopyContext cc, OpTransformer ot) {\n+        public Op transform(CodeContext cc, CodeTransformer ot) {\n@@ -211,1 +211,1 @@\n-        public AnfIfOp(AnfIfOp that, CopyContext cc, OpTransformer ot) {\n+        public AnfIfOp(AnfIfOp that, CodeContext cc, CodeTransformer ot) {\n@@ -219,1 +219,1 @@\n-        public Op transform(CopyContext cc, OpTransformer ot) {\n+        public Op transform(CodeContext cc, CodeTransformer ot) {\n@@ -292,1 +292,1 @@\n-        AnfFuncOp(AnfFuncOp that, CopyContext cc, OpTransformer oa) {\n+        AnfFuncOp(AnfFuncOp that, CodeContext cc, CodeTransformer oa) {\n@@ -296,1 +296,1 @@\n-        AnfFuncOp(AnfFuncOp that, String funcName, CopyContext cc, OpTransformer ot) {\n+        AnfFuncOp(AnfFuncOp that, String funcName, CodeContext cc, CodeTransformer ot) {\n@@ -304,1 +304,1 @@\n-        public AnfFuncOp transform(CopyContext cc, OpTransformer ot) {\n+        public AnfFuncOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -351,1 +351,1 @@\n-        public AnfApply(AnfApply that, CopyContext cc) {\n+        public AnfApply(AnfApply that, CodeContext cc) {\n@@ -356,1 +356,1 @@\n-        public Op transform(CopyContext cc, OpTransformer ot) {\n+        public Op transform(CodeContext cc, CodeTransformer ot) {\n@@ -400,1 +400,1 @@\n-        public AnfApplyStub(AnfApplyStub that, CopyContext cc) {\n+        public AnfApplyStub(AnfApplyStub that, CodeContext cc) {\n@@ -412,1 +412,1 @@\n-        public Op transform(CopyContext cc, OpTransformer ot) {\n+        public Op transform(CodeContext cc, CodeTransformer ot) {\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/anf\/AnfDialect.java","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -63,1 +63,1 @@\n-        var outerLetRecBody = Body.Builder.of(outerBodyBuilder, CoreType.functionType(b.yieldType(), List.of()), CopyContext.create(builderEntry.context()));\n+        var outerLetRecBody = Body.Builder.of(outerBodyBuilder, CoreType.functionType(b.yieldType(), List.of()), CodeContext.create(builderEntry.context()));\n@@ -90,1 +90,1 @@\n-        Body.Builder newBodyBuilder = Body.Builder.of(ancestorBodyBuilder, blockFTypeSynth, CopyContext.create(ancestorBodyBuilder.entryBlock().context()));\n+        Body.Builder newBodyBuilder = Body.Builder.of(ancestorBodyBuilder, blockFTypeSynth, CodeContext.create(ancestorBodyBuilder.entryBlock().context()));\n@@ -100,1 +100,1 @@\n-        var letBody = Body.Builder.of(newBodyBuilder, CoreType.functionType(blockReturnType, List.of()), CopyContext.create(newBodyBuilder.entryBlock().context()));\n+        var letBody = Body.Builder.of(newBodyBuilder, CoreType.functionType(blockReturnType, List.of()), CodeContext.create(newBodyBuilder.entryBlock().context()));\n@@ -118,1 +118,1 @@\n-        Body.Builder funcBodyBuilder = Body.Builder.of(ancestorBodyBuilder, blockFTypeSynth, CopyContext.create(ancestorBodyBuilder.entryBlock().context()));\n+        Body.Builder funcBodyBuilder = Body.Builder.of(ancestorBodyBuilder, blockFTypeSynth, CodeContext.create(ancestorBodyBuilder.entryBlock().context()));\n@@ -130,1 +130,1 @@\n-        Body.Builder letrecBody = Body.Builder.of(funcBodyBuilder, CoreType.functionType(blockReturnType, List.of()), CopyContext.create(funcBodyBuilder.entryBlock().context()));\n+        Body.Builder letrecBody = Body.Builder.of(funcBodyBuilder, CoreType.functionType(blockReturnType, List.of()), CodeContext.create(funcBodyBuilder.entryBlock().context()));\n@@ -139,1 +139,1 @@\n-        var letBody = Body.Builder.of(letrecBody, letrecBody.bodyType(), CopyContext.create(letrecBody.entryBlock().context()));\n+        var letBody = Body.Builder.of(letrecBody, letrecBody.bodyType(), CodeContext.create(letrecBody.entryBlock().context()));\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/anf\/AnfTransformer.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -68,1 +68,1 @@\n-            var fz = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+            var fz = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/anf\/TestAnfBasicFuns.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -81,1 +81,1 @@\n-            var fz = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+            var fz = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/anf\/TestAnfTransform.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -104,1 +104,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/TestArrayCreation.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -646,1 +646,1 @@\n-            lfunc = func.transform(CopyContext.create(), OpTransformer.LOWERING_TRANSFORMER);\n+            lfunc = func.transform(CodeContext.create(), CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/TestBytecode.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -82,1 +82,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/TestInvokeSuper.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -32,1 +33,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -82,1 +82,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/TestNestedCapturingLambda.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -26,1 +27,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -145,1 +145,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/TestSlots.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -33,1 +34,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -68,1 +68,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -87,1 +87,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/TestSynchronizedOp.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -263,1 +263,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/TestTry.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -199,1 +199,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/TestTryFinally.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -222,1 +222,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/TestTryFinallyNested.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -33,1 +33,1 @@\n-        var lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        var lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/TestVarArg.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -57,1 +57,1 @@\n-    protected SlotOp(SlotOp that, CopyContext cc) {\n+    protected SlotOp(SlotOp that, CodeContext cc) {\n@@ -99,1 +99,1 @@\n-        SlotLoadOp(SlotLoadOp that, CopyContext cc) {\n+        SlotLoadOp(SlotLoadOp that, CodeContext cc) {\n@@ -105,1 +105,1 @@\n-        public SlotLoadOp transform(CopyContext cc, OpTransformer ot) {\n+        public SlotLoadOp transform(CodeContext cc, CodeTransformer ot) {\n@@ -149,1 +149,1 @@\n-        SlotStoreOp(SlotStoreOp that, CopyContext cc) {\n+        SlotStoreOp(SlotStoreOp that, CodeContext cc) {\n@@ -154,1 +154,1 @@\n-        public SlotStoreOp transform(CopyContext cc, OpTransformer ot) {\n+        public SlotStoreOp transform(CodeContext cc, CodeTransformer ot) {\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/lift\/SlotOp.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -202,1 +202,1 @@\n-            CopyContext cc = block.context();\n+            CodeContext cc = block.context();\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/lift\/SlotToVarTransformer.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -26,6 +26,2 @@\n-import jdk.incubator.code.Block;\n-import jdk.incubator.code.CopyContext;\n-import jdk.incubator.code.Op;\n-import jdk.incubator.code.OpTransformer;\n-import jdk.incubator.code.TypeElement;\n-import jdk.incubator.code.Value;\n+import jdk.incubator.code.*;\n+import jdk.incubator.code.CodeTransformer;\n@@ -269,2 +265,2 @@\n-    private OpTransformer blockParamTypesTransformer() {\n-        return new OpTransformer() {\n+    private CodeTransformer blockParamTypesTransformer() {\n+        return new CodeTransformer() {\n@@ -274,1 +270,1 @@\n-                    CopyContext cc = block.context();\n+                    CodeContext cc = block.context();\n@@ -291,1 +287,1 @@\n-                OpTransformer.super.acceptBlock(block, b);\n+                CodeTransformer.super.acceptBlock(block, b);\n@@ -302,1 +298,1 @@\n-    private OpTransformer opTypesTransformer() {\n+    private CodeTransformer opTypesTransformer() {\n@@ -304,1 +300,1 @@\n-            CopyContext cc = block.context();\n+            CodeContext cc = block.context();\n@@ -325,1 +321,1 @@\n-    private static OpTransformer unifyOperandsTransformer() {\n+    private static CodeTransformer unifyOperandsTransformer() {\n@@ -343,1 +339,1 @@\n-        CopyContext cc = CopyContext.create(block.context());\n+        CodeContext cc = CodeContext.create(block.context());\n@@ -356,1 +352,1 @@\n-            block.context().mapValue(op.result(), block.op(op.transform(cc, OpTransformer.COPYING_TRANSFORMER)));\n+            block.context().mapValue(op.result(), block.op(op.transform(cc, CodeTransformer.COPYING_TRANSFORMER)));\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/lift\/UnresolvedTypesTransformer.java","additions":11,"deletions":15,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -64,1 +64,1 @@\n-                        CopyContext cc = block.context();\n+                        CodeContext cc = block.context();\n@@ -76,1 +76,1 @@\n-                        CopyContext cc = block.context();\n+                        CodeContext cc = block.context();\n@@ -85,1 +85,1 @@\n-        Op ef = f.transform(CopyContext.create(), (block, op) -> {\n+        Op ef = f.transform(CodeContext.create(), (block, op) -> {\n@@ -96,1 +96,1 @@\n-        ef = ef.transform(CopyContext.create(), (block, op) -> {\n+        ef = ef.transform(CodeContext.create(), (block, op) -> {\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/expression\/ExpressionElimination.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -26,1 +26,0 @@\n-import jdk.incubator.code.dialect.core.CoreOp;\n@@ -66,1 +65,1 @@\n-        T lf = (T) f.transform(CopyContext.create(), OpTransformer.LOWERING_TRANSFORMER);\n+        T lf = (T) f.transform(CodeContext.create(), CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/expression\/TestExpressionElimination.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -167,1 +167,1 @@\n-            final var fz = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+            final var fz = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -182,1 +182,1 @@\n-            final var fz = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+            final var fz = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/interpreter\/TestAssert.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -33,1 +34,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -78,1 +78,1 @@\n-        CoreOp.FuncOp tf = f.transform(OpTransformer.DROP_LOCATION_TRANSFORMER);\n+        CoreOp.FuncOp tf = f.transform(CodeTransformer.DROP_LOCATION_TRANSFORMER);\n@@ -82,1 +82,1 @@\n-        CoreOp.FuncOp tlf = lower(f).transform(OpTransformer.DROP_LOCATION_TRANSFORMER);\n+        CoreOp.FuncOp tlf = lower(f).transform(CodeTransformer.DROP_LOCATION_TRANSFORMER);\n@@ -99,1 +99,1 @@\n-        return f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        return f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/location\/TestLocation.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,0 +27,2 @@\n+\n+import jdk.incubator.code.CodeTransformer;\n@@ -28,1 +30,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -71,1 +72,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/lower\/CodeReflectionTester.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -94,1 +94,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/pe\/CodeReflectionTester.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -109,1 +109,1 @@\n-        CopyContext cc = outEntryBlock.context();\n+        CodeContext cc = outEntryBlock.context();\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/pe\/PartialEvaluator.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -55,1 +55,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n@@ -75,1 +75,1 @@\n-        CoreOp.FuncOp lf = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        CoreOp.FuncOp lf = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/stream\/TestStream.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -0,0 +1,197 @@\n+import jdk.incubator.code.*;\n+import jdk.incubator.code.dialect.core.CoreOp;\n+import jdk.incubator.code.dialect.java.JavaOp;\n+import jdk.incubator.code.dialect.java.JavaType;\n+import jdk.incubator.code.dialect.java.MethodRef;\n+import jdk.incubator.code.extern.OpWriter;\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.Test;\n+\n+import java.io.StringWriter;\n+import java.lang.reflect.Method;\n+import java.util.List;\n+import java.util.Set;\n+import java.util.function.IntBinaryOperator;\n+\n+\/*\n+ * @test\n+ * @modules jdk.incubator.code\n+ * @modules java.base\/java.lang.invoke:open\n+ * @run junit TestTransform\n+ *\/\n+public class TestTransform {\n+\n+    @CodeReflection\n+    static int f() {\n+        IntBinaryOperator o = (a, b) -> a + b;\n+        int sum = 0;\n+        for (int i = 0; i < 10; i++) {\n+            sum += o.applyAsInt(i, i);\n+        }\n+        return sum + 42;\n+    }\n+\n+    static int add(int a, int b) {\n+        return a + b;\n+    }\n+\n+    @CodeReflection\n+    static int fWithAddMethod() {\n+        IntBinaryOperator o = (a, b) -> add(a, b);\n+        int sum = 0;\n+        for (int i = 0; i < 10; i = add(i, 1)) {\n+            sum = add(sum, o.applyAsInt(i, i));\n+        }\n+        return add(sum, 42);\n+    }\n+\n+    @Test\n+    public void testOpTransformer_fWithAddMethod() throws Exception {\n+        Method fAdd = this.getClass().getDeclaredMethod(\"add\", int.class, int.class);\n+        var codeTransformer = CodeTransformer.opTransformer((builder, op, operands) -> {\n+            switch (op) {\n+                case JavaOp.AddOp _ ->\n+                        builder.apply(JavaOp.invoke(MethodRef.method(fAdd), operands));\n+                default ->\n+                        builder.apply(op);\n+            }\n+        });\n+\n+        testTransformer(\"f\", \"fWithAddMethod\", codeTransformer);\n+    }\n+\n+    @Test\n+    public void testCodeTransformer_fWithAddMethod() throws Exception {\n+        Method fAdd = this.getClass().getDeclaredMethod(\"add\", int.class, int.class);\n+        CodeTransformer codeTransformer = (builder, op) -> {\n+            switch (op) {\n+                case JavaOp.AddOp _ -> {\n+                    List<Value> values = builder.context().getValues(op.operands());\n+                    Op.Result r = builder.op(JavaOp.invoke(MethodRef.method(fAdd), values));\n+                    builder.context().mapValue(op.result(), r);\n+                }\n+                default ->\n+                        builder.op(op);\n+            }\n+            return builder;\n+        };\n+\n+        testTransformer(\"f\", \"fWithAddMethod\", codeTransformer);\n+    }\n+\n+\n+    @CodeReflection\n+    static int fAddToSubNeg() {\n+        IntBinaryOperator o = (a, b) -> a - -b;\n+        int sum = 0;\n+        for (int i = 0; i < 10; i = i - -1) {\n+            sum = sum - -o.applyAsInt(i, i);\n+        }\n+        return sum - -42;\n+    }\n+\n+    @Test\n+    public void testOpTransformer_fAddToSubNeg() throws Exception {\n+        var codeTransformer = CodeTransformer.opTransformer((builder, op, operands) -> {\n+            switch (op) {\n+                case CoreOp.ConstantOp _ -> {\n+                    Set<Op.Result> uses = op.result().uses();\n+                    \/\/ add(x, constant(C))\n+                    if (uses.size() == 1 && uses.iterator().next().op() instanceof JavaOp.AddOp) {\n+                        \/\/ Drop, this will be replaced later\n+                    } else {\n+                        builder.apply(op);\n+                    }\n+                }\n+                case JavaOp.AddOp _ -> {\n+                    \/\/ add(x, constant(C)) -> sub(x, constant(-C))\n+                    \/\/ add(x, y) -> sub(x, neg(y))\n+                    Op.Result rhs;\n+                    if (op.operands().get(1) instanceof Op.Result r && r.op() instanceof CoreOp.ConstantOp cop) {\n+                        \/\/ There is no mapping to the second operand, since it was associated\n+                        \/\/ with the constant op which was dropped\n+                        Assertions.assertNull(operands.get(1));\n+\n+                        rhs = builder.apply(CoreOp.constant(JavaType.INT, -(int) cop.value()));\n+                    } else {\n+                        Assertions.assertNotNull(operands.get(1));\n+\n+                        rhs = builder.apply(JavaOp.neg(operands.get(1)));\n+                    }\n+                    builder.apply(JavaOp.sub(operands.get(0), rhs));\n+                }\n+                default ->\n+                        builder.apply(op);\n+            }\n+        });\n+\n+        testTransformer(\"f\", \"fAddToSubNeg\", codeTransformer);\n+    }\n+\n+    @Test\n+    public void testCodeTransformer_fAddToSubNeg() throws Exception {\n+        CodeTransformer codeTransformer = (builder, op) -> {\n+            switch (op) {\n+                case CoreOp.ConstantOp _ -> {\n+                    Set<Op.Result> uses = op.result().uses();\n+                    \/\/ add(x, constant(C))\n+                    if (uses.size() == 1 && uses.iterator().next().op() instanceof JavaOp.AddOp) {\n+                        \/\/ Drop, this will be replaced later\n+                    } else {\n+                        builder.op(op);\n+                    }\n+                }\n+                case JavaOp.AddOp _ -> {\n+                    \/\/ add(x, constant(C)) -> sub(x, constant(-C))\n+                    \/\/ add(x, y) -> sub(x, neg(y))\n+                    List<Value> operands = op.operands().stream()\n+                            .map(v -> builder.context().getValueOrDefault(v, null)).toList();\n+                    Op.Result rhs;\n+                    if (op.operands().get(1) instanceof Op.Result r && r.op() instanceof CoreOp.ConstantOp cop) {\n+                        \/\/ There is no mapping to the second operand, since it was associated\n+                        \/\/ with the constant op which was dropped\n+                        Assertions.assertNull(operands.get(1));\n+\n+                        rhs = builder.op(CoreOp.constant(JavaType.INT, - (int) cop.value()));\n+                    } else {\n+                        Assertions.assertNotNull(operands.get(1));\n+\n+                        rhs = builder.op(JavaOp.neg(operands.get(1)));\n+                    }\n+                    Op.Result result = builder.op(JavaOp.sub(operands.get(0), rhs));\n+                    builder.context().mapValue(op.result(), result);\n+                }\n+                default ->\n+                        builder.op(op);\n+            }\n+            return builder;\n+        };\n+\n+        testTransformer(\"f\", \"fAddToSubNeg\", codeTransformer);\n+    }\n+\n+\n+     void testTransformer(String methodName, String transformedMethodName, CodeTransformer codeTransformer) throws Exception {\n+        Method fMethod = this.getClass().getDeclaredMethod(methodName);\n+        var fModel = Op.ofMethod(fMethod).orElseThrow();\n+\n+        var fTransformed = fModel.transform(codeTransformer);\n+\n+        Method fTransformedMethod = this.getClass().getDeclaredMethod(transformedMethodName);\n+        var fTransformedModel = Op.ofMethod(fTransformedMethod).orElseThrow();\n+\n+        assertEqual(fTransformedModel, fTransformed, methodName, transformedMethodName);\n+    }\n+\n+    static void assertEqual(Op expected, Op actual,\n+                            String methodName, String transformedMethodName) {\n+        Assertions.assertEquals(serialize(expected).replace(transformedMethodName, methodName), serialize(actual));\n+    }\n+\n+    static String serialize(Op o) {\n+        StringWriter w = new StringWriter();\n+        OpWriter.writeTo(w, o, OpWriter.LocationOption.DROP_LOCATION);\n+        return w.toString();\n+    }\n+\n+}\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/transform\/TestTransform.java","additions":197,"deletions":0,"binary":false,"changes":197,"status":"added"},{"patch":"@@ -30,1 +30,1 @@\n-import jdk.incubator.code.CopyContext;\n+import jdk.incubator.code.CodeContext;\n@@ -32,1 +32,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -52,1 +52,1 @@\n-        TestOp(TestOp that, CopyContext cc) {\n+        TestOp(TestOp that, CodeContext cc) {\n@@ -58,1 +58,1 @@\n-        public TestOp transform(CopyContext cc, OpTransformer ot) {\n+        public TestOp transform(CodeContext cc, CodeTransformer ot) {\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/writer\/TestAttributeSerialization.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n-import jdk.incubator.code.OpTransformer;\n+import jdk.incubator.code.CodeTransformer;\n@@ -120,1 +120,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/writer\/TestCodeBuilder.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+import jdk.incubator.code.CodeTransformer;\n@@ -33,1 +34,0 @@\n-import jdk.incubator.code.OpTransformer;\n@@ -70,1 +70,1 @@\n-        f = f.transform(OpTransformer.LOWERING_TRANSFORMER);\n+        f = f.transform(CodeTransformer.LOWERING_TRANSFORMER);\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/writer\/TestNaming.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -141,1 +141,1 @@\n-            CopyContext cc = fblock.context();\n+            CodeContext cc = fblock.context();\n","filename":"test\/langtools\/tools\/javac\/reflect\/CodeReflectionTester.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}