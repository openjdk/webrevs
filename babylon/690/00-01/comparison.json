{"files":[{"patch":"@@ -32,2 +32,0 @@\n-import static java.util.stream.Collectors.toList;\n-\n@@ -44,1 +42,1 @@\n-    interface OpTransformerRename {\n+    interface OpTransformer {\n@@ -46,1 +44,1 @@\n-         * Transforms an input operation to zero or more output operations.\n+         * Transforms an operation to zero or more operations.\n@@ -48,5 +46,7 @@\n-         * @param in          the input operation to transform\n-         * @param outOperands the operands of the input operation mapped to output operands\n-         *                    to be used by one or more output operations\n-         * @param builder     The function to apply zero or more output operations\n-         *                    that map to the input operation\n+         * @param op       the operation to transform\n+         * @param operands the operands of the operation mapped to\n+         *                 values in the transformed code model. If\n+         *                 there is no mapping of an operand then it is\n+         *                 mapped to {@code null}.\n+         * @param builder  the function to apply zero or more operations\n+         *                 into the transformed code model\n@@ -54,1 +54,1 @@\n-        void acceptOp(Function<Op, Op.Result> builder, Op in, List<Value> outOperands);\n+        void acceptOp(Function<Op, Op.Result> builder, Op op, List<Value> operands);\n@@ -64,1 +64,1 @@\n-    static CodeTransformer opTransformer(OpTransformerRename opTransformer) {\n+    static CodeTransformer opTransformer(OpTransformer opTransformer) {\n@@ -73,1 +73,3 @@\n-                \/\/ Reuse the input operand if there is no mapping in the output\n+                \/\/ Use null if there is no mapping in the output\n+                \/\/ This can happen if an operation is removed by not applying\n+                \/\/ it to the builder\n@@ -81,4 +83,4 @@\n-            public Op.Result apply(Op outOp) {\n-                Op.Result outResult = builder.op(outOp);\n-                builder.context().mapValue(op.result(), outResult);\n-                return outResult;\n+            public Op.Result apply(Op op) {\n+                Op.Result result = builder.op(op);\n+                builder.context().mapValue(this.op.result(), result);\n+                return result;\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/CodeTransformer.java","additions":18,"deletions":16,"binary":false,"changes":34,"status":"modified"}]}