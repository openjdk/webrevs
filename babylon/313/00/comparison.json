{"files":[{"patch":"@@ -108,13 +108,1 @@\n-                    jextract(jextractCapability.executable, $ -> $\n-                            .verbose(verbose)\n-                            .capability(openclCapability,stageDir)\n-                            .os(\n-                                    mac -> $\n-                                            .compile_flag(\"-F\" + openclCapability.appLibFrameworks() + \"\/System\/library\/Frameworks\")\n-                                            .library(mac.frameworkLibrary(\"OpenCL\"))\n-                                            .header(Path.of(openclCapability.includeDir()).resolve(\"Headers\/opencl.h\")),\n-                                    linux -> {\n-                                        throw new RuntimeException(\"Unsupported OS: \" + os);\n-                                    }\n-                            )\n-                    );\n+                    jextract(jextractCapability.executable, $ -> $ .verbose(verbose) .capability(openclCapability,stageDir));\n@@ -124,4 +112,3 @@\n-                jar(jar ->\n-                            jar\n-                                    .jarFile(openclCapability.jarFile(buildDir))\n-                                    .javac(javac -> javac.current_source().source_path(SourceDir.of(openclCapability.stage(stageDir).path())))\n+                jar(jar -> jar\n+                    .jarFile(openclCapability.jarFile(buildDir))\n+                    .javac(javac -> javac.current_source().source_path(SourceDir.of(openclCapability.stage(stageDir).path())))\n@@ -140,13 +127,1 @@\n-                    jextract(jextractCapability, $ -> $\n-                            .verbose(verbose)\n-                            .capability(openglCapability, stageDir)\n-                            .os(\n-                                    mac -> $\n-                                            .compile_flag(\"-F\" + openglCapability.appLibFrameworks() + \"\/System\/library\/Frameworks\")\n-                                            .library(mac.frameworkLibrary(\"GLUT\"), mac.frameworkLibrary(\"OpenGL\"))\n-                                            .header(mac.frameworkHeader(\"GLUT\", \"glut.h\")),\n-                                    linux -> {\n-                                        throw new RuntimeException(\"Unsupported OS: \" + os);\n-                                    }\n-                            )\n-                    );\n+                    jextract(jextractCapability, $ -> $ .verbose(verbose) .capability(openglCapability, stageDir));\n","filename":"hat\/bld","additions":5,"deletions":30,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -2002,1 +2002,1 @@\n-            return output(jextractable.stage(stageDir))\n+             output(jextractable.stage(stageDir))\n@@ -2005,0 +2005,2 @@\n+              jextractable.inversionOfControl(this);\n+             return self();\n@@ -2520,0 +2522,2 @@\n+\n+            void inversionOfControl(JExtractBuilder jextractBuilder);\n@@ -2602,0 +2606,11 @@\n+            @Override\n+            public void inversionOfControl(JExtractBuilder jextractBuilder) {\n+ jextractBuilder.os(mac -> jextractBuilder\n+                                .compile_flag(\"-F\"\n+                                        + appLibFrameworks() + \"\/System\/library\/Frameworks\")\n+                                .library(mac.frameworkLibrary(\"OpenCL\"))\n+                                .header(Path.of(includeDir()).resolve(\"Headers\/opencl.h\")),\n+                        linux -> {\n+                            throw new IllegalStateException(\"Linux not handled yet\");\n+                        });\n+            }\n@@ -2681,0 +2696,13 @@\n+            @Override public void inversionOfControl(JExtractBuilder jextractBuilder){\n+                jextractBuilder\n+                        .os(mac -> jextractBuilder\n+                                .compile_flag(\"-F\"\n+                                        + appLibFrameworks() + \"\/System\/library\/Frameworks\")\n+                                .library(mac.frameworkLibrary(\"OpenGL\"))\n+                                .library(mac.frameworkLibrary(\"GLUT\"))\n+                                .header(glutIncludeDir().dir(\"glut.h\").path()),\n+                        linux -> {\n+                            throw new IllegalStateException(\"Linux not handled yet\");\n+                        }\n+                );\n+            }\n@@ -2718,0 +2746,4 @@\n+            @Override\n+            public void inversionOfControl(JExtractBuilder jextractBuilder) {\n+\n+            }\n@@ -2760,0 +2792,4 @@\n+            @Override\n+            public void inversionOfControl(JExtractBuilder jextractBuilder) {\n+\n+            }\n","filename":"hat\/bldr\/Bldr.java","additions":37,"deletions":1,"binary":false,"changes":38,"status":"modified"}]}