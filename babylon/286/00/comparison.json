{"files":[{"patch":"@@ -5,0 +5,1 @@\n+target\/\n","filename":"hat\/.gitignore","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n@@ -48,0 +48,1 @@\n+                <version>3.1.0<\/version>\n@@ -50,1 +51,0 @@\n-                    <!--We want to inherit properties from parent but not plugin that calls cmake-->\n@@ -59,0 +59,1 @@\n+                        <id>1<\/id>\n","filename":"hat\/backends\/cuda\/pom.xml","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n@@ -48,0 +48,1 @@\n+                <version>3.1.0<\/version>\n@@ -50,1 +51,0 @@\n-                    <!--We want to inherit properties from parent but not plugin that calls cmake-->\n@@ -59,0 +59,1 @@\n+                        <id>1<\/id>\n","filename":"hat\/backends\/mock\/pom.xml","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n@@ -48,0 +48,1 @@\n+                <version>3.1.0<\/version>\n@@ -50,1 +51,0 @@\n-                    <!--We want to inherit properties from parent but not plugin that calls cmake-->\n@@ -59,0 +59,1 @@\n+                        <id>1<\/id>\n","filename":"hat\/backends\/opencl\/pom.xml","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n@@ -57,1 +57,1 @@\n-                        <id>cmake-compile<\/id>\n+                        <id>1<\/id>\n@@ -72,1 +72,1 @@\n-                        <id>cmake-install<\/id>\n+                        <id>2<\/id>\n@@ -85,14 +85,0 @@\n-                    <execution>\n-                        <id>rm-clean<\/id>\n-                        <phase>clean<\/phase>\n-                        <goals>\n-                            <goal>exec<\/goal>\n-                        <\/goals>\n-                        <configuration>\n-                            <executable>rm<\/executable>\n-                            <arguments>\n-                                <argument>-rf<\/argument>\n-                                <argument>cmake-build-debug<\/argument>\n-                            <\/arguments>\n-                        <\/configuration>\n-                    <\/execution>\n","filename":"hat\/backends\/pom.xml","additions":7,"deletions":21,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n@@ -48,0 +48,1 @@\n+                <version>3.1.0<\/version>\n@@ -50,1 +51,0 @@\n-                    <!--We want to inherit properties from parent but not plugin that calls cmake-->\n@@ -59,0 +59,1 @@\n+                        <id>1<\/id>\n","filename":"hat\/backends\/ptx\/pom.xml","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -28,2 +28,0 @@\n-\/\/import dot.JSONDotModel;\n-\n","filename":"hat\/bldr\/Bldr.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -257,1 +257,24 @@\n-    public PomXmlBuilder ant(String phase, String goal, Consumer<PomXmlBuilder> pomXmlBuilderConsumer) {\n+    public PomXmlBuilder cmake(String id, String phase,  Consumer<PomXmlBuilder> pomXmlBuilderConsumer) {\n+      return execIdPhaseConf(id,phase,conf->conf\n+              .executable(\"cmake\")\n+              .arguments(pomXmlBuilderConsumer)\n+      );\n+    }\n+    public PomXmlBuilder cmake(String id, String phase,  String ...args) {\n+      return execIdPhaseConf(id,phase,conf->conf\n+              .executable(\"cmake\")\n+              .arguments(arguments->arguments\n+                  .forEach(Stream.of(args), arguments::argument)\n+              )\n+      );\n+    }\n+    public PomXmlBuilder jextract(String id, String phase,  String ...args) {\n+      return execIdPhaseConf(id,phase,conf->conf\n+              .executable(\"jextract\")\n+              .arguments(arguments->arguments\n+                      .forEach(Stream.of(args), arguments::argument)\n+              )\n+      );\n+    }\n+\n+    public PomXmlBuilder ant(String id, String phase, String goal, Consumer<PomXmlBuilder> pomXmlBuilderConsumer) {\n@@ -259,0 +282,1 @@\n+              .id(id)\n@@ -280,0 +304,4 @@\n+\n+    public PomXmlBuilder compilerArgs(String ...args) {\n+      return element(\"compilerArgs\", $->$.forEach(Stream.of(args), $::arg));\n+    }\n@@ -286,0 +314,3 @@\n+    public PomXmlBuilder dependsOn(String groupId, String artifactId, String version) {\n+      return element(\"dependencies\", $->$.dependency(groupId, artifactId, version));\n+    }\n@@ -299,0 +330,4 @@\n+\n+    public PomXmlBuilder modules(String ...modules) {\n+       return element(\"modules\", $->$.forEach(Stream.of(modules), $::module));\n+    }\n@@ -324,0 +359,6 @@\n+    public PomXmlBuilder echo(String message) {\n+      return element(\"echo\", $->$.attr(\"message\", message));\n+    }\n+    public PomXmlBuilder echo(String filename, String message) {\n+      return element(\"echo\", $->$.attr(\"message\", message).attr(\"file\", filename));\n+    }\n","filename":"hat\/bldr\/XMLNode.java","additions":42,"deletions":1,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n@@ -51,0 +51,1 @@\n+                        <id>1<\/id>\n","filename":"hat\/examples\/blackscholes\/pom.xml","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n@@ -51,0 +51,1 @@\n+                        <id>1<\/id>\n","filename":"hat\/examples\/heal\/pom.xml","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n@@ -51,0 +51,1 @@\n+                        <id>1<\/id>\n","filename":"hat\/examples\/life\/pom.xml","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n@@ -51,0 +51,1 @@\n+                        <id>1<\/id>\n","filename":"hat\/examples\/mandel\/pom.xml","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n","filename":"hat\/examples\/pom.xml","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n@@ -51,0 +51,1 @@\n+                        <id>1<\/id>\n","filename":"hat\/examples\/squares\/pom.xml","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n@@ -51,0 +51,1 @@\n+                        <id>1<\/id>\n","filename":"hat\/examples\/violajones\/pom.xml","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -0,0 +1,1 @@\n+target\n","filename":"hat\/hat\/.gitignore","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n@@ -64,0 +64,1 @@\n+                        <id>1<\/id>\n","filename":"hat\/hat\/pom.xml","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -30,24 +30,3 @@\n-  var pomComment = \"\"\"\n-    Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n-    DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-                               \n-    This code is free software; you can redistribute it and\/or modify it\n-    under the terms of the GNU General Public License version 2 only, as\n-    published by the Free Software Foundation.  Oracle designates this\n-    particular file as subject to the \"Classpath\" exception as provided\n-    by Oracle in the LICENSE file that accompanied this code.\n-                               \n-    This code is distributed in the hope that it will be useful, but WITHOUT\n-    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n-    FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n-    version 2 for more details (a copy is included in the LICENSE file that\n-    accompanied this code).\n-                               \n-    You should have received a copy of the GNU General Public License version\n-    2 along with this work; if not, write to the Free Software Foundation,\n-    Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-                               \n-    Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-    or visit www.oracle.com if you need additional information or have any\n-    questions.                \n-    \"\"\";\n+   var pomComment = \"\"\"\n+      Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+      DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n@@ -55,4 +34,5 @@\n-    var hatDir = Dir.current();\n-    var hatCoreDir = hatDir.existingDir(\"hat\");\n-    var backends = hatDir.existingDir(\"backends\");\n-    var examples = hatDir.existingDir(\"examples\");\n+      This code is free software; you can redistribute it and\/or modify it\n+      under the terms of the GNU General Public License version 2 only, as\n+      published by the Free Software Foundation.  Oracle designates this\n+      particular file as subject to the \"Classpath\" exception as provided\n+      by Oracle in the LICENSE file that accompanied this code.\n@@ -60,34 +40,43 @@\n-    \/\/ Here we create the top level pom.xml\n-    backends.createPom(pomComment, pom -> pom\n-      .comment(\"Auto generated by mkpoms\")\n-      .pom(\"oracle.code\", \"hat-root\", \"1.0\")\n-      .properties(props -> props\n-         .property(\"project.build.sourceEncoding\", \"UTF-8\")\n-         .property(\"hat.target\", \"${env.PWD}\/build\")\n-      )\n-      .profiles(profiles -> profiles\n-         .profile(profile -> profile\n-            .id(\"default\")\n-            .activation(activation -> activation\n-               .activeByDefault(\"true\")\n-            )\n-            .modules(modules -> modules\n-               .module(\"hat\")\n-               .module(\"backends\")\n-               .module(\"examples\")\n-            )\n-         )\n-      )\n-      .build(build -> build\n-         .plugins(plugins -> plugins\n-            .compilerPluginConfiguration(configuration -> configuration\n-               .compilerArgs(compilerArgs -> compilerArgs\n-                  .arg(\"--add-modules=jdk.incubator.code\")\n-                  .arg(\"--enable-preview\")\n-                  .arg(\"--add-exports=java.base\/jdk.internal=ALL-UNNAMED\")\n-                  .arg(\"--add-exports=java.base\/jdk.internal.vm.annotation=ALL-UNNAMED\")\n-               )\n-               .source(\"24\").target(\"24\").showDeprecation(\"true\").failOnError(\"true\").showWarnings(\"true\")\n-            )\n-         )\n-      )\n+      This code is distributed in the hope that it will be useful, but WITHOUT\n+      ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+      FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+      version 2 for more details (a copy is included in the LICENSE file that\n+            accompanied this code).\n+\n+      You should have received a copy of the GNU General Public License version\n+      2 along with this work; if not, write to the Free Software Foundation,\n+        Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+\n+           Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+           or visit www.oracle.com if you need additional information or have any\n+           questions.                \n+           \"\"\";\n+\n+   var hatDir = Dir.current();\n+   var hatCoreDir = hatDir.existingDir(\"hat\");\n+   var backends = hatDir.existingDir(\"backends\");\n+   var examples = hatDir.existingDir(\"examples\");\n+\n+\n+   hatDir.createPom(pomComment, pom -> pom\n+     .comment(\"Auto generated by mkpoms\")\n+     .pom(\"oracle.code\", \"hat-root\", \"1.0\")\n+     .properties(props -> props\n+        .property(\"project.build.sourceEncoding\", \"UTF-8\")\n+        .property(\"hat.target\", \"${env.PWD}\/build\")\n+     )\n+     .modules(\"hat\", \"backends\", \"examples\")\n+     .build(build -> build\n+        .plugins(plugins -> plugins\n+           .compilerPluginConfiguration(configuration -> configuration\n+              \/\/ These compiler args are inherited by backends and examples\n+              .compilerArgs(\n+                 \"--add-modules=jdk.incubator.code\",\n+                 \"--enable-preview\",\n+                 \"--add-exports=java.base\/jdk.internal=ALL-UNNAMED\",\n+                 \"--add-exports=java.base\/jdk.internal.vm.annotation=ALL-UNNAMED\"\n+              )\n+              .source(\"24\").target(\"24\").showDeprecation(\"true\").failOnError(\"true\").showWarnings(\"true\")\n+           )\n+        )\n+     )\n@@ -98,25 +87,27 @@\n-      .comment(\"Auto generated by mkpoms\")\n-      .jar(\"oracle.code\", \"hat\", \"1.0\")\n-      .parent(\"oracle.code\", \"hat-root\", \"1.0\")\n-      .dependencies(dependencies -> dependencies\n-         .dependency(\"org.junit.jupiter\", \"junit-jupiter-engine\", \"5.10.0\", \"test\")\n-      )\n-      .build(build -> build\n-         .pluginManagement(pluginManagement -> pluginManagement\n-            .plugins(plugins -> plugins\n-               .plugin(\"org.apache.maven.plugins\", \"maven-surefire-plugin\", \"3.1.2\", plugin -> plugin\n-                  .configuration(configuration -> configuration\n-                     .argLine(\"-enable-preview\")\n-                  )\n-               )\n-            )\n-         )\n-         .plugins(plugins -> plugins\n-            .antPluginExecutions(executions -> executions\n-               .ant(\"install\", \"run\", ant -> ant\n-                  .copy(\"target\/${project.artifactId}-1.0.jar\", \"${hat.target}\")\n-               )\n-            )\n-         )\n-      )\n-   );\n+     .comment(\"Auto generated by mkpoms\")\n+     .jar(\"oracle.code\", \"hat\", \"1.0\")\n+     .parent(\"oracle.code\", \"hat-root\", \"1.0\")\n+     .dependencies(dependencies -> dependencies\n+        .dependency(\"org.junit.jupiter\", \"junit-jupiter-engine\", \"5.10.0\", \"test\")\n+     )\n+     .build(build -> build\n+        .pluginManagement(pluginManagement -> pluginManagement\n+           .plugins(plugins -> plugins\n+              \/\/ This is for the test cases (testng)\n+              .plugin(\"org.apache.maven.plugins\", \"maven-surefire-plugin\", \"3.1.2\", plugin -> plugin\n+                 .configuration(configuration -> configuration\n+                    .argLine(\"-enable-preview\")\n+                 )\n+              )\n+           )\n+        )\n+        .plugins(plugins -> plugins\n+           .antPluginExecutions(executions -> executions\n+              \/\/ We copy the jar to the build dir here\n+              .ant(\"1\",\"install\", \"run\", ant -> ant\n+                 .copy(\"target\/${project.artifactId}-1.0.jar\", \"${hat.target}\")\n+              )\n+           )\n+        )\n+     )\n+  );\n@@ -126,28 +117,24 @@\n-      .comment(\"Auto generated by mkpoms\")\n-      .pom(\"oracle.code\", \"hat-examples\", \"1.0\")\n-      .parent(\"oracle.code\", \"hat-root\", \"1.0\")\n-      .dependencies(deps -> deps\n-         .dependency(\"oracle.code\", \"hat\", \"1.0\")\n-      )\n-      .modules(modules -> examples.subDirs().filter(dir -> !dir.matches(\"^.*(experiments|target|.idea)$\")).forEach(example -> {\n-         modules.module(example.fileName());\n-         \/\/ here is the 'nested example\/*\/pom.xml\n-         example.createPom(pomComment, examplePom -> examplePom\n-            .comment(\"Auto generated by mkpoms\")\n-            .jar(\"oracle.code\", \"hat-example-\" + example.fileName(), \"1.0\")\n-            .parent(\"oracle.code\", \"hat-examples\", \"1.0\")\n-            .dependencies(deps -> deps\n-               .dependency(\"oracle.code\", \"hat\", \"1.0\")\n-            )\n-            .build(build -> build\n-               .plugins(plugins -> plugins\n-                  .antPluginExecutions(executions -> executions\n-                     .ant(\"install\", \"run\", ant -> ant\n-                        .copy(\"target\/hat-example-\" + example.fileName() + \"-1.0.jar\", \"${hat.target}\")\n-                     )\n-                  )\n-               )\n-            )\n-         );\n-       })\n-      )\n+     .comment(\"Auto generated by mkpoms\")\n+     .pom(\"oracle.code\", \"hat-examples\", \"1.0\")\n+     .parent(\"oracle.code\", \"hat-root\", \"1.0\")\n+     .dependsOn(\"oracle.code\", \"hat\", \"1.0\")\n+     .modules(modules -> examples.subDirs().filter(dir -> !dir.matches(\"^.*(experiments|target|.idea)$\")).forEach(example -> {\n+        modules.module(example.fileName());\n+        \/\/ here is the 'nested example\/*\/pom.xml\n+        example.createPom(pomComment, examplePom -> examplePom\n+           .comment(\"Auto generated by mkpoms\")\n+           .jar(\"oracle.code\", \"hat-example-\" + example.fileName(), \"1.0\")\n+           .parent(\"oracle.code\", \"hat-examples\", \"1.0\")\n+           .dependsOn(\"oracle.code\", \"hat\", \"1.0\")\n+           .build(build -> build\n+              .plugins(plugins -> plugins\n+                 .antPluginExecutions(executions -> executions\n+                    \/\/ We copy the example jar to the build dir here\n+                    .ant(\"1\",\"install\", \"run\", ant -> ant\n+                       .copy(\"target\/hat-example-\" + example.fileName() + \"-1.0.jar\", \"${hat.target}\")\n+                    )\n+                 )\n+              )\n+           )\n+        );\n+     }))\n@@ -158,30 +145,27 @@\n-      .comment(\"Auto generated by mkpoms\")\n-      .pom(\"oracle.code\", \"hat-backends\", \"1.0\")\n-      .parent(\"oracle.code\", \"hat-root\", \"1.0\")\n-      .dependencies(deps -> deps.dependency(dep -> dep.ref(\"oracle.code\", \"hat\", \"1.0\")))\n-      .modules(modules -> backends.subDirs().filter(dir -> !dir.matches(\"^.*(spirv|hip|shared|openclx|target|.idea)$\")).forEach(backend -> {\n-         modules.module(backend.fileName());\n-         \/\/ here is the 'nested backends\/*\/pom.xml\n-         backend.createPom(pomComment, $ -> $\n-            .comment(\"Auto generated by mkpoms\")\n-            .jar(\"oracle.code\", \"hat-backend-\" + backend.fileName(), \"1.0\")\n-            .parent(\"oracle.code\", \"hat-backends\", \"1.0\")\n-            .dependencies(deps -> deps\n-               .dependency(\"oracle.code\", \"hat\", \"1.0\")\n-            )\n-            .build($$ -> $$\n-               .plugins(plugins -> plugins\n-                  .plugin(\"org.codehaus.mojo\", \"exec-maven-plugin\", plugin -> plugin\n-                     .configuration(conf -> conf\n-                        .skip(\"true\")\n-                        .comment(\"We want to inherit properties from parent but not plugin that calls cmake\")\n-                     )\n-                  )\n-                  .antPluginExecutions(executions -> executions\n-                     .ant(\"install\", \"run\", ant -> ant\n-                        .copy(\"target\/hat-backend-\" + backend.fileName() + \"-1.0.jar\", \"${hat.target}\")\n-                     )\n-                  )\n-               )\n-           )\n-        );\n+     .comment(\"Auto generated by mkpoms\")\n+     .pom(\"oracle.code\", \"hat-backends\", \"1.0\")\n+     .parent(\"oracle.code\", \"hat-root\", \"1.0\")\n+     .dependsOn(\"oracle.code\", \"hat\", \"1.0\")\n+     .modules(modules -> backends.subDirs().filter(dir -> !dir.matches(\"^.*(spirv|hip|shared|openclx|target|.idea)$\")).forEach(backend -> {\n+        modules.module(backend.fileName());\n+\n+        \/\/ here is the 'nested backends\/*\/pom.xml\n+        backend.createPom(pomComment, backendPom ->{backendPom\n+           .comment(\"Auto generated by mkpoms\")\n+           .jar(\"oracle.code\", \"hat-backend-\" + backend.fileName(), \"1.0\")\n+           .parent(\"oracle.code\", \"hat-backends\", \"1.0\")\n+           .dependsOn(\"oracle.code\", \"hat\", \"1.0\")\n+           .build(build -> build\n+              .plugins(plugins -> {plugins\n+                 .execPlugin(plugin -> plugin.configuration(conf -> conf.skip(\"true\")))\n+                 .antPluginExecutions(executions -> executions\n+                    .ant(\"1\", \"install\", \"run\", ant -> ant\n+                       .copy(\"target\/hat-backend-\" + backend.fileName() + \"-1.0.jar\", \"${hat.target}\")\n+                    )\n+\/\/                    .ant(\"2\", \"generate-sources\", \"run\", ant -> ant\n+\/\/                       .echo(\"in generate sources phase\")\n+\/\/                    )\n+                 );\n+              })\n+           );\n+        });\n@@ -192,13 +176,2 @@\n-              .exec(\"compile\", \"cmake\", args -> args\n-                 .argument(\"-DHAT_TARGET=${hat.target}\")\n-                 .argument(\"-B\")\n-                 .argument(\"${hat.target}\/cmake-build-debug\")\n-              )\n-              .exec(\"install\", \"cmake\", args -> args\n-                 .argument(\"--build\")\n-                 .argument(\"${hat.target}\/cmake-build-debug\")\n-                 )\n-              .exec(\"clean\", \"rm\", args -> args\n-                 .argument(\"-rf\")\n-                 .argument(\"cmake-build-debug\")\n-              )\n+              .cmake(\"1\",\"compile\", \"-DHAT_TARGET=${hat.target}\", \"-B\", \"${hat.target}\/cmake-build-debug\")\n+              .cmake(\"2\" ,\"install\", \"--build\",\"${hat.target}\/cmake-build-debug\")\n","filename":"hat\/mkpoms","additions":131,"deletions":158,"binary":false,"changes":289,"status":"modified"},{"patch":"@@ -15,1 +15,1 @@\n-accompanied this code).\n+      accompanied this code).\n@@ -19,1 +19,1 @@\n-Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n@@ -21,3 +21,3 @@\n-Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-or visit www.oracle.com if you need additional information or have any\n-questions.\n+     Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+     or visit www.oracle.com if you need additional information or have any\n+     questions.\n@@ -35,13 +35,5 @@\n-    <profiles>\n-        <profile>\n-            <id>default<\/id>\n-            <activation>\n-                <activeByDefault>true<\/activeByDefault>\n-            <\/activation>\n-            <modules>\n-                <module>hat<\/module>\n-                <module>backends<\/module>\n-                <module>examples<\/module>\n-            <\/modules>\n-        <\/profile>\n-    <\/profiles>\n+    <modules>\n+        <module>hat<\/module>\n+        <module>backends<\/module>\n+        <module>examples<\/module>\n+    <\/modules>\n","filename":"hat\/pom.xml","additions":10,"deletions":18,"binary":false,"changes":28,"status":"modified"}]}