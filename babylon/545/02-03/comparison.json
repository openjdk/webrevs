{"files":[{"patch":"@@ -478,2 +478,3 @@\n-                        \/\/ if before last boostrap arg equals to FLAG_QUOTABLE, the lambda is quotable\n-                        if (inst.bootstrapArgs().get(inst.bootstrapArgs().size() - 2).equals(LambdaMetafactory.FLAG_QUOTABLE)) {\n+                        \/\/ if FLAG_QUOTABLE is set, the lambda is quotable\n+                        if (inst.bootstrapArgs().get(inst.bootstrapArgs().size() - 3) instanceof Integer a\n+                                && (a & LambdaMetafactory.FLAG_QUOTABLE) != 0) {\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/bytecode\/BytecodeLift.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -43,1 +43,1 @@\n-                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda ()java.type:\"void\" -> {\n+                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda @lambda.isQuotable=true ()java.type:\"void\" -> {\n@@ -54,1 +54,1 @@\n-                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda ()java.type:\"int\" -> {\n+                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda @lambda.isQuotable=true ()java.type:\"int\" -> {\n@@ -65,1 +65,1 @@\n-                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda (%1 : java.type:\"int\")java.type:\"int\" -> {\n+                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda @lambda.isQuotable=true (%1 : java.type:\"int\")java.type:\"int\" -> {\n@@ -77,1 +77,1 @@\n-                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda (%1 : java.type:\"int\", %2 : java.type:\"int\")java.type:\"int\" -> {\n+                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda @lambda.isQuotable=true (%1 : java.type:\"int\", %2 : java.type:\"int\")java.type:\"int\" -> {\n@@ -92,1 +92,1 @@\n-                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda ()java.type:\"void\" -> {\n+                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda @lambda.isQuotable=true ()java.type:\"void\" -> {\n@@ -105,1 +105,1 @@\n-                %1 : java.type:\"jdk.incubator.code.Quotable\" = lambda (%2 : java.type:\"int\")java.type:\"int\" -> {\n+                %1 : java.type:\"jdk.incubator.code.Quotable\" = lambda @lambda.isQuotable=true (%2 : java.type:\"int\")java.type:\"int\" -> {\n@@ -131,1 +131,1 @@\n-                %1 : java.type:\"jdk.incubator.code.Quotable\" = lambda (%2 : java.type:\"int\")java.type:\"int\" -> {\n+                %1 : java.type:\"jdk.incubator.code.Quotable\" = lambda @lambda.isQuotable=true (%2 : java.type:\"int\")java.type:\"int\" -> {\n@@ -149,1 +149,1 @@\n-                %2 : java.type:\"java.util.function.IntUnaryOperator\" = lambda (%3 : java.type:\"int\")java.type:\"int\" -> {\n+                %2 : java.type:\"java.util.function.IntUnaryOperator\" = lambda @lambda.isQuotable=true (%3 : java.type:\"int\")java.type:\"int\" -> {\n@@ -169,1 +169,1 @@\n-                %1 : java.type:\"java.util.function.IntUnaryOperator\" = lambda (%2 : java.type:\"int\")java.type:\"int\" -> {\n+                %1 : java.type:\"java.util.function.IntUnaryOperator\" = lambda @lambda.isQuotable=true (%2 : java.type:\"int\")java.type:\"int\" -> {\n@@ -191,1 +191,1 @@\n-                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda ()java.type:\"void\" -> {\n+                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda @lambda.isQuotable=true ()java.type:\"void\" -> {\n@@ -206,1 +206,1 @@\n-                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda (%1 : java.type:\"int\")java.type:\"int\" -> {\n+                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda @lambda.isQuotable=true (%1 : java.type:\"int\")java.type:\"int\" -> {\n@@ -219,1 +219,1 @@\n-                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda (%1 : java.type:\"int\")java.type:\"int[]\" -> {\n+                %0 : java.type:\"jdk.incubator.code.Quotable\" = lambda @lambda.isQuotable=true (%1 : java.type:\"int\")java.type:\"int[]\" -> {\n@@ -242,1 +242,1 @@\n-                %1 : java.type:\"jdk.incubator.code.Quotable\" = lambda (%2 : java.type:\"int\")java.type:\"int\" -> {\n+                %1 : java.type:\"jdk.incubator.code.Quotable\" = lambda @lambda.isQuotable=true (%2 : java.type:\"int\")java.type:\"int\" -> {\n","filename":"test\/langtools\/tools\/javac\/reflect\/QuotableIntersectionTest.java","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -46,1 +46,1 @@\n-                %0 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda ()java.type:\"void\" -> {\n+                %0 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda @lambda.isQuotable=true ()java.type:\"void\" -> {\n@@ -58,1 +58,1 @@\n-                %0 : java.type:\"QuotableSubtypeTest$QuotableIntSupplier\" = lambda ()java.type:\"int\" -> {\n+                %0 : java.type:\"QuotableSubtypeTest$QuotableIntSupplier\" = lambda @lambda.isQuotable=true ()java.type:\"int\" -> {\n@@ -71,1 +71,1 @@\n-                %0 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda (%1 : java.type:\"int\")java.type:\"int\" -> {\n+                %0 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda @lambda.isQuotable=true (%1 : java.type:\"int\")java.type:\"int\" -> {\n@@ -85,1 +85,1 @@\n-                %0 : java.type:\"QuotableSubtypeTest$QuotableIntBinaryOperator\" = lambda (%1 : java.type:\"int\", %2 : java.type:\"int\")java.type:\"int\" -> {\n+                %0 : java.type:\"QuotableSubtypeTest$QuotableIntBinaryOperator\" = lambda @lambda.isQuotable=true (%1 : java.type:\"int\", %2 : java.type:\"int\")java.type:\"int\" -> {\n@@ -99,1 +99,1 @@\n-                %0 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda ()java.type:\"void\" -> {\n+                %0 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda @lambda.isQuotable=true ()java.type:\"void\" -> {\n@@ -110,1 +110,1 @@\n-                %1 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda (%2 : java.type:\"int\")java.type:\"int\" -> {\n+                %1 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda @lambda.isQuotable=true (%2 : java.type:\"int\")java.type:\"int\" -> {\n@@ -136,1 +136,1 @@\n-                %1 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda (%2 : java.type:\"int\")java.type:\"int\" -> {\n+                %1 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda @lambda.isQuotable=true (%2 : java.type:\"int\")java.type:\"int\" -> {\n@@ -154,1 +154,1 @@\n-                %2 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda (%3 : java.type:\"int\")java.type:\"int\" -> {\n+                %2 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda @lambda.isQuotable=true (%3 : java.type:\"int\")java.type:\"int\" -> {\n@@ -174,1 +174,1 @@\n-                %1 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda (%2 : java.type:\"int\")java.type:\"int\" -> {\n+                %1 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda @lambda.isQuotable=true (%2 : java.type:\"int\")java.type:\"int\" -> {\n@@ -195,1 +195,1 @@\n-                %0 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda ()java.type:\"void\" -> {\n+                %0 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda @lambda.isQuotable=true ()java.type:\"void\" -> {\n@@ -208,1 +208,1 @@\n-                %0 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda (%1 : java.type:\"int\")java.type:\"int\" -> {\n+                %0 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda @lambda.isQuotable=true (%1 : java.type:\"int\")java.type:\"int\" -> {\n@@ -223,1 +223,1 @@\n-                %0 : java.type:\"QuotableSubtypeTest$QuotableIntFunction<int[]>\" = lambda (%1 : java.type:\"int\")java.type:\"int[]\" -> {\n+                %0 : java.type:\"QuotableSubtypeTest$QuotableIntFunction<int[]>\" = lambda @lambda.isQuotable=true (%1 : java.type:\"int\")java.type:\"int[]\" -> {\n@@ -244,1 +244,1 @@\n-                %1 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda (%2 : java.type:\"int\")java.type:\"int\" -> {\n+                %1 : java.type:\"QuotableSubtypeTest$QuotableIntUnaryOperator\" = lambda @lambda.isQuotable=true (%2 : java.type:\"int\")java.type:\"int\" -> {\n@@ -258,1 +258,1 @@\n-                %1 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda ()java.type:\"void\" -> {\n+                %1 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda @lambda.isQuotable=true ()java.type:\"void\" -> {\n@@ -272,1 +272,1 @@\n-                  %1 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda ()java.type:\"void\" -> {\n+                  %1 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda @lambda.isQuotable=true ()java.type:\"void\" -> {\n@@ -290,1 +290,1 @@\n-                  %1 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda ()java.type:\"void\" -> {\n+                  %1 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda @lambda.isQuotable=true ()java.type:\"void\" -> {\n@@ -302,2 +302,2 @@\n-                  %1 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda ()java.type:\"void\" -> {\n-                      %2 : java.type:\"java.lang.Runnable\" = lambda ()java.type:\"void\" -> {\n+                  %1 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda @lambda.isQuotable=true ()java.type:\"void\" -> {\n+                      %2 : java.type:\"java.lang.Runnable\" = lambda @lambda.isQuotable=false ()java.type:\"void\" -> {\n@@ -318,2 +318,2 @@\n-                  %1 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda ()java.type:\"void\" -> {\n-                      %2 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda ()java.type:\"void\" -> {\n+                  %1 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda @lambda.isQuotable=true ()java.type:\"void\" -> {\n+                      %2 : java.type:\"QuotableSubtypeTest$QuotableRunnable\" = lambda @lambda.isQuotable=true ()java.type:\"void\" -> {\n","filename":"test\/langtools\/tools\/javac\/reflect\/QuotableSubtypeTest.java","additions":20,"deletions":20,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -105,1 +105,1 @@\n-                %0 : java.type:\"java.util.function.IntUnaryOperator\" = lambda (%1 : java.type:\"int\")java.type:\"int\" -> {\n+                %0 : java.type:\"java.util.function.IntUnaryOperator\" = lambda @lambda.isQuotable=false (%1 : java.type:\"int\")java.type:\"int\" -> {\n@@ -179,1 +179,1 @@\n-                %0 : java.type:\"java.util.function.IntUnaryOperator\" = lambda (%1 : java.type:\"int\")java.type:\"int\" -> {\n+                %0 : java.type:\"java.util.function.IntUnaryOperator\" = lambda @lambda.isQuotable=true (%1 : java.type:\"int\")java.type:\"int\" -> {\n","filename":"test\/langtools\/tools\/javac\/reflect\/UnreachableTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}