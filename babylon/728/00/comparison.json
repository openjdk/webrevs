{"files":[{"patch":"@@ -60,1 +60,1 @@\n-        return Stream.of(Void.class).gather(() -> (_, _, downstream) -> traversePreOrder(downstream));\n+        return Stream.of(this).gather(() -> (_, e, downstream) -> traversePreOrder(e, downstream));\n@@ -63,2 +63,2 @@\n-    private boolean traversePreOrder(Gatherer.Downstream<? super CodeElement<?, ?>> v) {\n-        if (!v.push(this)) {\n+    private static boolean traversePreOrder(CodeElement<?, ?> e, Gatherer.Downstream<? super CodeElement<?, ?>> d) {\n+        if (!d.push(e)) {\n@@ -67,2 +67,2 @@\n-        for (C c : children()) {\n-            if (!((CodeElement<?, ?>) c).traversePreOrder(v)) {\n+        for (CodeElement<?, ?> c : e.children()) {\n+            if (!traversePreOrder(c, d)) {\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/CodeElement.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -97,12 +97,0 @@\n-        \/\/ Depth-first search, reporting elements in pre-order\n-        model.traverse(null, (acc, codeElement) -> {\n-            \/\/ Count the depth of the code element by\n-            \/\/ traversing up the tree from child to parent\n-            int depth = 0;\n-            CodeElement<?, ?> parent = codeElement;\n-            while ((parent = parent.parent()) != null) depth++;\n-            \/\/ Print out code element class\n-            System.out.println(\"  \".repeat(depth) + codeElement.getClass());\n-            return acc;\n-        });\n-\n@@ -129,12 +117,0 @@\n-        \/\/ Depth-first search, reporting elements in pre-order\n-        model.traverse(null, (acc, codeElement) -> {\n-            \/\/ Count the depth of the code element by\n-            \/\/ traversing up the tree from child to parent\n-            int depth = 0;\n-            CodeElement<?, ?> parent = codeElement;\n-            while ((parent = parent.parent()) != null) depth++;\n-            \/\/ Print out code element class\n-            System.out.println(\"  \".repeat(depth) + codeElement.getClass());\n-            return acc;\n-        });\n-\n@@ -537,0 +513,1 @@\n+        LinkedHashMap<Value, Node<Value>> graphs = new LinkedHashMap<>();\n@@ -538,1 +515,1 @@\n-        return b.traverse(new LinkedHashMap<>(), (graphs, codeElement) -> {\n+        b.elements().forEach(codeElement -> {\n@@ -563,1 +540,0 @@\n-            return graphs;\n@@ -565,0 +541,1 @@\n+        return graphs;\n@@ -572,0 +549,1 @@\n+        LinkedHashMap<Value, Node<Value>> graphs = new LinkedHashMap<>();\n@@ -573,1 +551,1 @@\n-        return b.traverse(new LinkedHashMap<>(), (graphs, codeElement) -> {\n+        b.elements().forEach(codeElement -> {\n@@ -610,1 +588,0 @@\n-            return graphs;\n@@ -612,0 +589,1 @@\n+        return graphs;\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/TestExpressionGraphs.java","additions":6,"deletions":28,"binary":false,"changes":34,"status":"modified"}]}