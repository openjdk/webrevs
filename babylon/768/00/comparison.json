{"files":[{"patch":"@@ -32,3 +32,3 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.BoundSchema;\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.BoundSchema;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/backends\/ffi\/cuda\/src\/main\/java\/hat\/backend\/ffi\/CudaBackend.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-import hat.ifacemapper.BoundSchema;\n+import optkl.ifacemapper.BoundSchema;\n","filename":"hat\/backends\/ffi\/cuda\/src\/main\/java\/hat\/backend\/ffi\/PTXHATKernelBuilder.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,3 +31,3 @@\n-import hat.annotations.Kernel;\n-import hat.annotations.Preformatted;\n-import hat.annotations.TypeDef;\n+import optkl.annotations.Kernel;\n+import optkl.annotations.Preformatted;\n+import optkl.annotations.TypeDef;\n@@ -40,6 +40,6 @@\n-import hat.ifacemapper.BoundSchema;\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.BufferState;\n-import hat.ifacemapper.BufferTracker;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.BoundSchema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.BufferState;\n+import optkl.ifacemapper.BufferTracker;\n+import optkl.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/backends\/ffi\/shared\/src\/main\/java\/hat\/backend\/ffi\/C99FFIBackend.java","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-import hat.ifacemapper.Buffer;\n+import optkl.ifacemapper.Buffer;\n@@ -32,3 +32,1 @@\n-import hat.ifacemapper.BoundSchema;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.SegmentMapper;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/backends\/ffi\/shared\/src\/main\/java\/hat\/backend\/ffi\/FFIBackend.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/backends\/ffi\/shared\/src\/main\/java\/hat\/backend\/ffi\/FFIBackendDriver.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-import hat.ifacemapper.Buffer;\n+import optkl.ifacemapper.Buffer;\n@@ -36,3 +36,3 @@\n-import hat.ifacemapper.BoundSchema;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.BoundSchema;\n+import optkl.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/backends\/jextracted\/shared\/src\/main\/java\/hat\/backend\/jextracted\/C99JExtractedBackend.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-import hat.ifacemapper.Buffer;\n+import optkl.ifacemapper.Buffer;\n@@ -32,3 +32,1 @@\n-import hat.ifacemapper.BoundSchema;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.SegmentMapper;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/backends\/jextracted\/shared\/src\/main\/java\/hat\/backend\/jextracted\/JExtractedBackend.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -30,5 +30,4 @@\n-import hat.ifacemapper.BufferAllocator;\n-import hat.ifacemapper.BufferTracker;\n-import hat.ifacemapper.BoundSchema;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.SegmentMapper;\n+import optkl.CommonCarrier;\n+import optkl.ifacemapper.BufferAllocator;\n+import optkl.ifacemapper.BufferTracker;\n+import optkl.ifacemapper.MappableIface;\n@@ -80,1 +79,1 @@\n-public class Accelerator implements BufferAllocator, BufferTracker, LookupCarrier {\n+public class Accelerator implements CommonCarrier,  BufferTracker {\n","filename":"hat\/core\/src\/main\/java\/hat\/Accelerator.java","additions":5,"deletions":6,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -28,2 +28,2 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/core\/src\/main\/java\/hat\/BufferTagger.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,2 +27,2 @@\n-import hat.ifacemapper.BufferAllocator;\n-import hat.ifacemapper.BufferTracker;\n+import optkl.ifacemapper.BufferAllocator;\n+import optkl.ifacemapper.BufferTracker;\n@@ -31,3 +31,1 @@\n-import hat.ifacemapper.BoundSchema;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.SegmentMapper;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/core\/src\/main\/java\/hat\/ComputeContext.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-import hat.ifacemapper.BufferAllocator;\n+import optkl.ifacemapper.BufferAllocator;\n","filename":"hat\/core\/src\/main\/java\/hat\/backend\/Backend.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,3 +32,0 @@\n-import hat.ifacemapper.BoundSchema;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.SegmentMapper;\n","filename":"hat\/core\/src\/main\/java\/hat\/backend\/BackendAdaptor.java","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -31,3 +31,0 @@\n-import hat.ifacemapper.BoundSchema;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.SegmentMapper;\n","filename":"hat\/core\/src\/main\/java\/hat\/backend\/java\/JavaBackend.java","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -30,4 +30,4 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.Schema;\n-import hat.ifacemapper.SchemaBuilder;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Schema;\n+import optkl.ifacemapper.SchemaBuilder;\n@@ -37,2 +37,0 @@\n-import java.lang.foreign.ValueLayout;\n-import java.nio.ByteOrder;\n@@ -242,15 +240,1 @@\n-    static String valueLayoutToSchemaString(ValueLayout valueLayout) {\n-        String descriptor = valueLayout.carrier().descriptorString();\n-        String schema = switch (descriptor) {\n-            case \"Z\" -> \"Z\";\n-            case \"B\" -> \"S\";\n-            case \"C\" -> \"U\";\n-            case \"S\" -> \"S\";\n-            case \"I\" -> \"S\";\n-            case \"F\" -> \"F\";\n-            case \"D\" -> \"D\";\n-            case \"J\" -> \"S\";\n-            default -> throw new IllegalStateException(\"Unexpected value: \" + descriptor);\n-        } + valueLayout.byteSize() * 8;\n-        return (valueLayout.order().equals(ByteOrder.LITTLE_ENDIAN)) ? schema.toLowerCase() : schema;\n-    }\n+\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/ArgArray.java","additions":5,"deletions":21,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -28,2 +28,2 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/BF16Array.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,2 +28,2 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/F16Array.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,4 +28,4 @@\n-import hat.annotations.ProvidesDimFor;\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.Schema;\n+import optkl.annotations.ProvidesDimFor;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/F32Array.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -28,2 +28,2 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/F32Array2D.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,3 +28,3 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/F32ArrayPadded.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -27,2 +27,2 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/ImageIfaceBuffer.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,3 +28,3 @@\n-import hat.annotations.Order;\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.Schema;\n+import optkl.annotations.Order;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/KernelBufferContext.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/S08x3RGBImage.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,4 +28,4 @@\n-import hat.annotations.ProvidesDimFor;\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.Schema;\n+import optkl.annotations.ProvidesDimFor;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/S32Array.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -28,3 +28,3 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/S32Array2D.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/S32RGBAImage.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/U16GreyImage.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,2 +30,2 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/core\/src\/main\/java\/hat\/callgraph\/ComputeCallGraph.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-import hat.ifacemapper.Buffer;\n+import optkl.ifacemapper.Buffer;\n","filename":"hat\/core\/src\/main\/java\/hat\/callgraph\/KernelCallGraph.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,3 +30,3 @@\n-import hat.ifacemapper.BoundSchema;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.BoundSchema;\n+import optkl.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/core\/src\/main\/java\/hat\/codebuilders\/C99HATKernelBuilder.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATPtrOp.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1,69 +0,0 @@\n-\/*\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-package hat.ifacemapper;\n-\n-import hat.buffer.ArgArray;\n-import optkl.codebuilders.CodeBuilder;\n-\n-import java.lang.foreign.MemoryLayout;\n-import java.lang.foreign.PaddingLayout;\n-import java.lang.foreign.SequenceLayout;\n-import java.lang.foreign.StructLayout;\n-import java.lang.foreign.UnionLayout;\n-import java.lang.foreign.ValueLayout;\n-\n-public class SchemaBuilder extends CodeBuilder<SchemaBuilder> {\n-    SchemaBuilder layout(MemoryLayout layout) {\n-        either(layout.name().isPresent(), (_) -> identifier(layout.name().get()), (_) -> questionMark()).colon();\n-        switch (layout) {\n-            case StructLayout structLayout ->\n-                brace(_ ->\n-                        commaSeparated(\n-                                structLayout.memberLayouts(),\n-                                this::layout\n-                        )\n-                );\n-            case UnionLayout unionLayout ->\n-                chevron(_ ->\n-                        barSeparated(\n-                                unionLayout.memberLayouts(),\n-                                this::layout\n-                        )\n-                );\n-            case ValueLayout valueLayout ->\n-                literal(ArgArray.valueLayoutToSchemaString(valueLayout));\n-            case PaddingLayout paddingLayout ->\n-                literal(\"x\").literal(paddingLayout.byteSize());\n-            case SequenceLayout sequenceLayout ->\n-                sbrace((_) -> literal(sequenceLayout.elementCount()).colon().layout(sequenceLayout.elementLayout()));\n-        }\n-        return this;\n-    }\n-\n-    public static String schema(Buffer buffer) {\n-            return new SchemaBuilder().literal(MappableIface.getMemorySegment(buffer).byteSize())\n-                    .hash().layout(MappableIface.getLayout(buffer)).toString();\n-    }\n-}\n","filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/SchemaBuilder.java","additions":0,"deletions":69,"binary":false,"changes":69,"status":"deleted"},{"patch":"@@ -33,1 +33,1 @@\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/core\/src\/main\/java\/hat\/optools\/OpTk.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/core\/src\/main\/java\/hat\/phases\/HATDialectifyArrayViewPhase.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/core\/src\/main\/java\/hat\/phases\/HATFinalDetectionPhase.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,1 +37,4 @@\n-import static hat.ifacemapper.MappableIface.*;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.WO;\n+\n","filename":"hat\/examples\/blackscholes\/src\/main\/java\/blackscholes\/Main.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -28,3 +28,3 @@\n-import hat.ifacemapper.Schema;\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/LayoutExample.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n-import hat.ifacemapper.Buffer;\n+import optkl.ifacemapper.Buffer;\n@@ -36,3 +36,3 @@\n-import hat.ifacemapper.MappableIface.RO;\n-import hat.ifacemapper.MappableIface.RW;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/LocalArray.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -34,2 +34,2 @@\n-import hat.ifacemapper.MappableIface.RO;\n-import hat.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/LocalIds.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -33,4 +33,4 @@\n-import hat.ifacemapper.BoundSchema;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.Schema;\n-import hat.ifacemapper.Buffer;\n+import optkl.ifacemapper.BoundSchema;\n+import optkl.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/Mesh.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -33,1 +33,3 @@\n-\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.WO;\n@@ -35,1 +37,1 @@\n-import static hat.ifacemapper.MappableIface.*;\n+\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/MinBufferTest.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n-import hat.annotations.Kernel;\n+import optkl.annotations.Kernel;\n@@ -33,2 +33,2 @@\n-import hat.annotations.Preformatted;\n-import hat.annotations.TypeDef;\n+import optkl.annotations.Preformatted;\n+import optkl.annotations.TypeDef;\n@@ -36,1 +36,1 @@\n-import hat.ifacemapper.Buffer;\n+import optkl.ifacemapper.Buffer;\n@@ -38,3 +38,3 @@\n-import hat.ifacemapper.MappableIface.RO;\n-import hat.ifacemapper.MappableIface.RW;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/PrefixSum.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/QuotedArrayArg.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/QuotedConstantArgs.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-import hat.ifacemapper.Buffer;\n+import optkl.ifacemapper.Buffer;\n@@ -35,3 +35,3 @@\n-import hat.ifacemapper.MappableIface.RO;\n-import hat.ifacemapper.MappableIface.RW;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/Reduction.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-import hat.ifacemapper.Buffer;\n+import optkl.ifacemapper.Buffer;\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/S08x3ImageTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,3 +30,3 @@\n-import hat.ifacemapper.BoundSchema;\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.BoundSchema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/S32ArrayTest.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n-import hat.ifacemapper.SchemaBuilder;\n+import optkl.ifacemapper.SchemaBuilder;\n","filename":"hat\/examples\/experiments\/src\/main\/java\/experiments\/spirv\/MatrixMultiply.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,2 +28,2 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/examples\/heal\/src\/main\/java\/heal\/Box.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -58,2 +58,0 @@\n-import static hat.ifacemapper.MappableIface.*;\n-\n@@ -64,0 +62,4 @@\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.WO;\n+\n","filename":"hat\/examples\/heal\/src\/main\/java\/heal\/ComputeHeal.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,2 +28,2 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/examples\/heal\/src\/main\/java\/heal\/XYRGBList.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,3 +32,3 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.MappableIface;\n+import optkl.ifacemapper.Schema;\n@@ -43,2 +43,2 @@\n-import static hat.ifacemapper.MappableIface.RO;\n-import static hat.ifacemapper.MappableIface.RW;\n+import static optkl.ifacemapper.MappableIface.RO;\n+import static optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/examples\/life\/src\/main\/java\/life\/Main.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/examples\/life\/src\/main\/java\/life\/Viewer.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -40,1 +40,3 @@\n-import static hat.ifacemapper.MappableIface.*;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/examples\/mandel\/src\/main\/java\/mandel\/Main.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/examples\/mandel\/src\/main\/java\/mandel\/Viewer.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -41,2 +41,1 @@\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.MappableIface.WO;\n+import optkl.ifacemapper.MappableIface.WO;\n@@ -52,2 +51,1 @@\n-import static hat.ifacemapper.MappableIface.RO;\n-import static hat.ifacemapper.MappableIface.RW;\n+import static optkl.ifacemapper.MappableIface.RO;\n","filename":"hat\/examples\/matmul\/src\/main\/java\/matmul\/Main.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-import hat.ifacemapper.Buffer;\n+import optkl.ifacemapper.Buffer;\n@@ -30,1 +30,1 @@\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/examples\/nbody\/src\/main\/java\/nbody\/Universe.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-import hat.ifacemapper.BufferState;\n+import optkl.ifacemapper.BufferState;\n@@ -39,1 +39,0 @@\n-import wrap.Wrap;\n@@ -48,2 +47,2 @@\n-import static hat.ifacemapper.MappableIface.RO;\n-import static hat.ifacemapper.MappableIface.RW;\n+import static optkl.ifacemapper.MappableIface.RO;\n+import static optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/examples\/nbody\/src\/main\/java\/nbody\/opencl\/OpenCLNBodyGLWindow.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -35,1 +35,0 @@\n-import static hat.ifacemapper.MappableIface.*;\n@@ -37,0 +36,1 @@\n+import optkl.ifacemapper.MappableIface;\n@@ -48,1 +48,1 @@\n-    public static void squareKernel(@RO  KernelContext kc, @RW S32Array s32Array) {\n+    public static void squareKernel(@MappableIface.RO KernelContext kc, @MappableIface.RW S32Array s32Array) {\n@@ -56,1 +56,1 @@\n-    public static void square(@RO ComputeContext cc, @RW S32Array s32Array) {\n+    public static void square(@MappableIface.RO ComputeContext cc, @MappableIface.RW S32Array s32Array) {\n","filename":"hat\/examples\/squares\/src\/main\/java\/squares\/Main.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-import static hat.ifacemapper.MappableIface.*;\n+import optkl.ifacemapper.MappableIface;\n@@ -38,0 +38,3 @@\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.WO;\n@@ -52,1 +55,1 @@\n-    public static void rgbToGrey(int id, @RO S08x3RGBImage rgbImage, @WO F32Array2D greyImage) {\n+    public static void rgbToGrey(int id, @MappableIface.RO S08x3RGBImage rgbImage, @MappableIface.WO F32Array2D greyImage) {\n@@ -74,1 +77,1 @@\n-    public static void rgbToGreyKernel(@RO KernelContext kc, @RO S08x3RGBImage rgbImage, @WO F32Array2D greyImage) {\n+    public static void rgbToGreyKernel(@MappableIface.RO KernelContext kc, @MappableIface.RO S08x3RGBImage rgbImage, @MappableIface.WO F32Array2D greyImage) {\n@@ -81,1 +84,1 @@\n-    public static void integralCol(int id, int width, @RO F32Array2D greyImage, @RW F32Array2D integral, @RW F32Array2D integralSq) {\n+    public static void integralCol(int id, int width, @MappableIface.RO F32Array2D greyImage, @MappableIface.RW F32Array2D integral, @RW F32Array2D integralSq) {\n@@ -89,1 +92,1 @@\n-    public static void integralColKernel(@RO KernelContext kc, @RO F32Array2D greyImage, @RW F32Array2D integral, @RW F32Array2D integralSq) {\n+    public static void integralColKernel(@MappableIface.RO KernelContext kc, @MappableIface.RO F32Array2D greyImage, @MappableIface.RW F32Array2D integral, @RW F32Array2D integralSq) {\n@@ -113,1 +116,1 @@\n-    public static void integralRow(int id, @RW F32Array2D integral, @RW F32Array2D integralSq) {\n+    public static void integralRow(int id, @MappableIface.RW F32Array2D integral, @MappableIface.RW F32Array2D integralSq) {\n@@ -119,1 +122,1 @@\n-    public static void integralRowKernel(@RO KernelContext kc, @RW F32Array2D integral, @RW F32Array2D integralSq) {\n+    public static void integralRowKernel(@MappableIface.RO KernelContext kc, @MappableIface.RW F32Array2D integral, @MappableIface.RW F32Array2D integralSq) {\n@@ -169,1 +172,1 @@\n-    static float gradient(@RO F32Array2D integralOrIntegralSqImage, int x, int y, int w, int h) {\n+    static float gradient(@MappableIface.RO F32Array2D integralOrIntegralSqImage, int x, int y, int w, int h) {\n@@ -187,3 +190,3 @@\n-            @RO F32Array2D integral,\n-            @RO Cascade.Stage stage,\n-            @RO Cascade cascade\n+            @MappableIface.RO F32Array2D integral,\n+            @MappableIface.RO Cascade.Stage stage,\n+            @MappableIface.RO Cascade cascade\n@@ -234,6 +237,6 @@\n-    public static void findFeaturesKernel(@RO KernelContext kc,\n-                                          @RO Cascade cascade,\n-                                          @RO F32Array2D integral,\n-                                          @RO F32Array2D integralSq,\n-                                          @RO ScaleTable scaleTable,\n-                                          @RW ResultTable resultTable\n+    public static void findFeaturesKernel(@MappableIface.RO KernelContext kc,\n+                                          @MappableIface.RO Cascade cascade,\n+                                          @MappableIface.RO F32Array2D integral,\n+                                          @MappableIface.RO F32Array2D integralSq,\n+                                          @MappableIface.RO ScaleTable scaleTable,\n+                                          @MappableIface.RW ResultTable resultTable\n@@ -310,1 +313,1 @@\n-    static public void compute(@RO final ComputeContext cc, @RO Cascade cascade, @RO S08x3RGBImage s08X3RGBImage, @RW ResultTable resultTable, @RO ScaleTable scaleTable) {\n+    static public void compute(@MappableIface.RO final ComputeContext cc, @MappableIface.RO Cascade cascade, @MappableIface.RO S08x3RGBImage s08X3RGBImage, @RW ResultTable resultTable, @MappableIface.RO ScaleTable scaleTable) {\n","filename":"hat\/examples\/violajones\/src\/main\/java\/violajones\/ViolaJonesCoreCompute.java","additions":21,"deletions":18,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -29,2 +29,2 @@\n-import hat.ifacemapper.Schema;\n-import hat.ifacemapper.Buffer;\n+import optkl.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n","filename":"hat\/examples\/violajones\/src\/main\/java\/violajones\/ifaces\/Cascade.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,2 +28,2 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/examples\/violajones\/src\/main\/java\/violajones\/ifaces\/ResultTable.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -29,2 +29,2 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/examples\/violajones\/src\/main\/java\/violajones\/ifaces\/ScaleTable.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+    <orderEntry type=\"module\" module-name=\"optkl\" \/>\n","filename":"hat\/intellij\/wrap_opencl.iml","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -0,0 +1,32 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package optkl;\n+\n+import optkl.ifacemapper.BufferAllocator;\n+\n+import java.lang.foreign.Arena;\n+\n+public interface CommonCarrier extends BufferAllocator,LookupCarrier {\n+}\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/CommonCarrier.java","additions":32,"deletions":0,"binary":false,"changes":32,"status":"added"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.annotations;\n+package optkl.annotations;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/annotations\/After.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/annotations\/After.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.annotations;\n+package optkl.annotations;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/annotations\/Align.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/annotations\/Align.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.annotations;\n+package optkl.annotations;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/annotations\/Kernel.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/annotations\/Kernel.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.annotations;\n+package optkl.annotations;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/annotations\/Order.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/annotations\/Order.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.annotations;\n+package optkl.annotations;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/annotations\/Pad.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/annotations\/Pad.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.annotations;\n+package optkl.annotations;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/annotations\/Preformatted.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/annotations\/Preformatted.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.annotations;\n+package optkl.annotations;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/annotations\/ProvidesDimFor.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/annotations\/ProvidesDimFor.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.annotations;\n+package optkl.annotations;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/annotations\/TypeDef.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/annotations\/TypeDef.java","status":"renamed"},{"patch":"@@ -26,1 +26,1 @@\n-package hat.ifacemapper;\n+package optkl.ifacemapper;\n@@ -28,1 +28,1 @@\n-import hat.ifacemapper.accessor.Accessors;\n+import optkl.ifacemapper.accessor.Accessors;\n@@ -97,1 +97,1 @@\n-                \"hatData=\" + ((boundSchema==null)?\"null\":boundSchema) + \", \" +\n+                \"data=\" + ((boundSchema==null)?\"null\":boundSchema) + \", \" +\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/AbstractSegmentMapper.java","additions":3,"deletions":3,"binary":false,"changes":6,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/AbstractSegmentMapper.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.ifacemapper;\n+package optkl.ifacemapper;\n@@ -28,1 +28,0 @@\n-import java.lang.foreign.Arena;\n@@ -36,1 +35,1 @@\n-import static hat.ifacemapper.BoundSchema.BoundSchemaNode.getBoundGroupLayout;\n+import static optkl.ifacemapper.BoundSchema.BoundSchemaNode.getBoundGroupLayout;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/BoundSchema.java","additions":2,"deletions":3,"binary":false,"changes":5,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/BoundSchema.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.ifacemapper;\n+package optkl.ifacemapper;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/Buffer.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/Buffer.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.ifacemapper;\n+package optkl.ifacemapper;\n@@ -29,2 +29,0 @@\n-import java.lang.foreign.Arena;\n-\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/BufferAllocator.java","additions":1,"deletions":3,"binary":false,"changes":4,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/BufferAllocator.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.ifacemapper;\n+package optkl.ifacemapper;\n@@ -44,3 +44,3 @@\n-      \/\/ hat iface buffer bitz\n-    \/\/ hat iface bffa   bitz\n-    \/\/ 4a7 1face bffa   b175\n+      \/\/ iface buffer bitz\n+      \/\/ iface bffa   bitz\n+      \/\/ 4a7 1face bffa   b175\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/BufferState.java","additions":4,"deletions":4,"binary":false,"changes":8,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/BufferState.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.ifacemapper;\n+package optkl.ifacemapper;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/BufferTracker.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/BufferTracker.java","status":"renamed"},{"patch":"@@ -26,1 +26,1 @@\n-package hat.ifacemapper;\n+package optkl.ifacemapper;\n@@ -28,3 +28,3 @@\n-import hat.ifacemapper.accessor.AccessorInfo;\n-import hat.ifacemapper.accessor.ArrayInfo;\n-import hat.ifacemapper.accessor.ScalarInfo;\n+import optkl.ifacemapper.accessor.AccessorInfo;\n+import optkl.ifacemapper.accessor.ArrayInfo;\n+import optkl.ifacemapper.accessor.ScalarInfo;\n@@ -51,5 +51,5 @@\n-import static hat.ifacemapper.MapperUtil.SECRET_BOUND_SCHEMA_METHOD_NAME;\n-import static hat.ifacemapper.MapperUtil.SECRET_LAYOUT_METHOD_NAME;\n-import static hat.ifacemapper.MapperUtil.SECRET_OFFSET_METHOD_NAME;\n-import static hat.ifacemapper.MapperUtil.SECRET_SEGMENT_METHOD_NAME;\n-import static hat.ifacemapper.MapperUtil.desc;\n+import static optkl.ifacemapper.MapperUtil.SECRET_BOUND_SCHEMA_METHOD_NAME;\n+import static optkl.ifacemapper.MapperUtil.SECRET_LAYOUT_METHOD_NAME;\n+import static optkl.ifacemapper.MapperUtil.SECRET_OFFSET_METHOD_NAME;\n+import static optkl.ifacemapper.MapperUtil.SECRET_SEGMENT_METHOD_NAME;\n+import static optkl.ifacemapper.MapperUtil.desc;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/ByteCodeGenerator.java","additions":9,"deletions":9,"binary":false,"changes":18,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/ByteCodeGenerator.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.ifacemapper;\n+package optkl.ifacemapper;\n@@ -35,4 +35,4 @@\n-import static hat.ifacemapper.MapperUtil.SECRET_BOUND_SCHEMA_METHOD_NAME;\n-import static hat.ifacemapper.MapperUtil.SECRET_LAYOUT_METHOD_NAME;\n-import static hat.ifacemapper.MapperUtil.SECRET_OFFSET_METHOD_NAME;\n-import static hat.ifacemapper.MapperUtil.SECRET_SEGMENT_METHOD_NAME;\n+import static optkl.ifacemapper.MapperUtil.SECRET_BOUND_SCHEMA_METHOD_NAME;\n+import static optkl.ifacemapper.MapperUtil.SECRET_LAYOUT_METHOD_NAME;\n+import static optkl.ifacemapper.MapperUtil.SECRET_OFFSET_METHOD_NAME;\n+import static optkl.ifacemapper.MapperUtil.SECRET_SEGMENT_METHOD_NAME;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/MappableIface.java","additions":5,"deletions":5,"binary":false,"changes":10,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/MappableIface.java","status":"renamed"},{"patch":"@@ -26,1 +26,1 @@\n-package hat.ifacemapper;\n+package optkl.ifacemapper;\n@@ -28,1 +28,1 @@\n-import hat.ifacemapper.accessor.AccessorInfo;\n+import optkl.ifacemapper.accessor.AccessorInfo;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/MapperCache.java","additions":2,"deletions":2,"binary":false,"changes":4,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/MapperCache.java","status":"renamed"},{"patch":"@@ -26,1 +26,1 @@\n-package hat.ifacemapper;\n+package optkl.ifacemapper;\n@@ -29,2 +29,2 @@\n-import hat.ifacemapper.accessor.AccessorInfo;\n-import hat.ifacemapper.accessor.Accessors;\n+import optkl.ifacemapper.accessor.AccessorInfo;\n+import optkl.ifacemapper.accessor.Accessors;\n@@ -63,1 +63,1 @@\n-            Boolean.getBoolean(\"hat.ifacemapper.debug\");\n+            Boolean.getBoolean(\"ifacemapper.debug\");\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/MapperUtil.java","additions":4,"deletions":4,"binary":false,"changes":8,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/MapperUtil.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.ifacemapper;\n+package optkl.ifacemapper;\n@@ -27,5 +27,8 @@\n-import hat.Accelerator;\n-import hat.annotations.Order;\n-import hat.annotations.ProvidesDimFor;\n-import hat.ifacemapper.accessor.AccessorInfo;\n-import hat.ifacemapper.accessor.ValueType;\n+\n+import optkl.ArenaCarrier;\n+import optkl.CommonCarrier;\n+import optkl.LookupCarrier;\n+import optkl.annotations.Order;\n+import optkl.annotations.ProvidesDimFor;\n+import optkl.ifacemapper.accessor.AccessorInfo;\n+import optkl.ifacemapper.accessor.ValueType;\n@@ -43,1 +46,0 @@\n-import java.util.concurrent.ThreadLocalRandom;\n@@ -70,1 +72,1 @@\n-    public T allocate(Accelerator accelerator, int... boundLengths) {\n+    public T allocate(CommonCarrier accelerator, int... boundLengths) {\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/Schema.java","additions":10,"deletions":8,"binary":false,"changes":18,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/Schema.java","status":"renamed"},{"patch":"@@ -0,0 +1,85 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package optkl.ifacemapper;\n+\n+import optkl.codebuilders.CodeBuilder;\n+\n+import java.lang.foreign.MemoryLayout;\n+import java.lang.foreign.PaddingLayout;\n+import java.lang.foreign.SequenceLayout;\n+import java.lang.foreign.StructLayout;\n+import java.lang.foreign.UnionLayout;\n+import java.lang.foreign.ValueLayout;\n+import java.nio.ByteOrder;\n+\n+public class SchemaBuilder extends CodeBuilder<SchemaBuilder> {\n+    static String valueLayoutToSchemaString(ValueLayout valueLayout) {\n+        String descriptor = valueLayout.carrier().descriptorString();\n+        String schema = switch (descriptor) {\n+            case \"Z\" -> \"Z\";\n+            case \"B\" -> \"S\";\n+            case \"C\" -> \"U\";\n+            case \"S\" -> \"S\";\n+            case \"I\" -> \"S\";\n+            case \"F\" -> \"F\";\n+            case \"D\" -> \"D\";\n+            case \"J\" -> \"S\";\n+            default -> throw new IllegalStateException(\"Unexpected value: \" + descriptor);\n+        } + valueLayout.byteSize() * 8;\n+        return (valueLayout.order().equals(ByteOrder.LITTLE_ENDIAN)) ? schema.toLowerCase() : schema;\n+    }\n+\n+    SchemaBuilder layout(MemoryLayout layout) {\n+        either(layout.name().isPresent(), (_) -> identifier(layout.name().get()), (_) -> questionMark()).colon();\n+        switch (layout) {\n+            case StructLayout structLayout ->\n+                brace(_ ->\n+                        commaSeparated(\n+                                structLayout.memberLayouts(),\n+                                this::layout\n+                        )\n+                );\n+            case UnionLayout unionLayout ->\n+                chevron(_ ->\n+                        barSeparated(\n+                                unionLayout.memberLayouts(),\n+                                this::layout\n+                        )\n+                );\n+            case ValueLayout valueLayout ->\n+                literal(valueLayoutToSchemaString(valueLayout));\n+            case PaddingLayout paddingLayout ->\n+                literal(\"x\").literal(paddingLayout.byteSize());\n+            case SequenceLayout sequenceLayout ->\n+                sbrace((_) -> literal(sequenceLayout.elementCount()).colon().layout(sequenceLayout.elementLayout()));\n+        }\n+        return this;\n+    }\n+\n+    public static String schema(Buffer buffer) {\n+            return new SchemaBuilder().literal(MappableIface.getMemorySegment(buffer).byteSize())\n+                    .hash().layout(MappableIface.getLayout(buffer)).toString();\n+    }\n+}\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/SchemaBuilder.java","additions":85,"deletions":0,"binary":false,"changes":85,"status":"added"},{"patch":"@@ -26,1 +26,1 @@\n-package hat.ifacemapper;\n+package optkl.ifacemapper;\n@@ -29,4 +29,4 @@\n-import hat.ifacemapper.accessor.AccessorInfo;\n-import hat.ifacemapper.accessor.Accessors;\n-import hat.ifacemapper.accessor.ValueType;\n-import hat.ifacemapper.component.Util;\n+import optkl.ifacemapper.accessor.AccessorInfo;\n+import optkl.ifacemapper.accessor.Accessors;\n+import optkl.ifacemapper.accessor.ValueType;\n+import optkl.ifacemapper.component.Util;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/SegmentInterfaceMapper.java","additions":5,"deletions":5,"binary":false,"changes":10,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/SegmentInterfaceMapper.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.ifacemapper;\n+package optkl.ifacemapper;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/SegmentMapper.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/SegmentMapper.java","status":"renamed"},{"patch":"@@ -26,1 +26,1 @@\n-package hat.ifacemapper.accessor;\n+package optkl.ifacemapper.accessor;\n@@ -28,1 +28,1 @@\n-import hat.ifacemapper.MapperUtil;\n+import optkl.ifacemapper.MapperUtil;\n@@ -35,7 +35,7 @@\n-import static hat.ifacemapper.accessor.AccessorInfo.AccessorType.GETTER;\n-import static hat.ifacemapper.accessor.AccessorInfo.AccessorType.GETTER_AND_SETTER;\n-import static hat.ifacemapper.accessor.AccessorInfo.AccessorType.SETTER;\n-import static hat.ifacemapper.accessor.Cardinality.ARRAY;\n-import static hat.ifacemapper.accessor.Cardinality.SCALAR;\n-import static hat.ifacemapper.accessor.ValueType.INTERFACE;\n-import static hat.ifacemapper.accessor.ValueType.VALUE;\n+import static optkl.ifacemapper.accessor.AccessorInfo.AccessorType.GETTER;\n+import static optkl.ifacemapper.accessor.AccessorInfo.AccessorType.GETTER_AND_SETTER;\n+import static optkl.ifacemapper.accessor.AccessorInfo.AccessorType.SETTER;\n+import static optkl.ifacemapper.accessor.Cardinality.ARRAY;\n+import static optkl.ifacemapper.accessor.Cardinality.SCALAR;\n+import static optkl.ifacemapper.accessor.ValueType.INTERFACE;\n+import static optkl.ifacemapper.accessor.ValueType.VALUE;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/accessor\/AccessorInfo.java","additions":9,"deletions":9,"binary":false,"changes":18,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/accessor\/AccessorInfo.java","status":"renamed"},{"patch":"@@ -26,1 +26,1 @@\n-package hat.ifacemapper.accessor;\n+package optkl.ifacemapper.accessor;\n@@ -28,1 +28,1 @@\n-import hat.ifacemapper.MapperUtil;\n+import optkl.ifacemapper.MapperUtil;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/accessor\/Accessors.java","additions":2,"deletions":2,"binary":false,"changes":4,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/accessor\/Accessors.java","status":"renamed"},{"patch":"@@ -26,1 +26,1 @@\n-package hat.ifacemapper.accessor;\n+package optkl.ifacemapper.accessor;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/accessor\/ArrayInfo.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/accessor\/ArrayInfo.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.ifacemapper.accessor;\n+package optkl.ifacemapper.accessor;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/accessor\/Cardinality.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/accessor\/Cardinality.java","status":"renamed"},{"patch":"@@ -26,1 +26,1 @@\n-package hat.ifacemapper.accessor;\n+package optkl.ifacemapper.accessor;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/accessor\/LayoutInfo.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/accessor\/LayoutInfo.java","status":"renamed"},{"patch":"@@ -26,1 +26,1 @@\n-package hat.ifacemapper.accessor;\n+package optkl.ifacemapper.accessor;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/accessor\/ScalarInfo.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/accessor\/ScalarInfo.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.ifacemapper.accessor;\n+package optkl.ifacemapper.accessor;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/accessor\/ValueType.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/accessor\/ValueType.java","status":"renamed"},{"patch":"@@ -30,1 +30,1 @@\n-package hat.ifacemapper.component;\n+package optkl.ifacemapper.component;\n","filename":"hat\/optkl\/src\/main\/java\/optkl\/ifacemapper\/component\/Util.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/component\/Util.java","status":"renamed"},{"patch":"@@ -35,3 +35,2 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.MappableIface.*;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.Schema;\n@@ -41,0 +40,3 @@\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.WO;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestArrayView.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -34,2 +34,2 @@\n-import hat.ifacemapper.MappableIface.RO;\n-import hat.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestArrays.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -39,1 +39,0 @@\n-import hat.test.exceptions.HATExpectedFailureException;\n@@ -42,0 +41,3 @@\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.WO;\n@@ -46,2 +48,0 @@\n-import static hat.ifacemapper.MappableIface.*;\n-\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestBFloat16Type.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -33,2 +33,2 @@\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface;\n+import optkl.ifacemapper.MappableIface.RO;\n@@ -42,1 +42,1 @@\n-import static hat.ifacemapper.MappableIface.WO;\n+import static optkl.ifacemapper.MappableIface.WO;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestBlackscholes.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -36,0 +36,3 @@\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.WO;\n@@ -39,2 +42,0 @@\n-import static hat.ifacemapper.MappableIface.*;\n-\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestConstants.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -36,2 +36,2 @@\n-import hat.ifacemapper.MappableIface.RO;\n-import hat.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestF16Type.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -36,2 +36,2 @@\n-import hat.ifacemapper.MappableIface.RO;\n-import hat.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestFloat2.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestLocal.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -34,2 +34,2 @@\n-import hat.ifacemapper.MappableIface.RO;\n-import hat.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestMandel.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -49,2 +49,2 @@\n-import static hat.ifacemapper.MappableIface.RO;\n-import static hat.ifacemapper.MappableIface.RW;\n+import static optkl.ifacemapper.MappableIface.RO;\n+import static optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestMatMul.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,2 +32,2 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.Schema;\n@@ -43,2 +43,2 @@\n-import static hat.ifacemapper.MappableIface.RO;\n-import static hat.ifacemapper.MappableIface.RW;\n+import static optkl.ifacemapper.MappableIface.RO;\n+import static optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestNbody.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-import hat.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RO;\n@@ -40,1 +40,1 @@\n-import static hat.ifacemapper.MappableIface.RW;\n+import static optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestParenthesis.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-import hat.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RO;\n@@ -42,1 +42,1 @@\n-import static hat.ifacemapper.MappableIface.RW;\n+import static optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestPrivate.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestReductions.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -34,2 +34,2 @@\n-import hat.ifacemapper.MappableIface.RO;\n-import hat.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestVectorArrayView.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -36,2 +36,2 @@\n-import hat.ifacemapper.MappableIface.RO;\n-import hat.ifacemapper.MappableIface.RW;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.RW;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestVectorTypes.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -31,4 +31,4 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.MappableIface;\n-import hat.ifacemapper.MappableIface.RO;\n-import hat.ifacemapper.Schema;\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.MappableIface;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.Schema;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestWriteOnly.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-import hat.ifacemapper.MappableIface;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/tools\/src\/main\/java\/hat\/tools\/text\/TestJavaHATCodeBuilder.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,3 +27,1 @@\n-import hat.ifacemapper.Buffer;\n-import hat.ifacemapper.BufferState;\n-import hat.ifacemapper.MappableIface;\n+\n@@ -31,0 +29,3 @@\n+import optkl.ifacemapper.Buffer;\n+import optkl.ifacemapper.BufferState;\n+import optkl.ifacemapper.MappableIface;\n","filename":"hat\/wraps\/opencl\/src\/main\/java\/wrap\/opencl\/CLPlatform.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"}]}