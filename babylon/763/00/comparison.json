{"files":[{"patch":"@@ -63,0 +63,1 @@\n+import java.util.concurrent.ThreadLocalRandom;\n@@ -179,1 +180,1 @@\n-                            emitText(padding.toC99());\n+                            u08Type().space().identifierWithRandomSuffix(\"pad$\",5).sbrace(_->intValue((int)(padding.len)));\/\/; emitText(toC99(padding));\n@@ -190,0 +191,14 @@\n+    \/**\n+     * Generates a suffix from a set of n-random characters from a set of legal characters in C99.\n+     *\/\n+    final  T identifierWithRandomSuffix(String prefix, final int len) {\n+        StringBuilder sb = new StringBuilder();\n+        final String LEGAL_CHARS = \"_$ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n+        ThreadLocalRandom.current() \/\/\n+                .ints(len, 0, LEGAL_CHARS.length()) \/\/\n+                .mapToObj(LEGAL_CHARS::charAt) \/\/\n+                .forEach(sb::append);\n+        identifier(prefix+sb.toString());\n+        return self();\n+    }\n+\n","filename":"hat\/core\/src\/main\/java\/hat\/codebuilders\/C99HATKernelBuilder.java","additions":16,"deletions":1,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -52,1 +52,1 @@\n-            long len;\n+            final public long len;\n@@ -58,27 +58,0 @@\n-\n-            \/**\n-             * Generates a set of n-random characters from a set of legal characters in C99.\n-             * @param numCharsToBuild\n-             * @return {@link String}\n-             *\/\n-            private String generateRandomString(final int numCharsToBuild) {\n-                StringBuilder sb = new StringBuilder();\n-                String LEGAL_CHARS = \"_$ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n-                ThreadLocalRandom.current() \/\/\n-                        .ints(numCharsToBuild, 0, LEGAL_CHARS.length()) \/\/\n-                        .mapToObj(LEGAL_CHARS::charAt) \/\/\n-                        .forEach(sb::append);\n-                return sb.toString();\n-            }\n-\n-            \/**\n-             * Returns a string in C99 to represent the padding. It generates\n-             * the <code>pad$<\/code> name with a set of 5 characters in order to avoid\n-             * collision of names in the same iFace schema.\n-             * @return {@link String}\n-             *\/\n-            public String toC99() {\n-                String randomPostfix = generateRandomString(5);\n-                return \"char pad$\" + randomPostfix + \"[\" + len + \"]\";\n-            }\n-\n","filename":"hat\/core\/src\/main\/java\/hat\/ifacemapper\/Schema.java","additions":1,"deletions":28,"binary":false,"changes":29,"status":"modified"}]}