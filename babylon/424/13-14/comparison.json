{"files":[{"patch":"@@ -4461,1 +4461,1 @@\n-                if (inputValue.type() instanceof VarType _) {\n+                if (inputValue.type() instanceof VarType) {\n@@ -4469,2 +4469,2 @@\n-                \/\/ Map the entry block of the lambda's ancestor body to the quoted block\n-                \/\/ We are copying lop in the context of the quoted block, the block mapping\n+                \/\/ Map the entry block of the op's ancestor body to the quoted block\n+                \/\/ We are copying op in the context of the quoted block, the block mapping\n@@ -4482,0 +4482,2 @@\n+    public record OpAndValues(Op op, SequencedSet<Value> operandsAndCaptures) { }\n+\n@@ -4505,2 +4507,2 @@\n-            if (o instanceof VarOp varOp) {\n-                if (varOp.initOperand() instanceof Block.Parameter p) {\n+            switch (o) {\n+                case VarOp varOp when varOp.initOperand() instanceof Block.Parameter p -> {\n@@ -4512,1 +4514,2 @@\n-                } else if (varOp.initOperand() instanceof Op.Result opr) {\n+                }\n+                case VarOp varOp when varOp.initOperand() instanceof Op.Result opr -> {\n@@ -4521,5 +4524,6 @@\n-            } else if (o instanceof ConstantOp cop) {\n-                if (cop.result().uses().size() != 1) {\n-                    throw new IllegalArgumentException(\"Constant expected to have one use\");\n-                } else if (!(cop.result().uses().iterator().next().op() instanceof VarOp)) {\n-                    throw new IllegalArgumentException(\"Result of a ConstantOp expected to be used by a VarOp\");\n+                case ConstantOp cop -> {\n+                    if (cop.result().uses().size() != 1) {\n+                        throw new IllegalArgumentException(\"Constant expected to have one use\");\n+                    } else if (!(cop.result().uses().iterator().next().op() instanceof VarOp)) {\n+                        throw new IllegalArgumentException(\"Result of a ConstantOp expected to be used by a VarOp\");\n+                    }\n@@ -4527,2 +4531,2 @@\n-            } else {\n-                throw new IllegalArgumentException(\"Operation not a VarOp nor a ConstantOp, \" + o);\n+                case null, default ->\n+                        throw new IllegalArgumentException(\"Operation not a VarOp nor a ConstantOp, \" + o);\n@@ -4542,2 +4546,0 @@\n-\n-    public record OpAndValues (Op op, SequencedSet<Value> operandsAndCaptures) { }\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/op\/CoreOp.java","additions":17,"deletions":15,"binary":false,"changes":32,"status":"modified"}]}