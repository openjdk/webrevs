{"files":[{"patch":"@@ -53,1 +53,1 @@\n-          \/\/  for (int x = -2; x < 6; x += 2) {\n+            for (int x = -2; x < 6; x += 2) {\n@@ -59,1 +59,1 @@\n-           \/\/ }\n+            }\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/Main.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -34,2 +34,3 @@\n-import view.f32.F32Triangle2D;\n-import view.f32.F32Vec2;\n+import view.f32.F32;\n+import view.f32.F32x2Triangle;\n+import view.f32.pool.F32x2TrianglePool;\n@@ -61,2 +62,2 @@\n-        for (int t = 0; t < F32Triangle2D.f32Triangle2DPool.count; t++) {\n-            col = F32Triangle2D.rgb(displayMode.filled,x, y, F32Triangle2D.f32Triangle2DPool.idx(t),col);\n+        for (int t = 0; t < ((F32x2TrianglePool)ViewFrame.f32.f32x2TriangleFactory()).count; t++) {\n+            col = F32.rgb(displayMode.filled,x, y, ((F32x2TrianglePool)ViewFrame.f32.f32x2TriangleFactory()).entry(t),col);\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/RasterizingRenderer.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -28,3 +28,6 @@\n-import view.f32.F32Matrix4x4;\n-import view.f32.F32Triangle3D;\n-import view.f32.F32Vec3;\n+import view.f32.F32x2;\n+import view.f32.F32x2Triangle;\n+import view.f32.F32x4x4;\n+import view.f32.F32;\n+import view.f32.F32x3Triangle;\n+import view.f32.F32x3;\n@@ -33,0 +36,5 @@\n+import view.f32.pool.F32x2Pool;\n+import view.f32.pool.F32x2TrianglePool;\n+import view.f32.pool.F32x3Pool;\n+import view.f32.pool.F32x3TrianglePool;\n+import view.f32.pool.F32x4x4Pool;\n@@ -66,3 +74,3 @@\n-    F32Vec3 cameraVec3;\n-    F32Matrix4x4 projF32Mat4x4;\n-    F32Vec3 moveAwayVec3;\n+    F32x3 cameraVec3;\n+    F32x4x4 projF32Mat4x4;\n+    F32x3 moveAwayVec3;\n@@ -71,0 +79,5 @@\n+    record poolF32(F32x4x4.Factory f32x4x4Factory,\n+                   F32x3.Factory f32x3Factory,\n+                   F32x2.Factory f32x2Factory,\n+                   F32x3Triangle.Factory f32x3TriangleFactory,\n+                   F32x2Triangle.Factory f32x2TriangleFactory\n@@ -72,0 +85,9 @@\n+    ) implements F32 {\n+    }\n+    public static F32 f32 = new poolF32(\n+             new F32x4x4Pool(100),\n+            new F32x3Pool(90000),\n+            new F32x2Pool(12000),\n+            new F32x3TrianglePool(12800),\n+            new F32x2TrianglePool(12800)\n+ );\n@@ -114,5 +136,5 @@\n-        cameraVec3 = F32Vec3.f32Vec3Pool.of(originX, originY, originZ);\n-        var projF32Mat4x4_1 = F32Matrix4x4.projection(renderer.width(), renderer.height(), nearZ, farZ, fieldOfViewDegrees);\n-        var projF32Mat4x4_2 = F32Matrix4x4.mulMat4(projF32Mat4x4_1, F32Matrix4x4.scale(quarterHeight));\n-        projF32Mat4x4 = F32Matrix4x4.mulMat4(projF32Mat4x4_2, F32Matrix4x4.transformation(halfHeight));\n-        moveAwayVec3 = F32Vec3.f32Vec3Pool.of(originX, originY, moveAwayZ);\n+        cameraVec3 = ViewFrame.f32.f32x3Factory().of(originX, originY, originZ);\n+        var projF32Mat4x4_1 = f32.projection(renderer.width(), renderer.height(), nearZ, farZ, fieldOfViewDegrees);\n+        var projF32Mat4x4_2 = f32.mul(projF32Mat4x4_1, f32.scale(quarterHeight));\n+        projF32Mat4x4 = f32.mul(projF32Mat4x4_2, f32.transformation(halfHeight));\n+        moveAwayVec3 = ViewFrame.f32.f32x3Factory().of(originX, originY, moveAwayZ);\n@@ -137,1 +159,1 @@\n-        var xyzRot4x4 = F32Matrix4x4.rotation(theta * 2, theta \/ 2, theta);\n+        var xyzRot4x4 = f32.rot(theta * 2, theta \/ 2, theta);\n@@ -142,2 +164,2 @@\n-        for (int tidx = 0; tidx < F32Triangle3D.f32Triangle3DPool.count; tidx++) {\n-            var t = (F32Triangle3D) F32Triangle3D.f32Triangle3DPool.idx(tidx);\n+        for (int tidx = 0; tidx < ((F32x3TrianglePool)ViewFrame.f32.f32x3TriangleFactory()).count; tidx++) {\n+            var t = (F32x3Triangle) ((F32x3TrianglePool)ViewFrame.f32.f32x3TriangleFactory()).entry(tidx);\n@@ -146,1 +168,1 @@\n-            t = F32Triangle3D.addVec3(F32Triangle3D.mulMat4(t, xyzRot4x4), moveAwayVec3);\n+            t = f32.add(f32.mul(t, xyzRot4x4), moveAwayVec3);\n@@ -161,1 +183,1 @@\n-                F32Vec3 cameraDeltaVec3 = F32Vec3.subVec3(F32Triangle3D.getCentre(t), cameraVec3);\/\/ clearly our default camera is 0,0,0\n+                F32x3 cameraDeltaVec3 = f32.sub(f32.centre(t), cameraVec3);\/\/ clearly our default camera is 0,0,0\n@@ -166,1 +188,1 @@\n-                howVisible = F32Vec3.dotProd(cameraDeltaVec3, F32Triangle3D.normal(t));\n+                howVisible = f32.dotProd(cameraDeltaVec3, f32.normal(t));\n@@ -178,1 +200,1 @@\n-                t = F32Triangle3D.mulMat4(t, projF32Mat4x4);\/\/  projection matrix also scales to screen and translate half a screen\n+                t = f32.mul(t, projF32Mat4x4);\/\/  projection matrix also scales to screen and translate half a screen\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/ViewFrame.java","additions":40,"deletions":18,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -0,0 +1,362 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32;\n+\n+import view.f32.pool.F32x3TrianglePool;\n+\n+public interface F32 {\n+    F32x4x4.Factory f32x4x4Factory();\n+    F32x3.Factory f32x3Factory();\n+    F32x2.Factory f32x2Factory();\n+    F32x3Triangle.Factory f32x3TriangleFactory();\n+    F32x2Triangle.Factory f32x2TriangleFactory();\n+    \/\/  https:\/\/stackoverflow.com\/questions\/28075743\/how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch\/28084380#28084380\n+     default F32x4x4 mul(F32x4x4 lhs, F32x4x4 rhs) {\n+        return f32x4x4Factory().of(\n+                lhs.x0y0() * rhs.x0y0() + lhs.x1y0() * rhs.x0y1() + lhs.x2y0() * rhs.x0y2() + lhs.x3y0() * rhs.x0y3(),\n+                lhs.x0y0() * rhs.x1y0() + lhs.x1y0() * rhs.x1y1() + lhs.x2y0() * rhs.x1y2() + lhs.x3y0() * rhs.x1y3(),\n+                lhs.x0y0() * rhs.x2y0() + lhs.x1y0() * rhs.x2y1() + lhs.x2y0() * rhs.x2y2() + lhs.x3y0() * rhs.x2y3(),\n+                lhs.x0y0() * rhs.x3y0() + lhs.x1y0() * rhs.x3y1() + lhs.x2y0() * rhs.x3y2() + lhs.x3y0() * rhs.x3y3(),\n+\n+                lhs.x0y1() * rhs.x0y0() + lhs.x1y1() * rhs.x0y1() + lhs.x2y1() * rhs.x0y2() + lhs.x3y1() * rhs.x0y3(),\n+                lhs.x0y1() * rhs.x1y0() + lhs.x1y1() * rhs.x1y1() + lhs.x2y1() * rhs.x1y2() + lhs.x3y1() * rhs.x1y3(),\n+                lhs.x0y1() * rhs.x2y0() + lhs.x1y1() * rhs.x2y1() + lhs.x2y1() * rhs.x2y2() + lhs.x3y1() * rhs.x2y3(),\n+                lhs.x0y1() * rhs.x3y0() + lhs.x1y1() * rhs.x3y1() + lhs.x2y1() * rhs.x3y2() + lhs.x3y1() * rhs.x3y3(),\n+\n+                lhs.x0y2() * rhs.x0y0() + lhs.x1y2() * rhs.x0y1() + lhs.x2y2() * rhs.x0y2() + lhs.x3y2() * rhs.x0y3(),\n+                lhs.x0y2() * rhs.x1y0() + lhs.x1y2() * rhs.x1y1() + lhs.x2y2() * rhs.x1y2() + lhs.x3y2() * rhs.x1y3(),\n+                lhs.x0y2() * rhs.x2y0() + lhs.x1y2() * rhs.x2y1() + lhs.x2y2() * rhs.x2y2() + lhs.x3y2() * rhs.x2y3(),\n+                lhs.x0y2() * rhs.x3y0() + lhs.x1y2() * rhs.x3y1() + lhs.x2y2() * rhs.x3y2() + lhs.x3y2() * rhs.x3y3(),\n+\n+                lhs.x0y3() * rhs.x0y0() + lhs.x1y3() * rhs.x0y1() + lhs.x2y3() * rhs.x0y2() + lhs.x3y3() * rhs.x0y3(),\n+                lhs.x0y3() * rhs.x1y0() + lhs.x1y3() * rhs.x1y1() + lhs.x2y3() * rhs.x1y2() + lhs.x3y3() * rhs.x1y3(),\n+                lhs.x0y3() * rhs.x2y0() + lhs.x1y3() * rhs.x2y1() + lhs.x2y3() * rhs.x2y2() + lhs.x3y3() * rhs.x2y3(),\n+                lhs.x0y3() * rhs.x3y0() + lhs.x1y3() * rhs.x3y1() + lhs.x2y3() * rhs.x3y2() + lhs.x3y3() * rhs.x3y3()\n+\n+        );\n+    }\n+\n+    \/\/https:\/\/medium.com\/swlh\/understanding-3d-matrix-transforms-with-pixijs-c76da3f8bd8\n+    \/\/ record Transformation(F32Matrix4x4Pool id) implements Impl {\n+     default F32x4x4 transformation(float x, float y, float z) {\n+        return f32x4x4Factory().of(\n+                1f, 0f, 0f, 0f,\n+                0f, 1f, 0f, 0f,\n+                0f, 0f, 1f, 0f,\n+                x, y, z, 1f\n+        );\n+    }\n+\n+     default F32x4x4 transformation(float v) {\n+        return transformation(v, v, v);\n+    }\n+\n+     default F32x4x4 scale(float x, float y, float z) {\n+        return f32x4x4Factory().of(\n+                x, 0f, 0f, 0f,\n+                0f, y, 0f, 0f,\n+                0f, 0f, z, 0f,\n+                0f, 0f, 0f, 1f\n+\n+        );\n+    }\n+\n+     default F32x4x4 scale(float v) {\n+        return scale(v, v, v);\n+    }\n+\n+     default F32x4x4 rotX(float thetaRadians) {\n+        float sinTheta = (float) Math.sin(thetaRadians);\n+        float cosTheta = (float) Math.cos(thetaRadians);\n+        return f32x4x4Factory().of(\n+                1f, 0f, 0f, 0f,\n+                0f, cosTheta, -sinTheta, 0f,\n+                0f, sinTheta, cosTheta, 0f,\n+                0f, 0f, 0f, 1f\n+\n+        );\n+    }\n+\n+     default F32x4x4 rotZ(float thetaRadians) {\n+        float sinTheta = (float) Math.sin(thetaRadians);\n+        float cosTheta = (float) Math.cos(thetaRadians);\n+        return f32x4x4Factory().of(\n+                cosTheta, sinTheta, 0f, 0f,\n+                -sinTheta, cosTheta, 0f, 0f,\n+                0f, 0f, 1f, 0f,\n+                0f, 0f, 0f, 1f\n+        );\n+    }\n+\n+     default F32x4x4 rotY(float thetaRadians) {\n+        float sinTheta = (float) Math.sin(thetaRadians);\n+        float cosTheta = (float) Math.cos(thetaRadians);\n+        return f32x4x4Factory().of(\n+                cosTheta, 0f, sinTheta, 0f,\n+                0f, 1f, 0f, 0f,\n+                -sinTheta, 0f, cosTheta, 0f,\n+                0f, 0f, 0f, 1f\n+        );\n+    }\n+\n+     default F32x4x4 rot(float thetaX, float thetaY, float thetaZ) {\n+        return mul(mul(rotX(thetaX), rotY(thetaY)), rotZ(thetaZ));\n+    }\n+\n+    \/\/ https:\/\/medium.com\/swlh\/understanding-3d-matrix-transforms-with-pixijs-c76da3f8bd8\n+\n+\n+\n+    \/*\n+                 https:\/\/youtu.be\/ih20l3pJoeU?t=973\n+                 https:\/\/stackoverflow.com\/questions\/28075743\/how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch\/28084380#28084380^\n+                --------------------            far\n+                 \\                \/              ^    ^\n+                  \\              \/               |    |   far-near\n+                   \\            \/                |    |\n+                    \\__________\/         near    |    v\n+                                          ^      |\n+                                          v      v\n+                        \\^\/\n+                      [x,y,z]\n+\n+               *\/\n+\n+     default F32x4x4 projection(float width, float height, float near, float far, float fieldOfViewDeg) {\n+        float aspectRatio = height \/ width;\n+        float fieldOfViewRadians = (float) (1.0f \/ Math.tan((fieldOfViewDeg * 0.5f) \/ 180.0 * Math.PI));\n+        return f32x4x4Factory().of(\n+                aspectRatio * fieldOfViewRadians, 0f, 0f, 0f,\n+                0f, fieldOfViewRadians, 0f, 0f,\n+                0f, 0f, far \/ (far - near), (-far * near) \/ (far - near),\n+                    0f, 0f, (-far * near) \/ (far - near), 0f);\n+\n+    }\n+\n+   static float side(float x, float y, F32x2 v0, F32x2 v1) {\n+         return    (v1.y() - v0.y() * (x - v0.x()) + (-v1.x() + v0.x()) * (y - v0.y()));\n+    }\n+\n+     \/*\n+              V0                V0\n+              |  \\              |  \\\n+              |    \\            |    \\        P2\n+              |  P1  \\          |      \\\n+              V1------V0        V1------V0\n+\n+\n+Barycentric coordinate allows to express new p coordinates as a linear combination of p1, p2, p3.\n+ More precisely, it defines 3 scalars a, b, c such that :\n+\n+x = a * x1 + b * x2  + c * x3\n+y = a * y1 + b * y2 + c * y3\n+a + b + c = 1\n+\n+\n+a = ((y2 - y3)*(x - x3) + (x3 - x2)*(y - y3)) \/ ((y2 - y3)*(x1 - x3) + (x3 - x2)*(y1 - y3))\n+b = ((y3 - y1)*(x - x3) + (x1 - x3)*(y - y3)) \/ ((y2 - y3)*(x1 - x3) + (x3 - x2)*(y1 - y3))\n+c = 1 - a - b\n+\n+p lies in T if and only if 0 <= a <= 1 and 0 <= b <= 1 and 0 <= c <= 1\n+*\/\n+\n+   static boolean inside(float x, float y, float x0, float y0, float x1, float y1, float x2, float y2) {\n+        var denominator = ((y1 - y2)*(x0 - x2) + (x2 - x1)*(y0 - y2));\n+        var a = ((y1 - y2)*(x - x2) + (x2 - x1)*(y - y2)) \/ denominator;\n+        var b = ((y2 - y0)*(x - x2) + (x0 - x2)*(y - y2)) \/ denominator;\n+        var c = 1 - a - b;\n+        return 0 <= a && a <= 1 && 0 <= b && b <= 1 && 0 <= c && c <= 1;\n+    }\n+\n+   static boolean inside(float x, float y, F32x2 v0, F32x2 v1, F32x2 v2) {\n+        return inside(x,y, v0.x(), v0.y(), v1.x(), v1.y(),v2.x(), v2.y());\n+    }\n+\n+    static boolean inside(float x, float y, F32x2Triangle tri) {\n+       return inside(x,y, tri.v0(), tri.v1(),tri.v2());\n+    }\n+\n+    static boolean onLine(float x, float y, F32x2 v0, F32x2 v1, float deltaSquare) {\n+        float dxl = v1.x() - v0.x();\n+        float dyl = v1.y() - v0.y();;\n+        float cross = (x - v0.x()) * dyl - (y - v0.y()) * dxl;\n+        if ((cross * cross) < deltaSquare) {\n+            if (dxl * dxl >= dyl * dyl)\n+                return dxl > 0 ? v0.x() <= x && x <= v1.x() : v1.x() <= x && x <= v0.x();\n+            else\n+                return dyl > 0 ? v0.y() <= y && y <= v1.y() : v1.y() <= y && y <= v0.y();\n+        } else {\n+            return false;\n+        }\n+    }\n+\n+    static boolean onEdge(float x, float y, F32x2Triangle tri) {\n+        return onLine(x, y, tri.v0(), tri.v1(), F32x2Triangle.deltaSquare)\n+                || onLine(x, y,tri.v1(),tri.v2(), F32x2Triangle.deltaSquare)\n+                || onLine(x, y, tri.v2(),tri.v0(), F32x2Triangle.deltaSquare);\n+    }\n+\n+    static   boolean useRgb(boolean filled, float x, float y, F32x2Triangle tri){\n+        return filled? inside(x,y,tri): onEdge(x,y,tri);\n+    }\n+\n+    static   int rgb(boolean filled, float x, float y, F32x2Triangle tri, int rgb){\n+        return useRgb(filled,x,y,tri)? tri.rgb() : rgb;\n+    }\n+\n+    \/*\n+      v0----v1         v0----v2\n+       \\    |           \\    |\n+        \\   |            \\   |\n+         \\  |    --->     \\  |\n+          \\ |              \\ |\n+           \\|               \\|\n+            v2               v1\n+  *\/\n+    static F32x3Triangle rewind(F32x3Triangle i) {\n+        var temp = i.v1();\n+        ((F32x3TrianglePool.PoolEntry) i).pool().f32x3Entries[((F32x3TrianglePool.PoolEntry) i).v1Idx()] = i.v2();\n+        ((F32x3TrianglePool.PoolEntry) i).pool().f32x3Entries[((F32x3TrianglePool.PoolEntry) i).v2Idx()] = temp;\n+        return i;\n+    }\n+\n+   default F32x3Triangle mul(F32x3Triangle i, F32x4x4 m4) {\n+        return f32x3TriangleFactory().of(mul(i.v0(), m4), mul(i.v1(), m4), mul(i.v2(), m4), i.rgb());\n+    }\n+\n+    default F32x3Triangle add(F32x3Triangle i, F32x3 v3) {\n+        return f32x3TriangleFactory().of(add(i.v0(), v3), add(i.v1(), v3), add(i.v2(), v3), i.rgb());\n+    }\n+\n+    default F32x3Triangle mul(F32x3Triangle i, float s) {\n+        return f32x3TriangleFactory().of(mul(i.v0(), s), mul(i.v1(), s), mul(i.v2(), s), i.rgb());\n+    }\n+\n+   default F32x3Triangle add(F32x3Triangle i, float s) {\n+        return f32x3TriangleFactory().of(add(i.v0(), s), add(i.v1(), s), add(i.v2(), s), i.rgb());\n+    }\n+\n+    default F32x3 centre(F32x3Triangle i) {\/\/ the average of all the vertices\n+        return div(getVectorSum(i), 3);\n+    }\n+\n+    default F32x3 getVectorSum(F32x3Triangle i) {\/\/ the sum of all the vertices\n+        return add(add(i.v0(), i.v1()), i.v2());\n+    }\n+\n+    default F32x3 normal(F32x3Triangle i) {\n+        return crossProd(sub(i.v1(), i.v0()), sub(i.v2(), i.v0()));\n+    }\n+\n+    default F32x3 normalSumOfSquares(F32x3Triangle i) {\n+        return div(normal(i), sumOfSq(normal(i)));\n+    }\n+\n+    \/* return another vec3 after multiplying by m4\n+     we pad this vec3 to vec 4 with '1' as w\n+     we normalize the result\n+     *\/\n+\n+    default F32x3 mul(F32x3 f32x3, F32x4x4 m) {\n+        F32x3 o = f32x3Factory().of(\n+                f32x3.x() * m.x0y0() + f32x3.y() * m.x0y1() + f32x3.z() * m.x0y2() + 1f * m.x0y3(),\n+                f32x3.x() * m.x1y0() + f32x3.y() * m.x1y1() + f32x3.z() * m.x1y2() + 1f * m.x1y3(),\n+                f32x3.x() * m.x2y0() + f32x3.y() * m.x2y1() + f32x3.z() * m.x2y2() + 1f * m.x2y3()\n+        );\n+        float w = f32x3.x() * m.x3y0() + f32x3.y() * m.x3y1() + f32x3.z() * m.x3y2() + 1f * m.x3y3();\n+      \/\/  if (w!=0.0) {\n+            o = div(o, w);\n+       \/\/ }\n+        return o;\n+    }\n+\n+    default F32x3 mul(F32x3 i, float s) {\n+        return f32x3Factory().of(i.x() * s, i.y() * s, i.z() * s);\n+    }\n+\n+    default F32x3 add(F32x3 i, float s) {\n+\n+        return f32x3Factory().of(i.x() + s, i.y() + s, i.z() + s);\n+    }\n+\n+    default F32x3 div(F32x3 i, float s) {\n+        if (s==0){\n+            return i;\n+        }\n+        return f32x3Factory().of(i.x() \/ s, i.y() \/ s, i.z() \/ s);\n+    }\n+\n+    default F32x3 add(F32x3 lhs, F32x3 rhs) {\n+        return f32x3Factory().of(lhs.x() + rhs.x(), lhs.y() + rhs.y(), lhs.z() + rhs.z());\n+    }\n+\n+    default F32x3 sub(F32x3 lhs, F32x3 rhs) {\n+        return f32x3Factory().of(lhs.x() - rhs.x(), lhs.y() - rhs.y(), lhs.z() - rhs.z());\n+    }\n+\n+    default F32x3 mul(F32x3 lhs, F32x3 rhs) {\n+        return f32x3Factory().of(lhs.x() * rhs.x(), lhs.y() * rhs.y(), lhs.z() * rhs.z());\n+    }\n+\n+    default F32x3 div(F32x3 lhs, F32x3 rhs) {\n+        return f32x3Factory().of(lhs.x() \/ rhs.x(), lhs.y() \/ rhs.y(), lhs.z() \/ rhs.z());\n+    }\n+\n+    default float sumOfSq(F32x3 i) {\n+        return i.x() * i.x() + i.y() * i.y() + i.z() * i.z();\n+    }\n+\n+    default float sumOf(F32x3 i) {\n+        return i.x() + i.y() + i.z();\n+    }\n+\n+    default float hypot(F32x3 i) {\n+        return (float) Math.sqrt(sumOfSq(i));\n+    }\n+\n+    default F32x3 crossProd(F32x3 lhs, F32x3 rhs) {\n+        return f32x3Factory().of(\n+                lhs.y() * rhs.z() - lhs.z() * rhs.x(),\n+                lhs.z() * rhs.x() - lhs.x() * rhs.z(),\n+                lhs.x() * rhs.y() - lhs.y() * rhs.x());\n+\n+    }\n+    \/*\n+           lhs= | 1|   rhs= | 2|\n+                | 3|        | 7|\n+                | 4|        |-5|\n+\n+           lhs0*rhs0 + lhs1*rhs1 + lhs2*rhs2\n+            1  * 2   +  3  * 7   +  4  *-5\n+\n+               3     +    21     +   -20\n+\n+                          4\n+\n+        *\/\n+    default float dotProd(F32x3 lhs, F32x3 rhs) {\n+        return lhs.x() * rhs.x() + lhs.y() * rhs.y() + lhs.z() * rhs.z();\n+    }\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/F32.java","additions":362,"deletions":0,"binary":false,"changes":362,"status":"added"},{"patch":"@@ -1,493 +0,0 @@\n-\/*\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-package view.f32;\n-\n-\n-public interface F32Matrix4x4 {\n-    float x0y0();\n-\n-    float x1y0();\n-\n-    float x2y0();\n-\n-    float x3y0();\n-\n-    float x0y1();\n-\n-    float x1y1();\n-\n-    float x2y1();\n-\n-    float x3y1();\n-\n-    float x0y2();\n-\n-    float x1y2();\n-\n-    float x2y2();\n-\n-    float x3y2();\n-\n-    float x0y3();\n-\n-    float x1y3();\n-\n-    float x2y3();\n-\n-    float x3y3();\n-\n-  \/\/  int idx();\n-    default String asString() {\n-\n-        return String.format(\"\"\"\n-                        |%5.2f, %5.2f, %5.2f, %5.2f|\n-                        |%5.2f, %5.2f, %5.2f, %5.2f|\n-                        |%5.2f, %5.2f, %5.2f, %5.2f|\n-                        |%5.2f, %5.2f, %5.2f, %5.2f|\n-                        \"\"\",\n-                x0y0(), x1y0(), x2y0(), x3y0(),\n-                x0y1(), x1y1(), x2y1(), x3y1(),\n-                x0y2(), x1y2(), x2y2(), x3y2(),\n-                x0y3(), x1y3(), x2y3(), x3y3());\n-    }\n-    class F32Matrix4x4Pool extends FloatPool<F32Matrix4x4Pool> {\n-        static int X0Y0 = 0;\n-        static  int X1Y0 = 1;\n-        static  int X2Y0 = 2;\n-        static  int X3Y0 = 3;\n-        static  int X0Y1 = 4;\n-        static  int X1Y1 = 5;\n-        static  int X2Y1 = 6;\n-        static  int X3Y1 = 7;\n-        static  int X0Y2 = 8;\n-        static  int X1Y2 = 9;\n-        static  int X2Y2 = 10;\n-        static  int X3Y2 = 11;\n-        static  int X0Y3 = 12;\n-        static  int X1Y3 = 13;\n-        static  int X2Y3 = 14;\n-        static  int X3Y3 = 15;\n-        public record Idx(F32Matrix4x4Pool pool, int idx) implements Pool.Idx<F32Matrix4x4Pool>, F32Matrix4x4 {\n-            private int x0y0Idx() {\n-                return idx * pool.stride + X0Y0;\n-            }\n-\n-            private int x1y0Idx() {\n-                return idx * pool.stride + X1Y0;\n-            }\n-\n-            private int x2y0Idx() {\n-                return idx * pool.stride + X2Y0;\n-            }\n-\n-            private int x3y0Idx() {\n-                return idx * pool.stride + X3Y0;\n-            }\n-\n-            private int x0y1Idx() {\n-                return idx * pool.stride + X0Y1;\n-            }\n-\n-            private int x1y1Idx() {\n-                return idx * pool.stride + X1Y1;\n-            }\n-\n-            private int x2y1Idx() {\n-                return idx * pool.stride + X2Y1;\n-            }\n-\n-            private int x3y1Idx() {\n-                return idx * pool.stride + X3Y1;\n-            }\n-\n-            int x0y2Idx() {\n-                return idx * pool.stride + X0Y2;\n-            }\n-\n-            int x1y2Idx() {\n-                return idx * pool.stride + X1Y2;\n-            }\n-\n-            int x2y2Idx() {\n-                return idx * pool.stride + X2Y2;\n-            }\n-\n-            int x3y2Idx() {\n-                return idx * pool.stride + X3Y2;\n-            }\n-\n-            int x0y3Idx() {\n-                return idx * pool.stride + X0Y3;\n-            }\n-\n-            int x1y3Idx() {\n-                return idx * pool.stride + X1Y3;\n-            }\n-\n-            int x2y3Idx() {\n-                return idx * pool.stride + X2Y3;\n-            }\n-\n-            int x3y3Idx() {\n-                return idx * pool.stride + X3Y3;\n-            }\n-\n-            @Override\n-            public float x0y0() {\n-                return pool.entries[x0y0Idx()];\n-            }\n-\n-            @Override\n-            public float x1y0() {\n-                return pool.entries[x1y0Idx()];\n-            }\n-\n-            @Override\n-            public float x2y0() {\n-                return pool.entries[x2y0Idx()];\n-            }\n-\n-            @Override\n-            public float x3y0() {\n-                return pool.entries[x3y0Idx()];\n-            }\n-\n-            @Override\n-            public float x0y1() {\n-                return pool.entries[x0y1Idx()];\n-            }\n-\n-            @Override\n-            public float x1y1() {\n-                return pool.entries[x1y1Idx()];\n-            }\n-\n-            @Override\n-            public float x2y1() {\n-                return pool.entries[x2y1Idx()];\n-            }\n-\n-            @Override\n-            public float x3y1() {\n-                return pool.entries[x3y1Idx()];\n-            }\n-\n-            @Override\n-            public float x0y2() {\n-                return pool.entries[x0y2Idx()];\n-            }\n-\n-            @Override\n-            public float x1y2() {\n-                return pool.entries[x1y2Idx()];\n-            }\n-\n-            @Override\n-            public float x2y2() {\n-                return pool.entries[x2y2Idx()];\n-            }\n-\n-            @Override\n-            public float x3y2() {\n-                return pool.entries[x3y2Idx()];\n-            }\n-\n-            @Override\n-            public float x0y3() {\n-                return pool.entries[x0y3Idx()];\n-            }\n-\n-            @Override\n-            public float x1y3() {\n-                return pool.entries[x1y3Idx()];\n-            }\n-\n-            @Override\n-            public float x2y3() {\n-                return pool.entries[x2y3Idx()];\n-            }\n-\n-            @Override\n-            public float x3y3() {\n-                return pool.entries[x3y3Idx()];\n-            }\n-        }\n-\n-        F32Matrix4x4Pool(int max) {\n-            super(16, max);\n-        }\n-\n-        @Override\n-        Idx idx(int idx) {\n-            return new Idx(this, idx);\n-        }\n-\n-        F32Matrix4x4 of(float x0y0, float x1y0, float x2y0, float x3y0,\n-                                float x0y1, float x1y1, float x2y1, float x3y1,\n-                                float x0y2, float x1y2, float x2y2, float x3y2,\n-                                float x0y3, float x1y3, float x2y3, float x3y3) {\n-            var i = idx(f32matrix4x4Pool.count++);\n-            entries[i.x0y0Idx()] = x0y0;\n-            entries[i.x1y0Idx()] = x1y0;\n-            entries[i.x2y0Idx()] = x2y0;\n-            entries[i.x3y0Idx()] = x3y0;\n-            entries[i.x0y1Idx()] = x0y1;\n-            entries[i.x1y1Idx()] = x1y1;\n-            entries[i.x2y1Idx()] = x2y1;\n-            entries[i.x3y1Idx()] = x3y1;\n-            entries[i.x0y2Idx()] = x0y2;\n-            entries[i.x1y2Idx()] = x1y2;\n-            entries[i.x2y2Idx()] = x2y2;\n-            entries[i.x3y2Idx()] = x3y2;\n-            entries[i.x0y3Idx()] = x0y3;\n-            entries[i.x1y3Idx()] = x1y3;\n-            entries[i.x2y3Idx()] = x2y3;\n-            entries[i.x3y3Idx()] = x3y3;\n-            return i;\n-        }\n-\n-    }\n-\n-    F32Matrix4x4Pool f32matrix4x4Pool = new F32Matrix4x4Pool(100);\n-\n-    interface Impl extends F32Matrix4x4 {\n-        F32Matrix4x4 id();\n-\n-        @Override\n-        default float x0y0() {\n-            return id().x0y0();\n-        }\n-\n-        @Override\n-        default float x1y0() {\n-            return id().x1y0();\n-        }\n-\n-        @Override\n-        default float x2y0() {\n-            return id().x2y0();\n-        }\n-\n-        @Override\n-        default float x3y0() {\n-            return id().x3y0();\n-        }\n-\n-        @Override\n-        default float x0y1() {\n-            return id().x0y1();\n-        }\n-\n-        @Override\n-        default float x1y1() {\n-            return id().x1y1();\n-        }\n-\n-        @Override\n-        default float x2y1() {\n-            return id().x2y1();\n-        }\n-\n-        @Override\n-        default float x3y1() {\n-            return id().x3y1();\n-        }\n-\n-        @Override\n-        default float x0y2() {\n-            return id().x0y2();\n-        }\n-\n-        @Override\n-        default float x1y2() {\n-            return id().x1y2();\n-        }\n-\n-        @Override\n-        default float x2y2() {\n-            return id().x2y2();\n-        }\n-\n-        @Override\n-        default float x3y2() {\n-            return id().x3y2();\n-        }\n-\n-        @Override\n-        default float x0y3() {\n-            return id().x0y3();\n-        }\n-\n-        @Override\n-        default float x1y3() {\n-            return id().x1y3();\n-        }\n-\n-        @Override\n-        default float x2y3() {\n-            return id().x2y3();\n-        }\n-\n-        @Override\n-        default float x3y3() {\n-            return id().x3y3();\n-        }\n-\n-    }\n-\n-\n-\n-    \/\/  https:\/\/stackoverflow.com\/questions\/28075743\/how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch\/28084380#28084380\n-    static F32Matrix4x4 mulMat4(F32Matrix4x4 lhs, F32Matrix4x4 rhs) {\n-        return f32matrix4x4Pool.of(\n-                lhs.x0y0() * rhs.x0y0() + lhs.x1y0() * rhs.x0y1() + lhs.x2y0() * rhs.x0y2() + lhs.x3y0() * rhs.x0y3(),\n-                lhs.x0y0() * rhs.x1y0() + lhs.x1y0() * rhs.x1y1() + lhs.x2y0() * rhs.x1y2() + lhs.x3y0() * rhs.x1y3(),\n-                lhs.x0y0() * rhs.x2y0() + lhs.x1y0() * rhs.x2y1() + lhs.x2y0() * rhs.x2y2() + lhs.x3y0() * rhs.x2y3(),\n-                lhs.x0y0() * rhs.x3y0() + lhs.x1y0() * rhs.x3y1() + lhs.x2y0() * rhs.x3y2() + lhs.x3y0() * rhs.x3y3(),\n-\n-                lhs.x0y1() * rhs.x0y0() + lhs.x1y1() * rhs.x0y1() + lhs.x2y1() * rhs.x0y2() + lhs.x3y1() * rhs.x0y3(),\n-                lhs.x0y1() * rhs.x1y0() + lhs.x1y1() * rhs.x1y1() + lhs.x2y1() * rhs.x1y2() + lhs.x3y1() * rhs.x1y3(),\n-                lhs.x0y1() * rhs.x2y0() + lhs.x1y1() * rhs.x2y1() + lhs.x2y1() * rhs.x2y2() + lhs.x3y1() * rhs.x2y3(),\n-                lhs.x0y1() * rhs.x3y0() + lhs.x1y1() * rhs.x3y1() + lhs.x2y1() * rhs.x3y2() + lhs.x3y1() * rhs.x3y3(),\n-\n-                lhs.x0y2() * rhs.x0y0() + lhs.x1y2() * rhs.x0y1() + lhs.x2y2() * rhs.x0y2() + lhs.x3y2() * rhs.x0y3(),\n-                lhs.x0y2() * rhs.x1y0() + lhs.x1y2() * rhs.x1y1() + lhs.x2y2() * rhs.x1y2() + lhs.x3y2() * rhs.x1y3(),\n-                lhs.x0y2() * rhs.x2y0() + lhs.x1y2() * rhs.x2y1() + lhs.x2y2() * rhs.x2y2() + lhs.x3y2() * rhs.x2y3(),\n-                lhs.x0y2() * rhs.x3y0() + lhs.x1y2() * rhs.x3y1() + lhs.x2y2() * rhs.x3y2() + lhs.x3y2() * rhs.x3y3(),\n-\n-                lhs.x0y3() * rhs.x0y0() + lhs.x1y3() * rhs.x0y1() + lhs.x2y3() * rhs.x0y2() + lhs.x3y3() * rhs.x0y3(),\n-                lhs.x0y3() * rhs.x1y0() + lhs.x1y3() * rhs.x1y1() + lhs.x2y3() * rhs.x1y2() + lhs.x3y3() * rhs.x1y3(),\n-                lhs.x0y3() * rhs.x2y0() + lhs.x1y3() * rhs.x2y1() + lhs.x2y3() * rhs.x2y2() + lhs.x3y3() * rhs.x2y3(),\n-                lhs.x0y3() * rhs.x3y0() + lhs.x1y3() * rhs.x3y1() + lhs.x2y3() * rhs.x3y2() + lhs.x3y3() * rhs.x3y3()\n-\n-        );\n-    }\n-\n-\n-\n-\n-    \/\/https:\/\/medium.com\/swlh\/understanding-3d-matrix-transforms-with-pixijs-c76da3f8bd8\n-    \/\/ record Transformation(F32Matrix4x4Pool id) implements Impl {\n-    static F32Matrix4x4 transformation(float x, float y, float z) {\n-        return f32matrix4x4Pool.of(\n-                1f, 0f, 0f, 0f,\n-                0f, 1f, 0f, 0f,\n-                0f, 0f, 1f, 0f,\n-                x, y, z, 1f\n-        );\n-    }\n-\n-    static F32Matrix4x4 transformation(float v) {\n-        return transformation(v, v, v);\n-    }\n-\n-\n-    \/\/ https:\/\/medium.com\/swlh\/understanding-3d-matrix-transforms-with-pixijs-c76da3f8bd8\n-\n-\n-    static F32Matrix4x4 scale(float x, float y, float z) {\n-        return f32matrix4x4Pool.of(\n-                x, 0f, 0f, 0f,\n-                0f, y, 0f, 0f,\n-                0f, 0f, z, 0f,\n-                0f, 0f, 0f, 1f\n-\n-        );\n-    }\n-\n-    static F32Matrix4x4 scale(float v) {\n-        return scale(v, v, v);\n-    }\n-\n-    static F32Matrix4x4 rotationX(float thetaRadians) {\n-        float sinTheta = (float) Math.sin(thetaRadians);\n-        float cosTheta = (float) Math.cos(thetaRadians);\n-        return f32matrix4x4Pool.of(\n-                1, 0, 0, 0,\n-                0, cosTheta, -sinTheta, 0,\n-                0, sinTheta, cosTheta, 0,\n-                0, 0, 0, 1\n-\n-        );\n-    }\n-\n-    static F32Matrix4x4 rotationZ(float thetaRadians) {\n-        float sinTheta = (float) Math.sin(thetaRadians);\n-        float cosTheta = (float) Math.cos(thetaRadians);\n-        return f32matrix4x4Pool.of(\n-                cosTheta, sinTheta, 0, 0,\n-                -sinTheta, cosTheta, 0, 0,\n-                0, 0, 1, 0,\n-                0, 0, 0, 1\n-        );\n-    }\n-\n-    static F32Matrix4x4 rotationY(float thetaRadians) {\n-        float sinTheta = (float) Math.sin(thetaRadians);\n-        float cosTheta = (float) Math.cos(thetaRadians);\n-        return f32matrix4x4Pool.of(\n-                cosTheta, 0, sinTheta, 0,\n-                0, 1, 0, 0,\n-                -sinTheta, 0, cosTheta, 0,\n-                0, 0, 0, 1\n-        );\n-    }\n-\n-\n-    static F32Matrix4x4 rotation(float thetaX, float thetaY, float thetaZ) {\n-        return F32Matrix4x4.mulMat4(F32Matrix4x4.mulMat4(rotationX(thetaX), rotationY(thetaY)), rotationZ(thetaZ));\n-    }\n-\n-\n-\n-    \/*\n-                 https:\/\/youtu.be\/ih20l3pJoeU?t=973\n-                 https:\/\/stackoverflow.com\/questions\/28075743\/how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch\/28084380#28084380^\n-                --------------------            far\n-                 \\                \/              ^    ^\n-                  \\              \/               |    |   far-near\n-                   \\            \/                |    |\n-                    \\__________\/         near    |    v\n-                                          ^      |\n-                                          v      v\n-                        \\^\/\n-                      [x,y,z]\n-\n-               *\/\n-\n-    static F32Matrix4x4 projection(float width, float height, float near, float far, float fieldOfViewDeg) {\n-        float aspectRatio = height \/ width;\n-        float fieldOfViewRadians = (float) (1.0f \/ Math.tan((fieldOfViewDeg * 0.5f) \/ 180.0 * Math.PI));\n-        return f32matrix4x4Pool.of(\n-                aspectRatio * fieldOfViewRadians, 0f, 0f, 0f,\n-                0f, fieldOfViewRadians, 0f, 0f,\n-                0f, 0f, far \/ (far - near), (-far * near) \/ (far - near),\n-                    0f, 0f, (-far * near) \/ (far - near), 0f);\n-\n-    }\n-\n-\n-\n-}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/F32Matrix4x4.java","additions":0,"deletions":493,"binary":false,"changes":493,"status":"deleted"},{"patch":"@@ -29,0 +29,1 @@\n+import view.ViewFrame;\n@@ -41,3 +42,3 @@\n-    public record Face ( F32Triangle3D triangle, F32Vec3 centerVec3Idx, F32Vec3 normalIdx, F32Vec3 v0VecIdx){\n-        static Face of (F32Triangle3D tri){\n-           return  new Face(tri,  F32Triangle3D.getCentre(tri),F32Triangle3D.normal(tri),tri.v0());\n+    public record Face (F32x3Triangle triangle, F32x3 centerVec3Idx, F32x3 normalIdx, F32x3 v0VecIdx){\n+        static Face of (F32x3Triangle tri){\n+           return  new Face(tri, ViewFrame.f32.centre(tri), ViewFrame.f32.normal(tri),tri.v0());\n@@ -49,1 +50,1 @@\n-    public List<F32Vec3> vecEntries = new ArrayList<>();\/\/ F32Vec3.F32Vec3Pool.Idx[MAX];\n+    public List<F32x3> vecEntries = new ArrayList<>();\/\/ F32Vec3.F32Vec3Pool.Idx[MAX];\n@@ -52,2 +53,2 @@\n-    public Face tri(F32Vec3 v0, F32Vec3 v1, F32Vec3 v2, int rgb) {\n-        Face face =Face.of(F32Triangle3D.f32Triangle3DPool.of(v0, v1, v2, rgb));\n+    public Face tri(F32x3 v0, F32x3 v1, F32x3 v2, int rgb) {\n+        Face face =Face.of(ViewFrame.f32.f32x3TriangleFactory().of(v0, v1, v2, rgb));\n@@ -61,1 +62,1 @@\n-            triSumIdx.set(F32Vec3.addVec3(triSumIdx.get(), face.centerVec3Idx));\n+            triSumIdx.set(ViewFrame.f32.add(triSumIdx.get(), face.centerVec3Idx));\n@@ -63,1 +64,1 @@\n-        var meshCenterVec3 = F32Vec3.divScaler(triSumIdx.get(), faces.size());\n+        var meshCenterVec3 = ViewFrame.f32.div(triSumIdx.get(), faces.size());\n@@ -65,2 +66,2 @@\n-            var v0CenterDiff = F32Vec3.subVec3(meshCenterVec3,face.v0VecIdx);\n-            float normDotProd = F32Vec3.dotProd(v0CenterDiff, face.normalIdx);\n+            var v0CenterDiff = ViewFrame.f32.sub(meshCenterVec3,face.v0VecIdx);\n+            float normDotProd = ViewFrame.f32.dotProd(v0CenterDiff, face.normalIdx);\n@@ -68,1 +69,1 @@\n-                F32Triangle3D.rewind(face.triangle);\n+                F32.rewind(face.triangle);\n@@ -74,1 +75,1 @@\n-    public F32Mesh3D quad(F32Vec3 v0, F32Vec3 v1, F32Vec3 v2, F32Vec3 v3, int rgb) {\n+    public F32Mesh3D quad(F32x3 v0, F32x3 v1, F32x3 v2, F32x3 v3, int rgb) {\n@@ -90,1 +91,1 @@\n-    public F32Mesh3D pent(F32Vec3 v0, F32Vec3 v1, F32Vec3 v2, F32Vec3 v3, F32Vec3 v4, int rgb) {\n+    public F32Mesh3D pent(F32x3 v0, F32x3 v1, F32x3 v2, F32x3 v3, F32x3 v4, int rgb) {\n@@ -106,1 +107,1 @@\n-    public F32Mesh3D hex(F32Vec3 v0, F32Vec3 v1, F32Vec3 v2, F32Vec3 v3, F32Vec3 v4, F32Vec3 v5, int rgb) {\n+    public F32Mesh3D hex(F32x3 v0, F32x3 v1, F32x3 v2, F32x3 v3, F32x3 v4, F32x3 v5, int rgb) {\n@@ -220,2 +221,2 @@\n-    public  F32Vec3  vec3(float x, float y, float z) {\n-        var newVec = F32Vec3.f32Vec3Pool.of(x,y, z);\n+    public F32x3 vec3(float x, float y, float z) {\n+        var newVec = ViewFrame.f32.f32x3Factory().of(x,y, z);\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/F32Mesh3D.java","additions":17,"deletions":16,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -1,189 +0,0 @@\n-\/*\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-package view.f32;\n-\n-public interface F32Triangle2D {\n-    F32Vec2 v0();\n-\n-    F32Vec2 v1();\n-\n-    F32Vec2 v2();\n-\n-    int rgb();\n-\n-    static void reset(int marked) {\n-        F32Triangle2D.f32Triangle2DPool.count = marked;\n-    }\n-\n-    class F32Triangle2DPool extends Pool<F32Triangle2D.F32Triangle2DPool> {\n-        static int V0 = 0;\n-        static int V1 = 1;\n-        static int V2 = 2;\n-\n-\n-        public record Idx(F32Triangle2DPool pool, int idx) implements Pool.Idx<F32Triangle2D.F32Triangle2DPool>, F32Triangle2D {\n-            int v0Idx() {\n-                return pool.stride * idx + V0;\n-            }\n-\n-            public F32Vec2 v0() {\n-                return pool.entries[v0Idx()];\n-            }\n-\n-            int v1Idx() {\n-                return pool.stride * idx + V1;\n-            }\n-\n-            public F32Vec2 v1() {\n-                return pool.entries[v1Idx()];\n-            }\n-\n-            int v2Idx() {\n-                return pool.stride * idx + V2;\n-            }\n-\n-            public F32Vec2 v2() {\n-                return pool.entries[v2Idx()];\n-            }\n-\n-            int rgbIdx() {\n-                return idx;\n-            }\n-\n-            public int rgb() {return pool.rgbs[rgbIdx()];}\n-        }\n-\n-        public final F32Vec2 entries[];\n-        public final int rgbs[];\n-\n-        F32Triangle2DPool(int max) {\n-            super(3, max);\n-            this.entries = new F32Vec2[max * stride];\n-            this.rgbs = new int[max];\n-        }\n-\n-        @Override\n-        public F32Triangle2D.F32Triangle2DPool.Idx idx(int idx) {\n-            return new F32Triangle2D.F32Triangle2DPool.Idx(this, idx);\n-        }\n-\n-        public F32Triangle2D of(F32Vec2 v0, F32Vec2 v1, F32Vec2 v2, int rgb) {\n-            var i = idx(count++);\n-            var side = false;\/\/side(v0.x(),v0.y(), v1, v2) > 0; \/\/ We need the triangle to be clock wound\n-            entries[i.v0Idx()] = v0;\n-            entries[i.v1Idx()] = side?v1:v2;\n-            entries[i.v2Idx()] = side?v2:v1;\n-            rgbs[i.rgbIdx()] = rgb;\n-            return i;\n-        }\n-    }\n-\n-    \/*\n-           return (\n-               v1.Y() - v0.Y() * (v.X() - v0.X()) + (-v1.X() + v0.X()) * (v.Y() - v0.Y())\n-               );\n-\n-     *\/\n-    \/*\n-       return (v1.Y() - v0.Y() * (v.X() - v0.X()) + (-v1.X() + v0.X()) * (v.Y() - v0.Y()));\n-\n-     *\/\n-\n-    F32Triangle2DPool f32Triangle2DPool = new F32Triangle2DPool(12800);\n-\n-    static float side(float x,float y, F32Vec2 v0, F32Vec2 v1) {\n-         return    (v1.y() - v0.y() * (x - v0.x()) + (-v1.x() + v0.x()) * (y - v0.y()));\n-    }\n-\n-    \/*\n-              V0                V0\n-              |  \\              |  \\\n-              |    \\            |    \\        P2\n-              |  P1  \\          |      \\\n-              V1------V0        V1------V0\n-\n-\n-Barycentric coordinate allows to express new p coordinates as a linear combination of p1, p2, p3.\n- More precisely, it defines 3 scalars a, b, c such that :\n-\n-x = a * x1 + b * x2  + c * x3\n-y = a * y1 + b * y2 + c * y3\n-a + b + c = 1\n-\n-\n-a = ((y2 - y3)*(x - x3) + (x3 - x2)*(y - y3)) \/ ((y2 - y3)*(x1 - x3) + (x3 - x2)*(y1 - y3))\n-b = ((y3 - y1)*(x - x3) + (x1 - x3)*(y - y3)) \/ ((y2 - y3)*(x1 - x3) + (x3 - x2)*(y1 - y3))\n-c = 1 - a - b\n-\n-p lies in T if and only if 0 <= a <= 1 and 0 <= b <= 1 and 0 <= c <= 1\n-*\/\n-\n-    static boolean intriangle (float x, float y, float x0, float y0, float x1, float y1, float x2, float y2) {\n-        var denominator = ((y1 - y2)*(x0 - x2) + (x2 - x1)*(y0 - y2));\n-        var a = ((y1 - y2)*(x - x2) + (x2 - x1)*(y - y2)) \/ denominator;\n-        var b = ((y2 - y0)*(x - x2) + (x0 - x2)*(y - y2)) \/ denominator;\n-        var c = 1 - a - b;\n-        return 0 <= a && a <= 1 && 0 <= b && b <= 1 && 0 <= c && c <= 1;\n-    }\n-    static boolean intriangle(float x, float y,  F32Vec2 v0, F32Vec2 v1, F32Vec2 v2) {\n-        return intriangle(x,y, v0.x(), v0.y(), v1.x(), v1.y(),v2.x(), v2.y());\n-    }\n-\n-    static boolean intriangle(float x, float y,  F32Triangle2D tri) {\n-       return intriangle(x,y, tri.v0(), tri.v1(),tri.v2());\n-    }\n-\n-    static boolean online(float x, float y,  F32Vec2 v0, F32Vec2 v1, float deltaSquare) {\n-        float dxl = v1.x() - v0.x();\n-        float dyl = v1.y() - v0.y();;\n-        float cross = (x - v0.x()) * dyl - (y - v0.y()) * dxl;\n-        if ((cross * cross) < deltaSquare) {\n-            if (dxl * dxl >= dyl * dyl)\n-                return dxl > 0 ? v0.x() <= x && x <= v1.x() : v1.x() <= x && x <= v0.x();\n-            else\n-                return dyl > 0 ? v0.y() <= y && y <= v1.y() : v1.y() <= y && y <= v0.y();\n-        } else {\n-            return false;\n-        }\n-    }\n-\n-    float deltaSquare = 2000f;\n-\n-    static boolean onedge(float x, float y, F32Triangle2D tri) {\n-        return online(x, y, tri.v0(), tri.v1(), deltaSquare)\n-                || online(x, y,tri.v1(),tri.v2(), deltaSquare)\n-                || online(x, y, tri.v2(),tri.v0(), deltaSquare);\n-    }\n-\n-    static  boolean useRgb(boolean filled, float x, float y,  F32Triangle2D tri){\n-        return filled? intriangle(x,y,tri):onedge(x,y,tri);\n-    }\n-\n-    static  int rgb(boolean filled, float x, float y,  F32Triangle2D tri, int rgb){\n-        return useRgb(filled,x,y,tri)? tri.rgb() : rgb;\n-    }\n-\n-\n-}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/F32Triangle2D.java","additions":0,"deletions":189,"binary":false,"changes":189,"status":"deleted"},{"patch":"@@ -1,159 +0,0 @@\n-\/*\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-package view.f32;\n-\n-import java.util.ArrayList;\n-import java.util.List;\n-\n-public interface F32Triangle3D {\n-    F32Vec3 v0();\n-\n-    F32Vec3 v1();\n-\n-    F32Vec3 v2();\n-\n-    int rgb();\n-\n-    default String asString() {\n-        return v0().asString() + \" -> \" + v1().asString() + \" -> \" + v2().asString() + \" =\" + String.format(\"0x%8x\", rgb());\n-    }\n-\n-    class F32Triangle3DPool extends Pool<F32Triangle3DPool> {\n-        static int V0 = 0;\n-        static int V1 = 1;\n-        static int V2 = 2;\n-        static int RGB = 3;\n-\n-        public record Idx(F32Triangle3DPool pool, int idx) implements Pool.Idx<F32Triangle3DPool>, F32Triangle3D {\n-            int v0Idx() {\n-                return pool.stride * idx + V0;\n-            }\n-\n-            public F32Vec3 v0() {\n-                return pool.entries[v0Idx()];\n-            }\n-\n-            int v1Idx() {\n-                return pool.stride * idx + V1;\n-            }\n-\n-            public F32Vec3 v1() {\n-                return pool.entries[v1Idx()];\n-            }\n-\n-            int v2Idx() {\n-                return pool.stride * idx + V2;\n-            }\n-\n-            public F32Vec3 v2() {\n-                return pool.entries[v2Idx()];\n-            }\n-\n-            int rgbIdx() {\n-                return idx;\n-            }\n-\n-            public int rgb() {return pool.rgbs[rgbIdx()];}\n-        }\n-\n-        public final F32Vec3 entries[];\n-        public final int rgbs[];\n-\n-        F32Triangle3DPool(int max) {\n-            super(3, max);\n-            this.entries = new F32Vec3[max * stride];\n-            this.rgbs = new int[max];\n-        }\n-\n-        @Override\n-        public Idx idx(int idx) {\n-            return new Idx(this, idx);\n-        }\n-\n-        public F32Triangle3D of(F32Vec3 v0, F32Vec3 v1, F32Vec3 v2, int rgb) {\n-            var i = idx(count++);\n-            entries[i.v0Idx()] = v0;\n-            entries[i.v1Idx()] = v1;\n-            entries[i.v2Idx()] = v2;\n-            rgbs[i.rgbIdx()] = rgb;\n-            return i;\n-        }\n-    }\n-\n-    F32Triangle3DPool f32Triangle3DPool = new F32Triangle3DPool(12800);\n-\n-     \/*\n-       v0----v1         v0----v2\n-        \\    |           \\    |\n-         \\   |            \\   |\n-          \\  |    --->     \\  |\n-           \\ |              \\ |\n-            \\|               \\|\n-             v2               v1\n-   *\/\n-\n-    static F32Triangle3D rewind(F32Triangle3D i) {\n-        var temp = i.v1();\n-        ((F32Triangle3D.F32Triangle3DPool.Idx) i).pool.entries[((F32Triangle3D.F32Triangle3DPool.Idx) i).v1Idx()] = i.v2();\n-        ((F32Triangle3D.F32Triangle3DPool.Idx) i).pool.entries[((F32Triangle3D.F32Triangle3DPool.Idx) i).v2Idx()] = temp;\n-        return i;\n-    }\n-\n-    static F32Triangle3D mulMat4(F32Triangle3D i, F32Matrix4x4 m4) {\n-        return f32Triangle3DPool.of(F32Vec3.mulMat4(i.v0(), m4), F32Vec3.mulMat4(i.v1(), m4), F32Vec3.mulMat4(i.v2(), m4), i.rgb());\n-    }\n-\n-    static F32Triangle3D addVec3(F32Triangle3D i, F32Vec3 v3) {\n-        return f32Triangle3DPool.of(F32Vec3.addVec3(i.v0(), v3), F32Vec3.addVec3(i.v1(), v3), F32Vec3.addVec3(i.v2(), v3), i.rgb());\n-    }\n-\n-    static F32Triangle3D mulScaler(F32Triangle3D i, float s) {\n-        return f32Triangle3DPool.of(F32Vec3.mulScaler(i.v0(), s), F32Vec3.mulScaler(i.v1(), s), F32Vec3.mulScaler(i.v2(), s), i.rgb());\n-    }\n-\n-    static F32Triangle3D addScaler(F32Triangle3D i, float s) {\n-        return f32Triangle3DPool.of(F32Vec3.addScaler(i.v0(), s), F32Vec3.addScaler(i.v1(), s), F32Vec3.addScaler(i.v2(), s), i.rgb());\n-    }\n-\n-    static F32Vec3 getCentre(F32Triangle3D i) {\/\/ the average of all the vertices\n-        return F32Vec3.divScaler(getVectorSum(i), 3);\n-    }\n-\n-    static F32Vec3 getVectorSum(F32Triangle3D i) {\/\/ the sum of all the vertices\n-        return F32Vec3.addVec3(F32Vec3.addVec3(i.v0(), i.v1()), i.v2());\n-    }\n-\n-    static F32Vec3 normal(F32Triangle3D i) {\n-        F32Vec3 line1Vec3 = F32Vec3.subVec3(i.v1(), i.v0());\n-        F32Vec3 line2Vec3 = F32Vec3.subVec3(i.v2(), i.v0());\n-        return F32Vec3.crossProd(line1Vec3, line2Vec3);\n-    }\n-\n-    static F32Vec3 normalSumOfSquares(F32Triangle3D i) {\n-        return F32Vec3.divScaler(normal(i), F32Vec3.sumOfSquares(normal(i)));\n-    }\n-\n-\n-}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/F32Triangle3D.java","additions":0,"deletions":159,"binary":false,"changes":159,"status":"deleted"},{"patch":"@@ -1,80 +0,0 @@\n-\n-\/*\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-package view.f32;\n-\n-import java.util.ArrayList;\n-import java.util.List;\n-\n-public interface F32Vec2 {\n-    float x();\n-    float y();\n-\n-    static void reset(int markedVec2) {\n-        F32Vec2.f32Vec2Pool.count = markedVec2;\n-    }\n-\n-    class F32Vec2Pool extends FloatPool<F32Vec2.F32Vec2Pool> {\n-        public static int X = 0;\n-        public static int Y = 1;\n-        public record Idx(F32Vec2Pool pool, int idx) implements Pool.Idx<F32Vec2.F32Vec2Pool>, F32Vec2 {\n-            private int xIdx() {\n-                return pool.stride * idx + X;\n-            }\n-\n-            @Override\n-            public float x() {\n-                return pool.entries[xIdx()];\n-            }\n-\n-            private int yIdx() {\n-                return pool.stride * idx + Y;\n-            }\n-\n-            @Override\n-            public float y() {\n-                return pool.entries[yIdx()];\n-            }\n-\n-        }\n-\n-        F32Vec2Pool(int max) {\n-            super(2, max);\n-        }\n-\n-        @Override\n-        F32Vec2.F32Vec2Pool.Idx idx(int idx) {\n-            return new F32Vec2.F32Vec2Pool.Idx(this, idx);\n-        }\n-\n-        public F32Vec2.F32Vec2Pool.Idx of(float x, float y) {\n-            F32Vec2.F32Vec2Pool.Idx i = idx(count++);\n-            entries[i.xIdx()] = x;\n-            entries[i.yIdx()] = y;\n-            return i;\n-        }\n-    }\n-    F32Vec2Pool f32Vec2Pool = new F32Vec2Pool(12000);\n-}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/F32Vec2.java","additions":0,"deletions":80,"binary":false,"changes":80,"status":"deleted"},{"patch":"@@ -1,197 +0,0 @@\n-\/*\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-package view.f32;\n-\n-public interface F32Vec3 {\n-    float x();\n-\n-    float y();\n-\n-    float z();\n-\n-\n-    default String asString() {\n-        return x() + \",\" + y() + \",\" + z();\n-    }\n-\n-\n-    class F32Vec3Pool extends FloatPool<F32Vec3Pool> {\n-        public static int X = 0;\n-        public static int Y = 1;\n-        public static int Z = 2;\n-\n-        public record Idx(F32Vec3Pool pool, int idx) implements Pool.Idx<F32Vec3Pool>, F32Vec3 {\n-            private int xIdx() {\n-                return pool.stride * idx + X;\n-            }\n-\n-            @Override\n-            public float x() {\n-                return pool.entries[xIdx()];\n-            }\n-\n-            private int yIdx() {\n-                return pool.stride * idx + Y;\n-            }\n-\n-            @Override\n-            public float y() {\n-                return pool.entries[yIdx()];\n-            }\n-\n-            private int zIdx() {\n-                return pool.stride * idx + Z;\n-            }\n-\n-            @Override\n-            public float z() {\n-                return pool.entries[zIdx()];\n-            }\n-        }\n-\n-        F32Vec3Pool(int max) {\n-            super(3, max);\n-        }\n-\n-        @Override\n-        Idx idx(int idx) {\n-            return new Idx(this, idx);\n-        }\n-\n-        public F32Vec3Pool.Idx of(float x, float y, float z) {\n-            F32Vec3Pool.Idx i = idx(count++);\n-            entries[i.xIdx()] = x;\n-            entries[i.yIdx()] = y;\n-            entries[i.zIdx()] = z;\n-            return i;\n-        }\n-    }\n-\n-    F32Vec3Pool f32Vec3Pool = new F32Vec3Pool(90000);\n-\n-    \/\/ return another vec3 after multiplying by m4\n-    \/\/ we pad this vec3 to vec 4 with '1' as w\n-    \/\/ we normalize the result\n-\n-\n-    static F32Vec3 mulMat4(F32Vec3 f32Vec3, F32Matrix4x4 m) {\n-        F32Vec3 o = f32Vec3Pool.of(\n-                f32Vec3.x() * m.x0y0() + f32Vec3.y() * m.x0y1() + f32Vec3.z() * m.x0y2() + 1f * m.x0y3(),\n-                f32Vec3.x() * m.x1y0() + f32Vec3.y() * m.x1y1() + f32Vec3.z() * m.x1y2() + 1f * m.x1y3(),\n-                f32Vec3.x() * m.x2y0() + f32Vec3.y() * m.x2y1() + f32Vec3.z() * m.x2y2() + 1f * m.x2y3()\n-        );\n-        float w = f32Vec3.x() * m.x3y0() + f32Vec3.y() * m.x3y1() + f32Vec3.z() * m.x3y2() + 1f * m.x3y3();\n-      \/\/  if (w!=0.0) {\n-            o = F32Vec3.divScaler(o, w);\n-       \/\/ }\n-        return o;\n-    }\n-\n-    static F32Vec3 mulScaler(F32Vec3 i, float s) {\n-        return f32Vec3Pool.of(i.x() * s, i.y() * s, i.z() * s);\n-    }\n-\n-    static F32Vec3 addScaler(F32Vec3 i, float s) {\n-\n-        return f32Vec3Pool.of(i.x() + s, i.y() + s, i.z() + s);\n-    }\n-\n-    static F32Vec3 divScaler(F32Vec3 i, float s) {\n-        if (s==0){\n-            return i;\n-        }\n-        return f32Vec3Pool.of(i.x() \/ s, i.y() \/ s, i.z() \/ s);\n-    }\n-\n-    static F32Vec3 addVec3(F32Vec3 lhs, F32Vec3 rhs) {\n-        return f32Vec3Pool.of(lhs.x() + rhs.x(), lhs.y() + rhs.y(), lhs.z() + rhs.z());\n-    }\n-\n-    static F32Vec3 subVec3(F32Vec3 lhs, F32Vec3 rhs) {\n-        return f32Vec3Pool.of(lhs.x() - rhs.x(), lhs.y() - rhs.y(), lhs.z() - rhs.z());\n-    }\n-\n-    static F32Vec3 mulVec3(F32Vec3 lhs, F32Vec3 rhs) {\n-        return f32Vec3Pool.of(lhs.x() * rhs.x(), lhs.y() * rhs.y(), lhs.z() * rhs.z());\n-    }\n-\n-    static F32Vec3 divVec3(F32Vec3 lhs, F32Vec3 rhs) {\n-        return f32Vec3Pool.of(lhs.x() \/ rhs.x(), lhs.y() \/ rhs.y(), lhs.z() \/ rhs.z());\n-    }\n-\n-    static float sumOfSquares(F32Vec3 i) {\n-        return i.x() * i.x() + i.y() * i.y() + i.z() * i.z();\n-    }\n-\n-    static float sumOf(F32Vec3 i) {\n-        return i.x() + i.y() + i.z();\n-    }\n-\n-    static float hypot(F32Vec3 i) {\n-        return (float) Math.sqrt(sumOfSquares(i));\n-    }\n-\n-    \/*\n-        lhs= | 1|   rhs= | 2|\n-             | 3|        | 7|\n-             | 4|        |-5|\n-\n-        lhs xprod rhs = | x  y  z| =  | 3  4|x - | 1  4|y  | 1  3|\n-                        | 1  3  4|    | 7 -5|    | 2 -5|   | 2  7|\n-                        | 2  7 -5|\n-\n-                      = (-15-28)x - (-5 -8)y + (7 - 6)z\n-\n-                      = -43x - (-13)y +1z\n-                      = -43x + 14y +z\n-\n-     *\/\n-\n-    static F32Vec3 crossProd(F32Vec3 lhs, F32Vec3 rhs) {\n-        return f32Vec3Pool.of(\n-                lhs.y() * rhs.z() - lhs.z() * rhs.x(),\n-                lhs.z() * rhs.x() - lhs.x() * rhs.z(),\n-                lhs.x() * rhs.y() - lhs.y() * rhs.x());\n-\n-    }\n-\n-    \/*\n-        lhs= | 1|   rhs= | 2|\n-             | 3|        | 7|\n-             | 4|        |-5|\n-\n-        lhs0*rhs0 + lhs1*rhs1 + lhs2*rhs2\n-         1  * 2   +  3  * 7   +  4  *-5\n-\n-            3     +    21     +   -20\n-\n-                       4\n-\n-     *\/\n-\n-    static float dotProd(F32Vec3 lhs, F32Vec3 rhs) {\n-        return lhs.x() * rhs.x() + lhs.y() * rhs.y() + lhs.z() * rhs.z();\n-    }\n-}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/F32Vec3.java","additions":0,"deletions":197,"binary":false,"changes":197,"status":"deleted"},{"patch":"@@ -0,0 +1,41 @@\n+\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32;\n+\n+import view.f32.factories.Factory16;\n+import view.f32.factories.Factory2;\n+import view.f32.pool.F32x2Pool;\n+\n+public interface F32x2 {\n+    float x();\n+    float y();\n+\n+\n+    @FunctionalInterface\n+    interface Factory extends Factory2<Float,Float,F32x2> {\n+    }\n+   \/\/ Factory factory = f32x2Pool;\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/F32x2.java","additions":41,"deletions":0,"binary":false,"changes":41,"status":"added"},{"patch":"@@ -0,0 +1,48 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32;\n+\n+import view.f32.factories.Factory3;\n+import view.f32.factories.Factory4;\n+import view.f32.pool.F32x2TrianglePool;\n+\n+public interface F32x2Triangle {\n+    F32x2 v0();\n+\n+    F32x2 v1();\n+\n+    F32x2 v2();\n+\n+    int rgb();\n+\n+      @FunctionalInterface\n+    interface Factory extends Factory4<F32x2,F32x2,F32x2,Integer,F32x2Triangle> {\n+    }\n+\n+\n+    float deltaSquare = 2000f;\n+\n+\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/F32x2Triangle.java","additions":48,"deletions":0,"binary":false,"changes":48,"status":"added"},{"patch":"@@ -0,0 +1,49 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32;\n+\n+import view.f32.factories.Factory2;\n+import view.f32.factories.Factory3;\n+import view.f32.pool.F32x3Pool;\n+\n+public interface F32x3 {\n+    float x();\n+\n+    float y();\n+\n+    float z();\n+\n+\n+    default String asString() {\n+        return x() + \",\" + y() + \",\" + z();\n+    }\n+\n+\n+     @FunctionalInterface\n+    interface Factory extends Factory3<Float,Float,Float,F32x3> {\n+    }\n+\n+\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/F32x3.java","additions":49,"deletions":0,"binary":false,"changes":49,"status":"added"},{"patch":"@@ -0,0 +1,49 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32;\n+\n+import view.f32.factories.Factory4;\n+import view.f32.pool.F32x3TrianglePool;\n+\n+public interface F32x3Triangle {\n+    F32x3 v0();\n+\n+    F32x3 v1();\n+\n+    F32x3 v2();\n+\n+    int rgb();\n+\n+    default String asString() {\n+        return v0().asString() + \" -> \" + v1().asString() + \" -> \" + v2().asString() + \" =\" + String.format(\"0x%8x\", rgb());\n+    }\n+\n+\n+    @FunctionalInterface\n+    interface Factory extends Factory4<F32x3,F32x3,F32x3,Integer,F32x3Triangle> {\n+    }\n+\n+\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/F32x3Triangle.java","additions":49,"deletions":0,"binary":false,"changes":49,"status":"added"},{"patch":"@@ -0,0 +1,90 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32;\n+\n+\n+import view.f32.factories.Factory16;\n+import view.f32.pool.F32x4x4Pool;\n+\n+public interface F32x4x4 {\n+    float x0y0();\n+\n+    float x1y0();\n+\n+    float x2y0();\n+\n+    float x3y0();\n+\n+    float x0y1();\n+\n+    float x1y1();\n+\n+    float x2y1();\n+\n+    float x3y1();\n+\n+    float x0y2();\n+\n+    float x1y2();\n+\n+    float x2y2();\n+\n+    float x3y2();\n+\n+    float x0y3();\n+\n+    float x1y3();\n+\n+    float x2y3();\n+\n+    float x3y3();\n+\n+    default String asString() {\n+\n+        return String.format(\"\"\"\n+                        |%5.2f, %5.2f, %5.2f, %5.2f|\n+                        |%5.2f, %5.2f, %5.2f, %5.2f|\n+                        |%5.2f, %5.2f, %5.2f, %5.2f|\n+                        |%5.2f, %5.2f, %5.2f, %5.2f|\n+                        \"\"\",\n+                x0y0(), x1y0(), x2y0(), x3y0(),\n+                x0y1(), x1y1(), x2y1(), x3y1(),\n+                x0y2(), x1y2(), x2y2(), x3y2(),\n+                x0y3(), x1y3(), x2y3(), x3y3());\n+    }\n+\n+\n+\n+    @FunctionalInterface\n+    interface Factory extends Factory16<\n+            Float,Float,Float,Float,\n+            Float,Float,Float,Float,\n+            Float,Float,Float,Float,\n+            Float,Float,Float,Float,F32x4x4>{\n+\n+    }\n+\n+\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/F32x4x4.java","additions":90,"deletions":0,"binary":false,"changes":90,"status":"added"},{"patch":"@@ -1,33 +0,0 @@\n-\/*\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-package view.f32;\n-\n-public abstract class FloatPool<T extends FloatPool<T>> extends Pool<T> {\n-    public final float entries[];\n-    FloatPool(int stride, int max) {\n-        super(stride,max);\n-        this.entries = new float[max * stride];\n-    }\n-}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/FloatPool.java","additions":0,"deletions":33,"binary":false,"changes":33,"status":"deleted"},{"patch":"@@ -27,0 +27,7 @@\n+import view.ViewFrame;\n+import view.f32.pool.F32x2Pool;\n+import view.f32.pool.F32x2TrianglePool;\n+import view.f32.pool.F32x3Pool;\n+import view.f32.pool.F32x3TrianglePool;\n+import view.f32.pool.F32x4x4Pool;\n+\n@@ -35,1 +42,6 @@\n-        this(F32Triangle3D.f32Triangle3DPool.count, F32Triangle2D.f32Triangle2DPool.count, F32Vec2.f32Vec2Pool.count, F32Vec3.f32Vec3Pool.count, F32Matrix4x4.f32matrix4x4Pool.count);\n+        this(\n+                ((F32x3TrianglePool)ViewFrame.f32.f32x3TriangleFactory()).count,\n+                ((F32x2TrianglePool)ViewFrame.f32.f32x2TriangleFactory()).count,\n+                ((F32x2Pool)ViewFrame.f32.f32x2Factory()).count,\n+                ((F32x3Pool)ViewFrame.f32.f32x3Factory()).count,\n+                ((F32x4x4Pool)ViewFrame.f32.f32x4x4Factory()).count);\n@@ -40,2 +52,2 @@\n-        F32Triangle2D.reset(markedTriangles2D);\n-        F32Vec2.reset(markedVec2);\n+        ((F32x2TrianglePool)ViewFrame.f32.f32x2TriangleFactory()).reset(markedTriangles2D);\n+        ((F32x2Pool)ViewFrame.f32.f32x2Factory()).reset(markedVec2);\n@@ -45,3 +57,3 @@\n-        F32Triangle3D.f32Triangle3DPool.count = markedTriangles3D;\n-        F32Vec3.f32Vec3Pool.count = markedVec3;\n-        F32Matrix4x4.f32matrix4x4Pool.count = markedMat4;\n+        ((F32x3TrianglePool)ViewFrame.f32.f32x3TriangleFactory()).count = markedTriangles3D;\n+        ((F32x3Pool)ViewFrame.f32.f32x3Factory()).count = markedVec3;\n+        ((F32x4x4Pool)ViewFrame.f32.f32x4x4Factory()).count = markedMat4;\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/ModelHighWaterMark.java","additions":18,"deletions":6,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -1,43 +0,0 @@\n-\/*\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-package view.f32;\n-\n-public abstract class Pool<T extends Pool<T>> {\n-    interface Idx<T extends Pool<T>>{\n-        T pool();\n-        int idx();\n-        default int idx(int offset){\n-            return idx()+offset;\n-        }\n-    }\n-    public final int max;\n-    public final int stride;\n-    public int count = 0;\n-    Pool(int stride, int max) {\n-        this.stride = stride;\n-        this.max = max;\n-    }\n-    abstract Idx<T> idx(int idx);\n-}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/Pool.java","additions":0,"deletions":43,"binary":false,"changes":43,"status":"deleted"},{"patch":"@@ -28,0 +28,2 @@\n+import view.ViewFrame;\n+\n@@ -43,4 +45,4 @@\n-    public ZPos(F32Triangle3D t, float howVisible) {\n-        F32Vec3 v0 = t.v0();\n-        F32Vec3 v1 = t.v1();\n-        F32Vec3 v2 = t.v2();\n+    public ZPos(F32x3Triangle t, float howVisible) {\n+        F32x3 v0 = t.v0();\n+        F32x3 v1 = t.v1();\n+        F32x3 v2 = t.v2();\n@@ -62,1 +64,1 @@\n-    public F32Triangle2D create() {\n+    public F32x2Triangle create() {\n@@ -82,4 +84,4 @@\n-        F32Vec2 v0 = F32Vec2.f32Vec2Pool.of(x0,y0);\n-        F32Vec2 v1 = F32Vec2.f32Vec2Pool.of(x1,y1);\n-        F32Vec2 v2 = F32Vec2.f32Vec2Pool.of(x2,y2);\n-        return F32Triangle2D.f32Triangle2DPool.of(v0,v1,v2, (r & 0xff) << 16 | (g & 0xff) << 8 | (b & 0xff));\n+        F32x2 v0 = ViewFrame.f32.f32x2Factory().of(x0,y0);\n+        F32x2 v1 = ViewFrame.f32.f32x2Factory().of(x1,y1);\n+        F32x2 v2 = ViewFrame.f32.f32x2Factory().of(x2,y2);\n+        return ViewFrame.f32.f32x2TriangleFactory().of(v0,v1,v2, (r & 0xff) << 16 | (g & 0xff) << 8 | (b & 0xff));\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/ZPos.java","additions":11,"deletions":9,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -0,0 +1,40 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32.factories;\n+\n+@FunctionalInterface\n+public\n+interface Factory16<T1, T2, T3, T4,\n+                    T5, T6, T7, T8,\n+        T9, T10, T11, T12,\n+        T13, T14, T15, T16,\n+        R> {\n+    R of(\n+            T1 var1, T2 var2, T3 var3, T4 var4,\n+            T5 var5, T6 var6, T7 var7, T8 var8,\n+            T9 var9, T10 var10, T11 var11, T12 var12,\n+            T13 var13, T14 var14, T15 var15, T16 var16\n+    );\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/factories\/Factory16.java","additions":40,"deletions":0,"binary":false,"changes":40,"status":"added"},{"patch":"@@ -0,0 +1,31 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32.factories;\n+\n+@FunctionalInterface\n+public\n+interface Factory2<T1, T2, R> {\n+    R of(T1 var1, T2 var2);\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/factories\/Factory2.java","additions":31,"deletions":0,"binary":false,"changes":31,"status":"added"},{"patch":"@@ -0,0 +1,31 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32.factories;\n+\n+@FunctionalInterface\n+public\n+interface Factory3<T1, T2, T3, R> {\n+    R of(T1 var1, T2 var2, T3 var3);\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/factories\/Factory3.java","additions":31,"deletions":0,"binary":false,"changes":31,"status":"added"},{"patch":"@@ -0,0 +1,31 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32.factories;\n+\n+@FunctionalInterface\n+public\n+interface Factory4<T1, T2, T3, T4, R> {\n+    R of(T1 var1, T2 var2, T3 var3, T4 var4);\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/factories\/Factory4.java","additions":31,"deletions":0,"binary":false,"changes":31,"status":"added"},{"patch":"@@ -0,0 +1,35 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32.pool;\n+\n+public abstract class F32Pool<T extends F32Pool<T>> extends Pool<T> {\n+    public final float floatEntries[];\n+    protected final int stride;\n+    F32Pool(int stride, int max) {\n+        super(max);\n+        this.stride=stride;\n+        this.floatEntries = new float[max * stride];\n+    }\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/pool\/F32Pool.java","additions":35,"deletions":0,"binary":false,"changes":35,"status":"added"},{"patch":"@@ -0,0 +1,74 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32.pool;\n+\n+import view.f32.F32x2;\n+import view.f32.factories.Factory2;\n+\n+public class F32x2Pool extends F32Pool<F32x2Pool> implements F32x2.Factory {\n+    public static int X = 0;\n+    public static int Y = 1;\n+\n+\n+\n+\n+    public record PoolEntry(F32x2Pool pool, int idx) implements Pool.PoolEntry<F32x2Pool>, F32x2 {\n+        private int xIdx() {\n+            return pool.stride * idx + X;\n+        }\n+\n+        @Override\n+        public float x() {\n+            return pool.floatEntries[xIdx()];\n+        }\n+\n+        private int yIdx() {\n+            return pool.stride * idx + Y;\n+        }\n+\n+        @Override\n+        public float y() {\n+            return pool.floatEntries[yIdx()];\n+        }\n+\n+    }\n+\n+    public F32x2Pool(int max) {\n+        super(2, max);\n+    }\n+\n+    @Override\n+    PoolEntry entry(int idx) {\n+        return new PoolEntry(this, idx);\n+    }\n+\n+    @Override\n+    public F32x2 of(Float x, Float y) {\n+        PoolEntry i = entry(count++);\n+        floatEntries[i.xIdx()] = x;\n+        floatEntries[i.yIdx()] = y;\n+        return i;\n+    }\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/pool\/F32x2Pool.java","additions":74,"deletions":0,"binary":false,"changes":74,"status":"added"},{"patch":"@@ -0,0 +1,101 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32.pool;\n+\n+import view.f32.F32;\n+import view.f32.F32x2;\n+import view.f32.F32x2Triangle;\n+import view.f32.F32x3Triangle;\n+import view.f32.factories.Factory4;\n+\n+public class F32x2TrianglePool extends Pool<F32x2TrianglePool> implements F32x2Triangle.Factory {\n+    static int V0 = 0;\n+    static int V1 = 1;\n+    static int V2 = 2;\n+\n+\n+\n+    public record PoolEntry(F32x2TrianglePool pool, int idx) implements Pool.PoolEntry<F32x2TrianglePool>, F32x2Triangle {\n+        int v0Idx() {\n+            return pool.vecStride * idx + V0;\n+        }\n+\n+        public F32x2 v0() {\n+            return pool.f32X2Entries[v0Idx()];\n+        }\n+\n+        int v1Idx() {\n+            return pool.vecStride * idx + V1;\n+        }\n+\n+        public F32x2 v1() {\n+            return pool.f32X2Entries[v1Idx()];\n+        }\n+\n+        int v2Idx() {\n+            return pool.vecStride * idx + V2;\n+        }\n+\n+        public F32x2 v2() {\n+            return pool.f32X2Entries[v2Idx()];\n+        }\n+\n+        int rgbIdx() {\n+            return idx;\n+        }\n+\n+        public int rgb() {\n+            return pool.rgbEntries[rgbIdx()];\n+        }\n+    }\n+\n+    public final F32x2 f32X2Entries[];\n+    private final int vecStride = 3;\n+    public final int rgbEntries[];\n+    private final int rgbStride = 1;\n+\n+    public F32x2TrianglePool(int max) {\n+        super(max);\n+        this.f32X2Entries = new F32x2[max * vecStride];\n+        this.rgbEntries = new int[max * rgbStride];\n+    }\n+\n+    @Override\n+    public PoolEntry entry(int idx) {\n+        return new PoolEntry(this, idx);\n+    }\n+\n+\n+    @Override\n+    public F32x2Triangle of(F32x2 v0, F32x2 v1, F32x2 v2, Integer rgb) {\n+        var i = entry(count++);\n+        var side = F32.side(v0.x(), v0.y(), v1, v2) > 0; \/\/ We need the triangle to be clock wound\n+        f32X2Entries[i.v0Idx()] = v0;\n+        f32X2Entries[i.v1Idx()] = side ? v1 : v2;\n+        f32X2Entries[i.v2Idx()] = side ? v2 : v1;\n+        rgbEntries[i.rgbIdx()] = rgb;\n+        return i;\n+    }\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/pool\/F32x2TrianglePool.java","additions":101,"deletions":0,"binary":false,"changes":101,"status":"added"},{"patch":"@@ -0,0 +1,82 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32.pool;\n+\n+import view.f32.F32x2;\n+import view.f32.F32x3;\n+import view.f32.factories.Factory3;\n+\n+public class F32x3Pool extends F32Pool<F32x3Pool> implements F32x3.Factory {\n+    private final static int X = 0;\n+    private final static int Y = 1;\n+    private final static int Z = 2;\n+\n+    public record PoolEntry(F32x3Pool pool, int idx) implements Pool.PoolEntry<F32x3Pool>, F32x3 {\n+        private int xIdx() {\n+            return pool.stride * idx + X;\n+        }\n+\n+        @Override\n+        public float x() {\n+            return pool.floatEntries[xIdx()];\n+        }\n+\n+        private int yIdx() {\n+            return pool.stride * idx + Y;\n+        }\n+\n+        @Override\n+        public float y() {\n+            return pool.floatEntries[yIdx()];\n+        }\n+\n+        private int zIdx() {\n+            return pool.stride * idx + Z;\n+        }\n+\n+        @Override\n+        public float z() {\n+            return pool.floatEntries[zIdx()];\n+        }\n+    }\n+\n+    public F32x3Pool(int max) {\n+        super(3, max);\n+    }\n+\n+    @Override\n+    PoolEntry entry(int idx) {\n+        return new PoolEntry(this, idx);\n+    }\n+\n+    @Override\n+    public F32x3 of(Float x, Float y, Float z) {\n+        PoolEntry i = entry(count++);\n+        floatEntries[i.xIdx()] = x;\n+        floatEntries[i.yIdx()] = y;\n+        floatEntries[i.zIdx()] = z;\n+        return i;\n+    }\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/pool\/F32x3Pool.java","additions":82,"deletions":0,"binary":false,"changes":82,"status":"added"},{"patch":"@@ -0,0 +1,99 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32.pool;\n+\n+import view.f32.F32x3;\n+import view.f32.F32x3Triangle;\n+import view.f32.factories.Factory4;\n+\n+public class F32x3TrianglePool extends Pool<F32x3TrianglePool> implements F32x3Triangle.Factory{\n+    private static final int V0 = 0;\n+    private static final int V1 = 1;\n+    private static final int V2 = 2;\n+\n+\n+\n+    public record PoolEntry(F32x3TrianglePool pool,\n+                            int idx) implements Pool.PoolEntry<F32x3TrianglePool>, F32x3Triangle {\n+        int v0Idx() {\n+            return F32x3TrianglePool.vecStride * idx + V0;\n+        }\n+\n+        public F32x3 v0() {\n+            return pool.f32x3Entries[v0Idx()];\n+        }\n+\n+        public int v1Idx() {\n+            return F32x3TrianglePool.vecStride * idx + V1;\n+        }\n+\n+        public F32x3 v1() {\n+            return pool.f32x3Entries[v1Idx()];\n+        }\n+\n+        public int v2Idx() {\n+            return F32x3TrianglePool.vecStride * idx + V2;\n+        }\n+\n+        public F32x3 v2() {\n+            return pool.f32x3Entries[v2Idx()];\n+        }\n+\n+        int rgbIdx() {\n+            return F32x3TrianglePool.rgbStride * idx;\n+        }\n+\n+        public int rgb() {\n+            return pool.rgbEntries[rgbIdx()];\n+        }\n+    }\n+\n+    public final F32x3 f32x3Entries[];\n+    private final static int vecStride = 3;\n+    public final int rgbEntries[];\n+    private final static int rgbStride = 1;\n+\n+    public F32x3TrianglePool(int max) {\n+        super(max);\n+        this.f32x3Entries = new F32x3[max * vecStride];\n+        this.rgbEntries = new int[max];\n+    }\n+\n+    @Override\n+    public PoolEntry entry(int idx) {\n+        return new PoolEntry(this, idx);\n+    }\n+\n+\n+    @Override\n+    public F32x3Triangle of(F32x3 v0, F32x3 v1, F32x3 v2, Integer rgb) {\n+        var i = entry(count++);\n+        f32x3Entries[i.v0Idx()] = v0;\n+        f32x3Entries[i.v1Idx()] = v1;\n+        f32x3Entries[i.v2Idx()] = v2;\n+        rgbEntries[i.rgbIdx()] = rgb;\n+        return i;\n+    }\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/pool\/F32x3TrianglePool.java","additions":99,"deletions":0,"binary":false,"changes":99,"status":"added"},{"patch":"@@ -0,0 +1,229 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32.pool;\n+\n+import view.f32.F32x4x4;\n+\n+public class F32x4x4Pool extends F32Pool<F32x4x4Pool> implements F32x4x4.Factory {\n+    static int X0Y0 = 0;\n+    static int X1Y0 = 1;\n+    static int X2Y0 = 2;\n+    static int X3Y0 = 3;\n+    static int X0Y1 = 4;\n+    static int X1Y1 = 5;\n+    static int X2Y1 = 6;\n+    static int X3Y1 = 7;\n+    static int X0Y2 = 8;\n+    static int X1Y2 = 9;\n+    static int X2Y2 = 10;\n+    static int X3Y2 = 11;\n+    static int X0Y3 = 12;\n+    static int X1Y3 = 13;\n+    static int X2Y3 = 14;\n+    static int X3Y3 = 15;\n+\n+\n+\n+\n+    public record PoolEntry(F32x4x4Pool pool, int idx) implements Pool.PoolEntry<F32x4x4Pool>, F32x4x4 {\n+        private int x0y0Idx() {\n+            return idx * pool.stride + X0Y0;\n+        }\n+\n+        private int x1y0Idx() {\n+            return idx * pool.stride + X1Y0;\n+        }\n+\n+        private int x2y0Idx() {\n+            return idx * pool.stride + X2Y0;\n+        }\n+\n+        private int x3y0Idx() {\n+            return idx * pool.stride + X3Y0;\n+        }\n+\n+        private int x0y1Idx() {\n+            return idx * pool.stride + X0Y1;\n+        }\n+\n+        private int x1y1Idx() {\n+            return idx * pool.stride + X1Y1;\n+        }\n+\n+        private int x2y1Idx() {\n+            return idx * pool.stride + X2Y1;\n+        }\n+\n+        private int x3y1Idx() {\n+            return idx * pool.stride + X3Y1;\n+        }\n+\n+        int x0y2Idx() {\n+            return idx * pool.stride + X0Y2;\n+        }\n+\n+        int x1y2Idx() {\n+            return idx * pool.stride + X1Y2;\n+        }\n+\n+        int x2y2Idx() {\n+            return idx * pool.stride + X2Y2;\n+        }\n+\n+        int x3y2Idx() {\n+            return idx * pool.stride + X3Y2;\n+        }\n+\n+        int x0y3Idx() {\n+            return idx * pool.stride + X0Y3;\n+        }\n+\n+        int x1y3Idx() {\n+            return idx * pool.stride + X1Y3;\n+        }\n+\n+        int x2y3Idx() {\n+            return idx * pool.stride + X2Y3;\n+        }\n+\n+        int x3y3Idx() {\n+            return idx * pool.stride + X3Y3;\n+        }\n+\n+        @Override\n+        public float x0y0() {\n+            return pool.floatEntries[x0y0Idx()];\n+        }\n+\n+        @Override\n+        public float x1y0() {\n+            return pool.floatEntries[x1y0Idx()];\n+        }\n+\n+        @Override\n+        public float x2y0() {\n+            return pool.floatEntries[x2y0Idx()];\n+        }\n+\n+        @Override\n+        public float x3y0() {\n+            return pool.floatEntries[x3y0Idx()];\n+        }\n+\n+        @Override\n+        public float x0y1() {\n+            return pool.floatEntries[x0y1Idx()];\n+        }\n+\n+        @Override\n+        public float x1y1() {\n+            return pool.floatEntries[x1y1Idx()];\n+        }\n+\n+        @Override\n+        public float x2y1() {\n+            return pool.floatEntries[x2y1Idx()];\n+        }\n+\n+        @Override\n+        public float x3y1() {\n+            return pool.floatEntries[x3y1Idx()];\n+        }\n+\n+        @Override\n+        public float x0y2() {\n+            return pool.floatEntries[x0y2Idx()];\n+        }\n+\n+        @Override\n+        public float x1y2() {\n+            return pool.floatEntries[x1y2Idx()];\n+        }\n+\n+        @Override\n+        public float x2y2() {\n+            return pool.floatEntries[x2y2Idx()];\n+        }\n+\n+        @Override\n+        public float x3y2() {\n+            return pool.floatEntries[x3y2Idx()];\n+        }\n+\n+        @Override\n+        public float x0y3() {\n+            return pool.floatEntries[x0y3Idx()];\n+        }\n+\n+        @Override\n+        public float x1y3() {\n+            return pool.floatEntries[x1y3Idx()];\n+        }\n+\n+        @Override\n+        public float x2y3() {\n+            return pool.floatEntries[x2y3Idx()];\n+        }\n+\n+        @Override\n+        public float x3y3() {\n+            return pool.floatEntries[x3y3Idx()];\n+        }\n+    }\n+\n+    public F32x4x4Pool(int max) {\n+        super(16, max);\n+    }\n+\n+    @Override\n+    PoolEntry entry(int idx) {\n+        return new PoolEntry(this, idx);\n+    }\n+@Override\n+    public F32x4x4 of(Float x0y0, Float x1y0, Float x2y0, Float x3y0,\n+                      Float x0y1, Float x1y1, Float x2y1, Float x3y1,\n+                      Float x0y2, Float x1y2, Float x2y2, Float x3y2,\n+                      Float x0y3, Float x1y3, Float x2y3, Float x3y3) {\n+        var i = entry(count++);\n+        floatEntries[i.x0y0Idx()] = x0y0;\n+        floatEntries[i.x1y0Idx()] = x1y0;\n+        floatEntries[i.x2y0Idx()] = x2y0;\n+        floatEntries[i.x3y0Idx()] = x3y0;\n+        floatEntries[i.x0y1Idx()] = x0y1;\n+        floatEntries[i.x1y1Idx()] = x1y1;\n+        floatEntries[i.x2y1Idx()] = x2y1;\n+        floatEntries[i.x3y1Idx()] = x3y1;\n+        floatEntries[i.x0y2Idx()] = x0y2;\n+        floatEntries[i.x1y2Idx()] = x1y2;\n+        floatEntries[i.x2y2Idx()] = x2y2;\n+        floatEntries[i.x3y2Idx()] = x3y2;\n+        floatEntries[i.x0y3Idx()] = x0y3;\n+        floatEntries[i.x1y3Idx()] = x1y3;\n+        floatEntries[i.x2y3Idx()] = x2y3;\n+        floatEntries[i.x3y3Idx()] = x3y3;\n+        return i;\n+    }\n+\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/pool\/F32x4x4Pool.java","additions":229,"deletions":0,"binary":false,"changes":229,"status":"added"},{"patch":"@@ -0,0 +1,41 @@\n+\/*\n+ * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package view.f32.pool;\n+\n+public abstract class Pool<T extends Pool<T>> {\n+    interface PoolEntry<T extends Pool<T>>{\n+        T pool();\n+        int idx();\n+    }\n+    public final int max;\n+    public int count = 0;\n+    public final void reset(int newCount) {\n+        count = newCount;\n+    }\n+    Pool( int max) {\n+        this.max = max;\n+    }\n+    abstract PoolEntry<T> entry(int idx);\n+}\n","filename":"hat\/examples\/view\/src\/main\/java\/view\/f32\/pool\/Pool.java","additions":41,"deletions":0,"binary":false,"changes":41,"status":"added"}]}