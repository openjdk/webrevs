{"files":[{"patch":"@@ -131,1 +131,1 @@\n-public class ReflectMethods extends TreeScannerPrev {\n+public class ReflectMethods extends TreeTranslatorPrev {\n@@ -237,0 +237,1 @@\n+            result = tree;\n@@ -340,2 +341,1 @@\n-        scan(cdef);\n-        return cdef;\n+        return translate(cdef);\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/internal\/ReflectMethods.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n-        return prevNode;\n+        return currentNode;\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/internal\/TreeScannerPrev.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,37 @@\n+package jdk.incubator.code.internal;\n+\n+import com.sun.tools.javac.tree.JCTree;\n+import com.sun.tools.javac.tree.TreeTranslator;\n+\n+public class TreeTranslatorPrev extends TreeTranslator {\n+\n+    private JCTree currentNode;\n+    private JCTree prevNode;\n+\n+    @Override\n+    public <T extends JCTree> T translate(T tree) {\n+        JCTree prevPrevNode = prevNode;\n+        prevNode = currentNode;\n+        currentNode = tree;\n+        try {\n+            return super.translate(tree);\n+        } finally {\n+            currentNode = prevNode;\n+            prevNode = prevPrevNode;\n+        }\n+    }\n+\n+    public void scan(JCTree tree, JCTree prevNode) {\n+        this.prevNode = null;\n+        currentNode = prevNode;\n+        translate(tree);\n+    }\n+\n+    JCTree currentNode() {\n+        return currentNode;\n+    }\n+\n+    JCTree prevNode() {\n+        return prevNode;\n+    }\n+}\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/internal\/TreeTranslatorPrev.java","additions":37,"deletions":0,"binary":false,"changes":37,"status":"added"}]}