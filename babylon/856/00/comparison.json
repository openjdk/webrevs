{"files":[{"patch":"@@ -78,0 +78,1 @@\n+\n@@ -101,0 +102,3 @@\n+                .hashDefine(\"HAT_BSX\", _ -> gridDimX())\n+                .hashDefine(\"HAT_BSY\", _ -> gridDimY())\n+                .hashDefine(\"HAT_BSZ\", _ -> gridDimZ())\n","filename":"hat\/backends\/ffi\/cuda\/src\/main\/java\/hat\/backend\/ffi\/CudaHATKernelBuilder.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024-2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -55,1 +55,0 @@\n-              \/\/  .identifier(\"__attribute__((noinline)\").nl()\n@@ -78,0 +77,3 @@\n+                .hashDefine(\"HAT_BSX\", _ -> paren(_ -> identifier(\"get_num_groups\").paren(_ -> intConstZero())))\n+                .hashDefine(\"HAT_BSY\", _ -> paren(_ -> identifier(\"get_num_groups\").paren(_ -> intConstOne())))\n+                .hashDefine(\"HAT_BSZ\", _ -> paren(_ -> identifier(\"get_num_groups\").paren(_ -> intConstTwo())))\n","filename":"hat\/backends\/ffi\/opencl\/src\/main\/java\/hat\/backend\/ffi\/OpenCLHATKernelBuilder.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -389,0 +389,5 @@\n+\n+    \/\/ Block sizes\n+    int bsx;\n+    int bsy;\n+    int bsz;\n","filename":"hat\/backends\/ffi\/shared\/src\/main\/native\/include\/shared.h","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -66,0 +66,5 @@\n+    \/\/ Specify the number of blocks\n+    public int bsx;\n+    public int bsy;\n+    public int bsz;\n+\n@@ -97,7 +102,4 @@\n-  \/\/  public int getDimensions() {\n-    \/\/    return this.dimensions;\n-   \/\/ }\n-\n-   \/\/ public NDRange<?,?> getNDRange() {\n-     \/\/   return this.ndRange;\n-   \/\/ }\n+    \/**\n+     * Marker called by kernel code which is mapped to a barrier implementation in the target language.\n+     *\/\n+    public void barrier() { }\n@@ -105,4 +107,0 @@\n-    \/\/ This is a marker called by kernel code which is mapped to a barrier implementatiom\n-    public void barrier() {\n-\n-    }\n","filename":"hat\/core\/src\/main\/java\/hat\/KernelContext.java","additions":9,"deletions":11,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024-2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+\n@@ -39,2 +40,3 @@\n-        lsx(); lsy(); lsz();   \/\/ block size\n-        bix(); biy(); biz();\n+        lsx(); lsy(); lsz();   \/\/ local sizes\n+        bix(); biy(); biz();   \/\/ block index\n+        bsx(); bsy(); bsz();   \/\/ block sizes\n@@ -44,1 +46,2 @@\n-\n+    \/\/ ----------------------------------------------------------------------|\n+    \/\/ Mapping between OpenCL, CUDA and HAT                                  |\n@@ -99,0 +102,6 @@\n+    int bsx();\n+    void bsx(int bsx);\n+    int bsy();\n+    void bsy(int bsy);\n+    int bsz();\n+    void bsz(int bsz);\n@@ -102,0 +111,2 @@\n+\n+        \/\/ Set default value for each construct\n@@ -103,0 +114,1 @@\n+\n@@ -123,0 +135,4 @@\n+        kernelBufferContext.bsx(0);\n+        kernelBufferContext.bsy(0);\n+        kernelBufferContext.bsz(0);\n+\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/KernelBufferContext.java","additions":20,"deletions":4,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -92,1 +92,1 @@\n-    public final T HAT_GIX(){\n+    public final T HAT_GIX() {\n@@ -96,1 +96,1 @@\n-    public final T HAT_GIY(){\n+    public final T HAT_GIY() {\n@@ -100,1 +100,1 @@\n-    public final T HAT_GIZ(){\n+    public final T HAT_GIZ() {\n@@ -104,1 +104,1 @@\n-    public final T HAT_GSX(){\n+    public final T HAT_GSX() {\n@@ -108,1 +108,1 @@\n-    public final T HAT_GSY(){\n+    public final T HAT_GSY() {\n@@ -112,1 +112,1 @@\n-    public final T HAT_GSZ(){\n+    public final T HAT_GSZ() {\n@@ -116,1 +116,1 @@\n-    public final T HAT_LIX(){\n+    public final T HAT_LIX() {\n@@ -120,1 +120,1 @@\n-    public final T HAT_LIY(){\n+    public final T HAT_LIY() {\n@@ -124,1 +124,1 @@\n-    public final T HAT_LIZ(){\n+    public final T HAT_LIZ() {\n@@ -128,1 +128,1 @@\n-    public final T HAT_LSX(){\n+    public final T HAT_LSX() {\n@@ -132,1 +132,1 @@\n-    public final T HAT_LSY(){\n+    public final T HAT_LSY() {\n@@ -136,1 +136,1 @@\n-    public final T HAT_LSZ(){\n+    public final T HAT_LSZ() {\n@@ -140,2 +140,1 @@\n-\n-    public final T HAT_BIX(){\n+    public final T HAT_BIX() {\n@@ -145,1 +144,1 @@\n-    public final T HAT_BIY(){\n+    public final T HAT_BIY() {\n@@ -149,1 +148,1 @@\n-    public final T HAT_BIZ(){\n+    public final T HAT_BIZ() {\n@@ -153,0 +152,12 @@\n+    public final T HAT_BSX() {\n+        return identifier(\"HAT_BSX\");\n+    }\n+\n+    public final T HAT_BSY() {\n+        return identifier(\"HAT_BSY\");\n+    }\n+\n+    public final T HAT_BSZ() {\n+        return identifier(\"HAT_BSZ\");\n+    }\n+\n@@ -171,0 +182,3 @@\n+            case HATThreadOp.HAT_BS.HAT_BSX _ -> HAT_BSX();\n+            case HATThreadOp.HAT_BS.HAT_BSY _ -> HAT_BSY();\n+            case HATThreadOp.HAT_BS.HAT_BSZ _ -> HAT_BSZ();\n@@ -172,1 +186,0 @@\n-\n","filename":"hat\/core\/src\/main\/java\/hat\/codebuilders\/C99HATKernelBuilder.java","additions":30,"deletions":17,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025-2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,1 +36,0 @@\n-import java.util.Map;\n@@ -38,2 +37,7 @@\n-public abstract sealed class HATThreadOp extends HATOp implements Dim,  Precedence.LoadOrConv\n-        permits HATThreadOp.HAT_BI, HATThreadOp.HAT_GS, HATThreadOp.HAT_GI, HATThreadOp.HAT_LS, HATThreadOp.HAT_LI {\n+public abstract sealed class HATThreadOp extends HATOp implements Dim, Precedence.LoadOrConv\n+        permits HATThreadOp.HAT_BI,\n+                HATThreadOp.HAT_BS,\n+                HATThreadOp.HAT_GS,\n+                HATThreadOp.HAT_GI,\n+                HATThreadOp.HAT_LS,\n+                HATThreadOp.HAT_LI {\n@@ -41,1 +45,1 @@\n-    public HATThreadOp( List<Value> operands) {\n+    public HATThreadOp(List<Value> operands) {\n@@ -54,18 +58,21 @@\n-    public static HATThreadOp create(String name){\n-        return switch (name){\n-            case \"gix\"->  new HATThreadOp.HAT_GI.HAT_GIX();\n-            case \"giy\"->  new HATThreadOp.HAT_GI.HAT_GIY();\n-            case \"giz\"->  new HATThreadOp.HAT_GI.HAT_GIZ();\n-            case \"gsx\"->  new HATThreadOp.HAT_GS.HAT_GSX();\n-            case \"gsy\"->  new HATThreadOp.HAT_GS.HAT_GSY();\n-            case \"gsz\"->  new HATThreadOp.HAT_GS.HAT_GSZ();\n-            case \"lix\"->  new HATThreadOp.HAT_LI.HAT_LIX();\n-            case \"liy\"->  new HATThreadOp.HAT_LI.HAT_LIY();\n-            case \"liz\"->  new HATThreadOp.HAT_LI.HAT_LIZ();\n-            case \"lsx\"->  new HATThreadOp.HAT_LS.HAT_LSX();\n-            case \"lsy\"->  new HATThreadOp.HAT_LS.HAT_LSY();\n-            case \"lsz\"->  new HATThreadOp.HAT_LS.HAT_LSZ();\n-            case \"bix\"->  new HATThreadOp.HAT_BI.HAT_BIX();\n-            case \"biy\"->  new HATThreadOp.HAT_BI.HAT_BIY();\n-            case \"biz\"->  new HATThreadOp.HAT_BI.HAT_BIZ();\n-            default -> throw  new RuntimeException(\"what is this ?\");\n+    public static HATThreadOp create(String name) {\n+        return switch (name) {\n+            case \"gix\" -> new HATThreadOp.HAT_GI.HAT_GIX();\n+            case \"giy\" -> new HATThreadOp.HAT_GI.HAT_GIY();\n+            case \"giz\" -> new HATThreadOp.HAT_GI.HAT_GIZ();\n+            case \"gsx\" -> new HATThreadOp.HAT_GS.HAT_GSX();\n+            case \"gsy\" -> new HATThreadOp.HAT_GS.HAT_GSY();\n+            case \"gsz\" -> new HATThreadOp.HAT_GS.HAT_GSZ();\n+            case \"lix\" -> new HATThreadOp.HAT_LI.HAT_LIX();\n+            case \"liy\" -> new HATThreadOp.HAT_LI.HAT_LIY();\n+            case \"liz\" -> new HATThreadOp.HAT_LI.HAT_LIZ();\n+            case \"lsx\" -> new HATThreadOp.HAT_LS.HAT_LSX();\n+            case \"lsy\" -> new HATThreadOp.HAT_LS.HAT_LSY();\n+            case \"lsz\" -> new HATThreadOp.HAT_LS.HAT_LSZ();\n+            case \"bix\" -> new HATThreadOp.HAT_BI.HAT_BIX();\n+            case \"biy\" -> new HATThreadOp.HAT_BI.HAT_BIY();\n+            case \"biz\" -> new HATThreadOp.HAT_BI.HAT_BIZ();\n+            case \"bsx\" -> new HATThreadOp.HAT_BS.HAT_BSX();\n+            case \"bsy\" -> new HATThreadOp.HAT_BS.HAT_BSY();\n+            case \"bsz\" -> new HATThreadOp.HAT_BS.HAT_BSZ();\n+            default -> throw new RuntimeException(\"[ERROR] Illegal\/unsupported parallel construct: \" + name);\n@@ -75,1 +82,1 @@\n-    public static sealed abstract class HAT_LI extends HATThreadOp  permits HAT_LI.HAT_LIX, HAT_LI.HAT_LIY, HAT_LI.HAT_LIZ {\n+    public static sealed abstract class HAT_LI extends HATThreadOp permits HAT_LI.HAT_LIX, HAT_LI.HAT_LIY, HAT_LI.HAT_LIZ {\n@@ -85,1 +92,1 @@\n-        public static final class HAT_LIX extends HAT_LI implements Dim.X{\n+        public static final class HAT_LIX extends HAT_LI implements Dim.X {\n@@ -89,0 +96,1 @@\n+\n@@ -92,0 +100,1 @@\n+\n@@ -97,1 +106,2 @@\n-        public static final class HAT_LIY extends HAT_LI implements Dim.Y{\n+\n+        public static final class HAT_LIY extends HAT_LI implements Dim.Y {\n@@ -101,0 +111,1 @@\n+\n@@ -104,0 +115,1 @@\n+\n@@ -109,1 +121,2 @@\n-        public static final class HAT_LIZ extends HAT_LI implements Dim.Z{\n+\n+        public static final class HAT_LIZ extends HAT_LI implements Dim.Z {\n@@ -113,0 +126,1 @@\n+\n@@ -116,0 +130,1 @@\n+\n@@ -121,1 +136,0 @@\n-\n@@ -133,1 +147,1 @@\n-        public static final class HAT_BIX extends HAT_BI implements Dim.X{\n+        public static final class HAT_BIX extends HAT_BI implements Dim.X {\n@@ -137,0 +151,1 @@\n+\n@@ -140,0 +155,1 @@\n+\n@@ -145,1 +161,2 @@\n-        public static final class HAT_BIY extends HAT_BI implements Dim.Y{\n+\n+        public static final class HAT_BIY extends HAT_BI implements Dim.Y {\n@@ -149,0 +166,1 @@\n+\n@@ -152,0 +170,1 @@\n+\n@@ -157,1 +176,2 @@\n-        public static final class HAT_BIZ extends HAT_BI implements Dim.Z{\n+\n+        public static final class HAT_BIZ extends HAT_BI implements Dim.Z {\n@@ -161,0 +181,1 @@\n+\n@@ -164,0 +185,1 @@\n+\n@@ -171,0 +193,60 @@\n+    public static abstract sealed class HAT_BS extends HATThreadOp {\n+\n+        public HAT_BS() {\n+            super(List.of());\n+        }\n+\n+        public HAT_BS(HAT_BS op, CodeContext copyContext) {\n+            super(op, copyContext);\n+        }\n+\n+        public static final class HAT_BSX extends HAT_BS implements Dim.X {\n+\n+            public HAT_BSX(HAT_BS op, CodeContext copyContext) {\n+                super(op, copyContext);\n+            }\n+\n+            public HAT_BSX() {\n+                super();\n+            }\n+\n+            @Override\n+            public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n+                return new HAT_BSX(this, copyContext);\n+            }\n+        }\n+\n+        public static final class HAT_BSY extends HAT_BS implements Dim.Y {\n+\n+            public HAT_BSY(HAT_BS op, CodeContext copyContext) {\n+                super(op, copyContext);\n+            }\n+\n+            public HAT_BSY() {\n+                super();\n+            }\n+\n+            @Override\n+            public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n+                return new HAT_BSY(this, copyContext);\n+            }\n+\n+        }\n+\n+        public static final class HAT_BSZ extends HAT_BS implements Dim.Z {\n+\n+            public HAT_BSZ(HAT_BS op, CodeContext copyContext) {\n+                super(op, copyContext);\n+            }\n+\n+            public HAT_BSZ() {\n+                super();\n+            }\n+\n+            @Override\n+            public Op transform(CodeContext copyContext, CodeTransformer opTransformer) {\n+                return new HAT_BSZ(this, copyContext);\n+            }\n+        }\n+    }\n+\n@@ -180,1 +262,2 @@\n-        public static final class HAT_LSX extends HAT_LS implements Dim.X{\n+\n+        public static final class HAT_LSX extends HAT_LS implements Dim.X {\n@@ -184,0 +267,1 @@\n+\n@@ -187,0 +271,1 @@\n+\n@@ -192,1 +277,2 @@\n-        public static final class HAT_LSY extends HAT_LS implements Dim.Y{\n+\n+        public static final class HAT_LSY extends HAT_LS implements Dim.Y {\n@@ -196,0 +282,1 @@\n+\n@@ -199,0 +286,1 @@\n+\n@@ -204,1 +292,2 @@\n-        public static final class HAT_LSZ extends HAT_LS implements Dim.Z{\n+\n+        public static final class HAT_LSZ extends HAT_LS implements Dim.Z {\n@@ -208,0 +297,1 @@\n+\n@@ -211,0 +301,1 @@\n+\n@@ -229,1 +320,1 @@\n-        public static final class HAT_GIX extends HAT_GI implements Dim.X{\n+        public static final class HAT_GIX extends HAT_GI implements Dim.X {\n@@ -233,0 +324,1 @@\n+\n@@ -236,0 +328,1 @@\n+\n@@ -241,1 +334,2 @@\n-        public static final class HAT_GIY extends HAT_GI implements Dim.Y{\n+\n+        public static final class HAT_GIY extends HAT_GI implements Dim.Y {\n@@ -245,0 +339,1 @@\n+\n@@ -248,0 +343,1 @@\n+\n@@ -253,1 +349,2 @@\n-        public static final class HAT_GIZ extends HAT_GI implements Dim.Z{\n+\n+        public static final class HAT_GIZ extends HAT_GI implements Dim.Z {\n@@ -257,0 +354,1 @@\n+\n@@ -260,0 +358,1 @@\n+\n@@ -269,1 +368,1 @@\n-            super( List.of());\n+            super(List.of());\n@@ -271,0 +370,1 @@\n+\n@@ -275,1 +375,1 @@\n-        public static final class HAT_GSX extends HAT_GS implements Dim.X{\n+        public static final class HAT_GSX extends HAT_GS implements Dim.X {\n@@ -279,0 +379,1 @@\n+\n@@ -282,0 +383,1 @@\n+\n@@ -287,1 +389,2 @@\n-        public static final class HAT_GSY extends HAT_GS implements Dim.Y{\n+\n+        public static final class HAT_GSY extends HAT_GS implements Dim.Y {\n@@ -291,0 +394,1 @@\n+\n@@ -294,0 +398,1 @@\n+\n@@ -299,1 +404,2 @@\n-        public static final class HAT_GSZ extends HAT_GS implements Dim.Z{\n+\n+        public static final class HAT_GSZ extends HAT_GS implements Dim.Z {\n@@ -303,0 +409,1 @@\n+\n@@ -306,0 +413,1 @@\n+\n","filename":"hat\/core\/src\/main\/java\/hat\/dialect\/HATThreadOp.java","additions":149,"deletions":41,"binary":false,"changes":190,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2025-2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,2 +27,0 @@\n-\n-\n@@ -42,0 +40,1 @@\n+\n@@ -47,2 +46,2 @@\n-                .transform( c -> {\n-                    if (query.matches(c) instanceof Match match && match.helper() instanceof FieldAccess fieldAccess){\n+                .transform(c -> {\n+                    if (query.matches(c) instanceof Match match && match.helper() instanceof FieldAccess fieldAccess) {\n@@ -50,18 +49,1 @@\n-                        c.replace(switch (fieldAccess.name()){\n-                            case \"gix\"->  new HATThreadOp.HAT_GI.HAT_GIX();\n-                            case \"giy\"->  new HATThreadOp.HAT_GI.HAT_GIY();\n-                            case \"giz\"->  new HATThreadOp.HAT_GI.HAT_GIZ();\n-                            case \"gsx\"->  new HATThreadOp.HAT_GS.HAT_GSX();\n-                            case \"gsy\"->  new HATThreadOp.HAT_GS.HAT_GSY();\n-                            case \"gsz\"->  new HATThreadOp.HAT_GS.HAT_GSZ();\n-                            case \"lix\"->  new HATThreadOp.HAT_LI.HAT_LIX();\n-                            case \"liy\"->  new HATThreadOp.HAT_LI.HAT_LIY();\n-                            case \"liz\"->  new HATThreadOp.HAT_LI.HAT_LIZ();\n-                            case \"lsx\"->  new HATThreadOp.HAT_LS.HAT_LSX();\n-                            case \"lsy\"->  new HATThreadOp.HAT_LS.HAT_LSY();\n-                            case \"lsz\"->  new HATThreadOp.HAT_LS.HAT_LSZ();\n-                            case \"bix\"->  new HATThreadOp.HAT_BI.HAT_BIX();\n-                            case \"biy\"->  new HATThreadOp.HAT_BI.HAT_BIY();\n-                            case \"biz\"->  new HATThreadOp.HAT_BI.HAT_BIZ();\n-                            default -> throw  new RuntimeException(\"what is this ?\");\n-                        });\n+                        c.replace(HATThreadOp.create(fieldAccess.name()));\n","filename":"hat\/core\/src\/main\/java\/hat\/phases\/HATThreadsPhase.java","additions":5,"deletions":23,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2024-2026, Oracle and\/or its affiliates. All rights reserved.\n@@ -190,0 +190,1 @@\n+                \"hat.test.TestGrids\"\n","filename":"hat\/hat\/test.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -0,0 +1,79 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package hat.test;\n+\n+import hat.Accelerator;\n+import hat.Accelerator.Compute;\n+import hat.ComputeContext;\n+import hat.KernelContext;\n+import hat.backend.Backend;\n+import hat.buffer.F32Array;\n+import hat.test.annotation.HatTest;\n+import hat.test.exceptions.HATAsserts;\n+import jdk.incubator.code.Reflect;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.WO;\n+\n+import java.lang.invoke.MethodHandles;\n+\n+import static hat.NDRange.Global1D;\n+import static hat.NDRange.Local1D;\n+import static hat.NDRange.NDRange1D;\n+\n+public class TestGrids {\n+\n+    @Reflect\n+    private static void compute(@RO KernelContext kernelContext, @WO F32Array output) {\n+        int idx = kernelContext.gix;\n+        int bsx = kernelContext.bsx;\n+        \/\/ Write the number of blocks\n+        output.array(idx, bsx);\n+    }\n+\n+    @Reflect\n+    private static void myCompute(@RO ComputeContext computeContext, @WO F32Array output, int numThreads, int localBlockSize) {\n+        var ndRange = NDRange1D.of(Global1D.of(numThreads), Local1D.of(localBlockSize));\n+        computeContext.dispatchKernel(ndRange, kernelContext -> compute(kernelContext, output));\n+    }\n+\n+    @HatTest\n+    public void testgrid_01() {\n+        Accelerator accelerator = new Accelerator(MethodHandles.lookup(), Backend.FIRST);\n+\n+        final int numThreads = 128;\n+        final int localBlockSize = 16;\n+\n+        F32Array data = F32Array.create(accelerator, numThreads);\n+\n+        accelerator.compute((@Reflect Compute) computeContext -> {\n+            TestGrids.myCompute(computeContext, data, numThreads, localBlockSize);\n+        });\n+\n+        float expectedValue = (float) numThreads \/ localBlockSize;\n+        for (int i = 0; i < data.length(); i++) {\n+            HATAsserts.assertEquals(expectedValue, data.array(i), 0.001f);\n+        }\n+    }\n+}\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestGrids.java","additions":79,"deletions":0,"binary":false,"changes":79,"status":"added"}]}