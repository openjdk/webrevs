{"files":[{"patch":"@@ -190,1 +190,1 @@\n-                \"hat.test.TestGrids\"\n+                \"hat.test.TestNumBlocks\"\n","filename":"hat\/hat\/test.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1,79 +0,0 @@\n-\/*\n- * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.  Oracle designates this\n- * particular file as subject to the \"Classpath\" exception as provided\n- * by Oracle in the LICENSE file that accompanied this code.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-package hat.test;\n-\n-import hat.Accelerator;\n-import hat.Accelerator.Compute;\n-import hat.ComputeContext;\n-import hat.KernelContext;\n-import hat.backend.Backend;\n-import hat.buffer.F32Array;\n-import hat.test.annotation.HatTest;\n-import hat.test.exceptions.HATAsserts;\n-import jdk.incubator.code.Reflect;\n-import optkl.ifacemapper.MappableIface.RO;\n-import optkl.ifacemapper.MappableIface.WO;\n-\n-import java.lang.invoke.MethodHandles;\n-\n-import static hat.NDRange.Global1D;\n-import static hat.NDRange.Local1D;\n-import static hat.NDRange.NDRange1D;\n-\n-public class TestGrids {\n-\n-    @Reflect\n-    private static void compute(@RO KernelContext kernelContext, @WO F32Array output) {\n-        int idx = kernelContext.gix;\n-        int bsx = kernelContext.bsx;\n-        \/\/ Write the number of blocks\n-        output.array(idx, bsx);\n-    }\n-\n-    @Reflect\n-    private static void myCompute(@RO ComputeContext computeContext, @WO F32Array output, int numThreads, int localBlockSize) {\n-        var ndRange = NDRange1D.of(Global1D.of(numThreads), Local1D.of(localBlockSize));\n-        computeContext.dispatchKernel(ndRange, kernelContext -> compute(kernelContext, output));\n-    }\n-\n-    @HatTest\n-    public void testgrid_01() {\n-        Accelerator accelerator = new Accelerator(MethodHandles.lookup(), Backend.FIRST);\n-\n-        final int numThreads = 128;\n-        final int localBlockSize = 16;\n-\n-        F32Array data = F32Array.create(accelerator, numThreads);\n-\n-        accelerator.compute((@Reflect Compute) computeContext -> {\n-            TestGrids.myCompute(computeContext, data, numThreads, localBlockSize);\n-        });\n-\n-        float expectedValue = (float) numThreads \/ localBlockSize;\n-        for (int i = 0; i < data.length(); i++) {\n-            HATAsserts.assertEquals(expectedValue, data.array(i), 0.001f);\n-        }\n-    }\n-}\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestGrids.java","additions":0,"deletions":79,"binary":false,"changes":79,"status":"deleted"},{"patch":"@@ -0,0 +1,79 @@\n+\/*\n+ * Copyright (c) 2026, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package hat.test;\n+\n+import hat.Accelerator;\n+import hat.Accelerator.Compute;\n+import hat.ComputeContext;\n+import hat.KernelContext;\n+import hat.backend.Backend;\n+import hat.buffer.F32Array;\n+import hat.test.annotation.HatTest;\n+import hat.test.exceptions.HATAsserts;\n+import jdk.incubator.code.Reflect;\n+import optkl.ifacemapper.MappableIface.RO;\n+import optkl.ifacemapper.MappableIface.WO;\n+\n+import java.lang.invoke.MethodHandles;\n+\n+import static hat.NDRange.Global1D;\n+import static hat.NDRange.Local1D;\n+import static hat.NDRange.NDRange1D;\n+\n+public class TestNumBlocks {\n+\n+    @Reflect\n+    private static void kernel_numblocks_X(@RO KernelContext kernelContext, @WO F32Array output) {\n+        int idx = kernelContext.gix;\n+        int bsx = kernelContext.bsx;\n+        \/\/ Write the number of blocks\n+        output.array(idx, bsx);\n+    }\n+\n+    @Reflect\n+    private static void numblocks_01(@RO ComputeContext computeContext, @WO F32Array output, int numThreads, int localBlockSize) {\n+        var ndRange = NDRange1D.of(Global1D.of(numThreads), Local1D.of(localBlockSize));\n+        computeContext.dispatchKernel(ndRange, kernelContext -> kernel_numblocks_X(kernelContext, output));\n+    }\n+\n+    @HatTest\n+    public void test_numblocks_01() {\n+        Accelerator accelerator = new Accelerator(MethodHandles.lookup(), Backend.FIRST);\n+\n+        final int numThreads = 128;\n+        final int localBlockSize = 16;\n+\n+        F32Array data = F32Array.create(accelerator, numThreads);\n+\n+        accelerator.compute((@Reflect Compute) computeContext -> {\n+            TestNumBlocks.numblocks_01(computeContext, data, numThreads, localBlockSize);\n+        });\n+\n+        float expectedValue = (float) numThreads \/ localBlockSize;\n+        for (int i = 0; i < data.length(); i++) {\n+            HATAsserts.assertEquals(expectedValue, data.array(i), 0.001f);\n+        }\n+    }\n+}\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestNumBlocks.java","additions":79,"deletions":0,"binary":false,"changes":79,"status":"added"}]}