{"files":[{"patch":"@@ -116,0 +116,1 @@\n+    private final ArrayDeque<ClassDesc> newStack;\n@@ -146,0 +147,1 @@\n+        this.newStack = new ArrayDeque<>();\n@@ -544,1 +546,2 @@\n-                            if (inst.name().equalsString(ConstantDescs.INIT_NAME)) {\n+                            if (inst.owner().asSymbol().equals(newStack.peek()) && inst.name().equalsString(ConstantDescs.INIT_NAME)) {\n+                                newStack.pop();\n@@ -552,1 +555,1 @@\n-                                yield op(CoreOp.invoke(mDesc, operands.reversed()));\n+                                yield op(CoreOp.invokeSuper(mDesc.type().returnType(), mDesc, operands.reversed()));\n@@ -665,1 +668,1 @@\n-                case NewObjectInstruction _ -> {\n+                case NewObjectInstruction inst -> {\n@@ -671,0 +674,1 @@\n+                        newStack.push(inst.className().asSymbol());\n@@ -820,0 +824,1 @@\n+        assert newStack.isEmpty();\n","filename":"src\/java.base\/share\/classes\/java\/lang\/reflect\/code\/bytecode\/BytecodeLift.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -104,1 +104,1 @@\n-        Assert.assertTrue(stable > 65290 && unstable < 100, String.format(\"stable: %d unstable: %d\", stable, unstable));\n+        Assert.assertTrue(stable > 54140 && unstable < 100, String.format(\"stable: %d unstable: %d\", stable, unstable));\n@@ -110,1 +110,1 @@\n-            if (originalModel.code().isPresent() && (METHOD_NAME == null || originalModel.methodName().equalsString(METHOD_NAME))) {\n+            if (originalModel.code().isPresent() && (METHOD_NAME == null || originalModel.methodName().equalsString(METHOD_NAME))) try {\n@@ -122,0 +122,2 @@\n+                } catch (UnsupportedOperationException uoe) {\n+                    throw uoe;\n@@ -147,0 +149,2 @@\n+            } catch (UnsupportedOperationException uoe) {\n+                \/\/ InvokeSuperOp\n","filename":"test\/jdk\/java\/lang\/reflect\/code\/bytecode\/TestSmallCorpus.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"}]}