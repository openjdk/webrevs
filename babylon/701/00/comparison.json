{"files":[{"patch":"@@ -86,0 +86,12 @@\n+    static Float4 add(Float4 vA, float scalar) {\n+        return Float4.of(vA.x()+scalar,vA.y()+scalar, vA.z()+scalar,vA.w()+scalar);\n+    }\n+    static Float4 sub(Float4 vA, float scalar) {\n+        return Float4.of(vA.x()-scalar,vA.y()-scalar, vA.z()-scalar,vA.w()-scalar);\n+    }\n+    static Float4 mul(Float4 vA, float scalar) {\n+        return Float4.of(vA.x()*scalar,vA.y()*scalar, vA.z()*scalar,vA.w()*scalar);\n+    }\n+    static Float4 sqr(Float4 vA) {\n+        return Float4.mul(vA,vA);\n+    }\n@@ -102,1 +114,6 @@\n-\n+    default Float4 add(float scalar) {\n+        return Float4.add(this, scalar);\n+    }\n+    default Float4 sqr() {\n+        return Float4.sqr(this);\n+    }\n@@ -106,1 +123,3 @@\n-\n+    default Float4 sub(float scalar) {\n+        return Float4.sub(this, scalar);\n+    }\n@@ -110,1 +129,3 @@\n-\n+    default Float4 mul(float scalar) {\n+        return Float4.mul(this, scalar);\n+    }\n","filename":"hat\/core\/src\/main\/java\/hat\/buffer\/Float4.java","additions":24,"deletions":3,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+import hat.buffer.Float4;\n@@ -33,1 +34,6 @@\n-\n+    default Float4[] posArrView(){\n+        return null;\n+    }\n+    default Float4[] velArrView(){\n+        return null;\n+    }\n","filename":"hat\/examples\/nbody\/src\/main\/java\/nbody\/Universe.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import hat.buffer.Float4;\n@@ -37,0 +38,1 @@\n+import wrap.Wrap;\n@@ -98,0 +100,24 @@\n+    interface F32x4Arr {\n+\n+    }\n+    @Reflect\n+    static public void nbodyKernelf4(@RO KernelContext kc, @RW Universe universe, float mass, float delT, float espSqr) {\n+        var acc = Float4.of(0,0,0,0);\n+        var posArr = universe.posArrView();\n+        var velArr = universe.velArrView();\n+        var pos = posArr[kc.gix];\n+        var vel = velArr[kc.gix];\n+        for (int i = 0; i < kc.gix; i++) {\n+            var delta = posArr[i].sub(pos);\n+            var delSqr = delta.sqr();\n+            var delSqrSum = delSqr.x() + delSqr.y() + delSqr.z();\n+            var invDist = 1f \/ (float) Math.sqrt(delSqrSum + espSqr);\n+            var invDistCubed = invDist * invDist * invDist;\n+            acc = acc.add(delta.mul(mass * invDistCubed));\n+        }\n+        acc = acc.mul(delT);\n+        pos = pos.add(vel.mul(delT).add(acc.mul(.5f * delT)));\n+        vel = vel.add(acc);\n+        posArr[kc.gix] = pos;\n+        velArr[kc.gix] = vel;\n+    }\n","filename":"hat\/examples\/nbody\/src\/main\/java\/nbody\/opencl\/OpenCLNBodyGLWindow.java","additions":26,"deletions":0,"binary":false,"changes":26,"status":"modified"}]}