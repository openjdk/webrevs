{"files":[{"patch":"@@ -81,1 +81,0 @@\n-\n@@ -90,1 +89,1 @@\n-                Jar.JavacConfig.of(o->o.progress(true)\n+                Jar.JavacConfig.of(o -> o.progress(true)\n@@ -93,2 +92,2 @@\n-                CMake.Config.of(o->o.progress(true)),\n-                JExtract.Config.of(o->o.progress(true))\n+                CMake.Config.of(o -> o.progress(true)),\n+                JExtract.Config.of(o -> o.progress(true))\n@@ -126,2 +125,2 @@\n-        var jextractOpts= JExtract.Config.of(o-> o.command(true));\n-        var cmakeOpts = CMake.Config.of(o->o.command(true));\n+        var jextractOpts = JExtract.Config.of(o -> o.command(true));\n+        var cmakeOpts = CMake.Config.of(o -> o.command(true));\n@@ -189,1 +188,1 @@\n-                    Files.writeString(Path.of(\"bld.dot\") , hat.all().available().toDot());\n+                    Files.writeString(Path.of(\"bld.dot\"), hat.all().available().toDot());\n@@ -196,5 +195,5 @@\n-                    final  var copyrightPattern = Pattern.compile(\"^.*Copyright.*202[0-9].*(Intel|Oracle).*$\");\n-                    final  var copyrightExemptPattern = Pattern.compile(\"^(robertograham|CMakeFiles|hip)\");\n-                    final  var tabOrEolWsPattern = Pattern.compile(\"^(.*\\\\t.*|.* )$\");\n-                    final  var textSuffix  = Pattern.compile(\"^(.*\\\\.(java|cpp|h|hpp|md)|pom.xml)$\");\n-                    final  var sourceSuffix  = Pattern.compile(\"^(.*\\\\.(java|cpp|h|hpp)|pom.xml)$\");\n+                    final var copyrightPattern = Pattern.compile(\"^.*Copyright.*202[0-9].*(Intel|Oracle).*$\");\n+                    final var copyrightExemptPattern = Pattern.compile(\"^(robertograham|CMakeFiles|hip)\");\n+                    final var tabOrEolWsPattern = Pattern.compile(\"^(.*\\\\t.*|.* )$\");\n+                    final var textSuffix = Pattern.compile(\"^(.*\\\\.(java|cpp|h|hpp|md)|pom.xml)$\");\n+                    final var sourceSuffix = Pattern.compile(\"^(.*\\\\.(java|cpp|h|hpp)|pom.xml)$\");\n@@ -202,1 +201,1 @@\n-                    Stream.of(\"hat\",\"core\",\"tools\",\"examples\",\"backends\",\"docs\",\"wraps\")\n+                    Stream.of(\"hat\", \"core\", \"tools\", \"examples\", \"backends\", \"docs\", \"wraps\")\n@@ -204,2 +203,2 @@\n-                            .forEach(dir-> {\n-                                System.out.println(\"Checking \"+dir);\n+                            .forEach(dir -> {\n+                                System.out.println(\"Checking \" + dir);\n@@ -207,3 +206,3 @@\n-                                   (d)-> true, \/\/ we do this for all subdirs\n-                                   (f)-> textSuffix.matcher(f.getFileName().toString()).matches() && Util.grepLines(tabOrEolWsPattern, f),\n-                                   (c)-> System.out.println(\"File contains WS issue (TAB or EOLWs) \" + c)\n+                                        (d) -> true, \/\/ we do this for all subdirs\n+                                        (f) -> textSuffix.matcher(f.getFileName().toString()).matches() && Util.grepLines(tabOrEolWsPattern, f),\n+                                        (c) -> System.out.println(\"File contains WS issue (TAB or EOLWs) \" + c)\n@@ -212,3 +211,3 @@\n-                                   (d)-> !copyrightExemptPattern.matcher(d.getFileName().toString()).matches(), \/\/ we skip these subdirs\n-                                   (f)-> sourceSuffix.matcher(f.getFileName().toString()).matches() && !Util.grepLines(copyrightPattern, f),\n-                                   (c)-> System.out.println(\"File does not contain copyright \" + c)\n+                                        (d) -> !copyrightExemptPattern.matcher(d.getFileName().toString()).matches(), \/\/ we skip these subdirs\n+                                        (f) -> sourceSuffix.matcher(f.getFileName().toString()).matches() && !Util.grepLines(copyrightPattern, f),\n+                                        (c) -> System.out.println(\"File does not contain copyright \" + c)\n@@ -223,2 +222,2 @@\n-                            var javaOpts = commonJavaOpts.with( o -> o\n-                                    .collectVmOpts(args).mainClass(args.removeFirst(),\"Main\")\n+                            var javaOpts = commonJavaOpts.with(o -> o\n+                                    .collectVmOpts(args).mainClass(args.removeFirst(), \"Main\")\n@@ -228,1 +227,1 @@\n-                                runnable.run(javaOpts,runnable, backend);\n+                                runnable.run(javaOpts, runnable, backend);\n@@ -230,1 +229,1 @@\n-                                System.err.println(\"Found backend \"+ backendName  +\" but failed to find runnable\/example \" + javaOpts.packageName());\n+                                System.err.println(\"Found backend \" + backendName + \" but failed to find runnable\/example \" + javaOpts.packageName());\n@@ -244,8 +243,8 @@\n-                            *****************************************************************\n-                            HAT Test Report\n-                            *****************************************************************\n-                            \"\"\");\n-                           var test_reports_txt = Paths.get(\"test_report.txt\");\n-                           Files.deleteIfExists(test_reports_txt); \/\/ because we will append to it in the next loop\n-                             var commonTestSuiteJavaOpts = commonJavaOpts.with( o -> o\n-                                     .command(false).collectVmOpts(args).mainClass(testEnginePackage,testEngineClassName) \/\/  note no app args as add them below\n+                                    *****************************************************************\n+                                    HAT Test Report\n+                                    *****************************************************************\n+                                    \"\"\");\n+                            var test_reports_txt = Paths.get(\"test_report.txt\");\n+                            Files.deleteIfExists(test_reports_txt); \/\/ because we will append to it in the next loop\n+                            var commonTestSuiteJavaOpts = commonJavaOpts.with(o -> o\n+                                    .command(false).collectVmOpts(args).mainClass(testEnginePackage, testEngineClassName) \/\/  note no app args as add them below\n@@ -254,2 +253,2 @@\n-                            tests.forEachMatchingEntry(\"(hat\/test\/Test[a-zA-Z0-9]*).class\", (_,matcher) ->\n-                                    tests.run(Jar.JavaConfig.of(commonTestSuiteJavaOpts, o-> o.arg(matcher.group(1).replace('\/','.'))),  tests, backend)\n+                            tests.forEachMatchingEntry(\"(hat\/test\/Test[a-zA-Z0-9]*).class\", (_, matcher) ->\n+                                    tests.run(Jar.JavaConfig.of(commonTestSuiteJavaOpts, o -> o.arg(matcher.group(1).replace('\/', '.'))), tests, backend)\n@@ -257,2 +256,2 @@\n-                           args.clear();\n-                           var pattern = Pattern.compile( \"passed: (\\\\d+), failed: (\\\\d+), unsupported: (\\\\d+)\");\n+                            args.clear();\n+                            var pattern = Pattern.compile(\"passed: (\\\\d+), failed: (\\\\d+), unsupported: (\\\\d+), precision-errors: (\\\\d+)\");\n@@ -263,3 +262,6 @@\n-                                @Override public String toString(){\n-                                    return String.format(\"Global passed: %d, failed: %d, unsupported: %d, pass-rate: %.2f%%\\\\n\",\n-                                            passed, failed, unsupported, ((float)(passed * 100 \/ (passed + failed + unsupported))));\n+                                int precisionError = 0;\n+\n+                                @Override\n+                                public String toString() {\n+                                    return String.format(\"Global passed: %d, failed: %d, unsupported: %d, precision-errors: %d, pass-rate: %.2f%%\\\\n\",\n+                                            passed, failed, unsupported, precisionError, ((float) (passed * 100 \/ (passed + failed + unsupported + precisionError))));\n@@ -268,10 +270,11 @@\n-                           var stats = new Stats();\n-                           Files.readAllLines(test_reports_txt).forEach(line->{\n-                               if (!commonTestSuiteJavaOpts.verbose()) { \/\/We already dumped this info to stdout above\n-                                   System.out.println(line);\n-                               }\n-                              if (pattern.matcher(line) instanceof Matcher matcher && matcher.find()){\n-                                 stats.passed+=Integer.parseInt(matcher.group(1));\n-                                 stats.failed+=Integer.parseInt(matcher.group(2));\n-                                 stats.unsupported+=Integer.parseInt(matcher.group(3));\n-                              }\n+                            var stats = new Stats();\n+                            Files.readAllLines(test_reports_txt).forEach(line -> {\n+                                if (!commonTestSuiteJavaOpts.verbose()) { \/\/We already dumped this info to stdout above\n+                                    System.out.println(line);\n+                                }\n+                                if (pattern.matcher(line) instanceof Matcher matcher && matcher.find()) {\n+                                    stats.passed += Integer.parseInt(matcher.group(1));\n+                                    stats.failed += Integer.parseInt(matcher.group(2));\n+                                    stats.unsupported += Integer.parseInt(matcher.group(3));\n+                                    stats.precisionError += Integer.parseInt(matcher.group(4));\n+                                }\n@@ -280,0 +283,2 @@\n+                            if (stats.failed > 0) {\n+                                System.exit(-1);\n@@ -281,1 +286,4 @@\n-                           System.err.println(\"Failed to find backend   \" + backendName);\n+                                System.exit(0);\n+                            }\n+                        } else {\n+                            System.err.println(\"Failed to find backend   \" + backendName);\n@@ -287,1 +295,1 @@\n-                case \"test\"-> {\n+                case \"test\" -> {\n@@ -291,2 +299,2 @@\n-                            var javaOpts = commonJavaOpts.with( o -> o\n-                                    .verbose(true).command(true).collectVmOpts(args).mainClass(testEnginePackage,testEngineClassName).collectArgs(args)\n+                            var javaOpts = commonJavaOpts.with(o -> o\n+                                    .verbose(true).command(true).collectVmOpts(args).mainClass(testEnginePackage, testEngineClassName).collectArgs(args)\n@@ -294,1 +302,1 @@\n-                            tests.run(javaOpts,tests,backend);\n+                            tests.run(javaOpts, tests, backend);\n@@ -300,5 +308,5 @@\n-                           For test we require a backend and a TestClass.\");\n-                           Examples:\n-                               $ test ffi-opencl hat.test.TestMatMul\n-                               $ test ffi-opencl hat.test.TestMatMul#method\n-                           \"\"\");\n+                                For test we require a backend and a TestClass.\");\n+                                Examples:\n+                                    $ test ffi-opencl hat.test.TestMatMul\n+                                    $ test ffi-opencl hat.test.TestMatMul#method\n+                                \"\"\");\n@@ -316,1 +324,1 @@\n-                                runnable.run(javaOpts,runnable, backend);\n+                                runnable.run(javaOpts, runnable, backend);\n","filename":"hat\/hat.java","additions":69,"deletions":61,"binary":false,"changes":130,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAsserts;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestArrayView.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAsserts;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestArrays.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n-import hat.annotations.Kernel;\n@@ -38,1 +37,4 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAssertionError;\n+import hat.test.exceptions.HATAsserts;\n+import hat.test.exceptions.HATExpectedFailureException;\n+import hat.test.exceptions.HATExpectedPrecisionError;\n@@ -404,3 +406,1 @@\n-        accelerator.compute(computeContext -> {\n-            TestBFloat16Type.compute03(computeContext, arrayA, arrayB, arrayC);\n-        });\n+        accelerator.compute(computeContext -> TestBFloat16Type.compute03(computeContext, arrayA, arrayB, arrayC));\n@@ -412,1 +412,5 @@\n-            HATAsserts.assertEquals((fa + fb + fb), BF16.bfloat162float(val), 0.01f);\n+            try {\n+                HATAsserts.assertEquals((fa + fb + fb), BF16.bfloat162float(val), 0.01f);\n+            } catch (HATAssertionError hae) {\n+                throw new HATExpectedPrecisionError(hae.getMessage());\n+            }\n@@ -448,1 +452,5 @@\n-            HATAsserts.assertEquals(BF16.bfloat162float(r5), BF16.bfloat162float(gotResult), 0.01f);\n+            try {\n+                HATAsserts.assertEquals(BF16.bfloat162float(r5), BF16.bfloat162float(gotResult), 0.01f);\n+            } catch (HATAssertionError hatAssertionError) {\n+                throw new HATExpectedPrecisionError(hatAssertionError.getMessage());\n+            }\n@@ -490,1 +498,6 @@\n-            HATAsserts.assertEquals(i, BF16.bfloat162float(val), 0.01f);\n+            try {\n+                HATAsserts.assertEquals(i, BF16.bfloat162float(val), 0.01f);\n+            } catch (HATAssertionError hatAssertionError) {\n+                throw new HATExpectedPrecisionError(hatAssertionError.getMessage());\n+            }\n+\n@@ -634,1 +647,5 @@\n-            HATAsserts.assertEquals(BF16.bfloat162float(arrayA.array(i)), BF16.bfloat162float(result), 0.01f);\n+            try {\n+                HATAsserts.assertEquals(BF16.bfloat162float(arrayA.array(i)), BF16.bfloat162float(result), 0.01f);\n+             } catch (HATAssertionError hatAssertionError) {\n+                throw new HATExpectedPrecisionError(hatAssertionError.getMessage());\n+            }\n@@ -656,1 +673,5 @@\n-            HATAsserts.assertEquals(BF16.bfloat162float(arrayA.array(i)) + 32.1f, BF16.bfloat162float(result), 0.1f);\n+            try {\n+                HATAsserts.assertEquals(BF16.bfloat162float(arrayA.array(i)) + 32.1f, BF16.bfloat162float(result), 0.1f);\n+            } catch (HATAssertionError hatAssertionError) {\n+                throw new HATExpectedPrecisionError(hatAssertionError.getMessage());\n+            }\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestBFloat16Type.java","additions":31,"deletions":10,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAsserts;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestBlackscholes.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAsserts;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestConstants.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAsserts;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestDeviceType.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -39,2 +39,4 @@\n-import hat.test.engine.HATAsserts;\n-import hat.test.engine.HATExpectedFailureException;\n+import hat.test.exceptions.HATAssertionError;\n+import hat.test.exceptions.HATAsserts;\n+import hat.test.exceptions.HATExpectedFailureException;\n+import hat.test.exceptions.HATExpectedPrecisionError;\n@@ -498,1 +500,5 @@\n-            HATAsserts.assertEquals(Float.float16ToFloat(r5.value()), Float.float16ToFloat(gotResult), 0.01f);\n+            try {\n+                HATAsserts.assertEquals(Float.float16ToFloat(r5.value()), Float.float16ToFloat(gotResult), 0.01f);\n+            } catch (HATAssertionError hatAssertionError) {\n+                throw new HATExpectedPrecisionError(hatAssertionError.getMessage());\n+            }\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestF16Type.java","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -39,1 +39,1 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAsserts;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestFloat2.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,1 +32,0 @@\n-import hat.buffer.Buffer;\n@@ -37,1 +36,0 @@\n-import hat.ifacemapper.Schema;\n@@ -40,1 +38,1 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAsserts;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestLocal.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAsserts;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestMandel.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -42,1 +42,3 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAssertionError;\n+import hat.test.exceptions.HATAsserts;\n+import hat.test.exceptions.HATExpectedPrecisionError;\n@@ -459,4 +461,8 @@\n-                HATAsserts.assertEquals(\n-                        Float.float16ToFloat(resultSeq.array(i * size + j).value()),\n-                        Float.float16ToFloat(matrixC.array(i * size + j).value()),\n-                        0.01f);\n+                try {\n+                    HATAsserts.assertEquals(\n+                            Float.float16ToFloat(resultSeq.array(i * size + j).value()),\n+                            Float.float16ToFloat(matrixC.array(i * size + j).value()),\n+                            0.01f);\n+                } catch (HATAssertionError hatAssertionError) {\n+                    throw new HATExpectedPrecisionError(hatAssertionError.getMessage());\n+                }\n@@ -1148,1 +1154,2 @@\n-                HATAsserts.assertEquals(F16.f16ToFloat(resultSeq.array(i * size + j)),\n+                try {\n+                    HATAsserts.assertEquals(F16.f16ToFloat(resultSeq.array(i * size + j)),\n@@ -1151,0 +1158,3 @@\n+                } catch (HATAssertionError hatAssertionError) {\n+                    throw new HATExpectedPrecisionError(hatAssertionError.getMessage());\n+                }\n@@ -1184,3 +1194,7 @@\n-                HATAsserts.assertEquals(BF16.bfloat162float(resultSeq.array(i * size + j)),\n-                        BF16.bfloat162float(matrixC.array(i * size + j)),\n-                        0.01f);\n+                try {\n+                    HATAsserts.assertEquals(BF16.bfloat162float(resultSeq.array(i * size + j)),\n+                            BF16.bfloat162float(matrixC.array(i * size + j)),\n+                            0.01f);\n+                } catch (HATAssertionError hatAssertionError) {\n+                    throw new HATExpectedPrecisionError(hatAssertionError.getMessage());\n+                }\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestMatMul.java","additions":23,"deletions":9,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -34,0 +34,2 @@\n+import hat.test.exceptions.HATAssertionError;\n+import hat.test.exceptions.HATExpectedPrecisionError;\n@@ -36,1 +38,1 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAsserts;\n@@ -192,6 +194,10 @@\n-            HATAsserts.assertEquals(seqBody.x(), hatBody.x(), delta);\n-            HATAsserts.assertEquals(seqBody.y(), hatBody.y(), delta);\n-            HATAsserts.assertEquals(seqBody.z(), hatBody.z(), delta);\n-            HATAsserts.assertEquals(seqBody.vx(), hatBody.vx(), delta);\n-            HATAsserts.assertEquals(seqBody.vy(), hatBody.vy(), delta);\n-            HATAsserts.assertEquals(seqBody.vz(), hatBody.vz(), delta);\n+            try {\n+                HATAsserts.assertEquals(seqBody.x(), hatBody.x(), delta);\n+                HATAsserts.assertEquals(seqBody.y(), hatBody.y(), delta);\n+                HATAsserts.assertEquals(seqBody.z(), hatBody.z(), delta);\n+                HATAsserts.assertEquals(seqBody.vx(), hatBody.vx(), delta);\n+                HATAsserts.assertEquals(seqBody.vy(), hatBody.vy(), delta);\n+                HATAsserts.assertEquals(seqBody.vz(), hatBody.vz(), delta);\n+            } catch (HATAssertionError hatAssertionError) {\n+                throw new HATExpectedPrecisionError(hatAssertionError.getMessage());\n+            }\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestNbody.java","additions":13,"deletions":7,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAsserts;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestParenthesis.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,1 +32,0 @@\n-import hat.buffer.Buffer;\n@@ -37,1 +36,0 @@\n-import hat.ifacemapper.Schema;\n@@ -40,1 +38,1 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAsserts;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestPrivate.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,1 +32,0 @@\n-import hat.buffer.Buffer;\n@@ -37,1 +36,0 @@\n-import hat.ifacemapper.Schema;\n@@ -40,1 +38,1 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAsserts;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestReductions.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -36,2 +36,1 @@\n-import hat.test.engine.HATAsserts;\n-import jdk.incubator.code.Reflect;\n+import hat.test.exceptions.HATAsserts;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestVectorArrayView.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -40,1 +40,1 @@\n-import hat.test.engine.HATAsserts;\n+import hat.test.exceptions.HATAsserts;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/TestVectorTypes.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.test.engine;\n+package hat.test.exceptions;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/engine\/HATAsserts.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,0 +30,4 @@\n+import hat.test.exceptions.HATAssertionError;\n+import hat.test.exceptions.HATExpectedFailureException;\n+import hat.test.exceptions.HATExpectedPrecisionError;\n+import hat.test.exceptions.HATTestException;\n@@ -40,0 +44,1 @@\n+import java.util.concurrent.atomic.AtomicInteger;\n@@ -51,0 +56,1 @@\n+        int precisionErrors = 0;\n@@ -58,0 +64,1 @@\n+        public void incrementPrevisionError() { precisionErrors++; }\n@@ -66,0 +73,1 @@\n+        public int getPrecisionErrors() { return precisionErrors; }\n@@ -69,1 +77,1 @@\n-            return String.format(\"passed: %d, failed: %d, unsupported: %d\", passed, failed, unsupported);\n+            return String.format(\"passed: %d, failed: %d, unsupported: %d, precision-errors: %d\", passed, failed, unsupported, precisionErrors);\n@@ -77,1 +85,1 @@\n-            HATTestFormatter.ok(builder);\n+            HATTestFormatter.passed(builder);\n@@ -85,0 +93,3 @@\n+        } catch (HATExpectedPrecisionError expectedPrecisionError) {\n+            HATTestFormatter.expectedPrecisionError(builder, expectedPrecisionError.getMessage());\n+            stats.incrementPrevisionError();\n@@ -92,0 +103,3 @@\n+            } else if (e.getCause() instanceof HATExpectedPrecisionError expectedPrecisionError) {\n+                HATTestFormatter.expectedToFail(builder, expectedPrecisionError.getMessage());\n+                stats.incrementPrevisionError();\n@@ -118,4 +132,4 @@\n-        System.out.println();\n-        System.out.println(builder.toString());\n-        System.out.println(stats.toString());\n-        System.out.println();\n+        IO.println();\n+        IO.println(builder.toString());\n+        IO.println(stats.toString());\n+        IO.println();\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/engine\/HATTestEngine.java","additions":20,"deletions":6,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -44,1 +44,1 @@\n-    public static void ok(StringBuilder builder) {\n+    public static void passed(StringBuilder builder) {\n@@ -46,1 +46,1 @@\n-                .append(\"[ok]\")\n+                .append(\"[passed]\")\n@@ -68,0 +68,9 @@\n+    public static void expectedPrecisionError(StringBuilder builder, String reason) {\n+        builder.append(Colours.RED)\n+                .append(\"[EXPECTED][PRECISION ERROR]\")\n+                .append(\" Reason: \")\n+                .append(reason)\n+                .append(Colours.RESET)\n+                .append(\"\\n\");;\n+    }\n+\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/engine\/HATTestFormatter.java","additions":11,"deletions":2,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.test.engine;\n+package hat.test.exceptions;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/exceptions\/HATAssertionError.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/tests\/src\/main\/java\/hat\/test\/engine\/HATAssertionError.java","status":"renamed"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.test.engine;\n+package hat.test.exceptions;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/exceptions\/HATExpectedFailureException.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/tests\/src\/main\/java\/hat\/test\/engine\/HATExpectedFailureException.java","status":"renamed"},{"patch":"@@ -0,0 +1,31 @@\n+\/*\n+ * Copyright (c) 2025, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+package hat.test.exceptions;\n+\n+public class HATExpectedPrecisionError extends HATTestException {\n+    public HATExpectedPrecisionError(String message) {\n+        super(message);\n+    }\n+}\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/exceptions\/HATExpectedPrecisionError.java","additions":31,"deletions":0,"binary":false,"changes":31,"status":"added"},{"patch":"@@ -25,1 +25,1 @@\n-package hat.test.engine;\n+package hat.test.exceptions;\n","filename":"hat\/tests\/src\/main\/java\/hat\/test\/exceptions\/HATTestException.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"hat\/tests\/src\/main\/java\/hat\/test\/engine\/HATTestException.java","status":"renamed"}]}