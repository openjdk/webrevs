{"files":[{"patch":"@@ -130,18 +130,3 @@\n-        this.blockMap = smta.map(sma ->\n-                sma.entries().stream().collect(Collectors.toUnmodifiableMap(\n-                        StackMapFrameInfo::target,\n-                        smfi -> entryBlock.block(smfi.stack().stream().map(vti -> (TypeElement)switch (vti) {\n-                            case ITEM_INTEGER -> JavaType.INT;\n-                            case ITEM_FLOAT -> JavaType.FLOAT;\n-                            case ITEM_DOUBLE -> JavaType.DOUBLE;\n-                            case ITEM_LONG -> JavaType.LONG;\n-                            case ITEM_NULL -> JavaType.J_L_OBJECT;\n-                            case ITEM_UNINITIALIZED_THIS -> JavaType.type(classModel.thisClass().asSymbol());\n-                            case StackMapFrameInfo.ObjectVerificationTypeInfo ovti ->\n-                                    JavaType.type(ovti.classSymbol());\n-                            case StackMapFrameInfo.UninitializedVerificationTypeInfo uvti ->\n-                                    JavaType.type(codeTracker.getUninitTypeOf(uvti.newTarget()));\n-                            default ->\n-                                throw new IllegalArgumentException(\"Unexpected VTI: \" + vti);\n-                        }).toList().reversed())))).orElse(Map.of());\n-\n+        this.blockMap = codeTracker.stackMap.entrySet().stream().collect(Collectors.toUnmodifiableMap(\n+                        Map.Entry::getKey,\n+                        me -> entryBlock.block(me.getValue().stack().stream().map(JavaType::type).toArray(TypeElement[]::new))));\n","filename":"src\/java.base\/share\/classes\/java\/lang\/reflect\/code\/bytecode\/BytecodeLift.java","additions":3,"deletions":18,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -56,1 +56,1 @@\n-    private final Map<Label, Frame> stackMap;\n+    final Map<Label, Frame> stackMap;\n","filename":"src\/java.base\/share\/classes\/java\/lang\/reflect\/code\/bytecode\/LocalsTypeMapper.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}