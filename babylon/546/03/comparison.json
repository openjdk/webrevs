{"files":[{"patch":"@@ -189,0 +189,1 @@\n+        in = in.replaceAll(\"\\\\033\\\\[\\\\d+m\", \"\"); \/\/ remove ANSI coloring\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/extern\/OpParser.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -38,0 +38,1 @@\n+import java.util.function.BiFunction;\n@@ -53,0 +54,5 @@\n+    \/**\n+     * Boolean property to provide ANSI-colored output.\n+     *\/\n+    static final boolean COLOR = Boolean.getBoolean(\"jdk.incubator.code.extern.OpWriter.COLOR\");\n+\n@@ -340,0 +346,11 @@\n+    static BiFunction<Class<? extends CodeItem>, String, String> getDyer() {\n+        return COLOR\n+                ? (itemType, text) ->\n+                        (itemType == Op.class ? \"\\033[34m\" : \/\/ blue\n+                         itemType == Block.class ? \"\\033[35m\": \/\/ purple\n+                         itemType == TypeElement.class ? \"\\033[32m\": \"\\033[31m\") \/\/ green : red\n+                        + text\n+                        + \"\\033[0m\" \/\/ reset\n+                : (_, text) -> text;\n+    }\n+\n@@ -345,0 +362,1 @@\n+    final BiFunction<Class<? extends CodeItem>, String, String> dyer;\n@@ -357,0 +375,1 @@\n+        this.dyer = getDyer();\n@@ -394,0 +413,1 @@\n+        this.dyer = getDyer();\n@@ -416,1 +436,1 @@\n-        write(op.opName());\n+        write(Op.class, op.opName());\n@@ -522,2 +542,1 @@\n-        write(\"^\");\n-        write(namer.apply(b));\n+        write(Block.class, \"^\" + namer.apply(b));\n@@ -527,2 +546,1 @@\n-        write(\"%\");\n-        write(namer.apply(v));\n+        write(Value.class, \"%\" + namer.apply(v));\n@@ -532,2 +550,1 @@\n-        write(\"%\");\n-        write(namer.apply(v));\n+        write(Value.class, \"%\" + namer.apply(v));\n@@ -558,1 +575,5 @@\n-        write(JavaTypeUtils.flatten(te.externalize()).toString());\n+        write(TypeElement.class, JavaTypeUtils.flatten(te.externalize()).toString());\n+    }\n+\n+    void write(Class<? extends CodeItem> itemType, String s) {\n+        write(dyer.apply(itemType, s));\n","filename":"src\/jdk.incubator.code\/share\/classes\/jdk\/incubator\/code\/extern\/OpWriter.java","additions":29,"deletions":8,"binary":false,"changes":37,"status":"modified"}]}