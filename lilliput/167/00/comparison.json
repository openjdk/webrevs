{"files":[{"patch":"@@ -189,3 +189,0 @@\n-  if (tiny_classpointer_mode()) {\n-    return nullptr;\n-  }\n@@ -197,3 +194,0 @@\n-  if (tiny_classpointer_mode()) {\n-    return nullptr;\n-  }\n","filename":"src\/hotspot\/share\/oops\/compressedKlass.cpp","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -49,0 +49,1 @@\n+    static final String usesCompactObjectHeadersPat = \"UseCompactObjectHeaders 1\";\n@@ -60,0 +61,9 @@\n+    \/\/ Returns true if the output indicates that the VM uses compact object headers\n+    static boolean usesCompactObjectHeaders(OutputAnalyzer output) {\n+        if (output.getOutput().contains(usesCompactObjectHeadersPat)) {\n+            return true;\n+        } else {\n+            return false;\n+        }\n+    }\n+\n@@ -224,1 +234,1 @@\n-        if (!isCCSReservedAnywhere(output)) {\n+        if (!isCCSReservedAnywhere(output) && !usesCompactObjectHeaders(output)) {\n@@ -242,1 +252,1 @@\n-        if (!isCCSReservedAnywhere(output)) {\n+        if (!isCCSReservedAnywhere(output) && !usesCompactObjectHeaders(output)) {\n@@ -245,1 +255,1 @@\n-        if (!Platform.isAArch64() && !Platform.isPPC()) {\n+        if (!Platform.isAArch64()  && !usesCompactObjectHeaders(output) && !Platform.isPPC()) {\n@@ -264,1 +274,1 @@\n-        if (!isCCSReservedAnywhere(output)) {\n+        if (!isCCSReservedAnywhere(output) && !usesCompactObjectHeaders(output)) {\n@@ -267,1 +277,1 @@\n-        if (!Platform.isAArch64() && !Platform.isPPC()) {\n+        if (!Platform.isAArch64()  && !usesCompactObjectHeaders(output) && !Platform.isPPC()) {\n","filename":"test\/hotspot\/jtreg\/runtime\/CompressedOops\/CompressedClassPointers.java","additions":15,"deletions":5,"binary":false,"changes":20,"status":"modified"}]}