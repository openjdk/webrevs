{"files":[{"patch":"@@ -1558,15 +1558,0 @@\n-  if (UseCompactObjectHeaders) {\n-    if (!UseCompressedClassPointers) {\n-      \/\/ Lilliput requires compressed class pointers.\n-      if (FLAG_IS_CMDLINE(UseCompressedClassPointers)) {\n-        \/\/ If user specifies -UseCompressedClassPointers, it should be reverted with\n-        \/\/ a warning.\n-        warning(\"Lilliput reqires compressed class pointers.\");\n-      }\n-    }\n-    FLAG_SET_DEFAULT(UseCompressedClassPointers, true);\n-  }\n-  if (!UseCompactObjectHeaders) {\n-    FLAG_SET_DEFAULT(UseSharedSpaces, false);\n-  }\n-\n@@ -3164,0 +3149,7 @@\n+#ifdef _LP64\n+  if (UseCompactObjectHeaders && FLAG_IS_CMDLINE(UseCompressedClassPointers) && !UseCompressedClassPointers) {\n+    \/\/ If user specifies -UseCompressedClassPointers, disable compact headers with a warning.\n+    warning(\"Compact object headers require compressed class pointers. Disabling compact object headers.\");\n+    FLAG_SET_DEFAULT(UseCompactObjectHeaders, false);\n+  }\n+\n@@ -3165,4 +3157,0 @@\n-    \/\/ Lilliput requires fast-locking.\n-    if (FLAG_IS_CMDLINE(UseFastLocking)) {\n-      warning(\"Lilliput requires fast-locking.\");\n-    }\n@@ -3172,0 +3160,5 @@\n+  if (!UseCompactObjectHeaders) {\n+    FLAG_SET_DEFAULT(UseSharedSpaces, false);\n+  }\n+#endif\n+\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":12,"deletions":19,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -300,1 +300,1 @@\n-        return Platform.is64bit() && !(InputArguments.contains(\"-XX:-UseCompressedClassPointers\") && InputArguments.contains(\"-XX:-UseCompactObjectHeaders\"));\n+        return Platform.is64bit() && !InputArguments.contains(\"-XX:-UseCompressedClassPointers\") && !InputArguments.contains(\"-XX:-UseCompactObjectHeaders\");\n","filename":"test\/hotspot\/jtreg\/gc\/metaspace\/TestMetaspacePerfCounters.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}