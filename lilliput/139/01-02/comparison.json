{"files":[{"patch":"@@ -577,9 +577,7 @@\n-      const int num_unrolled = OMC2UnrollCacheLookup ? MIN2(OMC2UnrollCacheEntries, OMCacheSize) : 0;\n-      if (OMC2UnrollCacheLookup) {\n-        for (int i = 0; i < num_unrolled; i++) {\n-          ldr(t1, Address(t));\n-          cmp(obj, t1);\n-          br(Assembler::EQ, monitor_found);\n-          if (i + 1 != num_unrolled) {\n-            increment(t, in_bytes(OMCache::oop_to_oop_difference()));\n-          }\n+      const int num_unrolled = MIN2(OMC2UnrollCacheEntries, OMCacheSize);\n+      for (int i = 0; i < num_unrolled; i++) {\n+        ldr(t1, Address(t));\n+        cmp(obj, t1);\n+        br(Assembler::EQ, monitor_found);\n+        if (i + 1 != num_unrolled) {\n+          increment(t, in_bytes(OMCache::oop_to_oop_difference()));\n@@ -588,1 +586,2 @@\n-      if (!OMC2UnrollCacheLookup || (OMC2UnrollCacheLookupLoopTail && num_unrolled != OMCacheSize)) {\n+\n+      if (num_unrolled == 0 || (OMC2UnrollCacheLookupLoopTail && num_unrolled != OMCacheSize)) {\n","filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.cpp","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -1266,8 +1266,6 @@\n-      const int num_unrolled = OMC2UnrollCacheLookup ? MIN2(OMC2UnrollCacheEntries, OMCacheSize) : 0;\n-      if (OMC2UnrollCacheLookup) {\n-        for (int i = 0; i < num_unrolled; i++) {\n-          cmpptr(obj, Address(t));\n-          jccb(Assembler::equal, monitor_found);\n-          if (i + 1 != num_unrolled) {\n-            increment(t, in_bytes(OMCache::oop_to_oop_difference()));\n-          }\n+      const int num_unrolled = MIN2(OMC2UnrollCacheEntries, OMCacheSize);\n+      for (int i = 0; i < num_unrolled; i++) {\n+        cmpptr(obj, Address(t));\n+        jccb(Assembler::equal, monitor_found);\n+        if (i + 1 != num_unrolled) {\n+          increment(t, in_bytes(OMCache::oop_to_oop_difference()));\n@@ -1276,1 +1274,2 @@\n-      if (!OMC2UnrollCacheLookup || (OMC2UnrollCacheLookupLoopTail && num_unrolled != OMCacheSize)) {\n+\n+      if (num_unrolled == 0 || (OMC2UnrollCacheLookupLoopTail && num_unrolled != OMCacheSize)) {\n","filename":"src\/hotspot\/cpu\/x86\/c2_MacroAssembler_x86.cpp","additions":8,"deletions":9,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -1993,2 +1993,0 @@\n-  product(bool, OMC2UnrollCacheLookup, false, \"\")                           \\\n-                                                                            \\\n@@ -1997,1 +1995,1 @@\n-  product(int, OMC2UnrollCacheEntries, 8, \"\")                               \\\n+  product(int, OMC2UnrollCacheEntries, 0, \"\")                               \\\n","filename":"src\/hotspot\/share\/runtime\/globals.hpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"}]}