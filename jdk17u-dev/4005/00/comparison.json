{"files":[{"patch":"@@ -61,0 +61,2 @@\n+\n+    \/\/ In nanoseconds\n@@ -62,1 +64,0 @@\n-    private long finishTime;\n@@ -64,0 +65,2 @@\n+    private long stressTime;\n+\n@@ -182,1 +185,1 @@\n-        println(out, \"Execution time: \" + (currentTime - startTime) + \" seconds\");\n+        println(out, \"Execution time: \" + (currentTime - startTime) \/ 1_000_000_000.0 + \" seconds\");\n@@ -189,2 +192,2 @@\n-        } else if (finishTime != 0 && currentTime >= finishTime) {\n-            println(out, \"Execution finished because time was exceeded: \" + (currentTime - startTime) + \" >= \" + (finishTime - startTime));\n+        } else if (stressTime != 0 && (currentTime - startTime) >= stressTime) {\n+            println(out, \"Execution finished because time has exceeded stress time: \" + stressTime \/ 1_000_000_000 + \" seconds\");\n@@ -211,7 +214,2 @@\n-        long stressTime = options.getTime();\n-        startTime = System.currentTimeMillis();\n-        if (stressTime == 0) {\n-            finishTime = 0;\n-        } else {\n-            finishTime = startTime + stressTime * 1000;\n-        }\n+        stressTime = options.getTime() * 1_000_000_000;\n+        startTime = System.nanoTime();\n@@ -235,1 +233,1 @@\n-        currentTime = System.currentTimeMillis();\n+        currentTime = System.nanoTime();\n@@ -258,0 +256,2 @@\n+        boolean result = continueExecution();\n+        \/\/ Call print at the end to show the most up-to-date info.\n@@ -261,1 +261,1 @@\n-        return continueExecution();\n+        return result;\n@@ -270,1 +270,1 @@\n-        currentTime = System.currentTimeMillis();\n+        currentTime = System.nanoTime();\n@@ -277,1 +277,1 @@\n-                && (finishTime == 0 || currentTime < finishTime);\n+                && (stressTime == 0 || (currentTime - startTime) < stressTime);\n@@ -312,1 +312,1 @@\n-        return System.currentTimeMillis() - startTime;\n+        return (System.nanoTime() - startTime) \/ 1_000_000;\n@@ -321,2 +321,2 @@\n-        long current = System.currentTimeMillis();\n-        if (current >= finishTime) {\n+        long elapsedTime = System.nanoTime() - startTime;\n+        if (elapsedTime >= stressTime) {\n@@ -325,1 +325,1 @@\n-            return finishTime - current;\n+            return (stressTime - elapsedTime) \/ 1_000_000;\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/test\/Stresser.java","additions":19,"deletions":19,"binary":false,"changes":38,"status":"modified"}]}