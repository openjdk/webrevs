{"files":[{"patch":"@@ -43,0 +43,1 @@\n+import java.util.concurrent.Executors;\n@@ -53,0 +54,4 @@\n+    static Stream<ThreadFactory> factories() {\n+        return Stream.of(Executors.defaultThreadFactory());\n+    }\n+\n@@ -56,1 +61,3 @@\n-    void testCloseDuringSocketChannelRead() throws Exception {\n+    @ParameterizedTest\n+    @MethodSource(\"factories\")\n+    void testCloseDuringSocketChannelRead(ThreadFactory factory) throws Exception {\n@@ -66,1 +73,1 @@\n-                Thread thread = new Thread(() -> {\n+                Thread thread = factory.newThread(() -> {\n@@ -99,2 +106,4 @@\n-    void testCloseDuringSocketUntimedRead() throws Exception {\n-        testCloseDuringSocketRead(0);\n+    @ParameterizedTest\n+    @MethodSource(\"factories\")\n+    void testCloseDuringSocketUntimedRead(ThreadFactory factory) throws Exception {\n+        testCloseDuringSocketRead(factory, 0);\n@@ -106,2 +115,4 @@\n-    void testCloseDuringSockeTimedRead() throws Exception {\n-        testCloseDuringSocketRead(60_000);\n+    @ParameterizedTest\n+    @MethodSource(\"factories\")\n+    void testCloseDuringSockeTimedRead(ThreadFactory factory) throws Exception {\n+        testCloseDuringSocketRead(factory, 60_000);\n@@ -110,1 +121,1 @@\n-    private void testCloseDuringSocketRead(int timeout) throws Exception {\n+    private void testCloseDuringSocketRead(ThreadFactory factory, int timeout) throws Exception {\n@@ -120,1 +131,1 @@\n-                Thread thread = new Thread(() -> {\n+                Thread thread = factory.newThread(() -> {\n@@ -160,1 +171,1 @@\n-        new Thread(() -> {\n+        Thread tDaemon = new Thread(() -> {\n@@ -173,1 +184,3 @@\n-        }).start();\n+        });\n+        tDaemon.setDaemon(true);\n+        tDaemon.start();\n","filename":"test\/jdk\/java\/nio\/channels\/SocketChannel\/PeerReadsAfterAsyncClose.java","additions":23,"deletions":10,"binary":false,"changes":33,"status":"modified"}]}