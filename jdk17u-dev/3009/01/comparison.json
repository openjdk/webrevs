{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,7 +24,0 @@\n-\/*\n- * @test\n- * @bug 7093691\n- * @summary Tests if JComboBox has correct font color when disabled\/enabled\n- * @run main\/othervm -Dsun.java2d.uiScale=1 DisabledComboBoxFontTestAuto\n- *\/\n-\n@@ -47,0 +40,8 @@\n+\/*\n+ * @test\n+ * @bug 7093691 8310072\n+ * @summary Tests if JComboBox has correct font color when disabled\/enabled\n+ * @key headful\n+ * @run main\/othervm -Dsun.java2d.uiScale=1 DisabledComboBoxFontTestAuto\n+ *\/\n+\n@@ -50,1 +51,0 @@\n-    private static Path testDir;\n@@ -57,1 +57,2 @@\n-        combo.addItem(\"Simple JComboBox\");\n+        combo.addItem(\"\\u2588\".repeat(5));\n+        combo.setFont(combo.getFont().deriveFont(50.0f));\n@@ -60,1 +61,2 @@\n-        combo2.addItem(\"Simple JComboBox\");\n+        combo2.addItem(\"\\u2588\".repeat(5));\n+        combo2.setFont(combo2.getFont().deriveFont(50.0f));\n@@ -93,10 +95,0 @@\n-        ImageIO.write(enabledImage, \"png\", new File(testDir\n-                + \"\/\" + lafName + \"Enabled.png\"));\n-        ImageIO.write(disabledImage, \"png\", new File(testDir\n-                + \"\/\" + lafName + \"Disabled.png\"));\n-        ImageIO.write(enabledImage2, \"png\", new File(testDir\n-                + \"\/\" + lafName + \"EnabledDLCR.png\"));\n-        ImageIO.write(disabledImage2, \"png\", new File(testDir\n-                + \"\/\" + lafName + \"DisabledDLCR.png\"));\n-\n-        boolean isIdentical = true;\n@@ -104,0 +96,1 @@\n+        Path testDir = Path.of(System.getProperty(\"test.classes\", \".\"));\n@@ -106,1 +99,1 @@\n-        int y = 10;\n+        int y = enabledImage.getHeight() \/ 2;\n@@ -109,13 +102,5 @@\n-            \/\/ Nimbus has a pixel offset in coordinates since Nimbus is 2px\n-            \/\/ smaller in width than other L&F's\n-            if (lafName.equals(\"Nimbus\")) {\n-                eColor1 = new Color(enabledImage.getRGB(x + 1, y));\n-                eColor2 = new Color(enabledImage2.getRGB(x, y));\n-                dColor1 = new Color(disabledImage.getRGB(x + 1, y));\n-                dColor2 = new Color(disabledImage2.getRGB(x, y));\n-            } else {\n-                eColor1 = new Color(enabledImage.getRGB(x, y));\n-                eColor2 = new Color(enabledImage2.getRGB(x, y));\n-                dColor1 = new Color(disabledImage.getRGB(x, y));\n-                dColor2 = new Color(disabledImage2.getRGB(x, y));\n-            }\n+            eColor1 = new Color(enabledImage.getRGB(x, y));\n+            eColor2 = new Color(enabledImage2.getRGB(x, y));\n+            dColor1 = new Color(disabledImage.getRGB(x, y));\n+            dColor2 = new Color(disabledImage2.getRGB(x, y));\n+\n@@ -123,2 +108,10 @@\n-                isIdentical = false;\n-                break;\n+                failingLafs.append(lafName + \", \");\n+                ImageIO.write(enabledImage, \"png\", new File(testDir\n+                        + \"\/\" + lafName + \"Enabled.png\"));\n+                ImageIO.write(disabledImage, \"png\", new File(testDir\n+                        + \"\/\" + lafName + \"Disabled.png\"));\n+                ImageIO.write(enabledImage2, \"png\", new File(testDir\n+                        + \"\/\" + lafName + \"EnabledDLCR.png\"));\n+                ImageIO.write(disabledImage2, \"png\", new File(testDir\n+                        + \"\/\" + lafName + \"DisabledDLCR.png\"));\n+                return;\n@@ -127,6 +120,1 @@\n-\n-        if (isIdentical) {\n-            System.out.println(\"PASSED\");\n-        } else {\n-            failingLafs.append(lafName + \", \");\n-        }\n+        System.out.println(\"Test Passed: \" + lafName);\n@@ -137,3 +125,2 @@\n-                || (c1.getBlue() != c2.getBlue())\n-                || (c1.getGreen() != c2.getGreen())) {\n-\n+            || (c1.getBlue() != c2.getBlue())\n+            || (c1.getGreen() != c2.getGreen())) {\n@@ -166,1 +153,0 @@\n-        testDir = Path.of(System.getProperty(\"test.classes\", \".\"));\n","filename":"test\/jdk\/javax\/swing\/JComboBox\/DisabledComboBoxFontTestAuto.java","additions":33,"deletions":47,"binary":false,"changes":80,"status":"modified"}]}