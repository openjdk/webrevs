{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -72,1 +72,1 @@\n- * @bug 8277072\n+ * @bug 8277072 8327180\n@@ -79,28 +79,0 @@\n-    \/**\n-     * Test methods execute in same VM and are ordered by name.\n-     * We test effectiveness 1st which is sensitive to previous allocations when ZGC is used.\n-     *\/\n-    @Test\n-    public void test1CacheEffectiveness() throws Exception {\n-        var list = new ArrayList<>();\n-        var ref1 = lookupObjectStreamClass(TestClass1.class);\n-        var ref2 = newWeakRef();\n-        boolean oome = false;\n-        try {\n-            while (!ref2.refersTo(null)) {\n-                list.add(new byte[1024 * 1024 * 1]); \/\/ 1 MiB chunks\n-                System.out.println(\"1MiB allocated...\");\n-                Thread.sleep(5L);\n-            }\n-        } catch (OutOfMemoryError e) {\n-            \/\/ release\n-            list = null;\n-            oome = true;\n-        }\n-        assertFalse(oome, \"WeakReference was not cleared although memory was pressed hard\");\n-        assertFalse(ref1.refersTo(null),\n-                    \"Cache lost entry together with WeakReference being cleared although memory was not under pressure\");\n-        System.gc();\n-        Thread.sleep(100L);\n-    }\n-\n","filename":"test\/jdk\/java\/io\/ObjectStreamClass\/ObjectStreamClassCaching.java","additions":2,"deletions":30,"binary":false,"changes":32,"status":"modified"}]}