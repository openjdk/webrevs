{"files":[{"patch":"@@ -0,0 +1,1277 @@\n+\/*\n+ * Copyright (c) 2022 Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @library \/test\/lib\n+ * @modules java.base\/sun.net:+open\n+ *          java.base\/sun.net.www.http:+open\n+ *          java.base\/sun.net.www:+open\n+ *          java.base\/sun.net.www.protocol.http:+open\n+ * @run main\/othervm KeepAliveTest 0\n+ * @run main\/othervm KeepAliveTest 1\n+ * @run main\/othervm KeepAliveTest 2\n+ * @run main\/othervm KeepAliveTest 3\n+ * @run main\/othervm KeepAliveTest 4\n+ * @run main\/othervm KeepAliveTest 5\n+ * @run main\/othervm KeepAliveTest 6\n+ * @run main\/othervm KeepAliveTest 7\n+ * @run main\/othervm KeepAliveTest 8\n+ * @run main\/othervm KeepAliveTest 9\n+ * @run main\/othervm KeepAliveTest 10\n+ * @run main\/othervm KeepAliveTest 11\n+ * @run main\/othervm KeepAliveTest 12\n+ * @run main\/othervm KeepAliveTest 13\n+ * @run main\/othervm KeepAliveTest 14\n+ * @run main\/othervm KeepAliveTest 15\n+ * @run main\/othervm KeepAliveTest 16\n+ * @run main\/othervm KeepAliveTest 17\n+ * @run main\/othervm KeepAliveTest 18\n+ * @run main\/othervm KeepAliveTest 19\n+ * @run main\/othervm KeepAliveTest 20\n+ * @run main\/othervm KeepAliveTest 21\n+ * @run main\/othervm KeepAliveTest 22\n+ * @run main\/othervm KeepAliveTest 23\n+ * @run main\/othervm KeepAliveTest 24\n+ * @run main\/othervm KeepAliveTest 25\n+ * @run main\/othervm KeepAliveTest 26\n+ * @run main\/othervm KeepAliveTest 27\n+ * @run main\/othervm KeepAliveTest 28\n+ * @run main\/othervm KeepAliveTest 29\n+ * @run main\/othervm KeepAliveTest 30\n+ * @run main\/othervm KeepAliveTest 31\n+ * @run main\/othervm KeepAliveTest 32\n+ * @run main\/othervm KeepAliveTest 33\n+ * @run main\/othervm KeepAliveTest 34\n+ * @run main\/othervm KeepAliveTest 35\n+ * @run main\/othervm KeepAliveTest 36\n+ * @run main\/othervm KeepAliveTest 37\n+ * @run main\/othervm KeepAliveTest 38\n+ * @run main\/othervm KeepAliveTest 39\n+ * @run main\/othervm KeepAliveTest 40\n+ * @run main\/othervm KeepAliveTest 41\n+ * @run main\/othervm KeepAliveTest 42\n+ * @run main\/othervm KeepAliveTest 43\n+ * @run main\/othervm KeepAliveTest 44\n+ * @run main\/othervm KeepAliveTest 45\n+ * @run main\/othervm KeepAliveTest 46\n+ * @run main\/othervm KeepAliveTest 47\n+ * @run main\/othervm KeepAliveTest 48\n+ * @run main\/othervm KeepAliveTest 49\n+ * @run main\/othervm KeepAliveTest 50\n+ * @run main\/othervm KeepAliveTest 51\n+ * @run main\/othervm KeepAliveTest 52\n+ * @run main\/othervm KeepAliveTest 53\n+ * @run main\/othervm KeepAliveTest 54\n+ * @run main\/othervm KeepAliveTest 55\n+ * @run main\/othervm KeepAliveTest 56\n+ * @run main\/othervm KeepAliveTest 57\n+ * @run main\/othervm KeepAliveTest 58\n+ * @run main\/othervm KeepAliveTest 59\n+ * @run main\/othervm KeepAliveTest 60\n+ * @run main\/othervm KeepAliveTest 61\n+ * @run main\/othervm KeepAliveTest 62\n+ * @run main\/othervm KeepAliveTest 63\n+ * @run main\/othervm KeepAliveTest 64\n+ * @run main\/othervm KeepAliveTest 65\n+ * @run main\/othervm KeepAliveTest 66\n+ * @run main\/othervm KeepAliveTest 67\n+ * @run main\/othervm KeepAliveTest 68\n+ * @run main\/othervm KeepAliveTest 69\n+ * @run main\/othervm KeepAliveTest 70\n+ * @run main\/othervm KeepAliveTest 71\n+ * @run main\/othervm KeepAliveTest 72\n+ * @run main\/othervm KeepAliveTest 73\n+ * @run main\/othervm KeepAliveTest 74\n+ * @run main\/othervm KeepAliveTest 75\n+ * @run main\/othervm KeepAliveTest 76\n+ * @run main\/othervm KeepAliveTest 77\n+ * @run main\/othervm KeepAliveTest 78\n+ * @run main\/othervm KeepAliveTest 79\n+ * @run main\/othervm KeepAliveTest 80\n+ * @run main\/othervm KeepAliveTest 81\n+ * @run main\/othervm KeepAliveTest 82\n+ * @run main\/othervm KeepAliveTest 83\n+ * @run main\/othervm KeepAliveTest 84\n+ * @run main\/othervm KeepAliveTest 85\n+ * @run main\/othervm KeepAliveTest 86\n+ * @run main\/othervm KeepAliveTest 87\n+ * @run main\/othervm KeepAliveTest 88\n+ * @run main\/othervm KeepAliveTest 89\n+ * @run main\/othervm KeepAliveTest 90\n+ * @run main\/othervm KeepAliveTest 91\n+ * @run main\/othervm KeepAliveTest 92\n+ * @run main\/othervm KeepAliveTest 93\n+ * @run main\/othervm KeepAliveTest 94\n+ * @run main\/othervm KeepAliveTest 95\n+ * @run main\/othervm KeepAliveTest 96\n+ * @run main\/othervm KeepAliveTest 97\n+ * @run main\/othervm KeepAliveTest 98\n+ * @run main\/othervm KeepAliveTest 99\n+ * @run main\/othervm KeepAliveTest 100\n+ * @run main\/othervm KeepAliveTest 101\n+ * @run main\/othervm KeepAliveTest 102\n+ * @run main\/othervm KeepAliveTest 103\n+ * @run main\/othervm KeepAliveTest 104\n+ * @run main\/othervm KeepAliveTest 105\n+ * @run main\/othervm KeepAliveTest 106\n+ * @run main\/othervm KeepAliveTest 107\n+ * @run main\/othervm KeepAliveTest 108\n+ * @run main\/othervm KeepAliveTest 109\n+ * @run main\/othervm KeepAliveTest 110\n+ * @run main\/othervm KeepAliveTest 111\n+ * @run main\/othervm KeepAliveTest 112\n+ * @run main\/othervm KeepAliveTest 113\n+ * @run main\/othervm KeepAliveTest 114\n+ * @run main\/othervm KeepAliveTest 115\n+ * @run main\/othervm KeepAliveTest 116\n+ * @run main\/othervm KeepAliveTest 117\n+ * @run main\/othervm KeepAliveTest 118\n+ * @run main\/othervm KeepAliveTest 119\n+ * @run main\/othervm KeepAliveTest 120\n+ * @run main\/othervm KeepAliveTest 121\n+ * @run main\/othervm KeepAliveTest 122\n+ * @run main\/othervm KeepAliveTest 123\n+ * @run main\/othervm KeepAliveTest 124\n+ * @run main\/othervm KeepAliveTest 125\n+ * @run main\/othervm KeepAliveTest 126\n+ * @run main\/othervm KeepAliveTest 127\n+ * @run main\/othervm KeepAliveTest 128\n+ * @run main\/othervm KeepAliveTest 129\n+ * @run main\/othervm KeepAliveTest 130\n+ * @run main\/othervm KeepAliveTest 131\n+ * @run main\/othervm KeepAliveTest 132\n+ * @run main\/othervm KeepAliveTest 133\n+ * @run main\/othervm KeepAliveTest 134\n+ * @run main\/othervm KeepAliveTest 135\n+ * @run main\/othervm KeepAliveTest 136\n+ * @run main\/othervm KeepAliveTest 137\n+ * @run main\/othervm KeepAliveTest 138\n+ * @run main\/othervm KeepAliveTest 139\n+ * @run main\/othervm KeepAliveTest 140\n+ * @run main\/othervm KeepAliveTest 141\n+ * @run main\/othervm KeepAliveTest 142\n+ * @run main\/othervm KeepAliveTest 143\n+ * @run main\/othervm KeepAliveTest 144\n+ * @run main\/othervm KeepAliveTest 145\n+ * @run main\/othervm KeepAliveTest 146\n+ * @run main\/othervm KeepAliveTest 147\n+ * @run main\/othervm KeepAliveTest 148\n+ * @run main\/othervm KeepAliveTest 149\n+ * @run main\/othervm KeepAliveTest 150\n+ * @run main\/othervm KeepAliveTest 151\n+ * @run main\/othervm KeepAliveTest 152\n+ * @run main\/othervm KeepAliveTest 153\n+ * @run main\/othervm KeepAliveTest 154\n+ * @run main\/othervm KeepAliveTest 155\n+ * @run main\/othervm KeepAliveTest 156\n+ * @run main\/othervm KeepAliveTest 157\n+ * @run main\/othervm KeepAliveTest 158\n+ * @run main\/othervm KeepAliveTest 159\n+ *\/\n+\n+import java.nio.charset.StandardCharsets;\n+import java.io.InputStream;\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.io.OutputStreamWriter;\n+import java.lang.reflect.Constructor;\n+import java.lang.reflect.Field;\n+import java.net.InetAddress;\n+import java.net.InetSocketAddress;\n+import java.net.Proxy;\n+import java.net.Proxy.Type;\n+import java.net.ServerSocket;\n+import java.net.Socket;\n+import java.net.URL;\n+import java.util.List;\n+import java.util.Map.Entry;\n+import java.util.concurrent.CountDownLatch;\n+import java.util.logging.ConsoleHandler;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+import sun.net.www.http.HttpClient;\n+import sun.net.www.http.KeepAliveCache;\n+import sun.net.www.protocol.http.HttpURLConnection;\n+import jdk.test.lib.net.URIBuilder;\n+\n+public class KeepAliveTest {\n+    private static final Logger logger = Logger.getLogger(\"sun.net.www.protocol.http.HttpURLConnection\");\n+    private static final String NOT_CACHED = \"NotCached\";\n+    private static final String CLIENT_SEPARATOR = \";\";\n+    private static final String NEW_LINE = \"\\r\\n\";\n+    private volatile int SERVER_PORT = 0;\n+    \/*\n+     * isProxySet is shared variable between server thread and client thread(main) and it should be set and reset to false for each and\n+     * every scenario.\n+     * isProxySet variable should be set by server thread before proceeding to client thread(main).\n+     *\/\n+    private volatile boolean isProxySet = false;\n+    private static final String CONNECTION_KEEP_ALIVE_ONLY = \"Connection: keep-alive\";\n+    private static final String PROXY_CONNECTION_KEEP_ALIVE_ONLY = \"Proxy-Connection: keep-alive\";\n+    private static final String KEEP_ALIVE_TIMEOUT_NEG = \"Keep-alive: timeout=-20\";\n+    private static final String KEEP_ALIVE_TIMEOUT_ZERO = \"Keep-alive: timeout=0\";\n+    private static final String KEEP_ALIVE_TIMEOUT = \"Keep-alive: timeout=20\";\n+    private static final String KEEP_ALIVE_PROXY_TIMEOUT = \"Keep-alive: timeout=120\";\n+    private static final String CLIENT_HTTP_KEEP_ALIVE_TIME_SERVER_NEGATIVE = \"http.keepAlive.time.server=-100\";\n+    private static final String CLIENT_HTTP_KEEP_ALIVE_TIME_PROXY_NEGATIVE = \"http.keepAlive.time.proxy=-200\";\n+    private static final String CLIENT_HTTP_KEEP_ALIVE_TIME_SERVER_ZERO = \"http.keepAlive.time.server=0\";\n+    private static final String CLIENT_HTTP_KEEP_ALIVE_TIME_PROXY_ZERO = \"http.keepAlive.time.proxy=0\";\n+    private static final String CLIENT_HTTP_KEEP_ALIVE_TIME_SERVER_POSITIVE = \"http.keepAlive.time.server=100\";\n+    private static final String CLIENT_HTTP_KEEP_ALIVE_TIME_PROXY_POSITIVE = \"http.keepAlive.time.proxy=200\";\n+    private static final String CONNECTION_KEEP_ALIVE_WITH_TIMEOUT = CONNECTION_KEEP_ALIVE_ONLY + NEW_LINE\n+        + KEEP_ALIVE_TIMEOUT;\n+   \/*\n+    * Following Constants represents Client Side Properties and is used as reference in below table as\n+    * CLIENT_INPUT_CONSTANT_NAMES\n+    *\/\n+    private static final String SERVER_100_NEGATIVE = CLIENT_HTTP_KEEP_ALIVE_TIME_SERVER_NEGATIVE;\n+    private static final String PROXY_200_NEGATIVE = CLIENT_HTTP_KEEP_ALIVE_TIME_PROXY_NEGATIVE;\n+    private static final String SERVER_ZERO = CLIENT_HTTP_KEEP_ALIVE_TIME_SERVER_ZERO;\n+    private static final String PROXY_ZERO = CLIENT_HTTP_KEEP_ALIVE_TIME_PROXY_ZERO;\n+    private static final String SERVER_100 = CLIENT_HTTP_KEEP_ALIVE_TIME_SERVER_POSITIVE;\n+    private static final String PROXY_200 = CLIENT_HTTP_KEEP_ALIVE_TIME_PROXY_POSITIVE;\n+\n+   \/*\n+    * CONSTANTS A,B,C,D,E,NI,F,G,H,I represents ServerScenarios and is used as reference in below table\n+    * as SERVER_RESPONSE_CONSTANT_NAME\n+    *\/\n+    private static final String A = CONNECTION_KEEP_ALIVE_ONLY;\n+    private static final String B = CONNECTION_KEEP_ALIVE_WITH_TIMEOUT;\n+    private static final String C = PROXY_CONNECTION_KEEP_ALIVE_ONLY;\n+    private static final String D = PROXY_CONNECTION_KEEP_ALIVE_ONLY + NEW_LINE + CONNECTION_KEEP_ALIVE_ONLY;\n+    private static final String E = C + NEW_LINE + KEEP_ALIVE_PROXY_TIMEOUT;\n+    private static final String NI = \"NO_INPUT\";\n+    private static final String F = A + NEW_LINE + KEEP_ALIVE_TIMEOUT_NEG;\n+    private static final String G = A + NEW_LINE + KEEP_ALIVE_TIMEOUT_ZERO;\n+    private static final String H = C + NEW_LINE + KEEP_ALIVE_TIMEOUT_NEG;\n+    private static final String I = C + NEW_LINE + KEEP_ALIVE_TIMEOUT_ZERO;\n+\n+   \/*\n+    * There are 160 scenarios run by this program.\n+    * For every scenario there is mapping between serverScenarios[int],clientScenarios[int] and expectedOutput[int]\n+    *\n+    * serverScenarios[0] clientScenarios[0] expectedOutput[0]\n+    * serverScenarios[1] clientScenarios[1] expectedOutput[1]\n+    * serverScenarios[2] clientScenarios[2] expectedOutput[2]\n+    *\n+    * ...\n+    *\n+    * serverScenarios[159] cientScenarios[159] expectedOutput[159]\n+    *\n+    * whereas serverScenarios[int] is retrieved using getServerScenario(int)\n+    * whereas clientScenarios[int] is retrieved using clientScenario[getClientScenarioNumber[int]]\n+    * and\n+    * expectedOutput[int] is retrieved using expectedOuput[int] directly.\n+    *\n+    *\/\n+\n+   \/* Here is the complete table of server_response, client system properties input and expected cached timeout at client side *\/\n+   \/* ScNo  |  SERVER RESPONSE (SERVER_RESPONSE_CONSTANT_NAME)| CLIENT SYSTEM PROPERTIES INPUT (CLIENT_INPUT_CONSTANT_NAMES) | EXPECTED CACHED TIMEOUT AT CLIENT SIDE\n+    *****************************************************************************************************************************************\n+    *    0  |  Connection: keep-alive (A)                     | No Input Provided (NI)                       | Default Timeout set to 5\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *    1  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.server=100 (SERVER_100)| Client Timeout set to 100\n+    *--------------------------------------------------------------------------------------------------------------------------\n+    *    2  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.proxy=200 (PROXY_200)  | Default Timeout set to 5\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *    3  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.server=100 &&          |\n+    *       |                                                 | -Dhttp.keepAlive.time.proxy=200              | Timeout set to 100\n+    *       |                                                 | (SERVER_100 && PROXY_200)                    |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *    4  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.server=-100            | Default Timeout set to 5\n+    *       |                                                 | (SERVER_100_NEGATIVE)                        |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *    5  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.proxy=-200             | Default Timeout set to 5\n+    *       |                                                 | (PROXY_200_NEGATIVE)                         |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *    6  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.server=-100 &&         |\n+    *       |                                                 | -Dhttp.keepAlive.time.proxy=-200             | Default Timeout set to 5\n+    *       |                                                 | (SERVER_100_NEGATIVE && PROXY_200_NEGATIVE)  |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *    7  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.server=0               | Connection Closed Immediately\n+    *       |                                                 | (SERVER_ZERO)                                |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *    8  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.proxy=0                | Default Timeout set to 5\n+    *       |                                                 | (PROXY_ZERO)                                 |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *    9  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.server=0 &&            |\n+    *       |                                                 | -Dhttp.keepAlive.time.proxy=0                | Connection Closed Immediately\n+    *       |                                                 | (SERVER_ZERO && PROXY_ZERO)                  |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   10  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.server=0 &&            |\n+    *       |                                                 | -Dhttp.keepAlive.time.proxy=-200             | Connection Closed Immediately\n+    *       |                                                 | (SERVER_ZERO && PROXY_200_NEGATIVE)          |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   11  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.server=-100 &&         |\n+    *       |                                                 | -Dhttp.keepAlive.time.proxy=0                | Default Timeout set to 5\n+    *       |                                                 | (SERVER_100_NEGATIVE && PROXY_ZERO)          |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   12  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.server=100 &&          |\n+    *       |                                                 |  -Dhttp.keepAlive.time.proxy=0               | Timeout set to 100\n+    *       |                                                 | (SERVER_100 && PROXY_ZERO)                   |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   13  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.server=0 &&            |\n+    *       |                                                 | -Dhttp.keepAlive.time.proxy=200              | Connection Closed Immediately\n+    *       |                                                 | (SERVER_ZERO && PROXY_200)                   |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   14  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.server=100 &&          |\n+    *       |                                                 | -Dhttp.keepAlive.time.proxy=-200             | Timeout set to 100\n+    *       |                                                 | (SERVER_100 && PROXY_200_NEGATIVE)           |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   15  |  Connection: keep-alive (A)                     | -Dhttp.keepAlive.time.server=-100 &&         |\n+    *       |                                                 | -Dhttp.keepAlive.time.proxy=200              | Default Timeout set to 5\n+    *       |                                                 | (SERVER_100_NEGATIVE && PROXY_200)           |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   16  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | No Input Provided (NI)                   | Timeout set to 20\n+    *------------------------------------------------------------------------------------------------------------------------\n+    *   17  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.server=100         | Timeout set to 20\n+    *       |                                                     | (SERVER_100)                             |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   18  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.proxy=200          | Timeout set to 20\n+    *       |                                                     | (PROXY_200)                              |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   19  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.server=100 &&      |\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=200          | Timeout set to 20\n+    *       |                                                     | (SERVER_100 && PROXY_200)                |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   20  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.server=-100        | Timeout set to 20\n+    *       |                                                     | (SERVER_100_NEGATIVE)                    |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   21  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.proxy=-200         | Timeout set to 20\n+    *       |                                                     | (PROXY_200_NEGATIVE)                     |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   22  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.server=-100 &&       |\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=-200           | Timeout set to 20\n+    *       |                                                     | (SERVER_100_NEGATIVE && PROXY_200_NEGATIVE)|\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   23  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.server=0      | Timeout set to 20\n+    *       |                                                     | (SERVER_ZERO)                       |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   24  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.proxy=0       | Timeout set to 20\n+    *       |                                                     | (PROXY_ZERO)                        |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   25  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=0       | Timeout set to 20\n+    *       |                                                     | (SERVER_ZERO && PROXY_ZERO)         |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   26  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=-200    | Timeout set to 20\n+    *       |                                                     | (SERVER_ZERO && PROXY_200_NEGATIVE) |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   27  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.server=-100 &&|\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=0       | Timeout set to 20\n+    *       |                                                     | (SERVER_100_NEGATIVE && PROXY_ZERO) |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   28  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=0       | Timeout set to 20\n+    *       |                                                     | (SERVER_100 && PROXY_ZERO)          |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   29  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=200     | Timeout set to 20\n+    *       |                                                     | (SERVER_ZERO && PROXY_200)          |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   30  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) | -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=-200    | Timeout set to 20\n+    *       |                                                     | (SERVER_100 && PROXY_200_NEGATIVE)  |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   31  |Connection: keep-alive\\r\\nKeep-alive: timeout=20 (B) |-Dhttp.keepAlive.time.server=-100 && |\n+    *       |                                                     |-Dhttp.keepAlive.time.proxy=200      | Timeout set to 20\n+    *       |                                                     | (SERVER_100_NEGATIVE && PROXY_200)  |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   32  |Proxy-Connection: keep-alive (C)                     | No Input Provided (NI)              | Default timeout set to 60\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   33  |Proxy-Connection: keep-alive (C)                     | -Dhttp.keepAlive.time.server=100    | Default timeout set to 60\n+    *       |                                                     | (SERVER_100)                        |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   34  |Proxy-Connection: keep-alive (C)                     | -Dhttp.keepAlive.time.proxy=200     | Timeout set to 200\n+    *       |                                                     | (PROXY_200)                         |\n+    *--------------------------------------------------------------------------------------------------------------------------\n+    *   35  |Proxy-Connection: keep-alive (C)                     | -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=200     | Timeout set to 200\n+    *       |                                                     | (SERVER_100 && PROXY_200)           |\n+    *--------------------------------------------------------------------------------------------------------------------------\n+    *   36  |Proxy-Connection: keep-alive (C)                     | -Dhttp.keepAlive.time.server=-100   | Default timeout set to 60\n+    *       |                                                     | (SERVER_100_NEGATIVE)               |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   37  |Proxy-Connection: keep-alive (C)                     | -Dhttp.keepAlive.time.proxy=-200    | Default timeout set to 60\n+    *       |                                                     | (PROXY_200_NEGATIVE)                |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   38  |Proxy-Connection: keep-alive (C)                     |-Dhttp.keepAlive.time.server=-100 &&       |\n+    *       |                                                     |-Dhttp.keepAlive.time.proxy=-200           | Default timeout set to 60\n+    *       |                                                     |(SERVER_100_NEGATIVE && PROXY_200_NEGATIVE)|\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   39  |Proxy-Connection: keep-alive (C)                     | -Dhttp.keepAlive.time.server=0      | Default timeout set to 60\n+    *       |                                                     | (SERVER_ZERO)                       |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   40  |Proxy-Connection: keep-alive (C)                     | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                     | (PROXY_ZERO)                        |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   41  |Proxy-Connection: keep-alive (C)                     | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                     | (SERVER_ZERO && PROXY_ZERO)         |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   42  |Proxy-Connection: keep-alive (C)                     | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=-200    | Default timeout set to 60\n+    *       |                                                     | (SERVER_ZERO && PROXY_200_NEGATIVE) |\n+    *---------------------------------------------------------------------------------------------------------------------------------\n+    *   43  |Proxy-Connection: keep-alive (C)                     | -Dhttp.keepAlive.time.server=-100 &&|\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                     | (SERVER_100_NEGATIVE && PROXY_ZERO) |\n+    *---------------------------------------------------------------------------------------------------------------------------------\n+    *   44  |Proxy-Connection: keep-alive (C)                     | -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                     | (SERVER_100 && PROXY_ZERO)          |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   45  |Proxy-Connection: keep-alive (C)                     | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                     | -Dhttp.keepAlive.time.proxy=200     | Timeout set to 200\n+    *       |                                                     | (SERVER_ZERO && PROXY_200)          |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   46  |Proxy-Connection: keep-alive (C)                     |-Dhttp.keepAlive.time.server=100 &&  |\n+    *       |                                                     |-Dhttp.keepAlive.time.proxy=-200     | Default timeout set to 60\n+    *       |                                                     | (SERVER_100 && PROXY_200_NEGATIVE)  |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   47  |Proxy-Connection: keep-alive (C)                     |-Dhttp.keepAlive.time.server=-100 && |\n+    *       |                                                     |-Dhttp.keepAlive.time.proxy=200      | Timeout set to 200\n+    *       |                                                     | (SERVER_100_NEGATIVE && PROXY_ZERO) |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   48  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | No Input Provided (NI)              | Default timeout set to 60\n+    *-----------------------------------------------------------------------------------------------------------------------------\n+    *   49  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.server=100    | Default timeout set to 60\n+    *       |                                                         | (SERVER_100)                        |\n+    *---------------------------------------------------------------------------------------------------------------------------\n+    *   50  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.proxy=200     | Timeout set to 200\n+    *       |                                                         | (PROXY_200)                         |\n+    *------------------------------------------------------------------------------------------------------------------------------\n+    *   51  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200     | Timeout set to 200\n+    *       |                                                         | (SERVER_100 && PROXY_200)           |\n+    *------------------------------------------------------------------------------------------------------------------------------\n+    *   52  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.server=-100   | Default timeout set to 60\n+    *       |                                                         | (SERVER_100_NEGATIVE)               |\n+    *------------------------------------------------------------------------------------------------------------------------------\n+    *   53  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.proxy=-200    | Default timeout set to 60\n+    *       |                                                         | (PROXY_200_NEGATIVE)                |\n+    *------------------------------------------------------------------------------------------------------------------------------\n+    *   54  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.server=-100&&        |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200           | Default timeout set to 60\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200_NEGATIVE |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   55  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.server=0      | Default timeout set to 60\n+    *       |                                                         | (SERVER_ZERO)                       |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   56  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                         | (PROXY_ZERO)                        |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   57  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_ZERO)         |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   58  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200    | Default timeout set to 60\n+    *       |                                                         | (SERVER_ZERO && PROXY_200_NEGATIVE) |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   59  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.server=-100 &&|\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_ZERO) |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   60  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                         | (SERVER_100 && PROXY_ZERO)          |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   61  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200     | Timeout set to 200\n+    *       |                                                         | (SERVER_ZERO && PROXY_200)          |\n+    *------------------------------------------------------------------------------------------------------------------------------\n+    *   62  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200    | default timeout set to 60\n+    *       |                                                         | (SERVER_100 && PROXY_200_NEGATIVE)  |\n+    *------------------------------------------------------------------------------------------------------------------------------\n+    *   63  |Connection:keep-alive\\r\\nProxy-connection:keep-alive (D) | -Dhttp.keepAlive.time.server=-100 &&|\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200     | Timeout set to 200\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200)  |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   64  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| No Input Provided (NI)              | Timeout set to 120\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   65  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.server=100    | Timeout set to 120\n+    *       |                                                         | (SERVER_100)                        |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   66  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.proxy=200     | Timeout set to 120\n+    *       |                                                         | (PROXY_200)                         |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   67  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200     | Timeout set to 120\n+    *       |                                                         | (SERVER_100 && PROXY_200)           |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   68  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.server=-100   | Timeout set to 120\n+    *       |                                                         | (SERVER_100_NEGATIVE)               |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   69  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.proxy=-200    | Timeout set to 120\n+    *       |                                                         | (PROXY_200_NEGATIVE)                |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   70  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.server=-100 &&       |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200           | Timeout set to 120\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200_NEGATIVE)|\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   71  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.server=0      | Timeout set to 120\n+    *       |                                                         | (SERVER_ZERO)                       |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   72  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.proxy=0       | Timeout set to 120\n+    *       |                                                         | (PROXY_ZERO)                        |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   73  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0       | Timeout set to 120\n+    *       |                                                         | (SERVER_ZERO && PROXY_ZERO)         |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   74  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200    | Timeout set to 120\n+    *       |                                                         | (SERVER_ZERO && PROXY_200_NEGATIVE) |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   75  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.server=-100 &&|\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0       | Timeout set to 120\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_ZERO) |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   76  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0       | Timeout set to 120\n+    *       |                                                         | (SERVER_100 && PROXY_ZERO)          |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   77  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200     | Timeout set to 120\n+    *       |                                                         | (SERVER_ZERO && PROXY_200)          |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   78  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.server=100 &&         |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200            | Timeout set to 120\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200_NEGATIVE) |\n+    *-------------------------------------------------------------------------------------------------------------------------------\n+    *   79  |Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120 (E)| -Dhttp.keepAlive.time.server=-100 &&|\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200     | Timeout set to 120\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200)  |\n+    *-----------------------------------------------------------------------------------------------------------------------------\n+    *   80  |No Input (NI)                                            | No Input Provided (NI)              | default timeout set to 5\n+    *-----------------------------------------------------------------------------------------------------------------------------\n+    *   81  |No Input (NI)                                            | -Dhttp.keepAlive.time.server=100    | Timeout set to 100\n+    *       |                                                         | (SERVER_100)                        |\n+    *-----------------------------------------------------------------------------------------------------------------------------\n+    *   82  |No Input (NI)                                            | -Dhttp.keepAlive.time.proxy=200     | default timeout set to 5\n+    *       |                                                         | (PROXY_200)                         |\n+    *-----------------------------------------------------------------------------------------------------------------------------\n+    *   83  |No Input (NI)                                            | -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200     | client timeot set to 100\n+    *       |                                                         | (SERVER_100 && PROXY_200)           |\n+    *------------------------------------------------------------------------------------------------------------------------------\n+    *   84  |No Input (NI)                                            | -Dhttp.keepAlive.time.server=-100   | default timeout set to 5\n+    *       |                                                         | (SERVER_100_NEGATIVE)               |\n+    *------------------------------------------------------------------------------------------------------------------------------\n+    *   85  |No Input (NI)                                            | -Dhttp.keepAlive.time.proxy=-200    | default timeout set to 5\n+    *       |                                                         | (PROXY_200_NEGATIVE)                |\n+    *----------------------------------------------------------------------------------------------------------------------------\n+    *   86  |No Input (NI)                                            | -Dhttp.keepAlive.time.server=-100 &&       |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200           | default timeout set to 5\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200_NEGATIVE)|\n+    *------------------------------------------------------------------------------------------------------------------------------\n+    *   87  |No Input (NI)                                            | -Dhttp.keepAlive.time.server=0      | close connection immediately\n+    *       |                                                         | (SERVER_ZERO)                       |\n+    *---------------------------------------------------------------------------------------------------------------------------------\n+    *   88  |No Input (NI)                                            | -Dhttp.keepAlive.time.proxy=0       | default timeout set to 5\n+    *       |                                                         | (PROXY_ZERO)                        |\n+    *---------------------------------------------------------------------------------------------------------------------------------\n+    *   89  |No Input (NI)                                            | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_ZERO)         |\n+    *---------------------------------------------------------------------------------------------------------------------------------\n+    *   90  |No Input (NI)                                            | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200    | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_200_NEGATIVE) |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   91  |No Input (NI)                                            | -Dhttp.keepAlive.time.server=-100 &&|\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0       | default timeout set to 5\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_ZERO) |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   92  |No Input (NI)                                            | -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0       | Timeout set to 100\n+    *       |                                                         | (SERVER_100 && PROXY_ZERO)          |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   93  |No Input (NI)                                            | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200     | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_200)          |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   94  |No Input (NI)                                            |-Dhttp.keepAlive.time.server=100 &&  |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=-200     | Timeout set to 100\n+    *       |                                                         | (SERVER_100 && PROXY_200_NEGATIVE)  |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   95  |No Input (NI)                                            |-Dhttp.keepAlive.time.server=-100 && |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=200      | default timeout set to 5\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200)  |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   96  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    | No Input Provided (NI)              | default timeout set to 5\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   97  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.server=100     | Timeout set to 100\n+    *       |                                                         | (SERVER_100)                        |\n+    *--------------------------------------------------------------------------------------------------------------------------------\n+    *   98  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.proxy=200      | default timeout set to 5\n+    *       |                                                         | (PROXY_200)                         |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *   99  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.server=100 &&  |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=200      | Timeout set to 100\n+    *       |                                                         |(SERVER_100 && PROXY_200)            |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  100  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.server=-100    | default timeout set to 5\n+    *       |                                                         |(SERVER_100_NEGATIVE)                |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  101  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.proxy=-200     | default timeout set to 5\n+    *       |                                                         |(PROXY_200_NEGATIVE)                 |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  102  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.server=-100 &&        |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=-200            | default timeout set to 5\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200_NEGATIVE)|\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  103  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.server=0       | close connection immediately\n+    *       |                                                         | (SERVER_ZERO)                       |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  104  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.proxy=0        | default timeout set to 5\n+    *       |                                                         | (PROXY_ZERO)                        |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  105  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.server=0 &&    |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_ZERO)         |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  106  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.server=0 &&    |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=-200     | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_ZERO_NEGATIVE)|\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  107  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.server=-100 && |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=0        | default timeout set to 5\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_ZERO) |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  108  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.server=100 &&  |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=0        | Timeout set to 100\n+    *       |                                                         | (SERVER_100 && PROXY_ZERO)          |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  109  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.server=0 &&    |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=200      | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_200)          |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  110  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.server=100 &&  |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=-200     | Timeout set to 100\n+    *       |                                                         |(SERVER_100 && PROXY_200_NEGATIVE)   |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  111  |Connection: keep-alive\\r\\nKeep-alive: timeout=-20 (F)    |-Dhttp.keepAlive.time.server=-100 && |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=200      | default timeout set to 5\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200)  |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  112  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | No Input Provided (NI)              | close connection immediately\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  113  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.server=100    | close connection immediately\n+    *       |                                                         | (SERVER_100)                        |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  114  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.proxy=200     | close connection immediately\n+    *       |                                                         | (PROXY_200)                         |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  115  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200     | close connection immediately\n+    *       |                                                         | (SERVER_100 && PROXY_200)           |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  116  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.server=-100   | close connection immediately\n+    *       |                                                         | (SERVER_100_NEGATIVE)               |\n+    *------------------------------------------------------------------------------------------------------------------------------------\n+    *  117  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.proxy=-200    | close connection immediately\n+    *       |                                                         | (PROXY_200_NEGATIVE)                |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  118  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      |-Dhttp.keepAlive.time.server=-100 &&         |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=-200             | close connection immediately\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200_NEGATIVE) |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  119  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.server=0      | close connection immediately\n+    *       |                                                         | (SERVER_ZERO)                       |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  120  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                         | (PROXY_ZERO)                        |\n+    *------------------------------------------------------------------------------------------------------------------------------------\n+    *  121  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_ZERO)         |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  122  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200    | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_200_NEGATIVE) |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  123  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.server=-100 &&|\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_ZERO) |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  124  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0       | close connection immediately\n+    *       |                                                         | (SERVER_100 && PROXY_ZERO)          |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  125  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.server=0 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200     | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_200)          |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  126  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.server=100 && |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200    | close connection immediately\n+    *       |                                                         | (SERVER_100 && PROXY_200_NEGATIVE)  |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  127  |Connection: keep-alive\\r\\nKeep-alive: timeout=0 (G)      | -Dhttp.keepAlive.time.server=-100 &&|\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200     | close connection immediately\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200)  |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  128  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)| No Input Provided (NI)                | default timeout set to 60\n+    ---------------------------------------------------------------------------------------------------------------------------------------\n+    *  129  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)| -Dhttp.keepAlive.time.server=100      | default timeout set to 60\n+    *       |                                                         | (SERVER_100)                          |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  130  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)| -Dhttp.keepAlive.time.proxy=200       | Timeout set to 200\n+    *       |                                                         | (PROXY_200)                           |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  131  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)| -Dhttp.keepAlive.time.server=100 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200       | Timeout set to 200\n+    *       |                                                         | (SERVER_100 && PROXY_200)             |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  132  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)| -Dhttp.keepAlive.time.server=-100     | default timeout set to 60\n+    *       |                                                         | (SERVER_100_NEGATIVE)                 |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  133  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)| -Dhttp.keepAlive.time.proxy=-200      | default timeout set to 60\n+    *       |                                                         | (PROXY_200_NEGATIVE)                  |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  134  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)|-Dhttp.keepAlive.time.server=-100 &&        |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=-200            | default timeout set to 60\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200_NEGATIVE)|\n+    *---------------------------------------------------------------------------------------------------------------------------------\n+    *  135  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)| -Dhttp.keepAlive.time.server=0        | default timeout set to 60\n+    *       |                                                         | (SERVER_ZERO)                         |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  136  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)| -Dhttp.keepAlive.time.proxy=0         | close connection immediately\n+    *       |                                                         | (PROXY_ZERO)                          |\n+    *----------------------------------------------------------------------------------------------------------------------------------\n+    *  137  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)| -Dhttp.keepAlive.time.server=0 &&     |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0         | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_ZERO)           |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  138  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)| -Dhttp.keepAlive.time.server=0 &&     |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200      | default timeout set to 60\n+    *       |                                                         | (SERVER_ZERO && PROXY_200_NEGATIVE)   |\n+    *---------------------------------------------------------------------------------------------------------------------------------------\n+    *  139  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)| -Dhttp.keepAlive.time.server=-100 &&  |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0         | close connection immediately\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_ZERO)   |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  140  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)| -Dhttp.keepAlive.time.server=100 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0         | close connection immediately\n+    *       |                                                         | (SERVER_100 && PROXY_ZERO)            |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  141  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)| -Dhttp.keepAlive.time.server=0 &&     |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200       | Timeout set to 20\n+    *       |                                                         | (SERVER_ZERO && PROXY_200)            |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  142  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)|-Dhttp.keepAlive.time.server=100 &&    |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=-200       | default timeout set to 60\n+    *       |                                                         | (SERVER_100 && PROXY_200_NEGATIVE)    |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  143  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=-20 (H)|-Dhttp.keepAlive.time.server=-100 &&   |\n+    *       |                                                         |-Dhttp.keepAlive.time.proxy=200        | Timeout set to 200\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200)    |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  144  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | No Input Provided (NI)                | close connection immediately\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  145  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.server=100      | close connection immediately\n+    *       |                                                         | (SERVER_100)                          |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  146  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.proxy=200       | close connection immediately\n+    *       |                                                         | (PROXY_200)                           |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  147  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.server=100 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200       | close connection immediately\n+    *       |                                                         | (SERVER_100 && PROXY_200)             |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  148  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.server=-100     | close connection immediately\n+    *       |                                                         | (SERVER_100_NEGATIVE)                 |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  149  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.proxy=-200      | close connection immediately\n+    *       |                                                         | (PROXY_200_NEGATIVE)                  |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  150  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.server=-100 &&        |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200            | close connection immediately\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200_NEGATIVE) |\n+    *------------------------------------------------------------------------------------------------------------------------------------\n+    *  151  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.server=0        | close connection immediately\n+    *       |                                                         | (SERVER_ZERO)                         |\n+    *-----------------------------------------------------------------------------------------------------------------------------------\n+    *  152  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.proxy=0         | close connection immediately\n+    *       |                                                         | (PROXY_ZERO)                          |\n+    *---------------------------------------------------------------------------------------------------------------------------------\n+    *  153  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.server=0 &&     |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0         | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_ZERO)           |\n+    *------------------------------------------------------------------------------------------------------------------------------------\n+    *  154  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.server=0 &&     |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200      | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_200_NEGATIVE)   |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  155  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.server=-100 &&  |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0         | close connection immediately\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_ZERO)   |\n+    *-------------------------------------------------------------------------------------------------------------------------------------\n+    *  156  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.server=100 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=0         | close connection immediately\n+    *       |                                                         | (SERVER_100 && PROXY_ZERO)            |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  157  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.server=0 &&     |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200       | close connection immediately\n+    *       |                                                         | (SERVER_ZERO && PROXY_200)            |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  158  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.server=100 &&   |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=-200      | close connection immediately\n+    *       |                                                         | (SERVER_100 && PROXY_200_NEGATIVE)    |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *  159  |Proxy-Connection:keep-alive\\r\\nKeep-alive:timeout=0 (I)  | -Dhttp.keepAlive.time.server=-100 &&  |\n+    *       |                                                         | -Dhttp.keepAlive.time.proxy=200       | close connection immediately\n+    *       |                                                         | (SERVER_100_NEGATIVE && PROXY_200)    |\n+    *--------------------------------------------------------------------------------------------------------------------------------------\n+    *\/\n+\n+   \/* private static final String[] serverScenarios = {\n+        A, A, A, A, A, A, A, A, A, A, A, A, A, A, A, A,\n+        B, B, B, B, B, B, B, B, B, B,B, B, B, B, B, B,\n+        C, C, C, C, C, C, C, C, C, C, C, C, C, C, C, C,\n+        D, D, D, D, D, D, D, D, D, D, D, D, D, D, D, D,\n+        E, E, E, E, E, E, E, E, E, E, E, E, E, E, E, E,\n+        NI, NI, NI, NI, NI, NI, NI, NI, NI, NI, NI, NI, NI, NI, NI, NI,\n+        F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F,\n+        G, G, G, G, G, G, G, G, G, G, G, G, G, G, G, G,\n+        H, H, H, H, H, H, H, H, H, H, H, H, H, H, H, H,\n+        I, I, I, I, I, I, I, I, I, I, I, I, I, I, I, I\n+    }; *\/\n+    \/*\n+     * following are client scenarios which are repeated.\n+     *\/\n+    private static final String[] a = {\n+        NI, SERVER_100,     PROXY_200, SERVER_100 + CLIENT_SEPARATOR + PROXY_200,    SERVER_100_NEGATIVE,\n+        PROXY_200_NEGATIVE, SERVER_100_NEGATIVE + CLIENT_SEPARATOR + PROXY_200_NEGATIVE,\n+        SERVER_ZERO,         PROXY_ZERO, SERVER_ZERO + CLIENT_SEPARATOR + PROXY_ZERO,\n+        SERVER_ZERO + CLIENT_SEPARATOR + PROXY_200_NEGATIVE, SERVER_100_NEGATIVE + CLIENT_SEPARATOR + PROXY_ZERO,\n+        SERVER_100 + CLIENT_SEPARATOR + PROXY_ZERO, SERVER_ZERO + CLIENT_SEPARATOR + PROXY_200,\n+        SERVER_100 + CLIENT_SEPARATOR + PROXY_200_NEGATIVE, SERVER_100_NEGATIVE + CLIENT_SEPARATOR + PROXY_200\n+    };\n+\n+   \/* private String[] clientScenarios = {\n+        a[0] , a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15],\n+        a[0] , a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15],\n+        a[0] , a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15],\n+        a[0] , a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15],\n+        a[0] , a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15],\n+        a[0] , a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15],\n+        a[0] , a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15],\n+        a[0] , a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15],\n+        a[0] , a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15],\n+        a[0] , a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15],\n+    }; *\/\n+\n+    private static final String[] clientScenarios = {\n+        a[0] , a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]\n+    };\n+\n+    private static final int[] expectedValues = {\n+        5,  100,    5, 100,  5,  5,  5,  0,  5,   0,   0,   5,  100,    0,   100,    5,\n+        20,   20 ,  20,  20, 20, 20, 20, 20, 20,  20 , 20,  20,   20,   20,    20,   20,\n+        60,   60,  200, 200, 60, 60, 60, 60,  0,   0,  60,   0,    0,  200,    60,  200,\n+        60,   60,  200, 200, 60, 60, 60, 60,  0,   0,  60,   0,    0,  200,    60,  200,\n+        120, 120,  120, 120,120,120,120,120,120, 120, 120, 120,  120,  120,   120,  120,\n+        5,  100,    5, 100,  5,  5,  5,  0,  5,   0,   0,   5,  100,    0,   100,    5,\n+        5,  100,    5, 100,  5,  5,  5,  0,  5,   0,   0,   5,  100,    0,   100,    5,\n+        0,    0,    0,   0,  0,  0,  0,  0,  0,   0,   0,   0,    0,    0,     0,    0,\n+        60,  60,  200, 200, 60, 60, 60, 60,  0,   0,  60,   0,    0,  200,    60,  200,\n+        0,    0,    0,   0,  0,  0,  0,  0,  0,   0,   0,   0,    0,    0,     0,    0,\n+    };\n+\n+    private final CountDownLatch countDownLatch = new CountDownLatch(1);\n+\n+    private final CountDownLatch serverCountDownLatch = new CountDownLatch(1);\n+\n+    \/*\n+     * setting of client properties -Dhttp.keepAlive.time.server and -Dhttp.keepAlive.time.proxy is handled through this method.\n+     * There are 16 client scenarios in total starting with scenarioNumber 0(zero) and ending with 15.\n+     * Server Scenarios are grouped into batch of 16 scenarios.\n+     * There are 10 batches in total and each batch contains 16 scenarios so 10 * 16 = 160 scenarios in total.\n+     * 16 Client Scenarios are used repeatedly for every server scenario batch.\n+     * for serverscenario[0],serverscenario[16],serverscenario[32] ... serverscenario[144] is mapped to clientscenario[0]\n+     * for serverscenario[1],serverscenario[17],serverscenario[33] ... serverscenario[145] is mapped to clientscenario[1]\n+     * for serverscenario[2],serverscenario[18],serverscenario[34] ... serverscenario[146] is mapped to clientscenario[2]\n+     * ...\n+     * for serverscenario[15],serverscenario[31],serverscenario[47] ... serverscenario[159] is mapped to clientscenario[15]\n+     *\/\n+    private int getClientScenarioNumber(int scenarioNumber) {\n+        return scenarioNumber % 16 ;\n+    }\n+\n+    \/*\n+     * Returns SERVER_RESPONSE as String based on integer inputParameter scenarioNumber.\n+     * Server Scenarios are grouped into batch of 16 scenarios starting with scenarioNumber 0 (zero)\n+     * so there are 10 batches in total and each batch contains 16 scenarios so 10 * 16 = 160 scenarios in total.\n+     * For each batch of 16 scenarios, there will be common SERVER_RESPONSE for all 16 scenarios in batch.\n+     * for scenario numbers from 0 to 15 server  response is: Connection:keep-alive\n+     * for scenario numbers from 16 to 31 server response is: SERVER_RESPONSE=Connection: keep-alive\\r\\nKeep-alive: timeout=20\n+     * for scenario numbers from 32 to 47 server response is: SERVER_RESPONSE=Proxy-Connection: keep-alive\n+     * for scenario numbers from 48 to 63 server response is: SERVER_RESPONSE=Connection:keep-alive\\r\\nProxy-connection:keep-alive\n+     * for scenario numbers from 64 to 79 server response is: SERVER_RESPONSE=Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120\n+     * for scenario numbers from 80 to 95 server response is: SERVER_RESPONSE=No Input\n+     * for scenario numbers from 96 to 111 server response is: SERVER_RESPONSE=Connection: keep-alive\\r\\nKeep-alive: timeout=-20\n+     * for scenario numbers from 112 to 127 server resonse is: Connection: keep-alive\\r\\nKeep-alive: timeout=0\n+     * for scenario numbers from 128 to 143 server response is: Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=-20\n+     * for scenario numbers from 144 to 159 server response is: Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=0\n+     *\/\n+    private String getServerScenario(int scenarioNumber) {\n+        \/*\n+         *  ServerResponse for scenarios from 0 to 15\n+         *  SERVER_RESPONSE:Connection:keep-alive\n+         *\/\n+        if(scenarioNumber >= 0 && scenarioNumber <= 15) {\n+            return A;\n+        }\n+        \/*\n+         * ServerResponse for scenarios from 16 to 31\n+         * SERVER_RESPONSE=Connection: keep-alive\\r\\nKeep-alive: timeout=20\n+         *\/\n+        else if (scenarioNumber >= 16 && scenarioNumber <= 31){\n+            return B;\n+        }\n+        \/*\n+         * ServerResponse for scenarios from 32 to 47\n+         * SERVER_RESPONSE=Proxy-Connection: keep-alive\n+         *\/\n+        else if (scenarioNumber >= 32 && scenarioNumber <= 47){\n+            return C;\n+        }\n+        \/*\n+         * ServerResponse for scenarios from 48 to 63\n+         * SERVER_RESPONSE=Connection:keep-alive\\r\\nProxy-connection:keep-alive\n+         *\/\n+        else if (scenarioNumber >= 48 && scenarioNumber <= 63){\n+            return D;\n+        \/*\n+         * ServerResponse for scenarios from 64 to 79\n+         * SERVER_RESPONSE=Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=120\n+         *\/\n+        } else if (scenarioNumber >= 64 && scenarioNumber <= 79){\n+            return E;\n+        }\n+        \/*\n+         * ServerResponse for scenarios from 80 to 95\n+         * SERVER_RESPONSE=No Input\n+         *\/\n+        else if (scenarioNumber >= 80 && scenarioNumber <= 95){\n+            return NI;\n+        }\n+        \/*\n+         * ServerResponse for scenarios from 96 to 111\n+         * SERVER_RESPONSE=Connection: keep-alive\\r\\nKeep-alive: timeout=-20\n+         *\/\n+        else if (scenarioNumber >= 96 && scenarioNumber <= 111){\n+            return F;\n+        }\n+        \/*\n+         * ServerResponse for scenarios from 112 to 127\n+         * SERVER_RESPONSE=Connection: keep-alive\\r\\nKeep-alive: timeout=0\n+         *\/\n+        else if (scenarioNumber >= 112 && scenarioNumber <= 127){\n+            return G;\n+        }\n+        \/*\n+         * ServerResponse for scenarios from 128 to 143\n+         * SERVER_RESPONSE=Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=-20\n+         *\/\n+        else if (scenarioNumber >= 128 && scenarioNumber <= 143){\n+            return H;\n+        }\n+        \/*\n+         * ServerResponse for scenarios from 144 to 159\n+         * SERVER_RESPONSE=Proxy-connection:keep-alive\\r\\nKeep-alive:timeout=0\n+         *\/\n+        else if (scenarioNumber >= 144 && scenarioNumber <= 159){\n+            return I;\n+        }\n+        \/*Invalid Case*\/\n+        return null;\n+    }\n+\n+    private void startScenario(int scenarioNumber) throws Exception {\n+        \/\/test scenarios are skipped because of JDK-8291638\n+        if((scenarioNumber >= 112 && scenarioNumber <= 127) || (scenarioNumber >= 144 && scenarioNumber <= 159)) {\n+            System.out.println(\"Scenario Skipped:\"+scenarioNumber);\n+            this.countDownLatch.countDown();\n+            return;\n+        }\n+        System.out.println(\"serverScenarios[\" + scenarioNumber + \"]=\" + getServerScenario(scenarioNumber));\n+        System.out.println(\"clientScenarios[\" + scenarioNumber + \"]=\" + clientScenarios[getClientScenarioNumber(scenarioNumber)]);\n+        if(expectedValues[scenarioNumber] == 0) {\n+            System.out.println(\"ExpectedOutput=\" + NOT_CACHED);\n+        } else {\n+            System.out.println(\"ExpectedOutput=\" + expectedValues[scenarioNumber]);\n+        }\n+        System.out.println();\n+        startServer(scenarioNumber);\n+        runClient(scenarioNumber);\n+    }\n+\n+    private void startServer(int scenarioNumber) {\n+        Thread server = new Thread(new Runnable() {\n+            @Override\n+            public void run() {\n+                try {\n+                   executeServer(scenarioNumber);\n+                } catch (IOException e) {\n+                   e.printStackTrace();\n+                }\n+            }\n+        }, \"SERVER\");\n+        server.start();\n+    }\n+\n+    private void readAll(Socket s) throws IOException {\n+        byte[] buf = new byte[128];\n+        int c;\n+        String request = \"\";\n+        InputStream is = s.getInputStream();\n+        while ((c = is.read(buf)) > 0) {\n+            request += new String(buf, 0, c, StandardCharsets.US_ASCII);\n+            if (request.contains(\"\\r\\n\\r\\n\")) {\n+                return;\n+            }\n+        }\n+        if (c == -1) {\n+            throw new IOException(\"Socket closed\");\n+        }\n+    }\n+\n+    private void executeServer(int scenarioNumber) throws IOException {\n+        String serverScenarioContent = null;\n+        if (!getServerScenario(scenarioNumber).equalsIgnoreCase(NI)) {\n+            serverScenarioContent = getServerScenario(scenarioNumber) + NEW_LINE;\n+            \/*\n+             * isProxySet should be set before Server is moved to Listen State.\n+             *\/\n+            if (serverScenarioContent.contains(\"Proxy\")) {\n+                isProxySet = true;\n+            } else {\n+                isProxySet = false;\n+            }\n+        }\n+        ServerSocket serverSocket = null;\n+        Socket socket = null;\n+        OutputStreamWriter out = null;\n+        InetAddress loopback = InetAddress.getLoopbackAddress();\n+        try {\n+            serverSocket = new ServerSocket();\n+            serverSocket.bind(new InetSocketAddress(loopback, 0));\n+            SERVER_PORT = serverSocket.getLocalPort();\n+            \/\/serverReady = true;\n+            this.serverCountDownLatch.countDown();\n+            System.out\n+                .println(\"SERVER_PORT= \" + SERVER_PORT +\" isProxySet=\" + isProxySet);\n+            \/*\n+             * Server will be waiting for clients to connect.\n+             *\/\n+            socket = serverSocket.accept();\n+            readAll(socket);\n+            out = new OutputStreamWriter(socket.getOutputStream());\n+            String BODY = \"SERVER REPLY: Hello world\";\n+            String CLEN = \"Content-Length: \" + BODY.length() + NEW_LINE;\n+            \/* send the header *\/\n+            out.write(\"HTTP\/1.1 200 OK\\r\\n\");\n+            out.write(\"Content-Type: text\/plain; charset=iso-8859-1\\r\\n\");\n+            \/*\n+             * append each scenario content from array.\n+             *\/\n+            if(serverScenarioContent != null) {\n+                out.write(serverScenarioContent);\n+            }\n+            out.write(CLEN);\n+            out.write(NEW_LINE);\n+            out.write(BODY);\n+            out.flush();\n+        } catch (IOException e) {\n+            e.printStackTrace();\n+        } finally {\n+            if (out != null) {\n+                out.flush();\n+                out.close();\n+            }\n+            if (socket != null) {\n+                socket.close();\n+            }\n+            if (serverSocket != null) {\n+                serverSocket.close();\n+            }\n+        }\n+    }\n+\n+    private void runClient(int scenarioNumber) throws Exception {\n+        try {\n+            connectToServerURL(scenarioNumber);\n+        } finally {\n+            System.out.println(\"client count down latch:\" + scenarioNumber);\n+            this.countDownLatch.countDown();\n+            System.out.println();\n+            System.out.println();\n+        }\n+    }\n+\n+    private void connectToServerURL(int scenarioNumber) throws Exception {\n+        \/\/    System.setProperty(\"java.net.useSystemProxies\", \"false\");\n+        \/\/    System.setProperty(\"http.nonProxyHosts\", \"\");\n+        \/\/    System.setProperty(\"http.proxyHost\", \"localhost\");\n+        \/\/    System.setProperty(\"http.proxyPort\", String.valueOf(SERVER_PORT));\n+        System.out.println(\"Following are Existing System Properties if set any\");\n+        System.out.println(\"http.keepAlive.time.server:\" + System.getProperty(\"http.keepAlive.time.server\"));\n+        System.out.println(\"http.keepAlive.time.proxy:\" + System.getProperty(\"http.keepAlive.time.proxy\"));\n+        System.setProperty(\"java.net.useSystemProxies\", \"false\");\n+        System.out.println(\"http.proxyPort:\"+System.getProperty(\"http.proxyPort\"));\n+        System.out.println(\"http.proxyHost:\"+System.getProperty(\"http.proxyHost\"));\n+        System.clearProperty(\"http.keepAlive.time.server\");\n+        System.clearProperty(\"http.keepAlive.time.proxy\");\n+        \/\/ fetch clientScenearios for each scenarioNumber from array and set it to\n+        \/\/ System property.\n+        if (!clientScenarios[getClientScenarioNumber(scenarioNumber)].equalsIgnoreCase(NI)) {\n+            System.out.println(\"Client Input Parsing\");\n+            for (String clientScenarioString : clientScenarios[getClientScenarioNumber(scenarioNumber)].split(CLIENT_SEPARATOR)) {\n+                System.out.println(clientScenarioString);\n+                String key = clientScenarioString.split(\"=\")[0];\n+                String value = clientScenarioString.split(\"=\")[1];\n+                System.setProperty(key, value);\n+            }\n+        }\n+        \/\/ wait until ServerSocket moves to listening state.\n+        this.serverCountDownLatch.await();\n+        System.out.println(\"client started\");\n+        URL url = URIBuilder.newBuilder().scheme(\"http\").loopback().port(SERVER_PORT).toURL();\n+        System.out.println(\"connecting from client to SERVER URL:\" + url);\n+        HttpURLConnection httpUrlConnection = null;\n+        \/*\n+         * isProxySet is set to true when Expected Server Response contains Proxy-Connection header.\n+         *\/\n+        if (isProxySet) {\n+            httpUrlConnection = (sun.net.www.protocol.http.HttpURLConnection) url\n+                .openConnection(new Proxy(Type.HTTP, new InetSocketAddress(\"localhost\", SERVER_PORT)));\n+        } else {\n+            httpUrlConnection = (sun.net.www.protocol.http.HttpURLConnection) url.openConnection();\n+        }\n+        InputStreamReader inputStreamReader = new InputStreamReader(httpUrlConnection.getInputStream());\n+        BufferedReader bufferedReader = null;\n+        try {\n+            bufferedReader = new BufferedReader(inputStreamReader);\n+            while (true) {\n+                String eachLine = bufferedReader.readLine();\n+                if (eachLine == null) {\n+                    break;\n+                }\n+                System.out.println(eachLine);\n+            }\n+        } finally {\n+            if (bufferedReader != null) {\n+                bufferedReader.close();\n+            }\n+        }\n+        \/\/    System.out.println(\"ResponseCode:\" + httpUrlConnection.getResponseCode());\n+        \/\/    System.out.println(\"ResponseMessage:\" + httpUrlConnection.getResponseMessage());\n+        \/\/    System.out.println(\"Content:\" + httpUrlConnection.getContent());\n+        \/\/    Thread.sleep(2000);\n+        for (Entry<String, List<String>> header : httpUrlConnection.getHeaderFields().entrySet()) {\n+            System.out.println(header.getKey() + \"=\" + header.getValue());\n+        }\n+        fetchInfo(scenarioNumber, httpUrlConnection);\n+    }\n+\n+    private void fetchInfo(int scenarioNumber, sun.net.www.protocol.http.HttpURLConnection httpUrlConnection)\n+        throws Exception {\n+       Field field = Class.forName(\"sun.net.www.protocol.http.HttpURLConnection\").getDeclaredField(\"http\");\n+       field.setAccessible(true);\n+       HttpClient httpClient = (HttpClient) field.get(httpUrlConnection);\n+       \/\/    System.out.println(\"httpclient=\" + httpClient);\n+       Field keepAliveField = Class.forName(\"sun.net.www.http.HttpClient\").getDeclaredField(\"kac\");\n+       keepAliveField.setAccessible(true);\n+       KeepAliveCache keepAliveCache = (KeepAliveCache) keepAliveField.get(httpClient);\n+       System.out.println(\"keepAliveCache\" + keepAliveCache);\n+       System.out.println(\"SERVER URL:\" + httpUrlConnection.getURL());\n+       \/*\n+        * create KeepAliveKey(URL,Object) object and compare created KeepAliveKey and\n+        * existing using equals() method: KeepAliveKey.equals()\n+        *\/\n+       Class keepAliveKeyClass = Class.forName(\"sun.net.www.http.KeepAliveKey\");\n+       \/\/    System.out.println(\"keepAliveKeyClass=\" + keepAliveKeyClass);\n+       Constructor keepAliveKeyClassconstructor = keepAliveKeyClass.getDeclaredConstructors()[0];\n+       keepAliveKeyClassconstructor.setAccessible(true);\n+       Object expectedKeepAliveKey = keepAliveKeyClassconstructor.newInstance(httpUrlConnection.getURL(), null);\n+       System.out.println(\"ExpectedKeepAliveKey=\" + expectedKeepAliveKey);\n+       Object clientVectorObjectInMap = keepAliveCache.get(expectedKeepAliveKey);\n+       System.out.println(\"ClientVector=\" + clientVectorObjectInMap);\n+       HttpClient httpClientCached = keepAliveCache.get(httpUrlConnection.getURL(), null);\n+       System.out.println(\"HttpClient in Cache:\" + httpClientCached);\n+       if(httpClientCached != null) {\n+            System.out.println(\"KeepingAlive:\" + httpClientCached.isKeepingAlive());\n+            System.out.println(\"UsingProxy:\" + httpClientCached.getUsingProxy());\n+            System.out.println(\"ProxiedHost:\" + httpClientCached.getProxyHostUsed());\n+            System.out.println(\"ProxiedPort:\" + httpClientCached.getProxyPortUsed());\n+            System.out.println(\"ProxyPortUsingSystemProperty:\" + System.getProperty(\"http.proxyPort\"));\n+            System.out.println(\"ProxyHostUsingSystemProperty:\" + System.getProperty(\"http.proxyHost\"));\n+            System.out.println(\"http.keepAlive.time.server=\" + System.getProperty(\"http.keepAlive.time.server\"));\n+            System.out.println(\"http.keepAlive.time.proxy=\" + System.getProperty(\"http.keepAlive.time.proxy\"));\n+            Class clientVectorClass = Class.forName(\"sun.net.www.http.ClientVector\");\n+            \/\/      System.out.println(\"clientVectorClass=\" + clientVectorClass);\n+            Field napField = clientVectorClass.getDeclaredField(\"nap\");\n+            napField.setAccessible(true);\n+            int napValue = (int) napField.get(clientVectorObjectInMap);\n+            int actualValue = napValue \/ 1000;\n+            \/\/      System.out.println(\"nap=\" + napValue \/ 1000);\n+            System.out.printf(\"ExpectedOutput:%d ActualOutput:%d \", expectedValues[scenarioNumber], actualValue);\n+            System.out.println();\n+            if (expectedValues[scenarioNumber] != actualValue) {\n+                throw new RuntimeException(\n+                            \"ExpectedOutput:\" + expectedValues[scenarioNumber] + \" ActualOutput: \" + actualValue);\n+            }\n+        } else {\n+            \/\/executed when value is not cached.\n+            String expected = expectedValues[scenarioNumber] == 0 ? NOT_CACHED\n+                    : String.valueOf(expectedValues[scenarioNumber]);\n+            System.out.println(\"ExpectedOutput:\" + expected + \" ActualOutput:\" + NOT_CACHED);\n+            if (!expected.equalsIgnoreCase(NOT_CACHED)) {\n+                    throw new RuntimeException(\"ExpectedOutput:\" + expected + \" ActualOutput:\" + NOT_CACHED);\n+            }\n+       }\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        if (args.length != 1) {\n+            throw new IllegalArgumentException(\"Usage:java KeepAliveTest.java <scenarioNumber>\");\n+        }\n+        logger.setLevel(Level.FINEST);\n+        ConsoleHandler h = new ConsoleHandler();\n+        h.setLevel(Level.FINEST);\n+        logger.addHandler(h);\n+        KeepAliveTest keepAliveTest = new KeepAliveTest();\n+        if (args.length != 0) {\n+            keepAliveTest.startScenario(Integer.valueOf(args[0]));\n+        }\n+        \/\/ make main thread wait until server and client is completed.\n+        keepAliveTest.countDownLatch.await();\n+    }\n+}\n","filename":"test\/jdk\/sun\/net\/www\/http\/HttpClient\/KeepAliveTest.java","additions":1277,"deletions":0,"binary":false,"changes":1277,"status":"added"}]}