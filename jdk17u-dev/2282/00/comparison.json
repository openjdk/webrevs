{"files":[{"patch":"@@ -31,1 +31,1 @@\n-###############################################################################\n+################################################################################\n@@ -40,1 +40,4 @@\n-    SET_EXECUTABLE_ORIGIN='-Wl,-rpath,\\$$ORIGIN[$]1'\n+    # --disable-new-dtags forces use of RPATH instead of RUNPATH for rpaths.\n+    # This protects internal library dependencies within the JDK from being\n+    # overridden using LD_LIBRARY_PATH. See JDK-8326891 for more information.\n+    SET_EXECUTABLE_ORIGIN='-Wl,-rpath,\\$$ORIGIN[$]1 -Wl,--disable-new-dtags'\n@@ -58,0 +61,3 @@\n+      if test \"x$OPENJDK_TARGET_OS\" = xlinux; then\n+        SET_EXECUTABLE_ORIGIN=\"$SET_EXECUTABLE_ORIGIN -Wl,--disable-new-dtags\"\n+      fi\n","filename":"make\/autoconf\/flags-cflags.m4","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,2 @@\n- * @summary Check for extended  RPATHs on *nixes\n+ * @summary Check for extended RPATHs on Linux\n+ * @requires os.family == \"linux\"\n@@ -60,1 +61,1 @@\n-            throw new RuntimeException(\"FAILED: RPATH\/RUNPATH strings \" +\n+            throw new RuntimeException(\"FAILED: RPATH strings \" +\n@@ -63,1 +64,1 @@\n-        System.out.println(javacmd + \" contains expected RPATHS\/RUNPATH\");\n+        System.out.println(javacmd + \" contains expected RPATHS\");\n@@ -67,1 +68,1 @@\n-        String expectedRpath = \".*R(UN)?PATH.*\\\\$ORIGIN\/..\/lib.*\";\n+        String expectedRpath = \".*RPATH.*\\\\$ORIGIN\/..\/lib.*\";\n@@ -72,7 +73,4 @@\n-        if (isLinux) {\n-            RunpathTest rp = new RunpathTest();\n-            if (rp.elfreaderCmd == null) {\n-                System.err.println(\"Warning: test passes vacuously\");\n-                return;\n-            }\n-            rp.testRpath();\n+        RunpathTest rp = new RunpathTest();\n+        if (rp.elfreaderCmd == null) {\n+            System.err.println(\"Warning: test passes vacuously\");\n+            return;\n@@ -80,0 +78,1 @@\n+        rp.testRpath();\n","filename":"test\/jdk\/tools\/launcher\/RunpathTest.java","additions":11,"deletions":12,"binary":false,"changes":23,"status":"modified"}]}