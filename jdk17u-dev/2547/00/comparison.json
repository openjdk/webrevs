{"files":[{"patch":"@@ -68,0 +68,2 @@\n+    private static final int MAX_JSTATD_TRIES = 10;\n+\n@@ -291,1 +293,1 @@\n-                JstatdTest::isJstadReady, getJstatdCmd());\n+                JstatdTest::isJstatdReady, getJstatdCmd());\n@@ -311,2 +313,2 @@\n-    private static boolean isJstadReady(String line) {\n-        if (line.contains(\"Port already in use\")) {\n+    private static boolean isJstatdReady(String line) {\n+        if (line.contains(\"Port already in use\") || line.contains(\"Could not bind\")) {\n@@ -331,0 +333,1 @@\n+        int tries = 0;\n@@ -332,1 +335,1 @@\n-            while (jstatdThread == null) {\n+            while (jstatdThread == null && ++tries <= MAX_JSTATD_TRIES) {\n@@ -348,1 +351,0 @@\n-\n@@ -351,1 +353,3 @@\n-\n+            if (jstatdThread == null) {\n+                throw new RuntimeException(\"Cannot start jstatd.\");\n+            }\n","filename":"test\/jdk\/sun\/tools\/jstatd\/JstatdTest.java","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"}]}