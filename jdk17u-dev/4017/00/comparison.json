{"files":[{"patch":"@@ -56,0 +56,1 @@\n+        winEnglishOutput = false;\n@@ -92,0 +93,9 @@\n+    public Executor setWinRunWithEnglishOutput(boolean value) {\n+        if (!TKit.isWindows()) {\n+            throw new UnsupportedOperationException(\n+                    \"setWinRunWithEnglishOutput is only valid on Windows platform\");\n+        }\n+        winEnglishOutput = value;\n+        return this;\n+    }\n+\n@@ -209,0 +219,5 @@\n+        if (toolProvider != null && winEnglishOutput) {\n+            throw new IllegalArgumentException(\n+                    \"Can't change locale when using tool provider\");\n+        }\n+\n@@ -288,0 +303,8 @@\n+    private List<String> prefixCommandLineArgs() {\n+        if (winEnglishOutput) {\n+            return List.of(\"cmd.exe\", \"\/c\", \"chcp\", \"437\", \">nul\", \"2>&1\", \"&&\");\n+        } else {\n+            return List.of();\n+        }\n+    }\n+\n@@ -290,0 +313,1 @@\n+        command.addAll(prefixCommandLineArgs());\n@@ -421,2 +445,4 @@\n-        return String.format(format, printCommandLine(exec, args),\n-                args.size() + 1);\n+        var cmdline = Stream.of(prefixCommandLineArgs(), List.of(exec), args).flatMap(\n+                List::stream).toList();\n+\n+        return String.format(format, printCommandLine(cmdline), cmdline.size());\n@@ -425,1 +451,1 @@\n-    private static String printCommandLine(String executable, List<String> args) {\n+    private static String printCommandLine(List<String> cmdline) {\n@@ -427,1 +453,1 @@\n-        \/\/ to be executed manally\n+        \/\/ to be executed manually\n@@ -429,1 +455,1 @@\n-        return Stream.concat(Stream.of(executable), args.stream()).map(\n+        return cmdline.stream().map(\n@@ -443,0 +469,1 @@\n+    private boolean winEnglishOutput;\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/Executor.java","additions":32,"deletions":5,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -108,1 +108,1 @@\n-                .dumpOutput(true).saveOutput().executeAndGetOutput();\n+                .dumpOutput(true).saveOutput().setWinRunWithEnglishOutput(true).executeAndGetOutput();\n","filename":"test\/jdk\/tools\/jpackage\/windows\/Win8301247Test.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}