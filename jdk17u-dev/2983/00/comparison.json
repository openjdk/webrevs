{"files":[{"patch":"@@ -280,1 +280,0 @@\n-            saveGlobalRef(env, localAgentProperties, &(gdata->agent_properties));\n@@ -286,0 +285,1 @@\n+            saveGlobalRef(env, localAgentProperties, &(gdata->agent_properties));\n","filename":"src\/jdk.jdwp.agent\/share\/native\/libjdwp\/util.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -766,0 +766,5 @@\n+# core_svc\n+tools\/launcher\/TestXcheckJNIWarnings.java#jdwp-agent   8296936 generic-all\n+\n+############################################################################\n+\n","filename":"test\/jdk\/ProblemList.txt","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n- * @test\n+ * @test id=noagent\n@@ -33,1 +33,0 @@\n- * @compile TestXcheckJNIWarnings.java\n@@ -36,0 +35,9 @@\n+\n+\/**\n+ * @test id=jdwp-agent\n+ * @bug 8187442\n+ * @summary Launching app with jdwp agent shouldn't produce any jni warnings.\n+ * @modules jdk.compiler\n+ *          jdk.zipfs\n+ * @run main TestXcheckJNIWarnings -agentlib:jdwp=transport=dt_socket,server=y,suspend=n\n+ *\/\n@@ -49,2 +57,8 @@\n-        TestResult tr = doExec(javaCmd, \"-jar\", \"-Xcheck:jni\",\n-                               testJarFile.getName());\n+\n+        TestResult tr;\n+        if (args.length > 0) {\n+            tr = doExec(javaCmd, \"-jar\", \"-Xcheck:jni\", args[0], testJarFile.getName());\n+        } else {\n+            tr = doExec(javaCmd, \"-jar\", \"-Xcheck:jni\", testJarFile.getName());\n+        }\n+\n","filename":"test\/jdk\/tools\/launcher\/TestXcheckJNIWarnings.java","additions":19,"deletions":5,"binary":false,"changes":24,"status":"modified"}]}