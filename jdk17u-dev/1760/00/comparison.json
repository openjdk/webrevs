{"files":[{"patch":"@@ -212,1 +212,0 @@\n-java\/awt\/TrayIcon\/SystemTrayInstance\/SystemTrayInstanceTest.java 8193543 linux-all\n","filename":"test\/jdk\/ProblemList.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,1 @@\n-import java.awt.*;\n+import java.awt.SystemTray;\n@@ -33,0 +33,1 @@\n+ * @requires (os.family != \"linux\")\n@@ -36,0 +37,7 @@\n+\/*\n+ * @test\n+ * @key headful\n+ * @requires (os.family == \"linux\")\n+ * @run main\/othervm -DSystemTraySupport=MAYBE SystemTrayInstanceTest\n+ *\/\n+\n@@ -38,1 +46,1 @@\n-    private static boolean supported = false;\n+    private static boolean shouldSupport = false;\n@@ -46,2 +54,2 @@\n-            System.out.println(\"System tray is supported on the platform under test\");\n-            supported = true;\n+            System.out.println(\"System tray should be supported on this platform.\");\n+            shouldSupport = true;\n@@ -53,8 +61,7 @@\n-    private void doTest() throws Exception {\n-        boolean flag = SystemTray.isSupported();\n-        if (supported != flag)\n-            throw new RuntimeException(\"FAIL: isSupported did not return the correct value\"+\n-                    (supported ?\n-                            \"SystemTray is supported on the platform under test\" :\n-                            \"SystemTray is not supported on the platform under test\") +\n-                    \"SystemTray.isSupported() method returned \" + flag);\n+    private void doTest() {\n+        boolean systemSupported = SystemTray.isSupported();\n+        if (shouldSupport && !systemSupported) {\n+            throw new RuntimeException(\n+                    \"FAIL: SystemTray is not supported on the platform under test, while it should.\"\n+            );\n+        }\n@@ -62,1 +69,1 @@\n-        if (supported) {\n+        if (shouldSupport || systemSupported) {\n@@ -64,0 +71,1 @@\n+            System.out.println(\"SystemTray instance received\");\n@@ -65,0 +73,1 @@\n+            boolean exceptionThrown = false;\n@@ -68,0 +77,1 @@\n+                exceptionThrown = true;\n@@ -70,0 +80,3 @@\n+            if (!exceptionThrown) {\n+                throw new RuntimeException(\"UnsupportedOperationException is not thrown\");\n+            }\n","filename":"test\/jdk\/java\/awt\/TrayIcon\/SystemTrayInstance\/SystemTrayInstanceTest.java","additions":27,"deletions":14,"binary":false,"changes":41,"status":"modified"}]}