{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,11 @@\n-\/**\n+import java.awt.Color;\n+import java.awt.Graphics;\n+import java.awt.Graphics2D;\n+import java.awt.image.BufferedImage;\n+import java.awt.print.PageFormat;\n+import java.awt.print.Printable;\n+import java.awt.print.PrinterException;\n+import java.awt.print.PrinterJob;\n+import java.lang.reflect.InvocationTargetException;\n+\n+\/*\n@@ -27,0 +37,2 @@\n+ * @library ..\/..\/..\/regtesthelpers\n+ * @build PassFailJFrame\n@@ -28,1 +40,1 @@\n- * @run main\/manual=yesno PrintARGBImage\n+ * @run main\/manual PrintARGBImage\n@@ -31,4 +43,0 @@\n-import java.awt.*;\n-import java.awt.image.*;\n-import java.awt.print.*;\n-\n@@ -37,6 +45,3 @@\n-    static String[] text = {\n-     \"This is a manual test which needs a printer installed\",\n-     \"If you have no printer installed you CANNOT use this test\",\n-     \"It runs automatically and sends one page to the default printer\",\n-     \"It passes if the text shows through the rectangular image\",\n-    };\n+    public static void main(String[] args) throws InterruptedException,\n+            InvocationTargetException {\n+        if (PrinterJob.lookupPrintServices().length > 0) {\n@@ -44,5 +49,6 @@\n-    public static void main( String[] args ) {\n-\n-        for (int i=0;i<text.length;i++) {\n-            System.out.println(text[i]);\n-        }\n+            String instruction = \"\"\"\n+                    This is a manual test which needs a printer installed.\n+                    If you have no printer installed the test passes automatically.\n+                    The test runs automatically and sends one page to the default printer.\n+                    The test passes if the text shows through the rectangular image.\n+                    \"\"\";\n@@ -50,4 +56,5 @@\n-        try {\n-            PrinterJob pj = PrinterJob.getPrinterJob();\n-            pj.setPrintable(new PrintARGBImage());\n-            pj.print();\n+            PassFailJFrame passFailJFrame = new PassFailJFrame(instruction, 10);\n+            try {\n+                PrinterJob pj = PrinterJob.getPrinterJob();\n+                pj.setPrintable(new PrintARGBImage());\n+                pj.print();\n@@ -55,0 +62,10 @@\n+                ex.printStackTrace();\n+                throw new RuntimeException(\"Exception whilst printing.\");\n+            }\n+\n+            passFailJFrame.awaitAndCheck();\n+\n+        } else {\n+            System.out.println(\"Printer not configured or available.\"\n+                    + \" Test cannot continue.\");\n+            PassFailJFrame.forcePass();\n@@ -59,1 +76,1 @@\n-               throws PrinterException{\n+               throws PrinterException {\n@@ -80,0 +97,2 @@\n+\n+\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/ImagePrinting\/PrintARGBImage.java","additions":42,"deletions":23,"binary":false,"changes":65,"status":"modified"}]}