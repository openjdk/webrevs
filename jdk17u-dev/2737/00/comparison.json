{"files":[{"patch":"@@ -687,1 +687,0 @@\n-javax\/swing\/JComponent\/6683775\/bug6683775.java 8172337 generic-all\n","filename":"test\/jdk\/ProblemList.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2009, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2009, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,0 +49,4 @@\n+    static JFrame testFrame;\n+    static JFrame backgroundFrame;\n+    static BufferedImage capture;\n+\n@@ -56,1 +60,0 @@\n-        final JFrame testFrame = new JFrame(gc);\n@@ -58,8 +61,10 @@\n-        SwingUtilities.invokeAndWait(() -> {\n-            JFrame backgroundFrame = new JFrame(\"Background frame\");\n-            backgroundFrame.setUndecorated(true);\n-            JPanel panel = new JPanel();\n-            panel.setBackground(Color.RED);\n-            backgroundFrame.add(panel);\n-            backgroundFrame.setBounds(LOC, LOC, SIZE, SIZE);\n-            backgroundFrame.setVisible(true);\n+        try {\n+            SwingUtilities.invokeAndWait(() -> {\n+                testFrame = new JFrame(gc);\n+                backgroundFrame = new JFrame(\"Background frame\");\n+                backgroundFrame.setUndecorated(true);\n+                JPanel panel = new JPanel();\n+                panel.setBackground(Color.RED);\n+                backgroundFrame.add(panel);\n+                backgroundFrame.setBounds(LOC, LOC, SIZE, SIZE);\n+                backgroundFrame.setVisible(true);\n@@ -67,9 +72,9 @@\n-            testFrame.setUndecorated(true);\n-            JPanel p = new JPanel();\n-            p.setOpaque(false);\n-            testFrame.add(p);\n-            setOpaque(testFrame, false);\n-            testFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n-            testFrame.setBounds(LOC, LOC, SIZE, SIZE);\n-            testFrame.setVisible(true);\n-        });\n+                testFrame.setUndecorated(true);\n+                JPanel p = new JPanel();\n+                p.setOpaque(false);\n+                testFrame.add(p);\n+                setOpaque(testFrame, false);\n+                testFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n+                testFrame.setBounds(LOC, LOC, SIZE, SIZE);\n+                testFrame.setVisible(true);\n+            });\n@@ -77,2 +82,2 @@\n-        robot.waitForIdle();\n-        Thread.sleep(1500);\n+            robot.waitForIdle();\n+            robot.delay(1000);\n@@ -80,3 +85,3 @@\n-        \/\/robot.getPixelColor() didn't work right for some reason\n-        BufferedImage capture =\n-                robot.createScreenCapture(new Rectangle(LOC, LOC, SIZE, SIZE));\n+            \/\/robot.getPixelColor() didn't work right for some reason\n+            capture =\n+                    robot.createScreenCapture(new Rectangle(LOC, LOC, SIZE, SIZE));\n@@ -84,1 +89,4 @@\n-        SwingUtilities.invokeAndWait(testFrame::dispose);\n+        } finally {\n+            SwingUtilities.invokeAndWait(testFrame::dispose);\n+            SwingUtilities.invokeAndWait(backgroundFrame::dispose);\n+        }\n","filename":"test\/jdk\/javax\/swing\/JComponent\/6683775\/bug6683775.java","additions":33,"deletions":25,"binary":false,"changes":58,"status":"modified"}]}