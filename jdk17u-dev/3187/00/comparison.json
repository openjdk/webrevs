{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2024, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,2 @@\n-\/* @test\n+\/*\n+ * @test\n@@ -30,2 +31,0 @@\n- * @author Mikhail Lapshin\n- * @library \/lib\/client\/\n@@ -33,1 +32,0 @@\n- * @build ExtendedRobot\n@@ -37,2 +35,11 @@\n-import javax.swing.*;\n-import java.awt.*;\n+import java.awt.Robot;\n+import javax.swing.JDesktopPane;\n+import javax.swing.JFrame;\n+import javax.swing.JInternalFrame;\n+import javax.swing.JMenuItem;\n+import javax.swing.JPopupMenu;\n+import javax.swing.SwingUtilities;\n+import javax.swing.UIManager;\n+\n+import com.sun.java.swing.plaf.windows.WindowsClassicLookAndFeel;\n+import com.sun.java.swing.plaf.windows.WindowsInternalFrameTitlePane;\n@@ -43,3 +50,3 @@\n-    private TestTitlePane testTitlePane;\n-    private boolean passed;\n-    private static ExtendedRobot robot = createRobot();\n+    private static TestTitlePane testTitlePane;\n+    private static volatile boolean passed;\n+    private static Robot robot;\n@@ -48,7 +55,2 @@\n-        try {\n-            UIManager.setLookAndFeel(\n-                    new com.sun.java.swing.plaf.windows.WindowsClassicLookAndFeel());\n-        } catch(UnsupportedLookAndFeelException e) {\n-            System.out.println(\"The test is for Windows LaF only\");\n-            return;\n-        }\n+        UIManager.setLookAndFeel(\n+                new WindowsClassicLookAndFeel());\n@@ -56,0 +58,1 @@\n+        robot = new Robot();\n@@ -58,5 +61,1 @@\n-            SwingUtilities.invokeAndWait(new Runnable() {\n-                public void run() {\n-                    bug6725409.setupUIStep1();\n-                }\n-            });\n+            SwingUtilities.invokeAndWait(bug6725409::setupUIStep1);\n@@ -64,5 +63,1 @@\n-            SwingUtilities.invokeAndWait(new Runnable() {\n-                public void run() {\n-                    bug6725409.setupUIStep2();\n-                }\n-            });\n+            SwingUtilities.invokeAndWait(bug6725409::setupUIStep2);\n@@ -70,5 +65,1 @@\n-            SwingUtilities.invokeAndWait(new Runnable() {\n-                public void run() {\n-                    bug6725409.test();\n-                }\n-            });\n+            SwingUtilities.invokeAndWait(bug6725409::test);\n@@ -78,3 +69,5 @@\n-            if (bug6725409.frame != null) {\n-                bug6725409.frame.dispose();\n-            }\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (bug6725409.frame != null) {\n+                    bug6725409.frame.dispose();\n+                }\n+            });\n@@ -85,1 +78,1 @@\n-        frame = new JFrame();\n+        frame = new JFrame(\"bug6725409\");\n@@ -150,9 +143,0 @@\n-    private static ExtendedRobot createRobot() {\n-        try {\n-             ExtendedRobot robot = new ExtendedRobot();\n-             return robot;\n-         }catch(Exception ex) {\n-             ex.printStackTrace();\n-             throw new Error(\"Unexpected Failure\");\n-         }\n-    }\n@@ -161,2 +145,1 @@\n-    private class TestTitlePane extends\n-            com.sun.java.swing.plaf.windows.WindowsInternalFrameTitlePane {\n+    private class TestTitlePane extends WindowsInternalFrameTitlePane {\n","filename":"test\/jdk\/javax\/swing\/JInternalFrame\/6725409\/bug6725409.java","additions":30,"deletions":47,"binary":false,"changes":77,"status":"modified"}]}