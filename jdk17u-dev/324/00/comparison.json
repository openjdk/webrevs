{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -171,3 +171,3 @@\n-        int[] c = new int[1];\n-        double scale = fDevice.getScaleFactor();\n-        getScreenPixels(new Rectangle(x, y, (int) scale, (int) scale), c);\n+        int scale = fDevice.getScaleFactor();\n+        int[] c = new int[scale * scale];\n+        getScreenPixels(new Rectangle(x, y, scale, scale), c);\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CRobot.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -324,0 +324,5 @@\n+    jsize size = (*env)->GetArrayLength(env, pixels);\n+    if (size < (long) picWidth * picHeight || picWidth < 0 || picHeight < 0) {\n+        JNU_ThrowInternalError(env, \"Invalid arguments to get screen pixels\");\n+        return;\n+    }\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CRobot.m","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -45,0 +45,2 @@\n+ * @run main\/othervm CheckCommonColors\n+ * @run main\/othervm -Xcheck:jni CheckCommonColors\n","filename":"test\/jdk\/java\/awt\/Robot\/CheckCommonColors\/CheckCommonColors.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}