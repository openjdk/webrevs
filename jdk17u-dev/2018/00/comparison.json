{"files":[{"patch":"@@ -623,7 +623,0 @@\n-        final Border border = c.getBorder();\n-        if (border != null) {\n-            final Insets insets = border.getBorderInsets(c);\n-            size.height += insets.top + insets.bottom;\n-            size.width += insets.left + insets.right;\n-        }\n-\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaComboBoxUI.java","additions":0,"deletions":7,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -0,0 +1,100 @@\n+\/*\n+ * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @key headful\n+ * @bug 4517214\n+ * @summary Tests that comboBox is not doubleheight if editable and has TitledBorder\n+*\/\n+\n+import javax.swing.BorderFactory;\n+import javax.swing.JComboBox;\n+import javax.swing.JFrame;\n+import javax.swing.JPanel;\n+import javax.swing.SwingUtilities;\n+import javax.swing.WindowConstants;\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Robot;\n+\n+public class TestComboBoxHeight {\n+    private static String[] data = { \"Ten\", \"Twenty\", \"Forty-three\" };\n+    private static JFrame jframe;\n+    private static int heightCombo1, heightCombo2;\n+    private static JComboBox combo1, combo2;\n+\n+    public static void main(String[] args) throws Exception {\n+        try {\n+            Robot robot = new Robot();\n+            robot.setAutoDelay(100);\n+            SwingUtilities.invokeAndWait(() -> {\n+                jframe = new JFrame();\n+\n+                GridBagLayout gridBag = new GridBagLayout();\n+                GridBagConstraints c = new GridBagConstraints();\n+                JPanel p = new JPanel(gridBag);\n+                c.fill = GridBagConstraints.NONE;\n+\n+                \/\/ fine-looking combo\n+                combo1 = new JComboBox(data);\n+                combo1.setEditable(true);\n+                gridBag.setConstraints(combo1, c);\n+                p.add(combo1);\n+\n+                \/\/ combo has border\n+                combo2 = new JComboBox(data);\n+                combo2.setEditable(true);\n+                combo2.setBorder(BorderFactory.\n+                        createTitledBorder(\"Combo Border\"));\n+                gridBag.setConstraints(combo2, c);\n+                p.add(combo2);\n+\n+                jframe.setContentPane(p);\n+                jframe.setLocationRelativeTo(null);\n+                jframe.setSize(400, 200);\n+                jframe.setDefaultCloseOperation(\n+                        WindowConstants.DISPOSE_ON_CLOSE);\n+                jframe.setVisible(true);\n+            });\n+\n+            robot.delay(1000);\n+            robot.waitForIdle();\n+            SwingUtilities.invokeAndWait(() -> {\n+                heightCombo1 = combo1.getHeight();\n+                heightCombo2 = combo2.getHeight();\n+            });\n+\n+            if (heightCombo2 >= heightCombo1 * 2) {\n+                throw new RuntimeException(\"combo boxes with border \" +\n+                 \" should not have double height compared to normal combobox\");\n+            }\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (jframe != null) {\n+                    jframe.dispose();\n+                }\n+            });\n+        }\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JComboBox\/TestComboBoxHeight.java","additions":100,"deletions":0,"binary":false,"changes":100,"status":"added"}]}