{"files":[{"patch":"@@ -47,1 +47,1 @@\n-    public static void wasteCodeCache()  throws Exception {\n+    public static void wasteCodeCache() throws Throwable {\n@@ -50,3 +50,11 @@\n-        for (int i = 0; i < 500; i++) {\n-            ClassLoader cl = new MyClassLoader(url);\n-            refClass(cl.loadClass(\"SomeClass\"));\n+        try {\n+            for (int i = 0; i < 500; i++) {\n+                ClassLoader cl = new MyClassLoader(url);\n+                refClass(cl.loadClass(\"SomeClass\"));\n+            }\n+        } catch (Throwable t) {\n+            \/\/ Expose the root cause of the Throwable instance.\n+            while (t.getCause() != null) {\n+                t = t.getCause();\n+            }\n+            throw t;\n@@ -61,1 +69,1 @@\n-        if (oa.getExitValue() != 0 && !oa.getStderr().contains(\"Out of space in CodeCache for adapters\")) {\n+        if (oa.getExitValue() != 0 && !oa.getOutput().contains(\"Out of space in CodeCache for adapters\")) {\n","filename":"test\/hotspot\/jtreg\/compiler\/codecache\/CodeCacheFullCountTest.java","additions":13,"deletions":5,"binary":false,"changes":18,"status":"modified"}]}