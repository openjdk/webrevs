{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -45,1 +45,1 @@\n-public class ProxyServer extends Thread implements Closeable {\n+public final class ProxyServer implements Closeable {\n@@ -102,3 +102,1 @@\n-    public ProxyServer(Integer port,\n-                       Boolean debug,\n-                       Credentials credentials)\n+    private ProxyServer(Integer port, Boolean debug, Credentials credentials)\n@@ -113,8 +111,0 @@\n-        setName(\"ProxyListener\");\n-        setDaemon(true);\n-        connections = new CopyOnWriteArrayList<Connection>();\n-        start();\n-    }\n-\n-    public ProxyServer(String s) {\n-        credentials = null;\n@@ -122,0 +112,4 @@\n+        Thread d = new Thread(() -> run());\n+        d.setName(\"ProxyListener\");\n+        d.setDaemon(true);\n+        d.start();\n@@ -153,1 +147,1 @@\n-    public void run() {\n+    private void run() {\n@@ -675,4 +669,5 @@\n-        ProxyServer ps = new ProxyServer(port, debug);\n-        System.out.println(\"Proxy server listening on port \" + ps.getPort());\n-        while (true) {\n-            Thread.sleep(5000);\n+        try (ProxyServer ps = new ProxyServer(port, debug)) {\n+            System.out.println(\"Proxy server listening on port \" + ps.getPort());\n+            while (true) {\n+                Thread.sleep(5000);\n+            }\n","filename":"test\/jdk\/java\/net\/httpclient\/ProxyServer.java","additions":13,"deletions":18,"binary":false,"changes":31,"status":"modified"}]}