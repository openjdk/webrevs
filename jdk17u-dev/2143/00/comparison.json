{"files":[{"patch":"@@ -61,0 +61,2 @@\n+import jtreg.SkippedException;\n+import org.testng.SkipException;\n@@ -116,1 +118,5 @@\n-        main(new Basic(), args);\n+        try {\n+            main(new Basic(), args);\n+        } catch (SkippedException se) {\n+            throw new SkipException(\"One or more tests are skipped\");\n+        }\n","filename":"test\/jdk\/sun\/security\/pkcs11\/KeyStore\/Basic.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,2 @@\n+import jtreg.SkippedException;\n+import org.testng.SkipException;\n@@ -122,1 +124,5 @@\n-        main(new ClientAuth());\n+        try {\n+            main(new ClientAuth());\n+        } catch (SkippedException se) {\n+            throw new SkipException(\"One or more tests are skipped\");\n+        }\n","filename":"test\/jdk\/sun\/security\/pkcs11\/KeyStore\/ClientAuth.java","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,2 @@\n+import jtreg.SkippedException;\n+import org.testng.SkipException;\n@@ -65,1 +67,5 @@\n-        main(new SecretKeysBasic());\n+        try {\n+            main(new SecretKeysBasic());\n+        } catch (SkippedException se) {\n+            throw new SkipException(\"One or more tests are skipped\");\n+        }\n","filename":"test\/jdk\/sun\/security\/pkcs11\/KeyStore\/SecretKeysBasic.java","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -61,0 +61,1 @@\n+import jtreg.SkippedException;\n@@ -64,2 +65,0 @@\n-    private boolean enableSM = false;\n-\n@@ -67,1 +66,0 @@\n-\n@@ -69,1 +67,0 @@\n-\n@@ -72,1 +69,0 @@\n-\n@@ -74,1 +70,0 @@\n-\n@@ -76,4 +71,0 @@\n-\n-    private static final String DEFAULT_POLICY =\n-            BASE + SEP + \"..\" + SEP + \"policy\";\n-\n@@ -82,0 +73,19 @@\n+    private static final String DEFAULT_POLICY = BASE + SEP + \"..\" + SEP + \"policy\";\n+    private static final String PKCS11_REL_PATH = \"sun\/security\/pkcs11\";\n+    private static final char[] HEX_DIGITS = \"0123456789abcdef\".toCharArray();\n+\n+    static double nss_version = -1;\n+    static ECCState nss_ecc_status = ECCState.Basic;\n+\n+    \/\/ The NSS library we need to search for in getNSSLibDir()\n+    \/\/ Default is \"libsoftokn3.so\", listed as \"softokn3\"\n+    \/\/ The other is \"libnss3.so\", listed as \"nss3\".\n+    static String nss_library = \"softokn3\";\n+\n+    \/\/ NSS versions of each library.  It is simpler to keep nss_version\n+    \/\/ for quick checking for generic testing than many if-else statements.\n+    static double softoken3_version = -1;\n+    static double nss3_version = -1;\n+    static Provider pkcs11 = newPKCS11Provider();\n+    private static String PKCS11_BASE;\n+    private static Map<String, String[]> osMap;\n@@ -96,9 +106,7 @@\n-    \/\/ NSS version info\n-    public static enum ECCState { None, Basic, Extended };\n-    static double nss_version = -1;\n-    static ECCState nss_ecc_status = ECCState.Basic;\n-\n-    \/\/ The NSS library we need to search for in getNSSLibDir()\n-    \/\/ Default is \"libsoftokn3.so\", listed as \"softokn3\"\n-    \/\/ The other is \"libnss3.so\", listed as \"nss3\".\n-    static String nss_library = \"softokn3\";\n+    static {\n+        try {\n+            PKCS11_BASE = getBase();\n+        } catch (Exception e) {\n+            \/\/ ignore\n+        }\n+    }\n@@ -106,5 +114,1 @@\n-    \/\/ NSS versions of each library.  It is simplier to keep nss_version\n-    \/\/ for quick checking for generic testing than many if-else statements.\n-    static double softoken3_version = -1;\n-    static double nss3_version = -1;\n-    static Provider pkcs11 = newPKCS11Provider();\n+    private boolean enableSM = false;\n@@ -113,1 +117,1 @@\n-        ServiceLoader sl = ServiceLoader.load(java.security.Provider.class);\n+        ServiceLoader<Provider> sl = ServiceLoader.load(java.security.Provider.class);\n@@ -131,2 +135,2 @@\n-                Class clazz = Class.forName(\"sun.security.pkcs11.SunPKCS11\");\n-                p = (Provider) clazz.newInstance();\n+                Class<?> clazz = Class.forName(\"sun.security.pkcs11.SunPKCS11\");\n+                p = (Provider) clazz.getDeclaredConstructor().newInstance();\n@@ -153,32 +157,0 @@\n-    public abstract void main(Provider p) throws Exception;\n-\n-    protected boolean skipTest(Provider p) {\n-        return false;\n-    }\n-\n-    private void premain(Provider p) throws Exception {\n-        if (skipTest(p)) {\n-            return;\n-        }\n-\n-        \/\/ set a security manager and policy before a test case runs,\n-        \/\/ and disable them after the test case finished\n-        try {\n-            if (enableSM) {\n-                System.setSecurityManager(new SecurityManager());\n-            }\n-            long start = System.currentTimeMillis();\n-            System.out.printf(\n-                    \"Running test with provider %s (security manager %s) ...%n\",\n-                        p.getName(), enableSM ? \"enabled\" : \"disabled\");\n-            main(p);\n-            long stop = System.currentTimeMillis();\n-            System.out.println(\"Completed test with provider \" + p.getName() +\n-                \" (\" + (stop - start) + \" ms).\");\n-        } finally {\n-            if (enableSM) {\n-                System.setSecurityManager(null);\n-            }\n-        }\n-    }\n-\n@@ -209,3 +181,33 @@\n-            testDefault(test);\n-            testNSS(test);\n-            testDeimos(test);\n+            boolean skippedDefault = false;\n+            boolean skippedNSS = false;\n+            boolean skippedDeimos = false;\n+\n+            \/\/ Use separate try-catch for each test to allow all test run\n+            try {\n+                testDefault(test);\n+            } catch (SkippedException se) {\n+                System.out.println(\"testDefault: Skipped\");\n+                skippedDefault = true;\n+                se.printStackTrace(System.out);\n+            }\n+\n+            try {\n+                testNSS(test);\n+            } catch (SkippedException se) {\n+                System.out.println(\"testNSS: Skipped\");\n+                skippedNSS = true;\n+                se.printStackTrace(System.out);\n+            }\n+\n+            try {\n+                testDeimos(test);\n+            } catch (SkippedException se) {\n+                System.out.println(\"testDeimos: Skipped\");\n+                skippedDeimos = true;\n+                se.printStackTrace(System.out);\n+            }\n+\n+            if (skippedDefault && skippedNSS && skippedDeimos) {\n+                throw new SkippedException(\"All tests are skipped, check logs\");\n+            }\n+\n@@ -221,1 +223,1 @@\n-                for (int i = 0; i<oldProviders.length; i++) {\n+                for (int i = 0; i < oldProviders.length; i++) {\n@@ -229,1 +231,1 @@\n-                for (Provider p: newProviders) {\n+                for (Provider p : newProviders) {\n@@ -232,1 +234,1 @@\n-                for (Provider p: oldProviders) {\n+                for (Provider p : oldProviders) {\n@@ -240,2 +242,3 @@\n-        if (new File(\"\/opt\/SUNWconn\/lib\/libpkcs11.so\").isFile() == false ||\n-            \"true\".equals(System.getProperty(\"NO_DEIMOS\"))) {\n+        System.out.println(\"===> testDeimos: Starting test run\");\n+        if (\"true\".equals(System.getProperty(\"NO_DEIMOS\"))) {\n+            System.out.println(\"Skip Deimos software as test configured with NO_DEIMOS\");\n@@ -244,0 +247,6 @@\n+\n+        if (!new File(\"\/opt\/SUNWconn\/lib\/libpkcs11.so\").isFile()) {\n+            throw new SkippedException(\"testDeimos: \\\"\/opt\/SUNWconn\/lib\/libpkcs11.so\\\" \" +\n+                    \"file required for Deimos not found\");\n+        }\n+\n@@ -248,0 +257,1 @@\n+        System.out.println(\"testDeimos: Completed\");\n@@ -250,0 +260,1 @@\n+    \/\/ Run test for default configured PKCS11 providers (if any)\n@@ -251,1 +262,2 @@\n-        \/\/ run test for default configured PKCS11 providers (if any)\n+        System.out.println(\"===> testDefault: Starting test run\");\n+        boolean foundPKCS11 = false;\n@@ -254,0 +266,1 @@\n+            System.out.println(\"Skip default provider as test configured with NO_DEFAULT\");\n@@ -258,2 +271,1 @@\n-        for (int i = 0; i < providers.length; i++) {\n-            Provider p = providers[i];\n+        for (Provider p : providers) {\n@@ -261,0 +273,1 @@\n+                foundPKCS11 = true;\n@@ -264,1 +277,0 @@\n-    }\n@@ -266,6 +278,3 @@\n-    private static String PKCS11_BASE;\n-    static {\n-        try {\n-            PKCS11_BASE = getBase();\n-        } catch (Exception e) {\n-            \/\/ ignore\n+        if (!foundPKCS11) {\n+            throw new SkippedException(\"testDefault: Skip default test as SunPKCS11 \" +\n+                    \"provider is not configured\");\n@@ -273,1 +282,0 @@\n-    }\n@@ -275,1 +283,2 @@\n-    private final static String PKCS11_REL_PATH = \"sun\/security\/pkcs11\";\n+        System.out.println(\"testDefault: Completed\");\n+    }\n@@ -289,1 +298,1 @@\n-                throw new Exception(\"Test root directory not found\");\n+                throw new RuntimeException(\"Test root directory not found\");\n@@ -321,1 +330,1 @@\n-                    + \", please initialize NSS librarys location firstly, skipping test\");\n+                    + \", please initialize NSS library location, skipping test\");\n@@ -338,1 +347,1 @@\n-            System.out.println(\"Warning: can't find NSS librarys on this machine, skipping test\");\n+            System.out.println(\"Warning: can't find NSS library on this machine, skipping test\");\n@@ -351,1 +360,1 @@\n-        String osid = osName + \"-\" + props.getProperty(\"os.arch\") + \"-\"\n+        return osName + \"-\" + props.getProperty(\"os.arch\") + \"-\"\n@@ -353,1 +362,0 @@\n-        return osid;\n@@ -366,1 +374,1 @@\n-    protected static void safeReload(String lib) throws Exception {\n+    protected static void safeReload(String lib) {\n@@ -376,1 +384,1 @@\n-    static boolean loadNSPR(String libdir) throws Exception {\n+    static boolean loadNSPR(String libdir) {\n@@ -378,3 +386,1 @@\n-        String dir = libdir.endsWith(File.separator)\n-                     ? libdir\n-                     : libdir + File.separator;\n+        String dir = libdir.endsWith(File.separator) ? libdir : libdir + File.separator;\n@@ -391,1 +397,1 @@\n-        return p.getName().toUpperCase().equals(\"SUNPKCS11-NSS\");\n+        return p.getName().equalsIgnoreCase(\"SUNPKCS11-NSS\");\n@@ -487,1 +493,1 @@\n-        String version = String.valueOf(s.charAt(afterheader));\n+        StringBuilder version = new StringBuilder(String.valueOf(s.charAt(afterheader)));\n@@ -489,3 +495,3 @@\n-                c == '.' || (c >= '0' && c <= '9');\n-                c = s.charAt(++afterheader)) {\n-            version += c;\n+             c == '.' || (c >= '0' && c <= '9');\n+             c = s.charAt(++afterheader)) {\n+            version.append(c);\n@@ -495,1 +501,1 @@\n-        String[] dot = version.split(\"\\\\.\");\n+        String[] dot = version.toString().split(\"\\\\.\");\n@@ -497,1 +503,1 @@\n-            version = dot[0]+\".\"+dot[1];\n+            version = new StringBuilder(dot[0] + \".\" + dot[1]);\n@@ -499,1 +505,1 @@\n-                version += dot[j];\n+                version.append(dot[j]);\n@@ -505,1 +511,1 @@\n-            nss_version = Double.parseDouble(version);\n+            nss_version = Double.parseDouble(version.toString());\n@@ -515,1 +521,1 @@\n-        System.out.print(\"lib\" + library + \" version = \"+version+\".  \");\n+        System.out.print(\"library: \" + library + \", version: \" + version + \".  \");\n@@ -544,0 +550,1 @@\n+        System.out.println(\"===> testNSS: Starting test run\");\n@@ -546,2 +553,1 @@\n-            \/\/ issue loading libraries\n-            return;\n+            throw new SkippedException(\"testNSS: Problem loading NSS libraries\");\n@@ -549,0 +555,1 @@\n+\n@@ -551,0 +558,1 @@\n+        System.out.println(\"testNSS: Completed\");\n@@ -559,1 +567,1 @@\n-        if (loadNSPR(libdir) == false) {\n+        if (!loadNSPR(libdir)) {\n@@ -597,1 +605,1 @@\n-            \"\\\"AlgorithmParameters.EC SupportedCurves property\\\" not found\");\n+                    \"\\\"AlgorithmParameters.EC SupportedCurves property\\\" not found\");\n@@ -602,1 +610,1 @@\n-        for (;;) {\n+        for (; ; ) {\n@@ -619,1 +627,1 @@\n-                end = index -1;\n+                end = index - 1;\n@@ -624,1 +632,1 @@\n-                .ifPresent(spec -> results.add(spec));\n+                    .ifPresent(spec -> results.add(spec));\n@@ -635,1 +643,1 @@\n-            Provider p) throws Exception {\n+                                                                 Provider p) throws Exception {\n@@ -637,1 +645,1 @@\n-        System.out.print(\"\\t \"+ curve + \": \");\n+        System.out.print(\"\\t \" + curve + \": \");\n@@ -659,1 +667,1 @@\n-            AlgorithmParameters.getInstance(\"EC\", p);\n+                AlgorithmParameters.getInstance(\"EC\", p);\n@@ -666,13 +674,0 @@\n-    \/\/ Check support for a curve with a provided Vector of EC support\n-    boolean checkSupport(List<ECParameterSpec> supportedEC,\n-            ECParameterSpec curve) {\n-        for (ECParameterSpec ec: supportedEC) {\n-            if (ec.equals(curve)) {\n-                return true;\n-            }\n-        }\n-        return false;\n-    }\n-\n-    private static Map<String,String[]> osMap;\n-\n@@ -686,1 +681,1 @@\n-        osMap.put(\"Linux-i386-32\", new String[] {\n+        osMap.put(\"Linux-i386-32\", new String[]{\n@@ -689,2 +684,2 @@\n-                \"\/usr\/lib\/\" });\n-        osMap.put(\"Linux-amd64-64\", new String[] {\n+                \"\/usr\/lib\/\"});\n+        osMap.put(\"Linux-amd64-64\", new String[]{\n@@ -693,8 +688,8 @@\n-                \"\/usr\/lib64\/\" });\n-        osMap.put(\"Linux-ppc64-64\", new String[] { \"\/usr\/lib64\/\" });\n-        osMap.put(\"Linux-ppc64le-64\", new String[] { \"\/usr\/lib64\/\" });\n-        osMap.put(\"Linux-s390x-64\", new String[] { \"\/usr\/lib64\/\" });\n-        osMap.put(\"Windows-x86-32\", new String[] {});\n-        osMap.put(\"Windows-amd64-64\", new String[] {});\n-        osMap.put(\"MacOSX-x86_64-64\", new String[] {});\n-        osMap.put(\"Linux-arm-32\", new String[] {\n+                \"\/usr\/lib64\/\"});\n+        osMap.put(\"Linux-ppc64-64\", new String[]{\"\/usr\/lib64\/\"});\n+        osMap.put(\"Linux-ppc64le-64\", new String[]{\"\/usr\/lib64\/\"});\n+        osMap.put(\"Linux-s390x-64\", new String[]{\"\/usr\/lib64\/\"});\n+        osMap.put(\"Windows-x86-32\", new String[]{});\n+        osMap.put(\"Windows-amd64-64\", new String[]{});\n+        osMap.put(\"MacOSX-x86_64-64\", new String[]{});\n+        osMap.put(\"Linux-arm-32\", new String[]{\n@@ -702,1 +697,1 @@\n-                \"\/usr\/lib\/arm-linux-gnueabihf\/nss\/\" });\n+                \"\/usr\/lib\/arm-linux-gnueabihf\/nss\/\"});\n@@ -743,1 +738,1 @@\n-        return nssLibPaths.toArray(new String[nssLibPaths.size()]);\n+        return nssLibPaths.toArray(new String[0]);\n@@ -746,2 +741,0 @@\n-    private final static char[] hexDigits = \"0123456789abcdef\".toCharArray();\n-\n@@ -758,2 +751,2 @@\n-            sb.append(hexDigits[k >>> 4]);\n-            sb.append(hexDigits[k & 0xf]);\n+            sb.append(HEX_DIGITS[k >>> 4]);\n+            sb.append(HEX_DIGITS[k & 0xf]);\n@@ -805,9 +798,0 @@\n-    <T> T[] concat(T[] a, T[] b) {\n-        if ((b == null) || (b.length == 0)) {\n-            return a;\n-        }\n-        T[] r = Arrays.copyOf(a, a.length + b.length);\n-        System.arraycopy(b, 0, r, a.length, b.length);\n-        return r;\n-    }\n-\n@@ -818,1 +802,1 @@\n-            Provider p) {\n+                                               Provider p) {\n@@ -833,1 +817,1 @@\n-        for (int i=0; i<data.length; i++) {\n+        for (int i = 0; i < data.length; i++) {\n@@ -841,2 +825,2 @@\n-        case \"Windows-x86-32\":\n-            return fetchNssLib(WINDOWS_X86.class);\n+            case \"Windows-x86-32\":\n+                return fetchNssLib(WINDOWS_X86.class);\n@@ -844,2 +828,2 @@\n-        case \"Windows-amd64-64\":\n-            return fetchNssLib(WINDOWS_X64.class);\n+            case \"Windows-amd64-64\":\n+                return fetchNssLib(WINDOWS_X64.class);\n@@ -847,2 +831,2 @@\n-        case \"MacOSX-x86_64-64\":\n-            return fetchNssLib(MACOSX_X64.class);\n+            case \"MacOSX-x86_64-64\":\n+                return fetchNssLib(MACOSX_X64.class);\n@@ -850,2 +834,2 @@\n-        case \"Linux-amd64-64\":\n-            return fetchNssLib(LINUX_X64.class);\n+            case \"Linux-amd64-64\":\n+                return fetchNssLib(LINUX_X64.class);\n@@ -853,2 +837,2 @@\n-        default:\n-            return null;\n+            default:\n+                return null;\n@@ -878,0 +862,52 @@\n+    public abstract void main(Provider p) throws Exception;\n+\n+    protected boolean skipTest(Provider p) {\n+        return false;\n+    }\n+\n+    private void premain(Provider p) throws Exception {\n+        if (skipTest(p)) {\n+            return;\n+        }\n+\n+        \/\/ set a security manager and policy before a test case runs,\n+        \/\/ and disable them after the test case finished\n+        try {\n+            if (enableSM) {\n+                System.setSecurityManager(new SecurityManager());\n+            }\n+            long start = System.currentTimeMillis();\n+            System.out.printf(\n+                    \"Running test with provider %s (security manager %s) ...%n\",\n+                    p.getName(), enableSM ? \"enabled\" : \"disabled\");\n+            main(p);\n+            long stop = System.currentTimeMillis();\n+            System.out.println(\"Completed test with provider \" + p.getName() +\n+                    \" (\" + (stop - start) + \" ms).\");\n+        } finally {\n+            if (enableSM) {\n+                System.setSecurityManager(null);\n+            }\n+        }\n+    }\n+\n+    \/\/ Check support for a curve with a provided Vector of EC support\n+    boolean checkSupport(List<ECParameterSpec> supportedEC,\n+                         ECParameterSpec curve) {\n+        for (ECParameterSpec ec : supportedEC) {\n+            if (ec.equals(curve)) {\n+                return true;\n+            }\n+        }\n+        return false;\n+    }\n+\n+    <T> T[] concat(T[] a, T[] b) {\n+        if ((b == null) || (b.length == 0)) {\n+            return a;\n+        }\n+        T[] r = Arrays.copyOf(a, a.length + b.length);\n+        System.arraycopy(b, 0, r, a.length, b.length);\n+        return r;\n+    }\n+\n@@ -903,0 +939,3 @@\n+    \/\/ NSS version info\n+    public static enum ECCState {None, Basic, Extended}\n+\n@@ -908,1 +947,2 @@\n-    private static class WINDOWS_X64 { }\n+    private static class WINDOWS_X64 {\n+    }\n@@ -915,1 +955,2 @@\n-    private static class WINDOWS_X86 { }\n+    private static class WINDOWS_X86 {\n+    }\n@@ -922,1 +963,2 @@\n-    private static class MACOSX_X64 { }\n+    private static class MACOSX_X64 {\n+    }\n@@ -929,1 +971,2 @@\n-    private static class LINUX_X64 { }\n+    private static class LINUX_X64 {\n+    }\n","filename":"test\/jdk\/sun\/security\/pkcs11\/PKCS11Test.java","additions":207,"deletions":164,"binary":false,"changes":371,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,2 @@\n+import jtreg.SkippedException;\n+import org.testng.SkipException;\n@@ -47,1 +49,5 @@\n-        main(new ConfigQuotedString());\n+        try {\n+            main(new ConfigQuotedString());\n+        } catch (SkippedException se) {\n+            throw new SkipException(\"One or more tests are skipped\");\n+        }\n","filename":"test\/jdk\/sun\/security\/pkcs11\/Provider\/ConfigQuotedString.java","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,2 @@\n+import jtreg.SkippedException;\n+import org.testng.SkipException;\n@@ -58,1 +60,5 @@\n-        main(new Login(), args);\n+        try {\n+            main(new Login(), args);\n+        } catch (SkippedException se) {\n+            throw new SkipException(\"One or more tests are skipped\");\n+        }\n","filename":"test\/jdk\/sun\/security\/pkcs11\/Provider\/Login.java","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2021, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -114,0 +114,1 @@\n+        ${TESTSRC}${FS}..${FS}..${FS}..${FS}..${FS}..${FS}lib${FS}jtreg${FS}*.java \\\n","filename":"test\/jdk\/sun\/security\/pkcs11\/Provider\/MultipleLogins.sh","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,2 @@\n+import jtreg.SkippedException;\n+\n@@ -46,3 +48,0 @@\n-        if (LIBPATH == null) {\n-            return false;\n-        }\n@@ -50,2 +49,2 @@\n-        if (loadNSPR(LIBPATH) == false) {\n-            return false;\n+        if ((LIBPATH == null) || (!loadNSPR(LIBPATH))) {\n+            throw new SkippedException(\"Failed to load NSS libraries\");\n@@ -53,0 +52,1 @@\n+\n","filename":"test\/jdk\/sun\/security\/pkcs11\/SecmodTest.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n","filename":"test\/jdk\/sun\/security\/pkcs11\/SecureRandom\/Basic.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}