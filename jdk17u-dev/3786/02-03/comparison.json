{"files":[{"patch":"@@ -60,0 +60,2 @@\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ExecutorService;\n@@ -126,2 +128,2 @@\n-        HttpClient client = HttpClient.newBuilder().sslContext(sslContext).build();\n-        {\n+        HttpClient client = HttpClient.newBuilder().executor(Executors.newCachedThreadPool()).sslContext(sslContext).build();\n+        try {\n@@ -157,2 +159,2 @@\n-                        \/\/ HttpClient does not implement shutdownNow in 17.\n-                        \/\/client.shutdownNow();\n+                        ExecutorService exec = (ExecutorService)client.executor().get();\n+                        exec.shutdownNow();\n@@ -186,2 +188,2 @@\n-                        \/\/ HttpClient does not implement shutdownNow in 17.\n-                        \/\/client.shutdownNow();\n+                        ExecutorService exec = (ExecutorService)client.executor().get();\n+                        exec.shutdownNow();\n@@ -200,2 +202,2 @@\n-                            \/\/ HttpClient does not implement shutdownNow in 17.\n-                            \/\/client.shutdownNow();\n+                            ExecutorService exec = (ExecutorService)client.executor().get();\n+                            exec.shutdownNow();\n@@ -234,0 +236,3 @@\n+        } finally {\n+            ExecutorService exec = (ExecutorService)client.executor().get();\n+            exec.shutdownNow();\n","filename":"test\/jdk\/java\/net\/httpclient\/http2\/ConnectionFlowControlTest.java","additions":13,"deletions":8,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -52,0 +52,2 @@\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ExecutorService;\n@@ -111,2 +113,5 @@\n-                if (!sameClient || client == null)\n-                    client = HttpClient.newBuilder().sslContext(sslContext).build();\n+                if (!sameClient || client == null) {\n+                    client = HttpClient.newBuilder()\n+                            .executor(Executors.newCachedThreadPool())\n+                            .sslContext(sslContext).build();\n+                }\n@@ -146,2 +151,2 @@\n-                        \/\/ HttpClient does not implement close in 17.\n-                        \/\/client.close();\n+                        ExecutorService exec = (ExecutorService)client.executor().get();\n+                        exec.shutdown();\n@@ -153,2 +158,4 @@\n-            \/\/ HttpClient does not implement close in 17.\n-            \/\/if (sameClient && client != null) client.close();\n+            if (sameClient && client != null) {\n+                ExecutorService exec = (ExecutorService)client.executor().get();\n+                exec.shutdown();\n+            }\n@@ -172,2 +179,5 @@\n-                if (!sameClient || client == null)\n-                    client = HttpClient.newBuilder().sslContext(sslContext).build();\n+                if (!sameClient || client == null) {\n+                    client = HttpClient.newBuilder()\n+                            .executor(Executors.newCachedThreadPool())\n+                            .sslContext(sslContext).build();\n+                }\n@@ -209,2 +219,2 @@\n-                        \/\/ HttpClient does not implement close in 17.\n-                        \/\/client.close();\n+                        ExecutorService exec = (ExecutorService)client.executor().get();\n+                        exec.shutdown();\n@@ -217,2 +227,4 @@\n-            \/\/ HttpClient does not implement close in 17.\n-            \/\/if (sameClient && client != null) client.close();\n+            if (sameClient && client != null) {\n+                ExecutorService exec = (ExecutorService)client.executor().get();\n+                exec.shutdown();\n+            }\n","filename":"test\/jdk\/java\/net\/httpclient\/http2\/StreamFlowControlTest.java","additions":24,"deletions":12,"binary":false,"changes":36,"status":"modified"}]}