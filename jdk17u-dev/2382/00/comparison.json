{"files":[{"patch":"@@ -260,1 +260,1 @@\n-      $(shell $(PRINTF) \"%s\" $(call ShellQuote, $1) > $2)\n+      $(shell $(PRINTF) \"%s\\n\" $(strip $(call ShellQuote, $1)) > $2)\n@@ -271,1 +271,1 @@\n-      $(shell $(PRINTF) \"%s\" $(call ShellQuote, $1) >> $2)\n+      $(shell $(PRINTF) \"%s\\n\" $(strip $(call ShellQuote, $1)) >> $2)\n","filename":"make\/common\/MakeIO.gmk","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -174,0 +174,56 @@\n+TEST_STRING_1 := 1234\n+TEST_STRING_2 := 1234$(NEWLINE)\n+TEST_STRING_3 := 1234$(NEWLINE)$(NEWLINE)\n+\n+# Writing a string ending in newline should not add a newline, but if it does\n+# not, a newline should be added. We check this by verifying that the size of the\n+# file is 5 characters for both test strings.\n+TEST_FILE_1 := $(OUTPUT_DIR)\/write-file-1\n+TEST_FILE_2 := $(OUTPUT_DIR)\/write-file-2\n+TEST_FILE_3 := $(OUTPUT_DIR)\/write-file-3\n+\n+$(call WriteFile, $(TEST_STRING_1), $(TEST_FILE_1))\n+$(call WriteFile, $(TEST_STRING_2), $(TEST_FILE_2))\n+$(call WriteFile, $(TEST_STRING_3), $(TEST_FILE_3))\n+\n+TEST_FILE_1_SIZE := $(strip $(shell $(WC) -c < $(TEST_FILE_1)))\n+TEST_FILE_2_SIZE := $(strip $(shell $(WC) -c < $(TEST_FILE_2)))\n+TEST_FILE_3_SIZE := $(strip $(shell $(WC) -c < $(TEST_FILE_3)))\n+\n+ifneq ($(TEST_FILE_1_SIZE), 5)\n+  $(error Expected file size 5 for WriteFile 1, got $(TEST_FILE_1_SIZE))\n+endif\n+ifneq ($(TEST_FILE_2_SIZE), 5)\n+  $(error Expected file size 5 for WriteFile 2, got $(TEST_FILE_2_SIZE))\n+endif\n+ifneq ($(TEST_FILE_3_SIZE), 5)\n+  $(error Expected file size 5 for WriteFile 3, got $(TEST_FILE_3_SIZE))\n+endif\n+\n+# Also test append (assumes WriteFile works as expected)\n+$(call WriteFile, $(TEST_STRING_1), $(TEST_FILE_1))\n+$(call AppendFile, $(TEST_STRING_1), $(TEST_FILE_1))\n+$(call AppendFile, $(TEST_STRING_1), $(TEST_FILE_1))\n+\n+$(call WriteFile, $(TEST_STRING_2), $(TEST_FILE_2))\n+$(call AppendFile, $(TEST_STRING_2), $(TEST_FILE_2))\n+$(call AppendFile, $(TEST_STRING_2), $(TEST_FILE_2))\n+\n+$(call WriteFile, $(TEST_STRING_3), $(TEST_FILE_3))\n+$(call AppendFile, $(TEST_STRING_3), $(TEST_FILE_3))\n+$(call AppendFile, $(TEST_STRING_3), $(TEST_FILE_3))\n+\n+TEST_FILE_1_SIZE := $(strip $(shell $(WC) -c < $(TEST_FILE_1)))\n+TEST_FILE_2_SIZE := $(strip $(shell $(WC) -c < $(TEST_FILE_2)))\n+TEST_FILE_3_SIZE := $(strip $(shell $(WC) -c < $(TEST_FILE_3)))\n+\n+ifneq ($(TEST_FILE_1_SIZE), 15)\n+  $(error Expected file size 15 for AppendFile 1, got $(TEST_FILE_1_SIZE))\n+endif\n+ifneq ($(TEST_FILE_2_SIZE), 15)\n+  $(error Expected file size 15 for AppendFile 2, got $(TEST_FILE_2_SIZE))\n+endif\n+ifneq ($(TEST_FILE_3_SIZE), 15)\n+  $(error Expected file size 15 for AppendFile 3, got $(TEST_FILE_3_SIZE))\n+endif\n+\n","filename":"test\/make\/TestMakeBase.gmk","additions":56,"deletions":0,"binary":false,"changes":56,"status":"modified"}]}