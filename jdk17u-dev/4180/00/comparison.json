{"files":[{"patch":"@@ -354,10 +354,0 @@\n-\n-            if (TKit.isWindows()) {\n-                \/\/ When running app launchers on Windows, clear users environment (JDK-8254920)\n-                removePath(true);\n-            }\n-        }\n-\n-        public AppOutputVerifier removePath(boolean v) {\n-            removePath = v;\n-            return this;\n@@ -445,4 +435,1 @@\n-                final int attempts = 3;\n-                final int waitBetweenAttemptsSeconds = 5;\n-                return getExecutor(args).executeAndRepeatUntilExitCode(expectedExitCode, attempts,\n-                        waitBetweenAttemptsSeconds);\n+                return HelloApp.execute(expectedExitCode, getExecutor(args));\n@@ -478,1 +465,0 @@\n-        private boolean removePath;\n@@ -491,1 +477,16 @@\n-    public static Executor configureEnvironment(Executor executor) {\n+    public static Executor.Result configureAndExecute(int expectedExitCode, Executor executor) {\n+        return execute(expectedExitCode, configureEnvironment(executor));\n+    }\n+\n+    private static Executor.Result execute(int expectedExitCode, Executor executor) {\n+        if (TKit.isLinux()) {\n+            final int attempts = 3;\n+            final int waitBetweenAttemptsSeconds = 5;\n+            return executor.executeAndRepeatUntilExitCode(expectedExitCode, attempts,\n+                    waitBetweenAttemptsSeconds);\n+        } else {\n+            return executor.execute(expectedExitCode);\n+        }\n+    }\n+\n+    private static Executor configureEnvironment(Executor executor) {\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/HelloApp.java","additions":17,"deletions":16,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-import static jdk.jpackage.test.HelloApp.configureEnvironment;\n+import static jdk.jpackage.test.HelloApp.configureAndExecute;\n@@ -65,3 +65,1 @@\n-        final int attempts = 3;\n-        final int waitBetweenAttemptsSeconds = 5;\n-        List<String> output = configureEnvironment(new Executor())\n+        List<String> output = configureAndExecute(0, new Executor()\n@@ -72,3 +70,1 @@\n-                .addArguments(\"--print-sys-prop=\" + \"java.library.path\")\n-                .executeAndRepeatUntilExitCode(0, attempts,\n-                        waitBetweenAttemptsSeconds).getOutput();\n+                .addArguments(\"--print-sys-prop=\" + \"java.library.path\")).getOutput();\n","filename":"test\/jdk\/tools\/jpackage\/share\/AppLauncherEnvTest.java","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -43,1 +43,1 @@\n-import static jdk.jpackage.test.HelloApp.configureEnvironment;\n+import static jdk.jpackage.test.HelloApp.configureAndExecute;\n@@ -66,3 +66,3 @@\n-            List<String> output = configureEnvironment(new Executor()).saveOutput().dumpOutput()\n-                    .setExecutable(cmd.appLauncherPath().toAbsolutePath())\n-                    .execute(0).getOutput();\n+            List<String> output = configureAndExecute(0, new Executor().saveOutput().dumpOutput()\n+                    .setExecutable(cmd.appLauncherPath().toAbsolutePath()))\n+                            .getOutput();\n","filename":"test\/jdk\/tools\/jpackage\/windows\/WinChildProcessTest.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}