{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -112,18 +112,2 @@\n-\n-        if (argsHandler.verbose()) {\n-            debugee = binder.bindToDebugee(debugeeName + \" -vbs\");\n-        } else {\n-            debugee = binder.bindToDebugee(debugeeName);\n-        }\n-\n-        IOPipe pipe     = new IOPipe(debugee);\n-\n-\n-        debugee.redirectStderr(out);\n-        debugee.resume();\n-\n-        String line = pipe.readln();\n-        if (!line.equals(\"ready\")) {\n-            logHandler.complain(\"# Cannot recognize debugee's signal: \" + line);\n-            return 2;\n-        };\n+        debugee = Debugee.prepareDebugee(argsHandler, logHandler,\n+                debugeeName + (argsHandler.verbose() ? \" -vbs\" : \"\"));\n@@ -168,4 +152,2 @@\n-        pipe.println(\"quit\");\n-        debugee.waitFor();\n-\n-        int status = debugee.getStatus();\n+        debugee.sendSignal(\"quit\");\n+        int status = debugee.endDebugee();\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdi\/Accessible\/isPackagePrivate\/accipp001.java","additions":5,"deletions":23,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -113,1 +113,5 @@\n-    \/** Created and return new IOPipe channel to the debugee VM. *\/\n+    \/** Create and return new IOPipe channel to the debuggee VM.\n+     * The channel should be created before debuggee starts execution,\n+     * i.e. the method assumes debuggee is started, but suspended before\n+     * its main class is loaded.\n+     *\/\n@@ -118,1 +122,1 @@\n-        pipe = new IOPipe(this);\n+        pipe = IOPipe.startDebuggerPipe(binder);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/jpda\/DebugeeProcess.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -87,1 +87,1 @@\n-    public static IOPipe startDebuggerPipe(Binder binder) {\n+    public static IOPipe startDebuggerPipe(DebugeeBinder binder) {\n@@ -98,1 +98,0 @@\n-\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/jpda\/IOPipe.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"}]}