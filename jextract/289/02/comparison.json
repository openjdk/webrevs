{"files":[{"patch":"@@ -32,0 +32,1 @@\n+import java.lang.foreign.ValueLayout;\n@@ -43,0 +44,1 @@\n+import static org.openjdk.jextract.clang.libclang.Index_h.C_LONG;\n@@ -89,1 +91,6 @@\n-                start.set(C_INT, LENGTH_OFFSET, inMemoryFiles[i].contents.length());\n+                if (C_LONG instanceof ValueLayout.OfInt) {\n+                   start.set((ValueLayout.OfInt) C_LONG, LENGTH_OFFSET, inMemoryFiles[i].contents.length());\n+                }\n+                else {\n+                   start.set((ValueLayout.OfLong) C_LONG, LENGTH_OFFSET, (long) inMemoryFiles[i].contents.length());\n+                }\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/clang\/TranslationUnit.java","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -101,1 +101,11 @@\n-    public static final ValueLayout.OfLong C_LONG = ValueLayout.JAVA_LONG;\n+    public static final ValueLayout C_LONG = detectCLongLayout();\n+\n+    private static ValueLayout detectCLongLayout() {\n+        MemoryLayout layout = Linker.nativeLinker().canonicalLayouts().get(\"long\");\n+        if (layout.byteSize() == 4) {\n+\t    return ValueLayout.JAVA_INT;\n+        } else {\n+            return ValueLayout.JAVA_LONG;\n+        }\n+    }\n+\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/clang\/libclang\/Index_h.java","additions":11,"deletions":1,"binary":false,"changes":12,"status":"modified"}]}