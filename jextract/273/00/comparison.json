{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2023, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,1 +64,1 @@\n-            \"\"\", SHOW_GENERATING_CLASS ? String.format(\" (via %2$s)\", getClass().getName()) : \"\"));\n+            \"\"\", SHOW_GENERATING_CLASS ? String.format(\" (via %1$s)\", getClass().getName()) : \"\"));\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/impl\/SourceFileBuilder.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2024, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2025, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,0 +44,2 @@\n+    public static final String PREV_SUFFIX = \"#{PREV_SUFFIX}\";\n+    private static final String SUFFIX = \"#{SUFFIX}\";\n@@ -94,1 +96,1 @@\n-            files.add(headerBuilders.get(0).toFile(s -> s.replace(\"#{SUFFIX}\", \"\")));\n+            files.add(headerBuilders.getFirst().toFile(s -> s.replace(SUFFIX, \"\")));\n@@ -98,3 +100,5 @@\n-            int suffix = headerBuilders.size() - 1;\n-            for (SourceFileBuilder header : headerBuilders) {\n-                String currentSuffix = suffix == 0 ?\n+            int totalHeaders = headerBuilders.size();\n+            for (int i = 0; i < totalHeaders; i++) {\n+                SourceFileBuilder header = headerBuilders.get(i);\n+                boolean isMainHeader = (i == totalHeaders - 1); \/\/ last header is the main header\n+                String currentSuffix = isMainHeader ?\n@@ -102,6 +106,10 @@\n-                        String.format(\"_%1$d\", suffix);\n-                String prevSuffix = String.format(\"_%1$d\", suffix + 1);\n-                files.add(header.toFile(currentSuffix,\n-                        s -> s.replace(\"#{SUFFIX}\", currentSuffix)\n-                              .replace(\"#{PREV_SUFFIX}\", prevSuffix)));\n-                suffix--;\n+                        String.format(\"_%d\", totalHeaders - i - 1);\n+                String preSuffix = String.format(\"_%d\", totalHeaders - i);\n+                String className = headerBuilders.getFirst().className();\n+                String modifier = isMainHeader ? \"public \" : \"\";\n+\n+                files.add(header.toFile(currentSuffix, s ->\n+                        s.replace(\"public class \" + className, modifier + \"class \" + className)\n+                                .replace(SUFFIX, currentSuffix)\n+                                .replace(PREV_SUFFIX, preSuffix)\n+                ));\n@@ -174,1 +182,1 @@\n-            String className = mainHeaderClassName() + \"#{SUFFIX}\";\n+            String className = mainHeaderClassName() + SUFFIX;\n@@ -176,1 +184,1 @@\n-                    mainHeaderClassName() + \"#{PREV_SUFFIX}\", mainHeaderClassName());\n+                    mainHeaderClassName() + PREV_SUFFIX, mainHeaderClassName());\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/impl\/ToplevelBuilder.java","additions":21,"deletions":13,"binary":false,"changes":34,"status":"modified"}]}