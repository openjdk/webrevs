{"files":[{"patch":"@@ -41,0 +41,1 @@\n+import oracle.code.onnx.foreign.ort_genai_c_h;\n@@ -60,4 +61,10 @@\n-        model = call(OgaCreateModel(arena.allocateFrom(modelPath), ret));\n-        tokenizer = call(OgaCreateTokenizer(model, ret));\n-        tokenizerStream = call(OgaCreateTokenizerStream(tokenizer, ret));\n-        generatorParams = call(OgaCreateGeneratorParams(model, ret));\n+        this.out = out;\n+\n+        model = call(OgaCreateModel(arena.allocateFrom(modelPath), ret))\n+                .reinterpret(arena, ort_genai_c_h::OgaDestroyModel);\n+        tokenizer = call(OgaCreateTokenizer(model, ret))\n+                .reinterpret(arena, ort_genai_c_h::OgaDestroyTokenizer);\n+        tokenizerStream = call(OgaCreateTokenizerStream(tokenizer, ret))\n+                .reinterpret(arena, ort_genai_c_h::OgaDestroyTokenizerStream);\n+        generatorParams = call(OgaCreateGeneratorParams(model, ret))\n+                .reinterpret(arena, ort_genai_c_h::OgaDestroyGeneratorParams);\n@@ -65,1 +72,2 @@\n-        generator = call(OgaCreateGenerator(model, generatorParams, ret));\n+        generator = call(OgaCreateGenerator(model, generatorParams, ret))\n+                .reinterpret(arena, ort_genai_c_h::OgaDestroyGenerator);\n@@ -67,1 +75,0 @@\n-        this.out = out;\n@@ -123,1 +130,1 @@\n-    public void close() throws Exception {\n+    public void close() {\n@@ -125,5 +132,0 @@\n-        OgaDestroyGenerator(generator);\n-        OgaDestroyGeneratorParams(generatorParams);\n-        OgaDestroyTokenizerStream(tokenizerStream);\n-        OgaDestroyTokenizer(tokenizer);\n-        OgaDestroyModel(model);\n","filename":"samples\/onnx\/OnnxGenerator.java","additions":14,"deletions":12,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -6,1 +6,1 @@\n-javac --release 24 -d . src\/**\/*.java OnnxGenerator.java\n+javac --release 24 -d . src\/oracle\/code\/onnx\/foreign\/*.java OnnxGenerator.java\n","filename":"samples\/onnx\/compile.sh","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}