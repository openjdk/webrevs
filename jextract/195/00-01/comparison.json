{"files":[{"patch":"@@ -79,3 +79,1 @@\n-             this.className = parent != null ?\n-                  parent.uniqueNestedClassName(name) :\n-                  javaSafeIdentifier(name);\n+             this.className = javaSafeIdentifier(name);\n@@ -174,1 +172,2 @@\n-                if (Utils.getAnonymousStructTypedef(parent) == scoped) {\n+                if (parent instanceof Typedef typedef && typedef.type() instanceof Declared declared &&\n+                        declared.tree().name().isEmpty()) {\n@@ -179,1 +178,1 @@\n-                    name = scoped.name().isEmpty() ?\n+                    name = oldScope.uniqueNestedClassName(scoped.name().isEmpty() ?\n@@ -181,1 +180,1 @@\n-                        scoped.name();\n+                        scoped.name());\n@@ -203,10 +202,1 @@\n-        String javaName;\n-        if (Utils.getAnonymousStructTypedef(typedef) != null) {\n-            \/\/ a typedef of a struct\/union without a name is special-cased,\n-            \/\/ so that the structs \"inherits\" the typedef name.\n-            javaName = typedef.name();\n-        } else {\n-            \/\/ We may potentially generate a class for a typedef. Make sure\n-            \/\/ class name is unique in the current nesting context.\n-            javaName = curScope.uniqueNestedClassName(typedef.name());\n-        }\n+        String javaName = curScope.uniqueNestedClassName(typedef.name());\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/impl\/NameMangler.java","additions":6,"deletions":16,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -186,8 +186,0 @@\n-    static Scoped getAnonymousStructTypedef(Declaration declaration) {\n-        return switch (declaration) {\n-            case Typedef typedef when typedef.type() instanceof Declared declared &&\n-                    isStructOrUnion(declared) && declared.tree().name().isEmpty() -> declared.tree();\n-            case null, default -> null;\n-        };\n-    }\n-\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/impl\/Utils.java","additions":0,"deletions":8,"binary":false,"changes":8,"status":"modified"}]}