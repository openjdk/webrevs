{"files":[{"patch":"@@ -253,0 +253,1 @@\n+            static final Arena LIBRARY_ARENA = Arena.ofAuto();\n@@ -396,10 +397,22 @@\n-        appendLines(STR.\"\"\"\n-            private static final \\{javaType.getSimpleName()} \\{constantName} = \\{constantValue(javaType, value)};\n-\n-            \"\"\");\n-        emitDocComment(declaration);\n-        appendLines(STR.\"\"\"\n-            public static \\{javaType.getSimpleName()} \\{constantName}() {\n-                return \\{constantName};\n-            }\n-            \"\"\");\n+        if (value instanceof String) {\n+            emitDocComment(declaration);\n+            appendLines(STR.\"\"\"\n+                public static \\{javaType.getSimpleName()} \\{constantName}() {\n+                    class Holder {\n+                        static final \\{javaType.getSimpleName()} \\{constantName}\n+                            = \\{runtimeHelperName()}.LIBRARY_ARENA.allocateFrom(\"\\{Utils.quote(Objects.toString(value))}\");\n+                    }\n+                    return Holder.\\{constantName};\n+                }\n+                \"\"\");\n+        } else {\n+            appendLines(STR.\"\"\"\n+                private static final \\{javaType.getSimpleName()} \\{constantName} = \\{constantValue(javaType, value)};\n+                \"\"\");\n+            emitDocComment(declaration);\n+            appendLines(STR.\"\"\"\n+                public static \\{javaType.getSimpleName()} \\{constantName}() {\n+                    return \\{constantName};\n+                }\n+                \"\"\");\n+        }\n@@ -410,3 +423,1 @@\n-        if (value instanceof String) {\n-            return STR.\"Arena.ofAuto().allocateFrom(\\\"\\{Utils.quote(Objects.toString(value))}\\\")\";\n-        } else if (type == MemorySegment.class) {\n+        if (type == MemorySegment.class) {\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/impl\/HeaderFileBuilder.java","additions":24,"deletions":13,"binary":false,"changes":37,"status":"modified"}]}