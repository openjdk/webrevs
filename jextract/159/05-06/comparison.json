{"files":[{"patch":"@@ -353,2 +353,6 @@\n-                    result.set(offsetOfAnonymousRecord(outermostParent, anonRecord, fc));\n-                    return false;\n+                    OptionalLong nestedResult = offsetOfAnonymousRecord(outermostParent, anonRecord, fc);\n+                    if (nestedResult.isPresent()) {\n+                        result.set(nestedResult);\n+                        return false;\n+                    }\n+                    return true;\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/impl\/TreeMaker.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -97,0 +97,15 @@\n+\n+    @Test\n+    public void testBoo() {\n+        Class<?> boo = loader.loadClass(\"Boo\");\n+        assertNotNull(boo);\n+        StructLayout layout = (StructLayout) findLayout(boo);\n+        assertEquals(layout.memberLayouts().get(0), C_CHAR.withName(\"c\"));\n+        assertEquals(layout.memberLayouts().get(1), MemoryLayout.paddingLayout(3));\n+\n+        StructLayout nestedAnon1 = (StructLayout) layout.memberLayouts().get(2);\n+        assertEquals(nestedAnon1.memberLayouts().get(0), MemoryLayout.paddingLayout(8));\n+\n+        StructLayout nestedAnon2 = (StructLayout) nestedAnon1.memberLayouts().get(1);\n+        assertEquals(nestedAnon2.memberLayouts().get(0), C_INT.withName(\"x\"));\n+    }\n","filename":"test\/testng\/org\/openjdk\/jextract\/test\/toolprovider\/nestedAnonOffset\/TestNestedAnonOffset.java","additions":15,"deletions":0,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -55,0 +55,13 @@\n+\n+struct Boo {\n+    char c;\n+    struct { \/\/ should have offset\n+        int: 32;\n+        struct { \/\/ should be skipped\n+            int: 32;\n+        };\n+        struct {\n+            int x; \/\/ named field in second\n+        };\n+    };\n+};\n","filename":"test\/testng\/org\/openjdk\/jextract\/test\/toolprovider\/nestedAnonOffset\/anonymousStructs.h","additions":13,"deletions":0,"binary":false,"changes":13,"status":"modified"}]}