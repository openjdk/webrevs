{"files":[{"patch":"@@ -136,3 +136,14 @@\n-  { assert(frame::interpreter_frame_monitor_size() == BasicObjectLock::size(), \"adjust code below\");\n-    int monitor_offset = BytesPerWord * method()->max_locals() +\n-      (2 * BytesPerWord) * (number_of_locks - 1);\n+  {\n+    assert(frame::interpreter_frame_monitor_size() == BasicObjectLock::size(), \"adjust code below\");\n+\n+    const int locals_space = BytesPerWord * method()->max_locals();\n+    int monitor_offset = locals_space + (2 * BytesPerWord) * (number_of_locks - 1);\n+    bool use_OSR_bias = false;\n+\n+    if (!Assembler::is_simm16(monitor_offset + BytesPerWord) && number_of_locks > 0) {\n+      \/\/ Offsets too large for ld instructions. Use bias.\n+      __ add_const_optimized(OSR_buf, OSR_buf, locals_space);\n+      monitor_offset -= locals_space;\n+      use_OSR_bias = true;\n+    }\n+\n@@ -164,0 +175,5 @@\n+\n+    if (use_OSR_bias) {\n+      \/\/ Restore.\n+      __ sub_const_optimized(OSR_buf, OSR_buf, locals_space);\n+    }\n","filename":"src\/hotspot\/cpu\/ppc\/c1_LIRAssembler_ppc.cpp","additions":19,"deletions":3,"binary":false,"changes":22,"status":"modified"}]}