{"files":[{"patch":"@@ -29,4 +29,9 @@\n-\n-    public static void main(String[] args) throws IOException {\n-            String calcPath = Path.of(System.getenv(\"SystemRoot\"), \"system32\", \"calc.exe\").toString();\n-            ProcessBuilder processBuilder = new ProcessBuilder(calcPath);\n+    public static void main(String[] args) throws IOException, InterruptedException {\n+        if (args.length == 1 && \"noexit\".equals(args[0])) {\n+            var lock = new Object();\n+            synchronized (lock) {\n+                lock.wait();\n+            }\n+        } else {\n+            var childPath = System.getProperty(\"jpackage.app-path\"); \/\/ get the path to the current jpackage app launcher\n+            ProcessBuilder processBuilder = new ProcessBuilder(childPath, \"noexit\"); \/\/ChildProcessAppLauncher acts as third party app\n@@ -34,2 +39,2 @@\n-            System.out.println(\"Calc id=\" + process.pid());\n-            System.exit(0);\n+            System.out.println(\"Child id=\" + process.pid());\n+        }\n","filename":"test\/jdk\/tools\/jpackage\/apps\/ChildProcessAppLauncher.java","additions":11,"deletions":6,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -56,1 +56,1 @@\n-        long calcPid = 0;\n+        long childPid = 0;\n@@ -71,2 +71,2 @@\n-            \/\/ parse calculator PID\n-            calcPid = Long.parseLong(pidStr.split(\"=\", 2)[1]);\n+            \/\/ parse child PID\n+            childPid = Long.parseLong(pidStr.split(\"=\", 2)[1]);\n@@ -78,1 +78,1 @@\n-            Optional<ProcessHandle> processHandle = ProcessHandle.of(calcPid);\n+            Optional<ProcessHandle> processHandle = ProcessHandle.of(childPid);\n@@ -81,2 +81,1 @@\n-            System.out.println(\"Is Alive \" + isAlive);\n-            TKit.assertTrue(isAlive, \"Check is calculator process is alive\");\n+            TKit.assertTrue(isAlive, \"Check is child process is alive\");\n@@ -84,2 +83,2 @@\n-            \/\/ Kill only a specific calculator instance\n-            Runtime.getRuntime().exec(\"taskkill \/F \/PID \" + calcPid);\n+            \/\/ Kill only a specific child instance\n+            Runtime.getRuntime().exec(\"taskkill \/F \/PID \" + childPid);\n@@ -88,1 +87,1 @@\n-}\n\\ No newline at end of file\n+}\n","filename":"test\/jdk\/tools\/jpackage\/windows\/WinChildProcessTest.java","additions":8,"deletions":9,"binary":false,"changes":17,"status":"modified"}]}