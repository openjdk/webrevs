{"files":[{"patch":"@@ -89,2 +89,0 @@\n-        OSSupport.init();\n-\n@@ -93,0 +91,2 @@\n+        OSSupport.init();\n+\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/JCStress.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -288,0 +288,5 @@\n+                boolean localAffinity = task.shClass.mode() == AffinityMode.LOCAL;\n+                if (localAffinity && VMSupport.enableNativeAccessAvailable()) {\n+                    command.add(VMSupport.enableNativeAccessOpt());\n+                }\n+\n@@ -291,1 +296,1 @@\n-                command.add(Boolean.toString(task.shClass.mode() == AffinityMode.LOCAL));\n+                command.add(Boolean.toString(localAffinity));\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/TestExecutor.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -74,0 +74,2 @@\n+            \/\/ TODO: This causes native access warnings on JDK 25, but it is apparently required\n+            \/\/ to figure out the JNA libraries paths.\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/os\/AffinitySupport.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -64,0 +64,3 @@\n+            if (VMSupport.enableNativeAccessAvailable()) {\n+                test.add(VMSupport.enableNativeAccessOpt());\n+            }\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/os\/OSSupport.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -60,0 +60,3 @@\n+    private static volatile boolean ENABLE_NATIVE_ACCESS_AVAILABLE;\n+    private static final String ENABLE_NATIVE_ACCESS_OPT = \"--enable-native-access=ALL-UNNAMED\";\n+\n@@ -80,0 +83,8 @@\n+    public static boolean enableNativeAccessAvailable() {\n+        return ENABLE_NATIVE_ACCESS_AVAILABLE;\n+    }\n+\n+    public static String enableNativeAccessOpt() {\n+        return ENABLE_NATIVE_ACCESS_OPT;\n+    }\n+\n@@ -122,0 +133,7 @@\n+        ENABLE_NATIVE_ACCESS_AVAILABLE = detect(\"Checking for native access warnings\",\n+                false,\n+                SimpleTestMain.class,\n+                null,\n+                ENABLE_NATIVE_ACCESS_OPT\n+        );\n+\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/vm\/VMSupport.java","additions":18,"deletions":0,"binary":false,"changes":18,"status":"modified"}]}